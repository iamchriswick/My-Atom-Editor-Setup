enifed("@glimmer/test-helpers/lib/environment", ["exports", "@glimmer/runtime", "@glimmer/test-helpers/lib/helpers", "@glimmer/util", "@glimmer/object", "@glimmer/reference", "@glimmer/object-reference"], function (exports, _glimmerRuntime, _glimmerTestHelpersLibHelpers, _glimmerUtil, _glimmerObject, _glimmerReference, _glimmerObjectReference) {
    "use strict";

    exports.inspectHooks = inspectHooks;
    exports.equalsElement = equalsElement;
    exports.equalsAttr = equalsAttr;
    exports.equals = equals;
    exports.regex = regex;
    exports.classes = classes;

    function _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

    function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }

    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

    var ArrayIterator = (function () {
        function ArrayIterator(array, keyFor) {
            _classCallCheck(this, ArrayIterator);

            this.position = 0;
            this.array = array;
            this.keyFor = keyFor;
        }

        ArrayIterator.prototype.isEmpty = function isEmpty() {
            return this.array.length === 0;
        };

        ArrayIterator.prototype.next = function next() {
            var position = this.position;
            var array = this.array;
            var keyFor = this.keyFor;

            if (position >= array.length) return null;
            var value = array[position];
            var key = keyFor(value, position);
            var memo = position;
            this.position++;
            return { key: key, value: value, memo: memo };
        };

        return ArrayIterator;
    })();

    var ObjectKeysIterator = (function () {
        function ObjectKeysIterator(keys, values, keyFor) {
            _classCallCheck(this, ObjectKeysIterator);

            this.position = 0;
            this.keys = keys;
            this.values = values;
            this.keyFor = keyFor;
        }

        ObjectKeysIterator.prototype.isEmpty = function isEmpty() {
            return this.keys.length === 0;
        };

        ObjectKeysIterator.prototype.next = function next() {
            var position = this.position;
            var keys = this.keys;
            var values = this.values;
            var keyFor = this.keyFor;

            if (position >= keys.length) return null;
            var value = values[position];
            var memo = keys[position];
            var key = keyFor(value, memo);
            this.position++;
            return { key: key, value: value, memo: memo };
        };

        return ObjectKeysIterator;
    })();

    var EmptyIterator = (function () {
        function EmptyIterator() {
            _classCallCheck(this, EmptyIterator);
        }

        EmptyIterator.prototype.isEmpty = function isEmpty() {
            return true;
        };

        EmptyIterator.prototype.next = function next() {
            throw new Error("Cannot call next() on an empty iterator");
        };

        return EmptyIterator;
    })();

    var EMPTY_ITERATOR = new EmptyIterator();

    var Iterable = (function () {
        function Iterable(ref, keyFor) {
            _classCallCheck(this, Iterable);

            this.tag = ref.tag;
            this.ref = ref;
            this.keyFor = keyFor;
        }

        Iterable.prototype.iterate = function iterate() {
            var ref = this.ref;
            var keyFor = this.keyFor;

            var iterable = ref.value();
            if (Array.isArray(iterable)) {
                return iterable.length > 0 ? new ArrayIterator(iterable, keyFor) : EMPTY_ITERATOR;
            } else if (iterable === undefined || iterable === null) {
                return EMPTY_ITERATOR;
            } else if (iterable.forEach !== undefined) {
                var _ret = (function () {
                    var array = [];
                    iterable.forEach(function (item) {
                        array.push(item);
                    });
                    return {
                        v: array.length > 0 ? new ArrayIterator(array, keyFor) : EMPTY_ITERATOR
                    };
                })();

                if (typeof _ret === "object") return _ret.v;
            } else if (typeof iterable === 'object') {
                var _keys = Object.keys(iterable);
                return _keys.length > 0 ? new ObjectKeysIterator(_keys, _keys.map(function (key) {
                    return iterable[key];
                }), keyFor) : EMPTY_ITERATOR;
            } else {
                throw new Error("Don't know how to {{#each " + iterable + "}}");
            }
        };

        Iterable.prototype.valueReferenceFor = function valueReferenceFor(item) {
            return new _glimmerObjectReference.UpdatableReference(item.value);
        };

        Iterable.prototype.updateValueReference = function updateValueReference(reference, item) {
            reference.update(item.value);
        };

        Iterable.prototype.memoReferenceFor = function memoReferenceFor(item) {
            return new _glimmerObjectReference.UpdatableReference(item.memo);
        };

        Iterable.prototype.updateMemoReference = function updateMemoReference(reference, item) {
            reference.update(item.memo);
        };

        return Iterable;
    })();

    var BasicComponent = function BasicComponent(attrs) {
        _classCallCheck(this, BasicComponent);

        this.attrs = attrs;
    };

    exports.BasicComponent = BasicComponent;

    var EmberishCurlyComponent = (function (_GlimmerObject) {
        _inherits(EmberishCurlyComponent, _GlimmerObject);

        function EmberishCurlyComponent() {
            _classCallCheck(this, EmberishCurlyComponent);

            _GlimmerObject.apply(this, arguments);
            this.dirtinessTag = new _glimmerReference.DirtyableTag();
            this.tagName = null;
            this.attributeBindings = null;
            this.parentView = null;
        }

        EmberishCurlyComponent.create = function create(args) {
            return _GlimmerObject.create.call(this, args);
        };

        EmberishCurlyComponent.prototype.recompute = function recompute() {
            this.dirtinessTag.dirty();
        };

        EmberishCurlyComponent.prototype.didInitAttrs = function didInitAttrs(options) {};

        EmberishCurlyComponent.prototype.didUpdateAttrs = function didUpdateAttrs(diff) {};

        EmberishCurlyComponent.prototype.didReceiveAttrs = function didReceiveAttrs(diff) {};

        EmberishCurlyComponent.prototype.willInsertElement = function willInsertElement() {};

        EmberishCurlyComponent.prototype.willUpdate = function willUpdate() {};

        EmberishCurlyComponent.prototype.willRender = function willRender() {};

        EmberishCurlyComponent.prototype.didInsertElement = function didInsertElement() {};

        EmberishCurlyComponent.prototype.didUpdate = function didUpdate() {};

        EmberishCurlyComponent.prototype.didRender = function didRender() {};

        return EmberishCurlyComponent;
    })(_glimmerObject.default);

    exports.EmberishCurlyComponent = EmberishCurlyComponent;

    var EmberishGlimmerComponent = (function (_GlimmerObject2) {
        _inherits(EmberishGlimmerComponent, _GlimmerObject2);

        function EmberishGlimmerComponent() {
            _classCallCheck(this, EmberishGlimmerComponent);

            _GlimmerObject2.apply(this, arguments);
            this.dirtinessTag = new _glimmerReference.DirtyableTag();
            this.parentView = null;
        }

        EmberishGlimmerComponent.create = function create(args) {
            return _GlimmerObject2.create.call(this, args);
        };

        EmberishGlimmerComponent.prototype.recompute = function recompute() {
            this.dirtinessTag.dirty();
        };

        EmberishGlimmerComponent.prototype.didInitAttrs = function didInitAttrs(options) {};

        EmberishGlimmerComponent.prototype.didUpdateAttrs = function didUpdateAttrs(diff) {};

        EmberishGlimmerComponent.prototype.didReceiveAttrs = function didReceiveAttrs(diff) {};

        EmberishGlimmerComponent.prototype.willInsertElement = function willInsertElement() {};

        EmberishGlimmerComponent.prototype.willUpdate = function willUpdate() {};

        EmberishGlimmerComponent.prototype.willRender = function willRender() {};

        EmberishGlimmerComponent.prototype.didInsertElement = function didInsertElement() {};

        EmberishGlimmerComponent.prototype.didUpdate = function didUpdate() {};

        EmberishGlimmerComponent.prototype.didRender = function didRender() {};

        return EmberishGlimmerComponent;
    })(_glimmerObject.default);

    exports.EmberishGlimmerComponent = EmberishGlimmerComponent;

    var BasicComponentManager = (function () {
        function BasicComponentManager() {
            _classCallCheck(this, BasicComponentManager);
        }

        BasicComponentManager.prototype.prepareArgs = function prepareArgs(definition, args) {
            return args;
        };

        BasicComponentManager.prototype.create = function create(environment, definition, args) {
            var klass = definition.ComponentClass || BasicComponent;
            return new klass(args.named.value());
        };

        BasicComponentManager.prototype.layoutFor = function layoutFor(definition, component, env) {
            var layout = env.compiledLayouts[definition.name];
            if (layout) {
                return layout;
            }
            return env.compiledLayouts[definition.name] = _glimmerRuntime.compileLayout(new BasicComponentLayoutCompiler(definition.layoutString), env);
        };

        BasicComponentManager.prototype.getSelf = function getSelf(component) {
            return new _glimmerObjectReference.UpdatableReference(component);
        };

        BasicComponentManager.prototype.didCreateElement = function didCreateElement(component, element) {
            component.element = element;
        };

        BasicComponentManager.prototype.didRenderLayout = function didRenderLayout(component, bounds) {
            component.bounds = bounds;
        };

        BasicComponentManager.prototype.didCreate = function didCreate() {};

        BasicComponentManager.prototype.getTag = function getTag() {
            return null;
        };

        BasicComponentManager.prototype.update = function update(component, attrs) {
            component.attrs = attrs.named.value();
        };

        BasicComponentManager.prototype.didUpdateLayout = function didUpdateLayout() {};

        BasicComponentManager.prototype.didUpdate = function didUpdate() {};

        BasicComponentManager.prototype.getDestructor = function getDestructor() {
            return null;
        };

        return BasicComponentManager;
    })();

    var BASIC_COMPONENT_MANAGER = new BasicComponentManager();

    var StaticTaglessComponentManager = (function (_BasicComponentManager) {
        _inherits(StaticTaglessComponentManager, _BasicComponentManager);

        function StaticTaglessComponentManager() {
            _classCallCheck(this, StaticTaglessComponentManager);

            _BasicComponentManager.apply(this, arguments);
        }

        StaticTaglessComponentManager.prototype.layoutFor = function layoutFor(definition, component, env) {
            var layout = env.compiledLayouts[definition.name];
            if (layout) {
                return layout;
            }
            return env.compiledLayouts[definition.name] = _glimmerRuntime.compileLayout(new StaticTaglessComponentLayoutCompiler(definition.layoutString), env);
        };

        return StaticTaglessComponentManager;
    })(BasicComponentManager);

    var STATIC_TAGLESS_COMPONENT_MANAGER = new StaticTaglessComponentManager();
    var BaseEmberishGlimmerComponent = EmberishGlimmerComponent.extend();

    var EmberishGlimmerComponentManager = (function () {
        function EmberishGlimmerComponentManager() {
            _classCallCheck(this, EmberishGlimmerComponentManager);
        }

        EmberishGlimmerComponentManager.prototype.prepareArgs = function prepareArgs(definition, args) {
            return args;
        };

        EmberishGlimmerComponentManager.prototype.create = function create(environment, definition, args, dynamicScope, callerSelf, hasDefaultBlock) {
            var klass = definition.ComponentClass || BaseEmberishGlimmerComponent;
            var attrs = args.named.value();
            var component = klass.create({ attrs: attrs });
            component.didInitAttrs({ attrs: attrs });
            component.didReceiveAttrs({ oldAttrs: null, newAttrs: attrs });
            component.willInsertElement();
            component.willRender();
            return component;
        };

        EmberishGlimmerComponentManager.prototype.layoutFor = function layoutFor(definition, component, env) {
            if (env.compiledLayouts[definition.name]) {
                return env.compiledLayouts[definition.name];
            }
            return env.compiledLayouts[definition.name] = _glimmerRuntime.compileLayout(new EmberishGlimmerComponentLayoutCompiler(definition.layoutString), env);
        };

        EmberishGlimmerComponentManager.prototype.getSelf = function getSelf(component) {
            return new _glimmerObjectReference.UpdatableReference(component);
        };

        EmberishGlimmerComponentManager.prototype.didCreateElement = function didCreateElement(component, element) {
            component.element = element;
        };

        EmberishGlimmerComponentManager.prototype.didRenderLayout = function didRenderLayout(component, bounds) {
            component.bounds = bounds;
        };

        EmberishGlimmerComponentManager.prototype.didCreate = function didCreate(component) {
            component.didInsertElement();
            component.didRender();
        };

        EmberishGlimmerComponentManager.prototype.getTag = function getTag(component) {
            return component.dirtinessTag;
        };

        EmberishGlimmerComponentManager.prototype.update = function update(component, args) {
            var oldAttrs = component.attrs;
            var newAttrs = args.named.value();
            component.set('attrs', newAttrs);
            component.didUpdateAttrs({ oldAttrs: oldAttrs, newAttrs: newAttrs });
            component.didReceiveAttrs({ oldAttrs: oldAttrs, newAttrs: newAttrs });
            component.willUpdate();
            component.willRender();
        };

        EmberishGlimmerComponentManager.prototype.didUpdateLayout = function didUpdateLayout() {};

        EmberishGlimmerComponentManager.prototype.didUpdate = function didUpdate(component) {
            component.didUpdate();
            component.didRender();
        };

        EmberishGlimmerComponentManager.prototype.getDestructor = function getDestructor(component) {
            return {
                destroy: function () {
                    component.destroy();
                }
            };
        };

        return EmberishGlimmerComponentManager;
    })();

    var ProcessedArgs = (function () {
        function ProcessedArgs(args, positionalParamsDefinition) {
            _classCallCheck(this, ProcessedArgs);

            this.tag = args.tag;
            this.named = args.named;
            this.positional = args.positional;
            this.positionalParamNames = positionalParamsDefinition;
        }

        ProcessedArgs.prototype.value = function value() {
            var named = this.named;
            var positional = this.positional;
            var positionalParamNames = this.positionalParamNames;

            var merged = Object.assign({}, named.value());
            if (positionalParamNames && positionalParamNames.length) {
                for (var i = 0; i < positionalParamNames.length; i++) {
                    var _name = positionalParamNames[i];
                    var reference = positional.at(i);
                    merged[_name] = reference.value();
                }
            }
            return {
                attrs: merged,
                props: merged
            };
        };

        return ProcessedArgs;
    })();

    exports.ProcessedArgs = ProcessedArgs;

    function processArgs(args, positionalParamsDefinition) {
        return new ProcessedArgs(args, positionalParamsDefinition);
    }
    var EMBERISH_GLIMMER_COMPONENT_MANAGER = new EmberishGlimmerComponentManager();
    var BaseEmberishCurlyComponent = EmberishCurlyComponent.extend();

    var EmberishCurlyComponentManager = (function () {
        function EmberishCurlyComponentManager() {
            _classCallCheck(this, EmberishCurlyComponentManager);
        }

        EmberishCurlyComponentManager.prototype.prepareArgs = function prepareArgs(definition, args, dynamicScope) {
            var dyn = definition.ComponentClass ? definition.ComponentClass['fromDynamicScope'] : null;
            if (dyn) {
                (function () {
                    var map = _glimmerUtil.assign({}, args.named.map);
                    dyn.forEach(function (name) {
                        return map[name] = dynamicScope.get(name);
                    });
                    args = _glimmerRuntime.EvaluatedArgs.create(args.positional, _glimmerRuntime.EvaluatedNamedArgs.create(map), args.blocks);
                })();
            }
            return args;
        };

        EmberishCurlyComponentManager.prototype.create = function create(environment, definition, args, dynamicScope, callerSelf) {
            var klass = definition.ComponentClass || BaseEmberishCurlyComponent;
            var processedArgs = processArgs(args, klass['positionalParams']);

            var _processedArgs$value = processedArgs.value();

            var attrs = _processedArgs$value.attrs;

            var self = callerSelf.value();
            var merged = _glimmerUtil.assign({}, attrs, { attrs: attrs }, { args: processedArgs }, { targetObject: self });
            var component = klass.create(merged);
            component.didInitAttrs({ attrs: attrs });
            component.didReceiveAttrs({ oldAttrs: null, newAttrs: attrs });
            component.willInsertElement();
            component.willRender();
            return component;
        };

        EmberishCurlyComponentManager.prototype.layoutFor = function layoutFor(definition, component, env) {
            var layout = env.compiledLayouts[definition.name];
            if (layout) {
                return layout;
            }
            var layoutString = definition.layoutString;
            var lateBound = !layoutString;
            if (!layoutString && layoutString !== '') {
                layoutString = component['layout'];
            }
            layout = _glimmerRuntime.compileLayout(new EmberishCurlyComponentLayoutCompiler(layoutString), env);
            return lateBound ? layout : env.compiledLayouts[definition.name] = layout;
        };

        EmberishCurlyComponentManager.prototype.getSelf = function getSelf(component) {
            return new _glimmerObjectReference.UpdatableReference(component);
        };

        EmberishCurlyComponentManager.prototype.didCreateElement = function didCreateElement(component, element, operations) {
            component.element = element;
            var bindings = component.attributeBindings;
            var rootRef = new _glimmerObjectReference.UpdatableReference(component);
            if (bindings) {
                for (var i = 0; i < bindings.length; i++) {
                    var attribute = bindings[i];
                    var reference = rootRef.get(attribute);
                    operations.addDynamicAttribute(element, attribute, reference, false);
                }
            }
        };

        EmberishCurlyComponentManager.prototype.didRenderLayout = function didRenderLayout(component, bounds) {
            component.bounds = bounds;
        };

        EmberishCurlyComponentManager.prototype.didCreate = function didCreate(component) {
            component.didInsertElement();
            component.didRender();
        };

        EmberishCurlyComponentManager.prototype.getTag = function getTag(component) {
            return component.dirtinessTag;
        };

        EmberishCurlyComponentManager.prototype.update = function update(component, args) {
            var oldAttrs = component.attrs;
            var newAttrs = component.args.value().attrs;
            var merged = _glimmerUtil.assign({}, newAttrs, { attrs: newAttrs });
            component.setProperties(merged);
            component.didUpdateAttrs({ oldAttrs: oldAttrs, newAttrs: newAttrs });
            component.didReceiveAttrs({ oldAttrs: oldAttrs, newAttrs: newAttrs });
            component.willUpdate();
            component.willRender();
        };

        EmberishCurlyComponentManager.prototype.didUpdateLayout = function didUpdateLayout() {};

        EmberishCurlyComponentManager.prototype.didUpdate = function didUpdate(component) {
            component.didUpdate();
            component.didRender();
        };

        EmberishCurlyComponentManager.prototype.getDestructor = function getDestructor(component) {
            return {
                destroy: function () {
                    component.destroy();
                }
            };
        };

        return EmberishCurlyComponentManager;
    })();

    var EMBERISH_CURLY_COMPONENT_MANAGER = new EmberishCurlyComponentManager();
    function emberToBool(value) {
        if (Array.isArray(value)) {
            return value.length > 0;
        } else {
            return !!value;
        }
    }

    var EmberishConditionalReference = (function (_ConditionalReference) {
        _inherits(EmberishConditionalReference, _ConditionalReference);

        function EmberishConditionalReference() {
            _classCallCheck(this, EmberishConditionalReference);

            _ConditionalReference.apply(this, arguments);
        }

        EmberishConditionalReference.prototype.toBool = function toBool(value) {
            return emberToBool(value);
        };

        return EmberishConditionalReference;
    })(_glimmerRuntime.ConditionalReference);

    var SimplePathReference = (function () {
        function SimplePathReference(parent, property) {
            _classCallCheck(this, SimplePathReference);

            this.tag = _glimmerReference.VOLATILE_TAG;
            this.parent = parent;
            this.property = property;
        }

        SimplePathReference.prototype.value = function value() {
            return this.parent.value()[this.property];
        };

        SimplePathReference.prototype.get = function get(prop) {
            return new SimplePathReference(this, prop);
        };

        return SimplePathReference;
    })();

    exports.SimplePathReference = SimplePathReference;

    var HelperReference = (function () {
        function HelperReference(helper, args) {
            _classCallCheck(this, HelperReference);

            this.tag = _glimmerReference.VOLATILE_TAG;
            this.helper = helper;
            this.args = args;
        }

        HelperReference.prototype.value = function value() {
            var helper = this.helper;
            var _args = this.args;
            var positional = _args.positional;
            var named = _args.named;

            return helper(positional.value(), named.value());
        };

        HelperReference.prototype.get = function get(prop) {
            return new SimplePathReference(this, prop);
        };

        return HelperReference;
    })();

    var InertModifierManager = (function () {
        function InertModifierManager() {
            _classCallCheck(this, InertModifierManager);
        }

        InertModifierManager.prototype.create = function create() {};

        InertModifierManager.prototype.install = function install(modifier) {};

        InertModifierManager.prototype.update = function update(modifier) {};

        InertModifierManager.prototype.getDestructor = function getDestructor(modifier) {
            return null;
        };

        return InertModifierManager;
    })();

    var TestModifier = function TestModifier(element, args, dom) {
        _classCallCheck(this, TestModifier);

        this.element = element;
        this.args = args;
        this.dom = dom;
    };

    exports.TestModifier = TestModifier;

    var TestModifierManager = (function () {
        function TestModifierManager() {
            _classCallCheck(this, TestModifierManager);

            this.installedElements = [];
            this.updatedElements = [];
            this.destroyedModifiers = [];
        }

        TestModifierManager.prototype.create = function create(element, args, dynamicScope, dom) {
            return new TestModifier(element, args, dom);
        };

        TestModifierManager.prototype.install = function install(_ref) {
            var element = _ref.element;
            var args = _ref.args;
            var dom = _ref.dom;

            this.installedElements.push(element);
            var param = args.positional.at(0).value();
            dom.setAttribute(element, 'data-modifier', "installed - " + param);
            return;
        };

        TestModifierManager.prototype.update = function update(_ref2) {
            var element = _ref2.element;
            var args = _ref2.args;
            var dom = _ref2.dom;

            this.updatedElements.push(element);
            var param = args.positional.at(0).value();
            dom.setAttribute(element, 'data-modifier', "updated - " + param);
            return;
        };

        TestModifierManager.prototype.getDestructor = function getDestructor(modifier) {
            var _this = this;

            return {
                destroy: function () {
                    _this.destroyedModifiers.push(modifier);
                    var element = modifier.element;
                    var dom = modifier.dom;

                    dom.removeAttribute(element, 'data-modifier');
                }
            };
        };

        return TestModifierManager;
    })();

    exports.TestModifierManager = TestModifierManager;

    var TestEnvironment = (function (_Environment) {
        _inherits(TestEnvironment, _Environment);

        function TestEnvironment() {
            var options = arguments.length <= 0 || arguments[0] === undefined ? {
                document: document,
                appendOperations: new _glimmerRuntime.DOMTreeConstruction(document)
            } : arguments[0];

            _classCallCheck(this, TestEnvironment);

            _Environment.call(this, { appendOperations: options.appendOperations, updateOperations: new _glimmerRuntime.DOMChanges(options.document) });
            this.helpers = _glimmerUtil.dict();
            this.modifiers = _glimmerUtil.dict();
            this.partials = _glimmerUtil.dict();
            this.components = _glimmerUtil.dict();
            this.compiledLayouts = _glimmerUtil.dict();
            this.uselessAnchor = options.document.createElement('a');
            this.registerHelper("if", function (_ref3) {
                var cond = _ref3[0];
                var yes = _ref3[1];
                var no = _ref3[2];
                return cond ? yes : no;
            });
            this.registerHelper("unless", function (_ref4) {
                var cond = _ref4[0];
                var yes = _ref4[1];
                var no = _ref4[2];
                return cond ? no : yes;
            });
            this.registerInternalHelper("-get-dynamic-var", _glimmerRuntime.getDynamicVar);
            this.registerModifier("action", new InertModifierManager());
            this.registerInternalHelper("component", function (vm, args, symbolTable) {
                return new DynamicComponentReference(args.positional.at(0), vm.env, symbolTable);
            });
            this.registerInternalHelper("hash", function (vm, args) {
                return args.named;
            });
        }

        TestEnvironment.prototype.protocolForURL = function protocolForURL(url) {
            this.uselessAnchor.href = url;
            return this.uselessAnchor.protocol;
        };

        TestEnvironment.prototype.registerHelper = function registerHelper(name, helper) {
            this.helpers[name] = function (vm, args) {
                return new HelperReference(helper, args);
            };
        };

        TestEnvironment.prototype.registerInternalHelper = function registerInternalHelper(name, helper) {
            this.helpers[name] = helper;
        };

        TestEnvironment.prototype.registerModifier = function registerModifier(name, modifier) {
            this.modifiers[name] = modifier;
        };

        TestEnvironment.prototype.registerPartial = function registerPartial(name, source) {
            this.partials[name] = new _glimmerRuntime.PartialDefinition(name, _glimmerTestHelpersLibHelpers.compile(source, { env: this }));
        };

        TestEnvironment.prototype.registerComponent = function registerComponent(name, definition) {
            this.components[name] = definition;
            return definition;
        };

        TestEnvironment.prototype.registerBasicComponent = function registerBasicComponent(name, Component, layout) {
            var definition = new BasicComponentDefinition(name, BASIC_COMPONENT_MANAGER, Component, layout);
            return this.registerComponent(name, definition);
        };

        TestEnvironment.prototype.registerStaticTaglessComponent = function registerStaticTaglessComponent(name, Component, layout) {
            var definition = new StaticTaglessComponentDefinition(name, STATIC_TAGLESS_COMPONENT_MANAGER, Component, layout);
            return this.registerComponent(name, definition);
        };

        TestEnvironment.prototype.registerEmberishCurlyComponent = function registerEmberishCurlyComponent(name, Component, layout) {
            var definition = new EmberishCurlyComponentDefinition(name, EMBERISH_CURLY_COMPONENT_MANAGER, Component, layout);
            return this.registerComponent(name, definition);
        };

        TestEnvironment.prototype.registerEmberishGlimmerComponent = function registerEmberishGlimmerComponent(name, Component, layout) {
            var definition = new EmberishGlimmerComponentDefinition(name, EMBERISH_GLIMMER_COMPONENT_MANAGER, Component, layout);
            return this.registerComponent(name, definition);
        };

        TestEnvironment.prototype.toConditionalReference = function toConditionalReference(reference) {
            if (_glimmerReference.isConst(reference)) {
                return _glimmerRuntime.PrimitiveReference.create(emberToBool(reference.value()));
            }
            return new EmberishConditionalReference(reference);
        };

        TestEnvironment.prototype.macros = function macros() {
            var macros = _Environment.prototype.macros.call(this);
            populateBlocks(macros.blocks, macros.inlines);
            return macros;
        };

        TestEnvironment.prototype.hasHelper = function hasHelper(helperName) {
            return helperName.length === 1 && helperName[0] in this.helpers;
        };

        TestEnvironment.prototype.lookupHelper = function lookupHelper(helperParts) {
            var helperName = helperParts[0];
            var helper = this.helpers[helperName];
            if (!helper) throw new Error("Helper for " + helperParts.join('.') + " not found.");
            return helper;
        };

        TestEnvironment.prototype.hasPartial = function hasPartial(partialName) {
            return partialName in this.partials;
        };

        TestEnvironment.prototype.lookupPartial = function lookupPartial(partialName) {
            var partial = this.partials[partialName];
            return partial;
        };

        TestEnvironment.prototype.hasComponentDefinition = function hasComponentDefinition(name) {
            return !!this.components[name[0]];
        };

        TestEnvironment.prototype.getComponentDefinition = function getComponentDefinition(name, blockMeta) {
            return this.components[name[0]];
        };

        TestEnvironment.prototype.hasModifier = function hasModifier(modifierName) {
            return modifierName.length === 1 && modifierName[0] in this.modifiers;
        };

        TestEnvironment.prototype.lookupModifier = function lookupModifier(modifierName) {
            var name = modifierName[0];

            var modifier = this.modifiers[name];
            if (!modifier) throw new Error("Modifier for " + modifierName.join('.') + " not found.");
            return modifier;
        };

        TestEnvironment.prototype.compile = function compile(template) {
            return _glimmerTestHelpersLibHelpers.compile(template, { env: this });
        };

        TestEnvironment.prototype.compileLayout = function compileLayout(template) {
            return _glimmerTestHelpersLibHelpers.compileLayout(template, { env: this });
        };

        TestEnvironment.prototype.iterableFor = function iterableFor(ref, args) {
            var keyPath = args.named.get("key").value();
            var keyFor = undefined;
            if (!keyPath) {
                throw new Error('Must specify a key for #each');
            }
            switch (keyPath) {
                case '@index':
                    keyFor = function (_, index) {
                        return String(index);
                    };
                    break;
                case '@primitive':
                    keyFor = function (item) {
                        return String(item);
                    };
                    break;
                default:
                    keyFor = function (item) {
                        return item[keyPath];
                    };
                    break;
            }
            return new Iterable(ref, keyFor);
        };

        return TestEnvironment;
    })(_glimmerRuntime.Environment);

    exports.TestEnvironment = TestEnvironment;

    var TestDynamicScope = (function () {
        function TestDynamicScope() {
            var bucket = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];

            _classCallCheck(this, TestDynamicScope);

            if (bucket) {
                this.bucket = _glimmerUtil.assign({}, bucket);
            } else {
                this.bucket = {};
            }
        }

        TestDynamicScope.prototype.get = function get(key) {
            return this.bucket[key];
        };

        TestDynamicScope.prototype.set = function set(key, reference) {
            return this.bucket[key] = reference;
        };

        TestDynamicScope.prototype.child = function child() {
            return new TestDynamicScope(this.bucket);
        };

        return TestDynamicScope;
    })();

    exports.TestDynamicScope = TestDynamicScope;

    var DynamicComponentReference = (function () {
        function DynamicComponentReference(nameRef, env, symbolTable) {
            _classCallCheck(this, DynamicComponentReference);

            this.nameRef = nameRef;
            this.env = env;
            this.symbolTable = symbolTable;
            this.tag = nameRef.tag;
        }

        DynamicComponentReference.prototype.value = function value() {
            var env = this.env;
            var nameRef = this.nameRef;

            var nameOrDef = nameRef.value();
            if (typeof nameOrDef === 'string') {
                return env.getComponentDefinition([nameOrDef], this.symbolTable);
            } else if (_glimmerRuntime.isComponentDefinition(nameOrDef)) {
                return nameOrDef;
            }
            return null;
        };

        DynamicComponentReference.prototype.get = function get() {
            return null;
        };

        return DynamicComponentReference;
    })();

    function dynamicComponentFor(vm, symbolTable) {
        var args = vm.getArgs();
        var nameRef = args.positional.at(0);
        var env = vm.env;
        return new DynamicComponentReference(nameRef, env, symbolTable);
    }
    ;

    var GenericComponentDefinition = (function (_ComponentDefinition) {
        _inherits(GenericComponentDefinition, _ComponentDefinition);

        function GenericComponentDefinition(name, manager, ComponentClass, layout) {
            _classCallCheck(this, GenericComponentDefinition);

            _ComponentDefinition.call(this, name, manager, ComponentClass);
            this.layoutString = layout;
        }

        return GenericComponentDefinition;
    })(_glimmerRuntime.ComponentDefinition);

    exports.GenericComponentDefinition = GenericComponentDefinition;

    var BasicComponentDefinition = (function (_GenericComponentDefinition) {
        _inherits(BasicComponentDefinition, _GenericComponentDefinition);

        function BasicComponentDefinition() {
            _classCallCheck(this, BasicComponentDefinition);

            _GenericComponentDefinition.apply(this, arguments);
        }

        return BasicComponentDefinition;
    })(GenericComponentDefinition);

    exports.BasicComponentDefinition = BasicComponentDefinition;

    var StaticTaglessComponentDefinition = (function (_GenericComponentDefinition2) {
        _inherits(StaticTaglessComponentDefinition, _GenericComponentDefinition2);

        function StaticTaglessComponentDefinition() {
            _classCallCheck(this, StaticTaglessComponentDefinition);

            _GenericComponentDefinition2.apply(this, arguments);
        }

        return StaticTaglessComponentDefinition;
    })(GenericComponentDefinition);

    var EmberishCurlyComponentDefinition = (function (_GenericComponentDefinition3) {
        _inherits(EmberishCurlyComponentDefinition, _GenericComponentDefinition3);

        function EmberishCurlyComponentDefinition() {
            _classCallCheck(this, EmberishCurlyComponentDefinition);

            _GenericComponentDefinition3.apply(this, arguments);
        }

        return EmberishCurlyComponentDefinition;
    })(GenericComponentDefinition);

    exports.EmberishCurlyComponentDefinition = EmberishCurlyComponentDefinition;

    var EmberishGlimmerComponentDefinition = (function (_GenericComponentDefinition4) {
        _inherits(EmberishGlimmerComponentDefinition, _GenericComponentDefinition4);

        function EmberishGlimmerComponentDefinition() {
            _classCallCheck(this, EmberishGlimmerComponentDefinition);

            _GenericComponentDefinition4.apply(this, arguments);
        }

        return EmberishGlimmerComponentDefinition;
    })(GenericComponentDefinition);

    exports.EmberishGlimmerComponentDefinition = EmberishGlimmerComponentDefinition;

    var GenericComponentLayoutCompiler = (function () {
        function GenericComponentLayoutCompiler(layoutString) {
            _classCallCheck(this, GenericComponentLayoutCompiler);

            this.layoutString = layoutString;
        }

        GenericComponentLayoutCompiler.prototype.compileLayout = function compileLayout(env) {
            return _glimmerTestHelpersLibHelpers.compileLayout(this.layoutString, { env: env });
        };

        return GenericComponentLayoutCompiler;
    })();

    var BasicComponentLayoutCompiler = (function (_GenericComponentLayoutCompiler) {
        _inherits(BasicComponentLayoutCompiler, _GenericComponentLayoutCompiler);

        function BasicComponentLayoutCompiler() {
            _classCallCheck(this, BasicComponentLayoutCompiler);

            _GenericComponentLayoutCompiler.apply(this, arguments);
        }

        BasicComponentLayoutCompiler.prototype.compile = function compile(builder) {
            builder.fromLayout(this.compileLayout(builder.env));
        };

        return BasicComponentLayoutCompiler;
    })(GenericComponentLayoutCompiler);

    var StaticTaglessComponentLayoutCompiler = (function (_GenericComponentLayoutCompiler2) {
        _inherits(StaticTaglessComponentLayoutCompiler, _GenericComponentLayoutCompiler2);

        function StaticTaglessComponentLayoutCompiler() {
            _classCallCheck(this, StaticTaglessComponentLayoutCompiler);

            _GenericComponentLayoutCompiler2.apply(this, arguments);
        }

        StaticTaglessComponentLayoutCompiler.prototype.compile = function compile(builder) {
            builder.wrapLayout(this.compileLayout(builder.env));
        };

        return StaticTaglessComponentLayoutCompiler;
    })(GenericComponentLayoutCompiler);

    function EmberTagName(vm) {
        var self = vm.getSelf().value();
        var tagName = self['tagName'];
        tagName = tagName === '' ? null : self['tagName'] || 'div';
        return _glimmerRuntime.PrimitiveReference.create(tagName);
    }
    function EmberID(vm) {
        var self = vm.getSelf().value();
        return _glimmerRuntime.PrimitiveReference.create("ember" + self._guid);
    }

    var EmberishCurlyComponentLayoutCompiler = (function (_GenericComponentLayoutCompiler3) {
        _inherits(EmberishCurlyComponentLayoutCompiler, _GenericComponentLayoutCompiler3);

        function EmberishCurlyComponentLayoutCompiler() {
            _classCallCheck(this, EmberishCurlyComponentLayoutCompiler);

            _GenericComponentLayoutCompiler3.apply(this, arguments);
        }

        EmberishCurlyComponentLayoutCompiler.prototype.compile = function compile(builder) {
            builder.wrapLayout(this.compileLayout(builder.env));
            builder.tag.dynamic(EmberTagName);
            builder.attrs.static('class', 'ember-view');
            builder.attrs.dynamic('id', EmberID);
        };

        return EmberishCurlyComponentLayoutCompiler;
    })(GenericComponentLayoutCompiler);

    var EmberishGlimmerComponentLayoutCompiler = (function (_GenericComponentLayoutCompiler4) {
        _inherits(EmberishGlimmerComponentLayoutCompiler, _GenericComponentLayoutCompiler4);

        function EmberishGlimmerComponentLayoutCompiler() {
            _classCallCheck(this, EmberishGlimmerComponentLayoutCompiler);

            _GenericComponentLayoutCompiler4.apply(this, arguments);
        }

        EmberishGlimmerComponentLayoutCompiler.prototype.compile = function compile(builder) {
            builder.fromLayout(this.compileLayout(builder.env));
            builder.attrs.static('class', 'ember-view');
            builder.attrs.dynamic('id', EmberID);
        };

        return EmberishGlimmerComponentLayoutCompiler;
    })(GenericComponentLayoutCompiler);

    function inspectHooks(ComponentClass) {
        return ComponentClass.extend({
            init: function () {
                this._super.apply(this, arguments);
                this.hooks = {
                    didInitAttrs: 0,
                    didUpdateAttrs: 0,
                    didReceiveAttrs: 0,
                    willInsertElement: 0,
                    willUpdate: 0,
                    willRender: 0,
                    didInsertElement: 0,
                    didUpdate: 0,
                    didRender: 0
                };
            },
            didInitAttrs: function () {
                this._super.apply(this, arguments);
                this.hooks['didInitAttrs']++;
            },
            didUpdateAttrs: function () {
                this._super.apply(this, arguments);
                this.hooks['didUpdateAttrs']++;
            },
            didReceiveAttrs: function () {
                this._super.apply(this, arguments);
                this.hooks['didReceiveAttrs']++;
            },
            willInsertElement: function () {
                this._super.apply(this, arguments);
                this.hooks['willInsertElement']++;
            },
            willUpdate: function () {
                this._super.apply(this, arguments);
                this.hooks['willUpdate']++;
            },
            willRender: function () {
                this._super.apply(this, arguments);
                this.hooks['willRender']++;
            },
            didInsertElement: function () {
                this._super.apply(this, arguments);
                this.hooks['didInsertElement']++;
            },
            didUpdate: function () {
                this._super.apply(this, arguments);
                this.hooks['didUpdate']++;
            },
            didRender: function () {
                this._super.apply(this, arguments);
                this.hooks['didRender']++;
            }
        });
    }

    var _BaselineSyntax$NestedBlock = _glimmerRuntime.BaselineSyntax.NestedBlock;
    var defaultBlock = _BaselineSyntax$NestedBlock.defaultBlock;
    var inverseBlock = _BaselineSyntax$NestedBlock.inverseBlock;
    var params = _BaselineSyntax$NestedBlock.params;
    var hash = _BaselineSyntax$NestedBlock.hash;

    function populateBlocks(blocks, inlines) {
        blocks.add('identity', function (sexp, builder) {
            builder.evaluate(sexp[4]);
        });
        blocks.add('render-inverse', function (sexp, builder) {
            builder.evaluate(sexp[5]);
        });
        blocks.add('-with-dynamic-vars', function (sexp, builder) {
            var block = defaultBlock(sexp);
            var args = _glimmerRuntime.compileArgs(params(sexp), hash(sexp), builder);
            builder.unit(function (b) {
                b.putArgs(args);
                b.pushDynamicScope();
                b.bindDynamicScope(args.named.keys);
                b.evaluate(_glimmerUtil.unwrap(block));
                b.popDynamicScope();
            });
        });
        blocks.add('-in-element', function (sexp, builder) {
            var block = defaultBlock(sexp);
            var args = _glimmerRuntime.compileArgs(params(sexp), hash(sexp), builder);
            builder.putArgs(args);
            builder.test('simple');
            builder.labelled(null, function (b) {
                b.jumpUnless('END');
                b.pushRemoteElement();
                b.evaluate(_glimmerUtil.unwrap(block));
                b.popRemoteElement();
            });
        });
        blocks.add('component', function (sexp, builder) {
            var path = sexp[1];
            var params = sexp[2];
            var hash = sexp[3];
            var _default = sexp[4];
            var inverse = sexp[5];

            var definitionArgs = [params.slice(0, 1), null, null, null];
            var args = [params.slice(1), hash, _default, inverse];
            builder.component.dynamic(definitionArgs, dynamicComponentFor, args, builder.symbolTable);
            return true;
        });
        blocks.addMissing(function (sexp, builder) {
            var path = sexp[1];
            var params = sexp[2];
            var hash = sexp[3];
            var _default = sexp[4];
            var inverse = sexp[5];

            var table = builder.symbolTable;
            if (!params) {
                params = [];
            }
            if (path.length > 1) {
                var definitionArgs = [[['get', path]], hash, _default, inverse];
                var args = [params, hash, _default, inverse];
                builder.component.dynamic(definitionArgs, dynamicComponentFor, args, table);
                return true;
            }
            var definition = builder.env.getComponentDefinition(path, builder.symbolTable);
            if (definition) {
                builder.component.static(definition, [params, hash, _default, inverse], table);
                return true;
            }
            return false;
        });
        inlines.add('component', function (path, params, hash, builder) {
            var definitionArgs = [params.slice(0, 1), null, null, null];
            var args = [params.slice(1), hash, null, null];
            builder.component.dynamic(definitionArgs, dynamicComponentFor, args, builder.symbolTable);
            return true;
        });
        inlines.addMissing(function (path, params, hash, builder) {
            var table = builder.symbolTable;
            var definition = builder.env.getComponentDefinition(path, builder.symbolTable);
            if (path.length > 1) {
                var definitionArgs = [[['get', path]], hash, null, null];
                var args = [params, hash, null, null];
                builder.component.dynamic(definitionArgs, dynamicComponentFor, args, table);
                return true;
            }
            if (definition) {
                builder.component.static(definition, [params, hash, null, null], table);
                return true;
            }
            return false;
        });
        return { blocks: blocks, inlines: inlines };
    }

    function equalsElement(element, tagName, attributes, content) {
        QUnit.push(element.tagName === tagName.toUpperCase(), element.tagName.toLowerCase(), tagName, "expect tagName to be " + tagName);
        var expectedAttrs = _glimmerUtil.dict();
        var expectedCount = 0;
        for (var prop in attributes) {
            expectedCount++;
            var expected = attributes[prop];
            var matcher = typeof expected === 'object' && MATCHER in expected ? expected : equalsAttr(expected);
            expectedAttrs[prop] = matcher;
            QUnit.push(expectedAttrs[prop].match(element.getAttribute(prop)), matcher.fail(element.getAttribute(prop)), matcher.fail(element.getAttribute(prop)), "Expected element's " + prop + " attribute " + matcher.expected());
        }
        var actualAttributes = {};
        for (var i = 0, l = element.attributes.length; i < l; i++) {
            actualAttributes[element.attributes[i].name] = element.attributes[i].value;
        }
        if (!(element instanceof HTMLElement)) {
            QUnit.push(element instanceof HTMLElement, null, null, "Element must be an HTML Element, not an SVG Element");
        } else {
            QUnit.push(element.attributes.length === expectedCount, element.attributes.length, expectedCount, "Expected " + expectedCount + " attributes; got " + element.outerHTML);
            if (content !== null) {
                QUnit.push(element.innerHTML === content, element.innerHTML, content, "The element had '" + content + "' as its content");
            }
        }
    }

    var MATCHER = "3d4ef194-13be-4ccf-8dc7-862eea02c93e";
    exports.MATCHER = MATCHER;

    function equalsAttr(expected) {
        return {
            "3d4ef194-13be-4ccf-8dc7-862eea02c93e": true,
            match: function (actual) {
                return expected === actual;
            },
            expected: function () {
                return "to equal " + expected;
            },
            fail: function (actual) {
                return actual + " did not equal " + expected;
            }
        };
    }

    function equals(expected) {
        return {
            "3d4ef194-13be-4ccf-8dc7-862eea02c93e": true,
            match: function (actual) {
                return expected === actual;
            },
            expected: function () {
                return "to equal " + expected;
            },
            fail: function (actual) {
                return actual + " did not equal " + expected;
            }
        };
    }

    function regex(r) {
        return {
            "3d4ef194-13be-4ccf-8dc7-862eea02c93e": true,
            match: function (v) {
                return r.test(v);
            },
            expected: function () {
                return "to match " + r;
            },
            fail: function (actual) {
                return actual + " did not match " + r;
            }
        };
    }

    function classes(expected) {
        return {
            "3d4ef194-13be-4ccf-8dc7-862eea02c93e": true,
            match: function (actual) {
                return actual && expected.split(' ').sort().join(' ') === actual.split(' ').sort().join(' ');
            },
            expected: function () {
                return "to include '" + expected + "'";
            },
            fail: function (actual) {
                return "'" + actual + "'' did not match '" + expected + "'";
            }
        };
    }
});

// Environment

// Partials

// Values

// References
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkBnbGltbWVyL3Rlc3QtaGVscGVycy9saWIvZW52aXJvbm1lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztRQXdHQSxhQUFBO0FBS0UsaUJBTEYsYUFBQSxDQUtjLEtBQWUsRUFBRSxNQUFzQixFQUFBO2tDQUxyRCxhQUFBOztBQUdVLGdCQUFBLENBQUEsUUFBUSxHQUFHLENBQUMsQ0FBQztBQUduQixnQkFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDbkIsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1NBQ3RCOztBQVJILHFCQUFBLFdBVUUsT0FBTyxHQUFBLG1CQUFBO0FBQ0wsbUJBQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1NBQ2hDOztBQVpILHFCQUFBLFdBY0UsSUFBSSxHQUFBLGdCQUFBO2dCQUNJLFFBQVEsR0FBb0IsSUFBSSxDQUFoQyxRQUFRO2dCQUFFLEtBQUssR0FBYSxJQUFJLENBQXRCLEtBQUs7Z0JBQUUsTUFBTSxHQUFLLElBQUksQ0FBZixNQUFNOztBQUU3QixnQkFBSSxRQUFRLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLElBQUksQ0FBQztBQUUxQyxnQkFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVCLGdCQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ2xDLGdCQUFJLElBQUksR0FBRyxRQUFRLENBQUM7QUFFcEIsZ0JBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztBQUVoQixtQkFBTyxFQUFFLEdBQUcsRUFBSCxHQUFHLEVBQUUsS0FBSyxFQUFMLEtBQUssRUFBRSxJQUFJLEVBQUosSUFBSSxFQUFFLENBQUM7U0FDN0I7O2VBMUJILGFBQUE7OztRQTZCQSxrQkFBQTtBQU1FLGlCQU5GLGtCQUFBLENBTWMsSUFBYyxFQUFFLE1BQWdCLEVBQUUsTUFBc0IsRUFB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UUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEFBQUMsQ0FBQzthQUNoRztBQUNELG9CQUFRLEVBQUEsWUFBQTtBQUNOLHdDQUFzQixRQUFRLE9BQUk7YUFDbkM7QUFDRCxnQkFBSSxFQUFBLFVBQUMsTUFBTSxFQUFBO0FBQ1QsNkJBQVcsTUFBTSwwQkFBcUIsUUFBUSxPQUFJO2FBQ25EO1NBQ0YsQ0FBQztLQUNIIiwiZmlsZSI6ImVudmlyb25tZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgLy8gVk1cbiAgVk0sXG4gIER5bmFtaWNTY29wZSxcblxuICAvLyBDb21waWxlclxuICBDb21waWxlZFByb2dyYW0sXG4gIENvbXBpbGFibGVMYXlvdXQsXG4gIGNvbXBpbGVMYXlvdXQsXG4gIGNvbXBpbGVBcmdzLFxuXG4gIC8vIEVudmlyb25tZW50XG4gIEVudmlyb25tZW50LFxuICBIZWxwZXIgYXMgR2xpbW1lckhlbHBlcixcbiAgTW9kaWZpZXJNYW5hZ2VyLFxuICBET01UcmVlQ29uc3RydWN0aW9uLFxuICBET01DaGFuZ2VzLFxuICBJRE9NQ2hhbmdlcyxcblxuICAvLyBQYXJ0aWFsc1xuICBQYXJ0aWFsRGVmaW5pdGlvbixcblxuICAvLyBDb21wb25lbnRzXG4gIENvbXBvbmVudCxcbiAgQ29tcG9uZW50TWFuYWdlcixcbiAgQ29tcG9uZW50RGVmaW5pdGlvbixcbiAgQ29tcG9uZW50TGF5b3V0QnVpbGRlcixcbiAgQ29tcG9uZW50QnVpbGRlcixcblxuICAvLyBWYWx1ZXNcbiAgRXZhbHVhdGVkQXJncyxcbiAgRXZhbHVhdGVkTmFtZWRBcmdzLFxuICBFdmFsdWF0ZWRQb3NpdGlvbmFsQXJncyxcblxuICAvLyBTeW50YXggQ2xhc3Nlc1xuICBCbG9ja01hY3JvcyxcbiAgSW5saW5lTWFjcm9zLFxuICBOZXN0ZWRCbG9ja1N5bnRheCxcbiAgQ29tcGlsZUJsb2NrTWFjcm8sXG4gIEJhc2VsaW5lU3ludGF4LFxuXG4gIC8vIFJlZmVyZW5jZXNcbiAgUHJpbWl0aXZlUmVmZXJlbmNlLFxuICBDb25kaXRpb25hbFJlZmVyZW5jZSxcblxuICAvLyBNaXNjXG4gIEJvdW5kcyxcbiAgRWxlbWVudE9wZXJhdGlvbnMsXG4gIEZ1bmN0aW9uRXhwcmVzc2lvbixcbiAgT3Bjb2RlQnVpbGRlckRTTCxcbiAgU2ltcGxlLFxuICBnZXREeW5hbWljVmFyLFxuXG4gIFRlbXBsYXRlLFxuICBMYXlvdXQsXG4gIGlzQ29tcG9uZW50RGVmaW5pdGlvblxufSBmcm9tIFwiQGdsaW1tZXIvcnVudGltZVwiO1xuXG5pbXBvcnQge1xuICBjb21waWxlIGFzIHJhd0NvbXBpbGUsXG4gIGNvbXBpbGVMYXlvdXQgYXMgcmF3Q29tcGlsZUxheW91dFxufSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbmltcG9ydCB7XG4gIERlc3Ryb3lhYmxlLFxuICBEaWN0LFxuICBPcGFxdWUsXG4gIEZJWE1FLFxuICBhc3NpZ24sXG4gIGRpY3QsXG4gIHVud3JhcFxufSBmcm9tICdAZ2xpbW1lci91dGlsJztcblxuaW1wb3J0IEdsaW1tZXJPYmplY3QsIHsgR2xpbW1lck9iamVjdEZhY3RvcnkgfSBmcm9tIFwiQGdsaW1tZXIvb2JqZWN0XCI7XG5cbmltcG9ydCB7XG4gIFZPTEFUSUxFX1RBRyxcbiAgRGlydHlhYmxlVGFnLFxuICBSZXZpc2lvblRhZyxcbiAgUmVmZXJlbmNlLFxuICBQYXRoUmVmZXJlbmNlLFxuICBPcGFxdWVJdGVyYXRvcixcbiAgT3BhcXVlSXRlcmFibGUsXG4gIEFic3RyYWN0SXRlcmFibGUsXG4gIEl0ZXJhdGlvbkl0ZW0sXG4gIGlzQ29uc3Rcbn0gZnJvbSBcIkBnbGltbWVyL3JlZmVyZW5jZVwiO1xuXG5pbXBvcnQge1xuICBVcGRhdGFibGVSZWZlcmVuY2Vcbn0gZnJvbSBcIkBnbGltbWVyL29iamVjdC1yZWZlcmVuY2VcIjtcblxuaW1wb3J0IHtcbiAgU3ltYm9sVGFibGVcbn0gZnJvbSAnQGdsaW1tZXIvaW50ZXJmYWNlcyc7XG5cbmltcG9ydCAqIGFzIFdpcmVGb3JtYXQgZnJvbSAnQGdsaW1tZXIvd2lyZS1mb3JtYXQnO1xuXG5pbXBvcnQge1xuICBUZW1wbGF0ZU1ldGEsXG59IGZyb20gXCJAZ2xpbW1lci93aXJlLWZvcm1hdFwiO1xuXG50eXBlIEtleUZvcjxUPiA9IChpdGVtOiBPcGFxdWUsIGluZGV4OiBUKSA9PiBzdHJpbmc7XG5cbmNsYXNzIEFycmF5SXRlcmF0b3IgaW1wbGVtZW50cyBPcGFxdWVJdGVyYXRvciB7XG4gIHByaXZhdGUgYXJyYXk6IE9wYXF1ZVtdO1xuICBwcml2YXRlIGtleUZvcjogS2V5Rm9yPG51bWJlcj47XG4gIHByaXZhdGUgcG9zaXRpb24gPSAwO1xuXG4gIGNvbnN0cnVjdG9yKGFycmF5OiBPcGFxdWVbXSwga2V5Rm9yOiBLZXlGb3I8bnVtYmVyPikge1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICB0aGlzLmtleUZvciA9IGtleUZvcjtcbiAgfVxuXG4gIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgbmV4dCgpOiBJdGVyYXRpb25JdGVtPE9wYXF1ZSwgbnVtYmVyPiB7XG4gICAgbGV0IHsgcG9zaXRpb24sIGFycmF5LCBrZXlGb3IgfSA9IHRoaXM7XG5cbiAgICBpZiAocG9zaXRpb24gPj0gYXJyYXkubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCB2YWx1ZSA9IGFycmF5W3Bvc2l0aW9uXTtcbiAgICBsZXQga2V5ID0ga2V5Rm9yKHZhbHVlLCBwb3NpdGlvbik7XG4gICAgbGV0IG1lbW8gPSBwb3NpdGlvbjtcblxuICAgIHRoaXMucG9zaXRpb24rKztcblxuICAgIHJldHVybiB7IGtleSwgdmFsdWUsIG1lbW8gfTtcbiAgfVxufVxuXG5jbGFzcyBPYmplY3RLZXlzSXRlcmF0b3IgaW1wbGVtZW50cyBPcGFxdWVJdGVyYXRvciB7XG4gIHByaXZhdGUga2V5czogc3RyaW5nW107XG4gIHByaXZhdGUgdmFsdWVzOiBPcGFxdWVbXTtcbiAgcHJpdmF0ZSBrZXlGb3I6IEtleUZvcjxzdHJpbmc+O1xuICBwcml2YXRlIHBvc2l0aW9uID0gMDtcblxuICBjb25zdHJ1Y3RvcihrZXlzOiBzdHJpbmdbXSwgdmFsdWVzOiBPcGFxdWVbXSwga2V5Rm9yOiBLZXlGb3I8c3RyaW5nPikge1xuICAgIHRoaXMua2V5cyA9IGtleXM7XG4gICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdGhpcy5rZXlGb3IgPSBrZXlGb3I7XG4gIH1cblxuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmtleXMubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgbmV4dCgpOiBJdGVyYXRpb25JdGVtPE9wYXF1ZSwgc3RyaW5nPiB7XG4gICAgbGV0IHsgcG9zaXRpb24sIGtleXMsIHZhbHVlcywga2V5Rm9yIH0gPSB0aGlzO1xuXG4gICAgaWYgKHBvc2l0aW9uID49IGtleXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCB2YWx1ZSA9IHZhbHVlc1twb3NpdGlvbl07XG4gICAgbGV0IG1lbW8gPSBrZXlzW3Bvc2l0aW9uXTtcbiAgICBsZXQga2V5ID0ga2V5Rm9yKHZhbHVlLCBtZW1vKTtcblxuICAgIHRoaXMucG9zaXRpb24rKztcblxuICAgIHJldHVybiB7IGtleSwgdmFsdWUsIG1lbW8gfTtcbiAgfVxufVxuXG5jbGFzcyBFbXB0eUl0ZXJhdG9yIGltcGxlbWVudHMgT3BhcXVlSXRlcmF0b3Ige1xuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgbmV4dCgpOiBJdGVyYXRpb25JdGVtPE9wYXF1ZSwgT3BhcXVlPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY2FsbCBuZXh0KCkgb24gYW4gZW1wdHkgaXRlcmF0b3JgKTtcbiAgfVxufVxuXG5jb25zdCBFTVBUWV9JVEVSQVRPUiA9IG5ldyBFbXB0eUl0ZXJhdG9yKCk7XG5cbmNsYXNzIEl0ZXJhYmxlIGltcGxlbWVudHMgQWJzdHJhY3RJdGVyYWJsZTxPcGFxdWUsIE9wYXF1ZSwgSXRlcmF0aW9uSXRlbTxPcGFxdWUsIE9wYXF1ZT4sIFVwZGF0YWJsZVJlZmVyZW5jZTxPcGFxdWU+LCBVcGRhdGFibGVSZWZlcmVuY2U8T3BhcXVlPj4ge1xuICBwdWJsaWMgdGFnOiBSZXZpc2lvblRhZztcbiAgcHJpdmF0ZSByZWY6IFJlZmVyZW5jZTxPcGFxdWU+O1xuICBwcml2YXRlIGtleUZvcjogS2V5Rm9yPE9wYXF1ZT47XG5cbiAgY29uc3RydWN0b3IocmVmOiBSZWZlcmVuY2U8T3BhcXVlPiwga2V5Rm9yOiBLZXlGb3I8T3BhcXVlPikge1xuICAgIHRoaXMudGFnID0gcmVmLnRhZztcbiAgICB0aGlzLnJlZiA9IHJlZjtcbiAgICB0aGlzLmtleUZvciA9IGtleUZvcjtcbiAgfVxuXG4gIGl0ZXJhdGUoKTogT3BhcXVlSXRlcmF0b3Ige1xuICAgIGxldCB7IHJlZiwga2V5Rm9yIH0gPSB0aGlzO1xuXG4gICAgbGV0IGl0ZXJhYmxlID0gcmVmLnZhbHVlKCkgYXMgYW55O1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlcmFibGUpKSB7XG4gICAgICByZXR1cm4gaXRlcmFibGUubGVuZ3RoID4gMCA/IG5ldyBBcnJheUl0ZXJhdG9yKGl0ZXJhYmxlLCBrZXlGb3IpIDogRU1QVFlfSVRFUkFUT1I7XG4gICAgfSBlbHNlIGlmIChpdGVyYWJsZSA9PT0gdW5kZWZpbmVkIHx8IGl0ZXJhYmxlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gRU1QVFlfSVRFUkFUT1I7XG4gICAgfSBlbHNlIGlmIChpdGVyYWJsZS5mb3JFYWNoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxldCBhcnJheSA9IFtdO1xuICAgICAgaXRlcmFibGUuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIGFycmF5LnB1c2goaXRlbSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhcnJheS5sZW5ndGggPiAwID8gbmV3IEFycmF5SXRlcmF0b3IoYXJyYXksIGtleUZvcikgOiBFTVBUWV9JVEVSQVRPUjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVyYWJsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKGl0ZXJhYmxlKTtcbiAgICAgICByZXR1cm4ga2V5cy5sZW5ndGggPiAwID8gbmV3IE9iamVjdEtleXNJdGVyYXRvcihrZXlzLCBrZXlzLm1hcChrZXkgPT4gaXRlcmFibGVba2V5XSksIGtleUZvcikgOiBFTVBUWV9JVEVSQVRPUjtcbiAgICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRG9uJ3Qga25vdyBob3cgdG8ge3sjZWFjaCAke2l0ZXJhYmxlfX19YCk7XG4gICAgfVxuICB9XG5cbiAgdmFsdWVSZWZlcmVuY2VGb3IoaXRlbTogSXRlcmF0aW9uSXRlbTxPcGFxdWUsIE9wYXF1ZT4pOiBVcGRhdGFibGVSZWZlcmVuY2U8T3BhcXVlPiB7XG4gICAgcmV0dXJuIG5ldyBVcGRhdGFibGVSZWZlcmVuY2UoaXRlbS52YWx1ZSk7XG4gIH1cblxuICB1cGRhdGVWYWx1ZVJlZmVyZW5jZShyZWZlcmVuY2U6IFVwZGF0YWJsZVJlZmVyZW5jZTxPcGFxdWU+LCBpdGVtOiBJdGVyYXRpb25JdGVtPE9wYXF1ZSwgT3BhcXVlPikge1xuICAgIHJlZmVyZW5jZS51cGRhdGUoaXRlbS52YWx1ZSk7XG4gIH1cblxuICBtZW1vUmVmZXJlbmNlRm9yKGl0ZW06IEl0ZXJhdGlvbkl0ZW08T3BhcXVlLCBPcGFxdWU+KTogVXBkYXRhYmxlUmVmZXJlbmNlPE9wYXF1ZT4ge1xuICAgIHJldHVybiBuZXcgVXBkYXRhYmxlUmVmZXJlbmNlKGl0ZW0ubWVtbyk7XG4gIH1cblxuICB1cGRhdGVNZW1vUmVmZXJlbmNlKHJlZmVyZW5jZTogVXBkYXRhYmxlUmVmZXJlbmNlPE9wYXF1ZT4sIGl0ZW06IEl0ZXJhdGlvbkl0ZW08T3BhcXVlLCBPcGFxdWU+KSB7XG4gICAgcmVmZXJlbmNlLnVwZGF0ZShpdGVtLm1lbW8pO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIEF0dHJzID0gRGljdDxhbnk+O1xuZXhwb3J0IHR5cGUgQXR0cnNEaWZmID0geyBvbGRBdHRyczogQXR0cnMsIG5ld0F0dHJzOiBBdHRycyB9O1xuXG5leHBvcnQgY2xhc3MgQmFzaWNDb21wb25lbnQge1xuICBwdWJsaWMgYXR0cnM6IEF0dHJzO1xuICBwdWJsaWMgZWxlbWVudDogRWxlbWVudDtcbiAgcHVibGljIGJvdW5kczogQm91bmRzO1xuXG4gIGNvbnN0cnVjdG9yKGF0dHJzOiBBdHRycykge1xuICAgIHRoaXMuYXR0cnMgPSBhdHRycztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRW1iZXJpc2hDdXJseUNvbXBvbmVudCBleHRlbmRzIEdsaW1tZXJPYmplY3Qge1xuICBwdWJsaWMgZGlydGluZXNzVGFnID0gbmV3IERpcnR5YWJsZVRhZygpO1xuICBwdWJsaWMgdGFnTmFtZTogc3RyaW5nID0gbnVsbDtcbiAgcHVibGljIGF0dHJpYnV0ZUJpbmRpbmdzOiBzdHJpbmdbXSA9IG51bGw7XG4gIHB1YmxpYyBhdHRyczogQXR0cnM7XG4gIHB1YmxpYyBlbGVtZW50OiBFbGVtZW50O1xuICBwdWJsaWMgYm91bmRzOiBCb3VuZHM7XG4gIHB1YmxpYyBwYXJlbnRWaWV3OiBDb21wb25lbnQgPSBudWxsO1xuICBwdWJsaWMgYXJnczogUHJvY2Vzc2VkQXJncztcblxuICBzdGF0aWMgY3JlYXRlKGFyZ3M6IHsgYXR0cnM6IEF0dHJzIH0pOiBFbWJlcmlzaEN1cmx5Q29tcG9uZW50IHtcbiAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGFyZ3MpIGFzIEVtYmVyaXNoQ3VybHlDb21wb25lbnQ7XG4gIH1cblxuICByZWNvbXB1dGUoKSB7XG4gICAgdGhpcy5kaXJ0aW5lc3NUYWcuZGlydHkoKTtcbiAgfVxuXG4gIGRpZEluaXRBdHRycyhvcHRpb25zIDogeyBhdHRycyA6IEF0dHJzIH0pIHt9XG4gIGRpZFVwZGF0ZUF0dHJzKGRpZmYgOiBBdHRyc0RpZmYpIHt9XG4gIGRpZFJlY2VpdmVBdHRycyhkaWZmIDogQXR0cnNEaWZmKSB7fVxuICB3aWxsSW5zZXJ0RWxlbWVudCgpIHt9XG4gIHdpbGxVcGRhdGUoKSB7fVxuICB3aWxsUmVuZGVyKCkge31cbiAgZGlkSW5zZXJ0RWxlbWVudCgpIHt9XG4gIGRpZFVwZGF0ZSgpIHt9XG4gIGRpZFJlbmRlcigpIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQgZXh0ZW5kcyBHbGltbWVyT2JqZWN0IHtcbiAgcHVibGljIGRpcnRpbmVzc1RhZyA9IG5ldyBEaXJ0eWFibGVUYWcoKTtcbiAgcHVibGljIGF0dHJzOiBBdHRycztcbiAgcHVibGljIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gIHB1YmxpYyBib3VuZHM6IEJvdW5kcztcbiAgcHVibGljIHBhcmVudFZpZXc6IENvbXBvbmVudCA9IG51bGw7XG5cbiAgc3RhdGljIGNyZWF0ZShhcmdzOiB7IGF0dHJzOiBBdHRycyB9KTogRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50IHtcbiAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGFyZ3MpIGFzIEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudDtcbiAgfVxuXG4gIHJlY29tcHV0ZSgpIHtcbiAgICB0aGlzLmRpcnRpbmVzc1RhZy5kaXJ0eSgpO1xuICB9XG5cbiAgZGlkSW5pdEF0dHJzKG9wdGlvbnMgOiB7IGF0dHJzIDogQXR0cnMgfSkge31cbiAgZGlkVXBkYXRlQXR0cnMoZGlmZiA6IEF0dHJzRGlmZikge31cbiAgZGlkUmVjZWl2ZUF0dHJzKGRpZmYgOiBBdHRyc0RpZmYpIHt9XG4gIHdpbGxJbnNlcnRFbGVtZW50KCkge31cbiAgd2lsbFVwZGF0ZSgpIHt9XG4gIHdpbGxSZW5kZXIoKSB7fVxuICBkaWRJbnNlcnRFbGVtZW50KCkge31cbiAgZGlkVXBkYXRlKCkge31cbiAgZGlkUmVuZGVyKCkge31cbn1cblxuY2xhc3MgQmFzaWNDb21wb25lbnRNYW5hZ2VyIGltcGxlbWVudHMgQ29tcG9uZW50TWFuYWdlcjxCYXNpY0NvbXBvbmVudD4ge1xuICBwcmVwYXJlQXJncyhkZWZpbml0aW9uOiBCYXNpY0NvbXBvbmVudERlZmluaXRpb24sIGFyZ3M6IEV2YWx1YXRlZEFyZ3MpOiBFdmFsdWF0ZWRBcmdzIHtcbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIGNyZWF0ZShlbnZpcm9ubWVudDogRW52aXJvbm1lbnQsIGRlZmluaXRpb246IEJhc2ljQ29tcG9uZW50RGVmaW5pdGlvbiwgYXJnczogRXZhbHVhdGVkQXJncyk6IEJhc2ljQ29tcG9uZW50IHtcbiAgICBsZXQga2xhc3MgPSBkZWZpbml0aW9uLkNvbXBvbmVudENsYXNzIHx8IEJhc2ljQ29tcG9uZW50O1xuICAgIHJldHVybiBuZXcga2xhc3MoYXJncy5uYW1lZC52YWx1ZSgpKTtcbiAgfVxuXG4gIGxheW91dEZvcihkZWZpbml0aW9uOiBCYXNpY0NvbXBvbmVudERlZmluaXRpb24sIGNvbXBvbmVudDogQmFzaWNDb21wb25lbnQsIGVudjogVGVzdEVudmlyb25tZW50KTogQ29tcGlsZWRQcm9ncmFtIHtcbiAgICBsZXQgbGF5b3V0ID0gZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdO1xuXG4gICAgaWYgKGxheW91dCkge1xuICAgICAgcmV0dXJuIGxheW91dDtcbiAgICB9XG5cbiAgICByZXR1cm4gZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdID0gY29tcGlsZUxheW91dChuZXcgQmFzaWNDb21wb25lbnRMYXlvdXRDb21waWxlcihkZWZpbml0aW9uLmxheW91dFN0cmluZyksIGVudik7XG4gIH1cblxuICBnZXRTZWxmKGNvbXBvbmVudDogQmFzaWNDb21wb25lbnQpOiBQYXRoUmVmZXJlbmNlPE9wYXF1ZT4ge1xuICAgIHJldHVybiBuZXcgVXBkYXRhYmxlUmVmZXJlbmNlKGNvbXBvbmVudCk7XG4gIH1cblxuICBkaWRDcmVhdGVFbGVtZW50KGNvbXBvbmVudDogQmFzaWNDb21wb25lbnQsIGVsZW1lbnQ6IEVsZW1lbnQpIHtcbiAgICBjb21wb25lbnQuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICBkaWRSZW5kZXJMYXlvdXQoY29tcG9uZW50OiBCYXNpY0NvbXBvbmVudCwgYm91bmRzOiBCb3VuZHMpIHtcbiAgICBjb21wb25lbnQuYm91bmRzID0gYm91bmRzO1xuICB9XG5cbiAgZGlkQ3JlYXRlKCkge31cblxuICBnZXRUYWcoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB1cGRhdGUoY29tcG9uZW50OiBCYXNpY0NvbXBvbmVudCwgYXR0cnM6IEV2YWx1YXRlZEFyZ3MpIHtcbiAgICBjb21wb25lbnQuYXR0cnMgPSBhdHRycy5uYW1lZC52YWx1ZSgpO1xuICB9XG5cbiAgZGlkVXBkYXRlTGF5b3V0KCkge31cblxuICBkaWRVcGRhdGUoKSB7fVxuXG4gIGdldERlc3RydWN0b3IoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuY29uc3QgQkFTSUNfQ09NUE9ORU5UX01BTkFHRVIgPSBuZXcgQmFzaWNDb21wb25lbnRNYW5hZ2VyKCk7XG5cbmNsYXNzIFN0YXRpY1RhZ2xlc3NDb21wb25lbnRNYW5hZ2VyIGV4dGVuZHMgQmFzaWNDb21wb25lbnRNYW5hZ2VyIHtcbiAgbGF5b3V0Rm9yKGRlZmluaXRpb246IFN0YXRpY1RhZ2xlc3NDb21wb25lbnREZWZpbml0aW9uLCBjb21wb25lbnQ6IEJhc2ljQ29tcG9uZW50LCBlbnY6IFRlc3RFbnZpcm9ubWVudCk6IENvbXBpbGVkUHJvZ3JhbSB7XG4gICAgbGV0IGxheW91dCA9IGVudi5jb21waWxlZExheW91dHNbZGVmaW5pdGlvbi5uYW1lXTtcblxuICAgIGlmIChsYXlvdXQpIHtcbiAgICAgIHJldHVybiBsYXlvdXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudi5jb21waWxlZExheW91dHNbZGVmaW5pdGlvbi5uYW1lXSA9IGNvbXBpbGVMYXlvdXQobmV3IFN0YXRpY1RhZ2xlc3NDb21wb25lbnRMYXlvdXRDb21waWxlcihkZWZpbml0aW9uLmxheW91dFN0cmluZyksIGVudik7XG4gIH1cbn1cblxuY29uc3QgU1RBVElDX1RBR0xFU1NfQ09NUE9ORU5UX01BTkFHRVIgPSBuZXcgU3RhdGljVGFnbGVzc0NvbXBvbmVudE1hbmFnZXIoKTtcblxuY29uc3QgQmFzZUVtYmVyaXNoR2xpbW1lckNvbXBvbmVudCA9IEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudC5leHRlbmQoKSBhcyB0eXBlb2YgRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50O1xuXG5jbGFzcyBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnRNYW5hZ2VyIGltcGxlbWVudHMgQ29tcG9uZW50TWFuYWdlcjxFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQ+IHtcbiAgcHJlcGFyZUFyZ3MoZGVmaW5pdGlvbjogRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50RGVmaW5pdGlvbiwgYXJnczogRXZhbHVhdGVkQXJncyk6IEV2YWx1YXRlZEFyZ3Mge1xuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgY3JlYXRlKGVudmlyb25tZW50OiBFbnZpcm9ubWVudCwgZGVmaW5pdGlvbjogRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50RGVmaW5pdGlvbiwgYXJnczogRXZhbHVhdGVkQXJncywgZHluYW1pY1Njb3BlLCBjYWxsZXJTZWxmOiBQYXRoUmVmZXJlbmNlPE9wYXF1ZT4sIGhhc0RlZmF1bHRCbG9jazogYm9vbGVhbik6IEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudCB7XG4gICAgbGV0IGtsYXNzID0gZGVmaW5pdGlvbi5Db21wb25lbnRDbGFzcyB8fCBCYXNlRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50O1xuICAgIGxldCBhdHRycyA9IGFyZ3MubmFtZWQudmFsdWUoKTtcbiAgICBsZXQgY29tcG9uZW50ID0ga2xhc3MuY3JlYXRlKHsgYXR0cnMgfSk7XG5cbiAgICBjb21wb25lbnQuZGlkSW5pdEF0dHJzKHsgYXR0cnMgfSk7XG4gICAgY29tcG9uZW50LmRpZFJlY2VpdmVBdHRycyh7IG9sZEF0dHJzOiBudWxsLCBuZXdBdHRyczogYXR0cnMgfSk7XG4gICAgY29tcG9uZW50LndpbGxJbnNlcnRFbGVtZW50KCk7XG4gICAgY29tcG9uZW50LndpbGxSZW5kZXIoKTtcblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICBsYXlvdXRGb3IoZGVmaW5pdGlvbjogRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50RGVmaW5pdGlvbiwgY29tcG9uZW50OiBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQsIGVudjogVGVzdEVudmlyb25tZW50KTogQ29tcGlsZWRQcm9ncmFtIHtcbiAgICBpZiAoZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdKSB7XG4gICAgICByZXR1cm4gZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdO1xuICAgIH1cbiAgICByZXR1cm4gZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdID0gY29tcGlsZUxheW91dChuZXcgRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50TGF5b3V0Q29tcGlsZXIoZGVmaW5pdGlvbi5sYXlvdXRTdHJpbmcpLCBlbnYpO1xuICB9XG5cbiAgZ2V0U2VsZihjb21wb25lbnQ6IEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudCk6IFBhdGhSZWZlcmVuY2U8T3BhcXVlPiB7XG4gICAgcmV0dXJuIG5ldyBVcGRhdGFibGVSZWZlcmVuY2UoY29tcG9uZW50KTtcbiAgfVxuXG4gIGRpZENyZWF0ZUVsZW1lbnQoY29tcG9uZW50OiBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQsIGVsZW1lbnQ6IEVsZW1lbnQpIHtcbiAgICBjb21wb25lbnQuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICBkaWRSZW5kZXJMYXlvdXQoY29tcG9uZW50OiBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQsIGJvdW5kczogQm91bmRzKSB7XG4gICAgY29tcG9uZW50LmJvdW5kcyA9IGJvdW5kcztcbiAgfVxuXG4gIGRpZENyZWF0ZShjb21wb25lbnQ6IEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudCkge1xuICAgIGNvbXBvbmVudC5kaWRJbnNlcnRFbGVtZW50KCk7XG4gICAgY29tcG9uZW50LmRpZFJlbmRlcigpO1xuICB9XG5cbiAgZ2V0VGFnKGNvbXBvbmVudDogRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudC5kaXJ0aW5lc3NUYWc7XG4gIH1cblxuICB1cGRhdGUoY29tcG9uZW50OiBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQsIGFyZ3M6IEV2YWx1YXRlZEFyZ3MpIHtcbiAgICBsZXQgb2xkQXR0cnMgPSBjb21wb25lbnQuYXR0cnM7XG4gICAgbGV0IG5ld0F0dHJzID0gYXJncy5uYW1lZC52YWx1ZSgpO1xuXG4gICAgY29tcG9uZW50LnNldCgnYXR0cnMnLCBuZXdBdHRycyk7XG4gICAgY29tcG9uZW50LmRpZFVwZGF0ZUF0dHJzKHsgb2xkQXR0cnMsIG5ld0F0dHJzIH0pO1xuICAgIGNvbXBvbmVudC5kaWRSZWNlaXZlQXR0cnMoeyBvbGRBdHRycywgbmV3QXR0cnMgfSk7XG4gICAgY29tcG9uZW50LndpbGxVcGRhdGUoKTtcbiAgICBjb21wb25lbnQud2lsbFJlbmRlcigpO1xuICB9XG5cbiAgZGlkVXBkYXRlTGF5b3V0KCkge31cblxuICBkaWRVcGRhdGUoY29tcG9uZW50OiBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQpIHtcbiAgICBjb21wb25lbnQuZGlkVXBkYXRlKCk7XG4gICAgY29tcG9uZW50LmRpZFJlbmRlcigpO1xuICB9XG5cbiAgZ2V0RGVzdHJ1Y3Rvcihjb21wb25lbnQ6IEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudCk6IERlc3Ryb3lhYmxlIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGVzdHJveSgpIHtcbiAgICAgICAgY29tcG9uZW50LmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9jZXNzZWRBcmdzIHtcbiAgdGFnOiBSZXZpc2lvblRhZztcbiAgbmFtZWQ6IEV2YWx1YXRlZE5hbWVkQXJncztcbiAgcG9zaXRpb25hbDogRXZhbHVhdGVkUG9zaXRpb25hbEFyZ3M7XG4gIHBvc2l0aW9uYWxQYXJhbU5hbWVzOiBBcnJheTxzdHJpbmc+O1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3M6IEV2YWx1YXRlZEFyZ3MsIHBvc2l0aW9uYWxQYXJhbXNEZWZpbml0aW9uOiBzdHJpbmdbXSkge1xuICAgIHRoaXMudGFnID0gYXJncy50YWc7XG4gICAgdGhpcy5uYW1lZCA9IGFyZ3MubmFtZWQ7XG4gICAgdGhpcy5wb3NpdGlvbmFsID0gYXJncy5wb3NpdGlvbmFsO1xuICAgIHRoaXMucG9zaXRpb25hbFBhcmFtTmFtZXMgPSBwb3NpdGlvbmFsUGFyYW1zRGVmaW5pdGlvbjtcbiAgfVxuXG4gIHZhbHVlKCkge1xuICAgIGxldCB7IG5hbWVkLCBwb3NpdGlvbmFsLCBwb3NpdGlvbmFsUGFyYW1OYW1lcyB9ID0gdGhpcztcblxuICAgIGxldCBtZXJnZWQgPSBPYmplY3QuYXNzaWduKHt9LCBuYW1lZC52YWx1ZSgpKTtcblxuICAgIGlmIChwb3NpdGlvbmFsUGFyYW1OYW1lcyAmJiBwb3NpdGlvbmFsUGFyYW1OYW1lcy5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zaXRpb25hbFBhcmFtTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5hbWUgPSBwb3NpdGlvbmFsUGFyYW1OYW1lc1tpXTtcbiAgICAgICAgbGV0IHJlZmVyZW5jZSA9IHBvc2l0aW9uYWwuYXQoaSk7XG5cbiAgICAgICAgbWVyZ2VkW25hbWVdID0gcmVmZXJlbmNlLnZhbHVlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGF0dHJzOiBtZXJnZWQsXG4gICAgICBwcm9wczogbWVyZ2VkXG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzQXJncyhhcmdzOiBFdmFsdWF0ZWRBcmdzLCBwb3NpdGlvbmFsUGFyYW1zRGVmaW5pdGlvbjogc3RyaW5nW10pIDogUHJvY2Vzc2VkQXJncyB7XG4gIHJldHVybiBuZXcgUHJvY2Vzc2VkQXJncyhhcmdzLCBwb3NpdGlvbmFsUGFyYW1zRGVmaW5pdGlvbik7XG59XG5cbmNvbnN0IEVNQkVSSVNIX0dMSU1NRVJfQ09NUE9ORU5UX01BTkFHRVIgPSBuZXcgRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50TWFuYWdlcigpO1xuXG5jb25zdCBCYXNlRW1iZXJpc2hDdXJseUNvbXBvbmVudCA9IEVtYmVyaXNoQ3VybHlDb21wb25lbnQuZXh0ZW5kKCkgYXMgdHlwZW9mIEVtYmVyaXNoQ3VybHlDb21wb25lbnQ7XG5cbmNsYXNzIEVtYmVyaXNoQ3VybHlDb21wb25lbnRNYW5hZ2VyIGltcGxlbWVudHMgQ29tcG9uZW50TWFuYWdlcjxFbWJlcmlzaEN1cmx5Q29tcG9uZW50PiB7XG4gIHByZXBhcmVBcmdzKGRlZmluaXRpb246IEVtYmVyaXNoQ3VybHlDb21wb25lbnREZWZpbml0aW9uLCBhcmdzOiBFdmFsdWF0ZWRBcmdzLCBkeW5hbWljU2NvcGU6IER5bmFtaWNTY29wZSk6IEV2YWx1YXRlZEFyZ3Mge1xuICAgIGxldCBkeW4gPSBkZWZpbml0aW9uLkNvbXBvbmVudENsYXNzID8gZGVmaW5pdGlvbi5Db21wb25lbnRDbGFzc1snZnJvbUR5bmFtaWNTY29wZSddIDogbnVsbDtcbiAgICBpZiAoZHluKSB7XG4gICAgICBsZXQgbWFwID0gYXNzaWduKHt9LCBhcmdzLm5hbWVkLm1hcCk7XG4gICAgICBkeW4uZm9yRWFjaChuYW1lID0+IG1hcFtuYW1lXSA9IGR5bmFtaWNTY29wZS5nZXQobmFtZSkpO1xuICAgICAgYXJncyA9IEV2YWx1YXRlZEFyZ3MuY3JlYXRlKGFyZ3MucG9zaXRpb25hbCwgRXZhbHVhdGVkTmFtZWRBcmdzLmNyZWF0ZShtYXApLCBhcmdzLmJsb2Nrcyk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgY3JlYXRlKGVudmlyb25tZW50OiBFbnZpcm9ubWVudCwgZGVmaW5pdGlvbjogRW1iZXJpc2hDdXJseUNvbXBvbmVudERlZmluaXRpb24sIGFyZ3M6IEV2YWx1YXRlZEFyZ3MsIGR5bmFtaWNTY29wZTogRHluYW1pY1Njb3BlLCBjYWxsZXJTZWxmOiBQYXRoUmVmZXJlbmNlPE9wYXF1ZT4pOiBFbWJlcmlzaEN1cmx5Q29tcG9uZW50IHtcbiAgICBsZXQga2xhc3MgPSBkZWZpbml0aW9uLkNvbXBvbmVudENsYXNzIHx8IEJhc2VFbWJlcmlzaEN1cmx5Q29tcG9uZW50O1xuICAgIGxldCBwcm9jZXNzZWRBcmdzID0gcHJvY2Vzc0FyZ3MoYXJncywga2xhc3NbJ3Bvc2l0aW9uYWxQYXJhbXMnXSk7XG4gICAgbGV0IHsgYXR0cnMgfSA9IHByb2Nlc3NlZEFyZ3MudmFsdWUoKTtcbiAgICBsZXQgc2VsZiA9IGNhbGxlclNlbGYudmFsdWUoKTtcbiAgICBsZXQgbWVyZ2VkID0gYXNzaWduKHt9LCBhdHRycywgeyBhdHRycyB9LCB7IGFyZ3M6IHByb2Nlc3NlZEFyZ3MgfSwgeyB0YXJnZXRPYmplY3Q6IHNlbGYgfSk7XG4gICAgbGV0IGNvbXBvbmVudCA9IGtsYXNzLmNyZWF0ZShtZXJnZWQpO1xuXG4gICAgY29tcG9uZW50LmRpZEluaXRBdHRycyh7IGF0dHJzIH0pO1xuICAgIGNvbXBvbmVudC5kaWRSZWNlaXZlQXR0cnMoeyBvbGRBdHRyczogbnVsbCwgbmV3QXR0cnM6IGF0dHJzIH0pO1xuICAgIGNvbXBvbmVudC53aWxsSW5zZXJ0RWxlbWVudCgpO1xuICAgIGNvbXBvbmVudC53aWxsUmVuZGVyKCk7XG5cbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG5cbiAgbGF5b3V0Rm9yKGRlZmluaXRpb246IEVtYmVyaXNoQ3VybHlDb21wb25lbnREZWZpbml0aW9uLCBjb21wb25lbnQ6IEVtYmVyaXNoQ3VybHlDb21wb25lbnQsIGVudjogVGVzdEVudmlyb25tZW50KTogQ29tcGlsZWRQcm9ncmFtIHtcbiAgICBsZXQgbGF5b3V0ID0gZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdO1xuXG4gICAgaWYgKGxheW91dCkge1xuICAgICAgcmV0dXJuIGxheW91dDtcbiAgICB9XG5cbiAgICBsZXQgbGF5b3V0U3RyaW5nID0gZGVmaW5pdGlvbi5sYXlvdXRTdHJpbmc7XG4gICAgbGV0IGxhdGVCb3VuZCA9ICFsYXlvdXRTdHJpbmc7XG5cbiAgICBpZiAoIWxheW91dFN0cmluZyAmJiBsYXlvdXRTdHJpbmcgIT09ICcnKSB7XG4gICAgICBsYXlvdXRTdHJpbmcgPSBjb21wb25lbnRbJ2xheW91dCddO1xuICAgIH1cblxuICAgIGxheW91dCA9IGNvbXBpbGVMYXlvdXQobmV3IEVtYmVyaXNoQ3VybHlDb21wb25lbnRMYXlvdXRDb21waWxlcihsYXlvdXRTdHJpbmcpLCBlbnYpO1xuXG4gICAgcmV0dXJuIGxhdGVCb3VuZCA/IGxheW91dCA6IChlbnYuY29tcGlsZWRMYXlvdXRzW2RlZmluaXRpb24ubmFtZV0gPSBsYXlvdXQpO1xuICB9XG5cbiAgZ2V0U2VsZihjb21wb25lbnQ6IEVtYmVyaXNoQ3VybHlDb21wb25lbnQpOiBQYXRoUmVmZXJlbmNlPE9wYXF1ZT4ge1xuICAgIHJldHVybiBuZXcgVXBkYXRhYmxlUmVmZXJlbmNlKGNvbXBvbmVudCk7XG4gIH1cblxuICBkaWRDcmVhdGVFbGVtZW50KGNvbXBvbmVudDogRW1iZXJpc2hDdXJseUNvbXBvbmVudCwgZWxlbWVudDogRWxlbWVudCwgb3BlcmF0aW9uczogRWxlbWVudE9wZXJhdGlvbnMpIHtcbiAgICBjb21wb25lbnQuZWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICBsZXQgYmluZGluZ3MgPSBjb21wb25lbnQuYXR0cmlidXRlQmluZGluZ3M7XG4gICAgbGV0IHJvb3RSZWYgPSBuZXcgVXBkYXRhYmxlUmVmZXJlbmNlKGNvbXBvbmVudCk7XG5cbiAgICBpZiAoYmluZGluZ3MpIHtcbiAgICAgIGZvciAobGV0IGk9MDsgaTxiaW5kaW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgYXR0cmlidXRlID0gYmluZGluZ3NbaV07XG4gICAgICAgIGxldCByZWZlcmVuY2UgPSByb290UmVmLmdldChhdHRyaWJ1dGUpIGFzIFBhdGhSZWZlcmVuY2U8c3RyaW5nPjtcblxuICAgICAgICBvcGVyYXRpb25zLmFkZER5bmFtaWNBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlLCByZWZlcmVuY2UsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkaWRSZW5kZXJMYXlvdXQoY29tcG9uZW50OiBFbWJlcmlzaEN1cmx5Q29tcG9uZW50LCBib3VuZHM6IEJvdW5kcykge1xuICAgIGNvbXBvbmVudC5ib3VuZHMgPSBib3VuZHM7XG4gIH1cblxuICBkaWRDcmVhdGUoY29tcG9uZW50OiBFbWJlcmlzaEN1cmx5Q29tcG9uZW50KSB7XG4gICAgY29tcG9uZW50LmRpZEluc2VydEVsZW1lbnQoKTtcbiAgICBjb21wb25lbnQuZGlkUmVuZGVyKCk7XG4gIH1cblxuICBnZXRUYWcoY29tcG9uZW50OiBFbWJlcmlzaEN1cmx5Q29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudC5kaXJ0aW5lc3NUYWc7XG4gIH1cblxuICB1cGRhdGUoY29tcG9uZW50OiBFbWJlcmlzaEN1cmx5Q29tcG9uZW50LCBhcmdzOiBFdmFsdWF0ZWRBcmdzKSB7XG4gICAgbGV0IG9sZEF0dHJzID0gY29tcG9uZW50LmF0dHJzO1xuICAgIGxldCBuZXdBdHRycyA9IGNvbXBvbmVudC5hcmdzLnZhbHVlKCkuYXR0cnM7XG4gICAgbGV0IG1lcmdlZCA9IGFzc2lnbih7fSwgbmV3QXR0cnMsIHsgYXR0cnM6IG5ld0F0dHJzIH0pO1xuXG4gICAgY29tcG9uZW50LnNldFByb3BlcnRpZXMobWVyZ2VkKTtcbiAgICBjb21wb25lbnQuZGlkVXBkYXRlQXR0cnMoeyBvbGRBdHRycywgbmV3QXR0cnMgfSk7XG4gICAgY29tcG9uZW50LmRpZFJlY2VpdmVBdHRycyh7IG9sZEF0dHJzLCBuZXdBdHRycyB9KTtcbiAgICBjb21wb25lbnQud2lsbFVwZGF0ZSgpO1xuICAgIGNvbXBvbmVudC53aWxsUmVuZGVyKCk7XG4gIH1cblxuICBkaWRVcGRhdGVMYXlvdXQoKSB7fVxuXG4gIGRpZFVwZGF0ZShjb21wb25lbnQ6IEVtYmVyaXNoQ3VybHlDb21wb25lbnQpIHtcbiAgICBjb21wb25lbnQuZGlkVXBkYXRlKCk7XG4gICAgY29tcG9uZW50LmRpZFJlbmRlcigpO1xuICB9XG5cbiAgZ2V0RGVzdHJ1Y3Rvcihjb21wb25lbnQ6IEVtYmVyaXNoQ3VybHlDb21wb25lbnQpOiBEZXN0cm95YWJsZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlc3Ryb3kgKCkge1xuICAgICAgICBjb21wb25lbnQuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuY29uc3QgRU1CRVJJU0hfQ1VSTFlfQ09NUE9ORU5UX01BTkFHRVIgPSBuZXcgRW1iZXJpc2hDdXJseUNvbXBvbmVudE1hbmFnZXIoKTtcblxuZnVuY3Rpb24gZW1iZXJUb0Jvb2wodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUubGVuZ3RoID4gMDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gISF2YWx1ZTtcbiAgfVxufVxuXG5jbGFzcyBFbWJlcmlzaENvbmRpdGlvbmFsUmVmZXJlbmNlIGV4dGVuZHMgQ29uZGl0aW9uYWxSZWZlcmVuY2Uge1xuICBwcm90ZWN0ZWQgdG9Cb29sKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZW1iZXJUb0Jvb2wodmFsdWUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTaW1wbGVQYXRoUmVmZXJlbmNlPFQ+IGltcGxlbWVudHMgUGF0aFJlZmVyZW5jZTxUPiB7XG4gIHByaXZhdGUgcGFyZW50OiBSZWZlcmVuY2U8VD47XG4gIHByaXZhdGUgcHJvcGVydHk6IHN0cmluZztcbiAgcHVibGljIHRhZyA9IFZPTEFUSUxFX1RBRztcblxuICBjb25zdHJ1Y3RvcihwYXJlbnQ6IFJlZmVyZW5jZTxUPiwgcHJvcGVydHk6IHN0cmluZykge1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMucHJvcGVydHkgPSBwcm9wZXJ0eTtcbiAgfVxuXG4gIHZhbHVlKCk6IFQge1xuICAgIHJldHVybiB0aGlzLnBhcmVudC52YWx1ZSgpW3RoaXMucHJvcGVydHldO1xuICB9XG5cbiAgZ2V0KHByb3A6IHN0cmluZyk6IFBhdGhSZWZlcmVuY2U8T3BhcXVlPiB7XG4gICAgcmV0dXJuIG5ldyBTaW1wbGVQYXRoUmVmZXJlbmNlKHRoaXMsIHByb3ApO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIFVzZXJIZWxwZXIgPSAoYXJnczogUmVhZG9ubHlBcnJheTxPcGFxdWU+LCBuYW1lZDogRGljdDxPcGFxdWU+KSA9PiBhbnk7XG5cbmNsYXNzIEhlbHBlclJlZmVyZW5jZSBpbXBsZW1lbnRzIFBhdGhSZWZlcmVuY2U8T3BhcXVlPiB7XG4gIHByaXZhdGUgaGVscGVyOiBVc2VySGVscGVyO1xuICBwcml2YXRlIGFyZ3M6IEV2YWx1YXRlZEFyZ3M7XG4gIHB1YmxpYyB0YWcgPSBWT0xBVElMRV9UQUc7XG5cbiAgY29uc3RydWN0b3IoaGVscGVyOiBVc2VySGVscGVyLCBhcmdzOiBFdmFsdWF0ZWRBcmdzKSB7XG4gICAgdGhpcy5oZWxwZXIgPSBoZWxwZXI7XG4gICAgdGhpcy5hcmdzID0gYXJncztcbiAgfVxuXG4gIHZhbHVlKCkge1xuICAgIGxldCB7IGhlbHBlciwgYXJnczogeyBwb3NpdGlvbmFsLCBuYW1lZCB9IH0gPSB0aGlzO1xuXG4gICAgcmV0dXJuIGhlbHBlcihwb3NpdGlvbmFsLnZhbHVlKCksIG5hbWVkLnZhbHVlKCkpO1xuICB9XG5cbiAgZ2V0KHByb3A6IHN0cmluZyk6IFNpbXBsZVBhdGhSZWZlcmVuY2U8T3BhcXVlPiB7XG4gICAgcmV0dXJuIG5ldyBTaW1wbGVQYXRoUmVmZXJlbmNlKHRoaXMsIHByb3ApO1xuICB9XG59XG5cbmNsYXNzIEluZXJ0TW9kaWZpZXJNYW5hZ2VyIGltcGxlbWVudHMgTW9kaWZpZXJNYW5hZ2VyPE9wYXF1ZT4ge1xuICBjcmVhdGUoKSB7fVxuXG4gIGluc3RhbGwobW9kaWZpZXI6IE9wYXF1ZSkge31cblxuICB1cGRhdGUobW9kaWZpZXI6IE9wYXF1ZSkge31cblxuICBnZXREZXN0cnVjdG9yKG1vZGlmaWVyOiBPcGFxdWUpOiBEZXN0cm95YWJsZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRlc3RNb2RpZmllciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBlbGVtZW50OiBFbGVtZW50LFxuICAgIHB1YmxpYyBhcmdzOiBFdmFsdWF0ZWRBcmdzLFxuICAgIHB1YmxpYyBkb206IElET01DaGFuZ2VzXG4gICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFRlc3RNb2RpZmllck1hbmFnZXIgaW1wbGVtZW50cyBNb2RpZmllck1hbmFnZXI8VGVzdE1vZGlmaWVyPiB7XG4gIHB1YmxpYyBpbnN0YWxsZWRFbGVtZW50czogRWxlbWVudFtdID0gW107XG4gIHB1YmxpYyB1cGRhdGVkRWxlbWVudHM6IEVsZW1lbnRbXSA9IFtdO1xuICBwdWJsaWMgZGVzdHJveWVkTW9kaWZpZXJzOiBUZXN0TW9kaWZpZXJbXSA9IFtdO1xuXG4gIGNyZWF0ZShlbGVtZW50OiBFbGVtZW50LCBhcmdzOiBFdmFsdWF0ZWRBcmdzLCBkeW5hbWljU2NvcGU6IER5bmFtaWNTY29wZSwgZG9tOiBJRE9NQ2hhbmdlcyk6IFRlc3RNb2RpZmllciB7XG4gICAgcmV0dXJuIG5ldyBUZXN0TW9kaWZpZXIoZWxlbWVudCwgYXJncywgZG9tKTtcbiAgfVxuXG4gIGluc3RhbGwoeyBlbGVtZW50LCBhcmdzLCBkb20gfTogVGVzdE1vZGlmaWVyKSB7XG4gICAgdGhpcy5pbnN0YWxsZWRFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuXG4gICAgbGV0IHBhcmFtID0gYXJncy5wb3NpdGlvbmFsLmF0KDApLnZhbHVlKCk7XG4gICAgZG9tLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1tb2RpZmllcicsIGBpbnN0YWxsZWQgLSAke3BhcmFtfWApO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdXBkYXRlKHsgZWxlbWVudCwgYXJncywgZG9tIH06IFRlc3RNb2RpZmllcikge1xuICAgIHRoaXMudXBkYXRlZEVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG5cbiAgICBsZXQgcGFyYW0gPSBhcmdzLnBvc2l0aW9uYWwuYXQoMCkudmFsdWUoKTtcbiAgICBkb20uc2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLW1vZGlmaWVyJywgYHVwZGF0ZWQgLSAke3BhcmFtfWApO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZ2V0RGVzdHJ1Y3Rvcihtb2RpZmllcjogVGVzdE1vZGlmaWVyKTogRGVzdHJveWFibGUge1xuICAgIHJldHVybiB7XG4gICAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGVzdHJveWVkTW9kaWZpZXJzLnB1c2gobW9kaWZpZXIpO1xuICAgICAgICBsZXQgeyBlbGVtZW50LCBkb20gfSA9IG1vZGlmaWVyO1xuICAgICAgICBkb20ucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLW1vZGlmaWVyJyk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RFbnZpcm9ubWVudE9wdGlvbnMge1xuICBkb2N1bWVudD86IFNpbXBsZS5Eb2N1bWVudDtcbiAgYXBwZW5kT3BlcmF0aW9ucz86IERPTVRyZWVDb25zdHJ1Y3Rpb247XG59XG5cbmV4cG9ydCBjbGFzcyBUZXN0RW52aXJvbm1lbnQgZXh0ZW5kcyBFbnZpcm9ubWVudCB7XG4gIHByaXZhdGUgaGVscGVycyA9IGRpY3Q8R2xpbW1lckhlbHBlcj4oKTtcbiAgcHJpdmF0ZSBtb2RpZmllcnMgPSBkaWN0PE1vZGlmaWVyTWFuYWdlcjxPcGFxdWU+PigpO1xuICBwcml2YXRlIHBhcnRpYWxzID0gZGljdDxQYXJ0aWFsRGVmaW5pdGlvbjx7fT4+KCk7XG4gIHByaXZhdGUgY29tcG9uZW50cyA9IGRpY3Q8Q29tcG9uZW50RGVmaW5pdGlvbjxhbnk+PigpO1xuICBwcml2YXRlIHVzZWxlc3NBbmNob3I6IEhUTUxBbmNob3JFbGVtZW50O1xuICBwdWJsaWMgY29tcGlsZWRMYXlvdXRzID0gZGljdDxDb21waWxlZFByb2dyYW0+KCk7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogVGVzdEVudmlyb25tZW50T3B0aW9ucyA9IHtcbiAgICBkb2N1bWVudDogZG9jdW1lbnQsXG4gICAgYXBwZW5kT3BlcmF0aW9uczogbmV3IERPTVRyZWVDb25zdHJ1Y3Rpb24oZG9jdW1lbnQpXG4gIH0pIHtcbiAgICBzdXBlcih7IGFwcGVuZE9wZXJhdGlvbnM6IG9wdGlvbnMuYXBwZW5kT3BlcmF0aW9ucywgdXBkYXRlT3BlcmF0aW9uczogbmV3IERPTUNoYW5nZXMob3B0aW9ucy5kb2N1bWVudCBhcyBEb2N1bWVudCkgfSk7XG5cbiAgICB0aGlzLnVzZWxlc3NBbmNob3IgPSBvcHRpb25zLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSBhcyBIVE1MQW5jaG9yRWxlbWVudDtcbiAgICB0aGlzLnJlZ2lzdGVySGVscGVyKFwiaWZcIiwgKFtjb25kLCB5ZXMsIG5vXSkgPT4gY29uZCA/IHllcyA6IG5vKTtcbiAgICB0aGlzLnJlZ2lzdGVySGVscGVyKFwidW5sZXNzXCIsIChbY29uZCwgeWVzLCBub10pID0+IGNvbmQgPyBubyA6IHllcyk7XG4gICAgdGhpcy5yZWdpc3RlckludGVybmFsSGVscGVyKFwiLWdldC1keW5hbWljLXZhclwiLCBnZXREeW5hbWljVmFyKTtcbiAgICB0aGlzLnJlZ2lzdGVyTW9kaWZpZXIoXCJhY3Rpb25cIiwgbmV3IEluZXJ0TW9kaWZpZXJNYW5hZ2VyKCkpO1xuXG4gICAgdGhpcy5yZWdpc3RlckludGVybmFsSGVscGVyKFwiY29tcG9uZW50XCIsICh2bSwgYXJncywgc3ltYm9sVGFibGUpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRHluYW1pY0NvbXBvbmVudFJlZmVyZW5jZShhcmdzLnBvc2l0aW9uYWwuYXQoMCksIHZtLmVudiwgc3ltYm9sVGFibGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5yZWdpc3RlckludGVybmFsSGVscGVyKFwiaGFzaFwiLCAodm0sIGFyZ3MpID0+IGFyZ3MubmFtZWQpO1xuICB9XG5cbiAgcHJvdG9jb2xGb3JVUkwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHRoaXMudXNlbGVzc0FuY2hvci5ocmVmID0gdXJsO1xuICAgIHJldHVybiB0aGlzLnVzZWxlc3NBbmNob3IucHJvdG9jb2w7XG4gIH1cblxuICByZWdpc3RlckhlbHBlcihuYW1lOiBzdHJpbmcsIGhlbHBlcjogVXNlckhlbHBlcikge1xuICAgIHRoaXMuaGVscGVyc1tuYW1lXSA9ICh2bTogVk0sIGFyZ3M6IEV2YWx1YXRlZEFyZ3MpID0+IG5ldyBIZWxwZXJSZWZlcmVuY2UoaGVscGVyLCBhcmdzKTtcbiAgfVxuXG4gIHJlZ2lzdGVySW50ZXJuYWxIZWxwZXIobmFtZTogc3RyaW5nLCBoZWxwZXI6IEdsaW1tZXJIZWxwZXIpIHtcbiAgICB0aGlzLmhlbHBlcnNbbmFtZV0gPSBoZWxwZXI7XG4gIH1cblxuICByZWdpc3Rlck1vZGlmaWVyKG5hbWU6IHN0cmluZywgbW9kaWZpZXI6IE1vZGlmaWVyTWFuYWdlcjxPcGFxdWU+KSB7XG4gICAgdGhpcy5tb2RpZmllcnNbbmFtZV0gPSBtb2RpZmllcjtcbiAgfVxuXG4gIHJlZ2lzdGVyUGFydGlhbChuYW1lOiBzdHJpbmcsIHNvdXJjZTogc3RyaW5nKSB7XG4gICAgdGhpcy5wYXJ0aWFsc1tuYW1lXSA9IG5ldyBQYXJ0aWFsRGVmaW5pdGlvbihuYW1lLCByYXdDb21waWxlKHNvdXJjZSwgeyBlbnY6IHRoaXMgfSkpO1xuICB9XG5cbiAgcmVnaXN0ZXJDb21wb25lbnQobmFtZTogc3RyaW5nLCBkZWZpbml0aW9uOiBDb21wb25lbnREZWZpbml0aW9uPGFueT4pIHtcbiAgICB0aGlzLmNvbXBvbmVudHNbbmFtZV0gPSBkZWZpbml0aW9uO1xuICAgIHJldHVybiBkZWZpbml0aW9uO1xuICB9XG5cbiAgcmVnaXN0ZXJCYXNpY0NvbXBvbmVudDxUIGV4dGVuZHMgQmFzaWNDb21wb25lbnQ+KG5hbWU6IHN0cmluZywgQ29tcG9uZW50OiBCYXNpY0NvbXBvbmVudEZhY3RvcnksIGxheW91dDogc3RyaW5nKTogQ29tcG9uZW50RGVmaW5pdGlvbjxCYXNpY0NvbXBvbmVudERlZmluaXRpb24+IHtcbiAgICBsZXQgZGVmaW5pdGlvbiA9IG5ldyBCYXNpY0NvbXBvbmVudERlZmluaXRpb24obmFtZSwgQkFTSUNfQ09NUE9ORU5UX01BTkFHRVIsIENvbXBvbmVudCwgbGF5b3V0KTtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlckNvbXBvbmVudChuYW1lLCBkZWZpbml0aW9uKTtcbiAgfVxuXG4gIHJlZ2lzdGVyU3RhdGljVGFnbGVzc0NvbXBvbmVudChuYW1lOiBzdHJpbmcsIENvbXBvbmVudDogQmFzaWNDb21wb25lbnRGYWN0b3J5LCBsYXlvdXQ6IHN0cmluZyk6IENvbXBvbmVudERlZmluaXRpb248QmFzaWNDb21wb25lbnRGYWN0b3J5PiB7XG4gICAgbGV0IGRlZmluaXRpb24gPSBuZXcgU3RhdGljVGFnbGVzc0NvbXBvbmVudERlZmluaXRpb24obmFtZSwgU1RBVElDX1RBR0xFU1NfQ09NUE9ORU5UX01BTkFHRVIsIENvbXBvbmVudCwgbGF5b3V0KTtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlckNvbXBvbmVudChuYW1lLCBkZWZpbml0aW9uKTtcbiAgfVxuXG4gIHJlZ2lzdGVyRW1iZXJpc2hDdXJseUNvbXBvbmVudChuYW1lOiBzdHJpbmcsIENvbXBvbmVudDogRW1iZXJpc2hDdXJseUNvbXBvbmVudEZhY3RvcnksIGxheW91dDogc3RyaW5nKTogQ29tcG9uZW50RGVmaW5pdGlvbjxFbWJlcmlzaEN1cmx5Q29tcG9uZW50RGVmaW5pdGlvbj4ge1xuICAgIGxldCBkZWZpbml0aW9uID0gbmV3IEVtYmVyaXNoQ3VybHlDb21wb25lbnREZWZpbml0aW9uKG5hbWUsIEVNQkVSSVNIX0NVUkxZX0NPTVBPTkVOVF9NQU5BR0VSLCBDb21wb25lbnQsIGxheW91dCk7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJDb21wb25lbnQobmFtZSwgZGVmaW5pdGlvbik7XG4gIH1cblxuICByZWdpc3RlckVtYmVyaXNoR2xpbW1lckNvbXBvbmVudChuYW1lOiBzdHJpbmcsIENvbXBvbmVudDogRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50RmFjdG9yeSwgbGF5b3V0OiBzdHJpbmcpOiBDb21wb25lbnREZWZpbml0aW9uPEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudERlZmluaXRpb24+IHtcbiAgICBsZXQgZGVmaW5pdGlvbiA9IG5ldyBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnREZWZpbml0aW9uKG5hbWUsIEVNQkVSSVNIX0dMSU1NRVJfQ09NUE9ORU5UX01BTkFHRVIsIENvbXBvbmVudCwgbGF5b3V0KTtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlckNvbXBvbmVudChuYW1lLCBkZWZpbml0aW9uKTtcbiAgfVxuXG4gIHRvQ29uZGl0aW9uYWxSZWZlcmVuY2UocmVmZXJlbmNlOiBSZWZlcmVuY2U8YW55Pik6IFJlZmVyZW5jZTxib29sZWFuPiB7XG4gICAgaWYgKGlzQ29uc3QocmVmZXJlbmNlKSkge1xuICAgICAgcmV0dXJuIFByaW1pdGl2ZVJlZmVyZW5jZS5jcmVhdGUoZW1iZXJUb0Jvb2wocmVmZXJlbmNlLnZhbHVlKCkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEVtYmVyaXNoQ29uZGl0aW9uYWxSZWZlcmVuY2UocmVmZXJlbmNlKTtcbiAgfVxuXG4gIG1hY3JvcygpOiB7IGJsb2NrczogQmxvY2tNYWNyb3MsIGlubGluZXM6IElubGluZU1hY3JvcyB9IHtcbiAgICBsZXQgbWFjcm9zID0gc3VwZXIubWFjcm9zKCk7XG4gICAgcG9wdWxhdGVCbG9ja3MobWFjcm9zLmJsb2NrcywgbWFjcm9zLmlubGluZXMpO1xuICAgIHJldHVybiBtYWNyb3M7XG4gIH1cblxuICBoYXNIZWxwZXIoaGVscGVyTmFtZTogc3RyaW5nW10pIHtcbiAgICByZXR1cm4gaGVscGVyTmFtZS5sZW5ndGggPT09IDEgJiYgKDxzdHJpbmc+aGVscGVyTmFtZVswXSBpbiB0aGlzLmhlbHBlcnMpO1xuICB9XG5cbiAgbG9va3VwSGVscGVyKGhlbHBlclBhcnRzOiBzdHJpbmdbXSkge1xuICAgIGxldCBoZWxwZXJOYW1lID0gaGVscGVyUGFydHNbMF07XG5cbiAgICBsZXQgaGVscGVyID0gdGhpcy5oZWxwZXJzW2hlbHBlck5hbWVdO1xuXG4gICAgaWYgKCFoZWxwZXIpIHRocm93IG5ldyBFcnJvcihgSGVscGVyIGZvciAke2hlbHBlclBhcnRzLmpvaW4oJy4nKX0gbm90IGZvdW5kLmApO1xuXG4gICAgcmV0dXJuIGhlbHBlcjtcbiAgfVxuXG4gIGhhc1BhcnRpYWwocGFydGlhbE5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiBwYXJ0aWFsTmFtZSBpbiB0aGlzLnBhcnRpYWxzO1xuICB9XG5cbiAgbG9va3VwUGFydGlhbChwYXJ0aWFsTmFtZTogc3RyaW5nKSB7XG4gICAgbGV0IHBhcnRpYWwgPSB0aGlzLnBhcnRpYWxzW3BhcnRpYWxOYW1lXTtcblxuICAgIHJldHVybiBwYXJ0aWFsO1xuICB9XG5cbiAgaGFzQ29tcG9uZW50RGVmaW5pdGlvbihuYW1lOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMuY29tcG9uZW50c1tuYW1lWzBdXTtcbiAgfVxuXG4gIGdldENvbXBvbmVudERlZmluaXRpb24obmFtZTogc3RyaW5nW10sIGJsb2NrTWV0YT86IFRlbXBsYXRlTWV0YSk6IENvbXBvbmVudERlZmluaXRpb248YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50c1tuYW1lWzBdXTtcbiAgfVxuXG4gIGhhc01vZGlmaWVyKG1vZGlmaWVyTmFtZTogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgICByZXR1cm4gbW9kaWZpZXJOYW1lLmxlbmd0aCA9PT0gMSAmJiAoPHN0cmluZz5tb2RpZmllck5hbWVbMF0gaW4gdGhpcy5tb2RpZmllcnMpO1xuICB9XG5cbiAgbG9va3VwTW9kaWZpZXIobW9kaWZpZXJOYW1lOiBzdHJpbmdbXSk6IE1vZGlmaWVyTWFuYWdlcjxPcGFxdWU+IHtcbiAgICBsZXQgW25hbWVdID0gbW9kaWZpZXJOYW1lO1xuXG4gICAgbGV0IG1vZGlmaWVyID0gdGhpcy5tb2RpZmllcnNbbmFtZV07XG5cbiAgICBpZighbW9kaWZpZXIpIHRocm93IG5ldyBFcnJvcihgTW9kaWZpZXIgZm9yICR7bW9kaWZpZXJOYW1lLmpvaW4oJy4nKX0gbm90IGZvdW5kLmApO1xuICAgIHJldHVybiBtb2RpZmllcjtcbiAgfVxuXG4gIGNvbXBpbGUodGVtcGxhdGU6IHN0cmluZyk6IFRlbXBsYXRlPHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiByYXdDb21waWxlPHVuZGVmaW5lZD4odGVtcGxhdGUsIHsgZW52OiB0aGlzIH0pO1xuICB9XG5cbiAgY29tcGlsZUxheW91dCh0ZW1wbGF0ZTogc3RyaW5nKTogTGF5b3V0IHtcbiAgICByZXR1cm4gcmF3Q29tcGlsZUxheW91dCh0ZW1wbGF0ZSwgeyBlbnY6IHRoaXMgfSk7XG4gIH1cblxuICBpdGVyYWJsZUZvcihyZWY6IFJlZmVyZW5jZTxPcGFxdWU+LCBhcmdzOiBFdmFsdWF0ZWRBcmdzKTogT3BhcXVlSXRlcmFibGUge1xuICAgIGxldCBrZXlQYXRoID0gYXJncy5uYW1lZC5nZXQoXCJrZXlcIikudmFsdWUoKSBhcyBGSVhNRTxhbnksIFwiVXNlciB2YWx1ZSB0byBsb29rdXAga2V5XCI+O1xuICAgIGxldCBrZXlGb3I6IEtleUZvcjxPcGFxdWU+O1xuXG4gICAgaWYgKCFrZXlQYXRoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3BlY2lmeSBhIGtleSBmb3IgI2VhY2gnKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGtleVBhdGgpIHtcbiAgICAgIGNhc2UgJ0BpbmRleCc6XG4gICAgICAgIGtleUZvciA9IChfLCBpbmRleDogbnVtYmVyKSA9PiBTdHJpbmcoaW5kZXgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0BwcmltaXRpdmUnOlxuICAgICAgICBrZXlGb3IgPSAoaXRlbTogT3BhcXVlKSA9PiBTdHJpbmcoaXRlbSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAga2V5Rm9yID0gKGl0ZW06IE9wYXF1ZSkgPT4gaXRlbVtrZXlQYXRoXTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBJdGVyYWJsZShyZWYsIGtleUZvcik7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRlc3REeW5hbWljU2NvcGUgaW1wbGVtZW50cyBEeW5hbWljU2NvcGUge1xuICBwcml2YXRlIGJ1Y2tldDtcblxuICBjb25zdHJ1Y3RvcihidWNrZXQ9bnVsbCkge1xuICAgIGlmIChidWNrZXQpIHtcbiAgICAgIHRoaXMuYnVja2V0ID0gYXNzaWduKHt9LCBidWNrZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1Y2tldCA9IHt9O1xuICAgIH1cbiAgfVxuXG4gIGdldChrZXk6IHN0cmluZyk6IFBhdGhSZWZlcmVuY2U8T3BhcXVlPiB7XG4gICAgcmV0dXJuIHRoaXMuYnVja2V0W2tleV07XG4gIH1cblxuICBzZXQoa2V5OiBzdHJpbmcsIHJlZmVyZW5jZTogUGF0aFJlZmVyZW5jZTxPcGFxdWU+KSB7XG4gICAgcmV0dXJuIHRoaXMuYnVja2V0W2tleV0gPSByZWZlcmVuY2U7XG4gIH1cblxuICBjaGlsZCgpOiBUZXN0RHluYW1pY1Njb3BlIHtcbiAgICByZXR1cm4gbmV3IFRlc3REeW5hbWljU2NvcGUodGhpcy5idWNrZXQpO1xuICB9XG59XG5cbmNsYXNzIER5bmFtaWNDb21wb25lbnRSZWZlcmVuY2UgaW1wbGVtZW50cyBQYXRoUmVmZXJlbmNlPENvbXBvbmVudERlZmluaXRpb248T3BhcXVlPj4ge1xuICBwdWJsaWMgdGFnOiBSZXZpc2lvblRhZztcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG5hbWVSZWY6IFBhdGhSZWZlcmVuY2U8T3BhcXVlPiwgcHJpdmF0ZSBlbnY6IEVudmlyb25tZW50LCBwcml2YXRlIHN5bWJvbFRhYmxlOiBTeW1ib2xUYWJsZSkge1xuICAgIHRoaXMudGFnID0gbmFtZVJlZi50YWc7XG4gIH1cblxuICB2YWx1ZSgpOiBDb21wb25lbnREZWZpbml0aW9uPE9wYXF1ZT4ge1xuICAgIGxldCB7IGVudiwgbmFtZVJlZiB9ID0gdGhpcztcblxuICAgIGxldCBuYW1lT3JEZWYgPSBuYW1lUmVmLnZhbHVlKCk7XG5cbiAgICBpZiAodHlwZW9mIG5hbWVPckRlZiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBlbnYuZ2V0Q29tcG9uZW50RGVmaW5pdGlvbihbbmFtZU9yRGVmXSwgdGhpcy5zeW1ib2xUYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0NvbXBvbmVudERlZmluaXRpb24obmFtZU9yRGVmKSkge1xuICAgICAgcmV0dXJuIG5hbWVPckRlZjtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGdldCgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBkeW5hbWljQ29tcG9uZW50Rm9yKHZtOiBWTSwgc3ltYm9sVGFibGU6IFN5bWJvbFRhYmxlKSB7XG4gIGxldCBhcmdzID0gdm0uZ2V0QXJncygpO1xuICBsZXQgbmFtZVJlZiA9IGFyZ3MucG9zaXRpb25hbC5hdCgwKTtcbiAgbGV0IGVudiA9IHZtLmVudjtcbiAgcmV0dXJuIG5ldyBEeW5hbWljQ29tcG9uZW50UmVmZXJlbmNlKG5hbWVSZWYsIGVudiwgc3ltYm9sVGFibGUpO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBCYXNpY0NvbXBvbmVudEZhY3Rvcnkge1xuICBuZXcoYXR0cnM6IERpY3Q8YW55Pik6IEJhc2ljQ29tcG9uZW50O1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgR2VuZXJpY0NvbXBvbmVudERlZmluaXRpb248VD4gZXh0ZW5kcyBDb21wb25lbnREZWZpbml0aW9uPFQ+IHtcbiAgcHVibGljIGxheW91dFN0cmluZyA6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIG1hbmFnZXI6IENvbXBvbmVudE1hbmFnZXI8VD4sIENvbXBvbmVudENsYXNzOiBhbnksIGxheW91dDogc3RyaW5nKSB7XG4gICAgc3VwZXIobmFtZSwgbWFuYWdlciwgQ29tcG9uZW50Q2xhc3MpO1xuICAgIHRoaXMubGF5b3V0U3RyaW5nID0gbGF5b3V0O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCYXNpY0NvbXBvbmVudERlZmluaXRpb24gZXh0ZW5kcyBHZW5lcmljQ29tcG9uZW50RGVmaW5pdGlvbjxCYXNpY0NvbXBvbmVudD4ge1xuICBwdWJsaWMgQ29tcG9uZW50Q2xhc3M6IEJhc2ljQ29tcG9uZW50RmFjdG9yeTtcbn1cblxuY2xhc3MgU3RhdGljVGFnbGVzc0NvbXBvbmVudERlZmluaXRpb24gZXh0ZW5kcyBHZW5lcmljQ29tcG9uZW50RGVmaW5pdGlvbjxCYXNpY0NvbXBvbmVudD4ge1xuICBwdWJsaWMgQ29tcG9uZW50Q2xhc3M6IEJhc2ljQ29tcG9uZW50RmFjdG9yeTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbWJlcmlzaEN1cmx5Q29tcG9uZW50RmFjdG9yeSB7XG4gIHBvc2l0aW9uYWxQYXJhbXM/OiBzdHJpbmdbXTtcbiAgY3JlYXRlKG9wdGlvbnM6IHsgYXR0cnM6IEF0dHJzLCB0YXJnZXRPYmplY3QgfSk6IEVtYmVyaXNoQ3VybHlDb21wb25lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBFbWJlcmlzaEN1cmx5Q29tcG9uZW50RGVmaW5pdGlvbiBleHRlbmRzIEdlbmVyaWNDb21wb25lbnREZWZpbml0aW9uPEVtYmVyaXNoQ3VybHlDb21wb25lbnQ+IHtcbiAgcHVibGljIENvbXBvbmVudENsYXNzOiBFbWJlcmlzaEN1cmx5Q29tcG9uZW50RmFjdG9yeTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnRGYWN0b3J5IHtcbiAgY3JlYXRlKG9wdGlvbnM6IHsgYXR0cnM6IEF0dHJzIH0pOiBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnREZWZpbml0aW9uIGV4dGVuZHMgR2VuZXJpY0NvbXBvbmVudERlZmluaXRpb248RW1iZXJpc2hHbGltbWVyQ29tcG9uZW50PiB7XG4gIHB1YmxpYyBDb21wb25lbnRDbGFzczogRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50RmFjdG9yeTtcbn1cblxuYWJzdHJhY3QgY2xhc3MgR2VuZXJpY0NvbXBvbmVudExheW91dENvbXBpbGVyIGltcGxlbWVudHMgQ29tcGlsYWJsZUxheW91dCB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbGF5b3V0U3RyaW5nOiBzdHJpbmcpIHt9XG5cbiAgcHJvdGVjdGVkIGNvbXBpbGVMYXlvdXQoZW52OiBFbnZpcm9ubWVudCkge1xuICAgIHJldHVybiByYXdDb21waWxlTGF5b3V0KHRoaXMubGF5b3V0U3RyaW5nLCB7IGVudiB9KTtcbiAgfVxuXG4gIGFic3RyYWN0IGNvbXBpbGUoYnVpbGRlcjogQ29tcG9uZW50TGF5b3V0QnVpbGRlcik7XG59XG5cbmNsYXNzIEJhc2ljQ29tcG9uZW50TGF5b3V0Q29tcGlsZXIgZXh0ZW5kcyBHZW5lcmljQ29tcG9uZW50TGF5b3V0Q29tcGlsZXIge1xuICBjb21waWxlKGJ1aWxkZXI6IENvbXBvbmVudExheW91dEJ1aWxkZXIpIHtcbiAgICBidWlsZGVyLmZyb21MYXlvdXQodGhpcy5jb21waWxlTGF5b3V0KGJ1aWxkZXIuZW52KSk7XG4gIH1cbn1cblxuY2xhc3MgU3RhdGljVGFnbGVzc0NvbXBvbmVudExheW91dENvbXBpbGVyIGV4dGVuZHMgR2VuZXJpY0NvbXBvbmVudExheW91dENvbXBpbGVyIHtcbiAgY29tcGlsZShidWlsZGVyOiBDb21wb25lbnRMYXlvdXRCdWlsZGVyKSB7XG4gICAgYnVpbGRlci53cmFwTGF5b3V0KHRoaXMuY29tcGlsZUxheW91dChidWlsZGVyLmVudikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIEVtYmVyVGFnTmFtZSh2bTogVk0pOiBQYXRoUmVmZXJlbmNlPHN0cmluZz4ge1xuICBsZXQgc2VsZiA9IHZtLmdldFNlbGYoKS52YWx1ZSgpO1xuICBsZXQgdGFnTmFtZTogc3RyaW5nID0gc2VsZlsndGFnTmFtZSddO1xuICB0YWdOYW1lID0gdGFnTmFtZSA9PT0gJycgPyBudWxsIDogc2VsZlsndGFnTmFtZSddIHx8ICdkaXYnO1xuICByZXR1cm4gUHJpbWl0aXZlUmVmZXJlbmNlLmNyZWF0ZSh0YWdOYW1lKTtcbn1cblxuZnVuY3Rpb24gRW1iZXJJRCh2bTogVk0pOiBQYXRoUmVmZXJlbmNlPHN0cmluZz4ge1xuICBsZXQgc2VsZiA9IHZtLmdldFNlbGYoKS52YWx1ZSgpIGFzIHsgX2d1aWQ6IHN0cmluZyB9O1xuICByZXR1cm4gUHJpbWl0aXZlUmVmZXJlbmNlLmNyZWF0ZShgZW1iZXIke3NlbGYuX2d1aWR9YCk7XG59XG5cbmNsYXNzIEVtYmVyaXNoQ3VybHlDb21wb25lbnRMYXlvdXRDb21waWxlciBleHRlbmRzIEdlbmVyaWNDb21wb25lbnRMYXlvdXRDb21waWxlciB7XG4gIGNvbXBpbGUoYnVpbGRlcjogQ29tcG9uZW50TGF5b3V0QnVpbGRlcikge1xuICAgIGJ1aWxkZXIud3JhcExheW91dCh0aGlzLmNvbXBpbGVMYXlvdXQoYnVpbGRlci5lbnYpKTtcbiAgICBidWlsZGVyLnRhZy5keW5hbWljKEVtYmVyVGFnTmFtZSk7XG4gICAgYnVpbGRlci5hdHRycy5zdGF0aWMoJ2NsYXNzJywgJ2VtYmVyLXZpZXcnKTtcbiAgICBidWlsZGVyLmF0dHJzLmR5bmFtaWMoJ2lkJywgRW1iZXJJRCk7XG4gIH1cbn1cblxuY2xhc3MgRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50TGF5b3V0Q29tcGlsZXIgZXh0ZW5kcyBHZW5lcmljQ29tcG9uZW50TGF5b3V0Q29tcGlsZXIge1xuICBjb21waWxlKGJ1aWxkZXI6IENvbXBvbmVudExheW91dEJ1aWxkZXIpIHtcbiAgICBidWlsZGVyLmZyb21MYXlvdXQodGhpcy5jb21waWxlTGF5b3V0KGJ1aWxkZXIuZW52KSk7XG4gICAgYnVpbGRlci5hdHRycy5zdGF0aWMoJ2NsYXNzJywgJ2VtYmVyLXZpZXcnKTtcbiAgICBidWlsZGVyLmF0dHJzLmR5bmFtaWMoJ2lkJywgRW1iZXJJRCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc3BlY3RIb29rczxUIGV4dGVuZHMgQ29tcG9uZW50PihDb21wb25lbnRDbGFzczogR2xpbW1lck9iamVjdEZhY3Rvcnk8VD4pOiBHbGltbWVyT2JqZWN0RmFjdG9yeTxUPiB7XG4gIHJldHVybiBDb21wb25lbnRDbGFzcy5leHRlbmQoe1xuICAgIGluaXQoKSB7XG4gICAgICB0aGlzLl9zdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgdGhpcy5ob29rcyA9IHtcbiAgICAgICAgZGlkSW5pdEF0dHJzOiAwLFxuICAgICAgICBkaWRVcGRhdGVBdHRyczogMCxcbiAgICAgICAgZGlkUmVjZWl2ZUF0dHJzOiAwLFxuICAgICAgICB3aWxsSW5zZXJ0RWxlbWVudDogMCxcbiAgICAgICAgd2lsbFVwZGF0ZTogMCxcbiAgICAgICAgd2lsbFJlbmRlcjogMCxcbiAgICAgICAgZGlkSW5zZXJ0RWxlbWVudDogMCxcbiAgICAgICAgZGlkVXBkYXRlOiAwLFxuICAgICAgICBkaWRSZW5kZXI6IDBcbiAgICAgIH07XG4gICAgfSxcblxuICAgIGRpZEluaXRBdHRycygpIHtcbiAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICB0aGlzLmhvb2tzWydkaWRJbml0QXR0cnMnXSsrO1xuICAgIH0sXG5cbiAgICBkaWRVcGRhdGVBdHRycygpIHtcbiAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICB0aGlzLmhvb2tzWydkaWRVcGRhdGVBdHRycyddKys7XG4gICAgfSxcblxuICAgIGRpZFJlY2VpdmVBdHRycygpIHtcbiAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICB0aGlzLmhvb2tzWydkaWRSZWNlaXZlQXR0cnMnXSsrO1xuICAgIH0sXG5cbiAgICB3aWxsSW5zZXJ0RWxlbWVudCgpIHtcbiAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICB0aGlzLmhvb2tzWyd3aWxsSW5zZXJ0RWxlbWVudCddKys7XG4gICAgfSxcblxuICAgIHdpbGxVcGRhdGUoKSB7XG4gICAgICB0aGlzLl9zdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgdGhpcy5ob29rc1snd2lsbFVwZGF0ZSddKys7XG4gICAgfSxcblxuICAgIHdpbGxSZW5kZXIoKSB7XG4gICAgICB0aGlzLl9zdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgdGhpcy5ob29rc1snd2lsbFJlbmRlciddKys7XG4gICAgfSxcblxuICAgIGRpZEluc2VydEVsZW1lbnQoKSB7XG4gICAgICB0aGlzLl9zdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgdGhpcy5ob29rc1snZGlkSW5zZXJ0RWxlbWVudCddKys7XG4gICAgfSxcblxuICAgIGRpZFVwZGF0ZSgpIHtcbiAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICB0aGlzLmhvb2tzWydkaWRVcGRhdGUnXSsrO1xuICAgIH0sXG5cbiAgICBkaWRSZW5kZXIoKSB7XG4gICAgICB0aGlzLl9zdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgdGhpcy5ob29rc1snZGlkUmVuZGVyJ10rKztcbiAgICB9XG4gIH0pO1xufVxuXG5jb25zdCB7IGRlZmF1bHRCbG9jaywgaW52ZXJzZUJsb2NrLCBwYXJhbXMsIGhhc2ggfSA9IEJhc2VsaW5lU3ludGF4Lk5lc3RlZEJsb2NrO1xuXG5mdW5jdGlvbiBwb3B1bGF0ZUJsb2NrcyhibG9ja3M6IEJsb2NrTWFjcm9zLCBpbmxpbmVzOiBJbmxpbmVNYWNyb3MpOiB7IGJsb2NrczogQmxvY2tNYWNyb3MsIGlubGluZXM6IElubGluZU1hY3JvcyB9IHtcbiAgYmxvY2tzLmFkZCgnaWRlbnRpdHknLCAoc2V4cDogTmVzdGVkQmxvY2tTeW50YXgsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXJEU0wpID0+IHtcbiAgICBidWlsZGVyLmV2YWx1YXRlKHNleHBbNF0pO1xuICB9KTtcblxuICBibG9ja3MuYWRkKCdyZW5kZXItaW52ZXJzZScsIChzZXhwOiBOZXN0ZWRCbG9ja1N5bnRheCwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlckRTTCkgPT4ge1xuICAgIGJ1aWxkZXIuZXZhbHVhdGUoc2V4cFs1XSk7XG4gIH0pO1xuXG4gIGJsb2Nrcy5hZGQoJy13aXRoLWR5bmFtaWMtdmFycycsIChzZXhwLCBidWlsZGVyKSA9PiB7XG4gICAgbGV0IGJsb2NrID0gZGVmYXVsdEJsb2NrKHNleHApO1xuICAgIGxldCBhcmdzID0gY29tcGlsZUFyZ3MocGFyYW1zKHNleHApLCBoYXNoKHNleHApLCBidWlsZGVyKTtcblxuICAgIGJ1aWxkZXIudW5pdChiID0+IHtcbiAgICAgIGIucHV0QXJncyhhcmdzKTtcbiAgICAgIGIucHVzaER5bmFtaWNTY29wZSgpO1xuICAgICAgYi5iaW5kRHluYW1pY1Njb3BlKGFyZ3MubmFtZWQua2V5cyBhcyBzdHJpbmdbXSk7XG4gICAgICBiLmV2YWx1YXRlKHVud3JhcChibG9jaykpO1xuICAgICAgYi5wb3BEeW5hbWljU2NvcGUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgYmxvY2tzLmFkZCgnLWluLWVsZW1lbnQnLCAoc2V4cCwgYnVpbGRlcikgPT4ge1xuICAgIGxldCBibG9jayA9IGRlZmF1bHRCbG9jayhzZXhwKTtcbiAgICBsZXQgYXJncyA9IGNvbXBpbGVBcmdzKHBhcmFtcyhzZXhwKSwgaGFzaChzZXhwKSwgYnVpbGRlcik7XG5cbiAgICBidWlsZGVyLnB1dEFyZ3MoYXJncyk7XG4gICAgYnVpbGRlci50ZXN0KCdzaW1wbGUnKTtcblxuICAgIGJ1aWxkZXIubGFiZWxsZWQobnVsbCwgYiA9PiB7XG4gICAgICBiLmp1bXBVbmxlc3MoJ0VORCcpO1xuICAgICAgYi5wdXNoUmVtb3RlRWxlbWVudCgpO1xuICAgICAgYi5ldmFsdWF0ZSh1bndyYXAoYmxvY2spKTtcbiAgICAgIGIucG9wUmVtb3RlRWxlbWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBibG9ja3MuYWRkKCdjb21wb25lbnQnLCAoc2V4cCwgYnVpbGRlcikgPT4ge1xuICAgIGxldCBbLCBwYXRoLCBwYXJhbXMsIGhhc2gsIF9kZWZhdWx0LCBpbnZlcnNlXSA9IHNleHA7XG4gICAgbGV0IGRlZmluaXRpb25BcmdzOiBCYXNlbGluZVN5bnRheC5BcmdzID0gW3BhcmFtcy5zbGljZSgwLCAxKSwgbnVsbCwgbnVsbCwgbnVsbF07XG4gICAgbGV0IGFyZ3M6IEJhc2VsaW5lU3ludGF4LkFyZ3MgPSBbcGFyYW1zLnNsaWNlKDEpLCBoYXNoLCBfZGVmYXVsdCwgaW52ZXJzZV07XG4gICAgYnVpbGRlci5jb21wb25lbnQuZHluYW1pYyhkZWZpbml0aW9uQXJncywgZHluYW1pY0NvbXBvbmVudEZvciwgYXJncywgYnVpbGRlci5zeW1ib2xUYWJsZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xuXG4gIGJsb2Nrcy5hZGRNaXNzaW5nKChzZXhwLCBidWlsZGVyKSA9PiB7XG4gICAgbGV0IFssIHBhdGgsIHBhcmFtcywgaGFzaCwgX2RlZmF1bHQsIGludmVyc2VdID0gc2V4cDtcbiAgICBsZXQgdGFibGUgPSBidWlsZGVyLnN5bWJvbFRhYmxlO1xuXG4gICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IFtdO1xuICAgIH1cblxuICAgIGlmIChwYXRoLmxlbmd0aCA+IDEpIHtcbiAgICAgIGxldCBkZWZpbml0aW9uQXJnczogQmFzZWxpbmVTeW50YXguQXJncyA9IFtbWydnZXQnLCBwYXRoXV0sIGhhc2gsIF9kZWZhdWx0LCBpbnZlcnNlXTtcbiAgICAgIGxldCBhcmdzOiBCYXNlbGluZVN5bnRheC5BcmdzID0gW3BhcmFtcywgaGFzaCwgX2RlZmF1bHQsIGludmVyc2VdO1xuICAgICAgYnVpbGRlci5jb21wb25lbnQuZHluYW1pYyhkZWZpbml0aW9uQXJncywgZHluYW1pY0NvbXBvbmVudEZvciwgYXJncywgdGFibGUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgbGV0IGRlZmluaXRpb24gPSBidWlsZGVyLmVudi5nZXRDb21wb25lbnREZWZpbml0aW9uKHBhdGgsIGJ1aWxkZXIuc3ltYm9sVGFibGUpO1xuXG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgIGJ1aWxkZXIuY29tcG9uZW50LnN0YXRpYyhkZWZpbml0aW9uLCBbcGFyYW1zLCBoYXNoLCBfZGVmYXVsdCwgaW52ZXJzZV0sIHRhYmxlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG5cbiAgaW5saW5lcy5hZGQoJ2NvbXBvbmVudCcsIChwYXRoLCBwYXJhbXMsIGhhc2gsIGJ1aWxkZXIpID0+IHtcbiAgICBsZXQgZGVmaW5pdGlvbkFyZ3M6IEJhc2VsaW5lU3ludGF4LkFyZ3MgPSBbcGFyYW1zLnNsaWNlKDAsIDEpLCBudWxsLCBudWxsLCBudWxsXTtcbiAgICBsZXQgYXJnczogQmFzZWxpbmVTeW50YXguQXJncyA9IFtwYXJhbXMuc2xpY2UoMSksIGhhc2gsIG51bGwsIG51bGxdO1xuICAgIGJ1aWxkZXIuY29tcG9uZW50LmR5bmFtaWMoZGVmaW5pdGlvbkFyZ3MsIGR5bmFtaWNDb21wb25lbnRGb3IsIGFyZ3MsIGJ1aWxkZXIuc3ltYm9sVGFibGUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9KTtcblxuICBpbmxpbmVzLmFkZE1pc3NpbmcoKHBhdGgsIHBhcmFtcywgaGFzaCwgYnVpbGRlcikgPT4ge1xuICAgIGxldCB0YWJsZSA9IGJ1aWxkZXIuc3ltYm9sVGFibGU7XG5cbiAgICBsZXQgZGVmaW5pdGlvbiA9IGJ1aWxkZXIuZW52LmdldENvbXBvbmVudERlZmluaXRpb24ocGF0aCwgYnVpbGRlci5zeW1ib2xUYWJsZSk7XG5cbiAgICBpZiAocGF0aC5sZW5ndGggPiAxKSB7XG4gICAgICBsZXQgZGVmaW5pdGlvbkFyZ3M6IEJhc2VsaW5lU3ludGF4LkFyZ3MgPSBbW1snZ2V0JywgcGF0aF1dLCBoYXNoLCBudWxsLCBudWxsXTtcbiAgICAgIGxldCBhcmdzOiBCYXNlbGluZVN5bnRheC5BcmdzID0gW3BhcmFtcywgaGFzaCwgbnVsbCwgbnVsbF07XG4gICAgICBidWlsZGVyLmNvbXBvbmVudC5keW5hbWljKGRlZmluaXRpb25BcmdzLCBkeW5hbWljQ29tcG9uZW50Rm9yLCBhcmdzLCB0YWJsZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZGVmaW5pdGlvbikge1xuICAgICAgYnVpbGRlci5jb21wb25lbnQuc3RhdGljKGRlZmluaXRpb24sIFtwYXJhbXMsIGhhc2gsIG51bGwsIG51bGxdLCB0YWJsZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuXG4gIHJldHVybiB7IGJsb2NrcywgaW5saW5lcyB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzRWxlbWVudChlbGVtZW50OiBFbGVtZW50LCB0YWdOYW1lOiBzdHJpbmcsIGF0dHJpYnV0ZXM6IE9iamVjdCwgY29udGVudDogc3RyaW5nKSB7XG4gIFFVbml0LnB1c2goZWxlbWVudC50YWdOYW1lID09PSB0YWdOYW1lLnRvVXBwZXJDYXNlKCksIGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpLCB0YWdOYW1lLCBgZXhwZWN0IHRhZ05hbWUgdG8gYmUgJHt0YWdOYW1lfWApO1xuXG4gIGxldCBleHBlY3RlZEF0dHJzOiBEaWN0PE1hdGNoZXI+ID0gZGljdDxNYXRjaGVyPigpO1xuXG4gIGxldCBleHBlY3RlZENvdW50ID0gMDtcbiAgZm9yIChsZXQgcHJvcCBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgZXhwZWN0ZWRDb3VudCsrO1xuICAgIGxldCBleHBlY3RlZCA9IGF0dHJpYnV0ZXNbcHJvcF07XG5cbiAgICBsZXQgbWF0Y2hlcjogTWF0Y2hlciA9IHR5cGVvZiBleHBlY3RlZCA9PT0gJ29iamVjdCcgJiYgTUFUQ0hFUiBpbiBleHBlY3RlZCA/IGV4cGVjdGVkIDogZXF1YWxzQXR0cihleHBlY3RlZCk7XG4gICAgZXhwZWN0ZWRBdHRyc1twcm9wXSA9IG1hdGNoZXI7XG5cbiAgICBRVW5pdC5wdXNoKFxuICAgICAgZXhwZWN0ZWRBdHRyc1twcm9wXS5tYXRjaChlbGVtZW50LmdldEF0dHJpYnV0ZShwcm9wKSksXG4gICAgICBtYXRjaGVyLmZhaWwoZWxlbWVudC5nZXRBdHRyaWJ1dGUocHJvcCkpLFxuICAgICAgbWF0Y2hlci5mYWlsKGVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApKSxcbiAgICAgIGBFeHBlY3RlZCBlbGVtZW50J3MgJHtwcm9wfSBhdHRyaWJ1dGUgJHttYXRjaGVyLmV4cGVjdGVkKCl9YFxuICAgICk7XG4gIH1cblxuICBsZXQgYWN0dWFsQXR0cmlidXRlcyA9IHt9O1xuICBmb3IgKGxldCBpID0gMCwgbCA9IGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBhY3R1YWxBdHRyaWJ1dGVzW2VsZW1lbnQuYXR0cmlidXRlc1tpXS5uYW1lXSA9IGVsZW1lbnQuYXR0cmlidXRlc1tpXS52YWx1ZTtcbiAgfVxuXG4gIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICBRVW5pdC5wdXNoKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCwgbnVsbCwgbnVsbCwgXCJFbGVtZW50IG11c3QgYmUgYW4gSFRNTCBFbGVtZW50LCBub3QgYW4gU1ZHIEVsZW1lbnRcIik7XG4gIH0gZWxzZSB7XG4gICAgUVVuaXQucHVzaChcbiAgICAgIGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGggPT09IGV4cGVjdGVkQ291bnQsXG4gICAgICBlbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoLCBleHBlY3RlZENvdW50LFxuICAgICAgYEV4cGVjdGVkICR7ZXhwZWN0ZWRDb3VudH0gYXR0cmlidXRlczsgZ290ICR7ZWxlbWVudC5vdXRlckhUTUx9YFxuICAgICk7XG5cbiAgICBpZiAoY29udGVudCAhPT0gbnVsbCkge1xuICAgICAgUVVuaXQucHVzaChlbGVtZW50LmlubmVySFRNTCA9PT0gY29udGVudCwgZWxlbWVudC5pbm5lckhUTUwsIGNvbnRlbnQsIGBUaGUgZWxlbWVudCBoYWQgJyR7Y29udGVudH0nIGFzIGl0cyBjb250ZW50YCk7XG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBNYXRjaGVyIHtcbiAgXCIzZDRlZjE5NC0xM2JlLTRjY2YtOGRjNy04NjJlZWEwMmM5M2VcIjogYm9vbGVhbjtcbiAgbWF0Y2goYWN0dWFsKTogYm9vbGVhbjtcbiAgZmFpbChhY3R1YWwpOiBzdHJpbmc7XG4gIGV4cGVjdGVkKCk6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IE1BVENIRVIgPSBcIjNkNGVmMTk0LTEzYmUtNGNjZi04ZGM3LTg2MmVlYTAyYzkzZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzQXR0cihleHBlY3RlZCkge1xuICByZXR1cm4ge1xuICAgIFwiM2Q0ZWYxOTQtMTNiZS00Y2NmLThkYzctODYyZWVhMDJjOTNlXCI6IHRydWUsXG4gICAgbWF0Y2goYWN0dWFsKSB7XG4gICAgICByZXR1cm4gZXhwZWN0ZWQgPT09IGFjdHVhbDtcbiAgICB9LFxuXG4gICAgZXhwZWN0ZWQoKSB7XG4gICAgICByZXR1cm4gYHRvIGVxdWFsICR7ZXhwZWN0ZWR9YDtcbiAgICB9LFxuXG4gICAgZmFpbChhY3R1YWwpIHtcbiAgICAgIHJldHVybiBgJHthY3R1YWx9IGRpZCBub3QgZXF1YWwgJHtleHBlY3RlZH1gO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhleHBlY3RlZCkge1xuICByZXR1cm4ge1xuICAgIFwiM2Q0ZWYxOTQtMTNiZS00Y2NmLThkYzctODYyZWVhMDJjOTNlXCI6IHRydWUsXG4gICAgbWF0Y2goYWN0dWFsKSB7XG4gICAgICByZXR1cm4gZXhwZWN0ZWQgPT09IGFjdHVhbDtcbiAgICB9LFxuXG4gICAgZXhwZWN0ZWQoKSB7XG4gICAgICByZXR1cm4gYHRvIGVxdWFsICR7ZXhwZWN0ZWR9YDtcbiAgICB9LFxuXG4gICAgZmFpbChhY3R1YWwpIHtcbiAgICAgIHJldHVybiBgJHthY3R1YWx9IGRpZCBub3QgZXF1YWwgJHtleHBlY3RlZH1gO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2V4KHIpIHtcbiAgcmV0dXJuIHtcbiAgICBcIjNkNGVmMTk0LTEzYmUtNGNjZi04ZGM3LTg2MmVlYTAyYzkzZVwiOiB0cnVlLFxuICAgIG1hdGNoKHYpIHtcbiAgICAgIHJldHVybiByLnRlc3Qodik7XG4gICAgfSxcbiAgICBleHBlY3RlZCgpIHtcbiAgICAgIHJldHVybiBgdG8gbWF0Y2ggJHtyfWA7XG4gICAgfSxcbiAgICBmYWlsKGFjdHVhbCkge1xuICAgICAgcmV0dXJuIGAke2FjdHVhbH0gZGlkIG5vdCBtYXRjaCAke3J9YDtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGFzc2VzKGV4cGVjdGVkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHtcbiAgICBcIjNkNGVmMTk0LTEzYmUtNGNjZi04ZGM3LTg2MmVlYTAyYzkzZVwiOiB0cnVlLFxuICAgIG1hdGNoKGFjdHVhbCkge1xuICAgICAgcmV0dXJuIGFjdHVhbCAmJiAoZXhwZWN0ZWQuc3BsaXQoJyAnKS5zb3J0KCkuam9pbignICcpID09PSBhY3R1YWwuc3BsaXQoJyAnKS5zb3J0KCkuam9pbignICcpKTtcbiAgICB9LFxuICAgIGV4cGVjdGVkKCkge1xuICAgICAgcmV0dXJuIGB0byBpbmNsdWRlICcke2V4cGVjdGVkfSdgO1xuICAgIH0sXG4gICAgZmFpbChhY3R1YWwpIHtcbiAgICAgIHJldHVybiBgJyR7YWN0dWFsfScnIGRpZCBub3QgbWF0Y2ggJyR7ZXhwZWN0ZWR9J2A7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgY29tcGlsZUxheW91dCwgY29tcGlsZUFyZ3MsIFxuLy8gRW52aXJvbm1lbnRcbkVudmlyb25tZW50LCBET01UcmVlQ29uc3RydWN0aW9uLCBET01DaGFuZ2VzLCBcbi8vIFBhcnRpYWxzXG5QYXJ0aWFsRGVmaW5pdGlvbiwgQ29tcG9uZW50RGVmaW5pdGlvbiwgXG4vLyBWYWx1ZXNcbkV2YWx1YXRlZEFyZ3MsIEV2YWx1YXRlZE5hbWVkQXJncywgQmFzZWxpbmVTeW50YXgsIFxuLy8gUmVmZXJlbmNlc1xuUHJpbWl0aXZlUmVmZXJlbmNlLCBDb25kaXRpb25hbFJlZmVyZW5jZSwgZ2V0RHluYW1pY1ZhciwgaXNDb21wb25lbnREZWZpbml0aW9uIH0gZnJvbSBcIkBnbGltbWVyL3J1bnRpbWVcIjtcbmltcG9ydCB7IGNvbXBpbGUgYXMgcmF3Q29tcGlsZSwgY29tcGlsZUxheW91dCBhcyByYXdDb21waWxlTGF5b3V0IH0gZnJvbSBcIi4vaGVscGVyc1wiO1xuaW1wb3J0IHsgYXNzaWduLCBkaWN0LCB1bndyYXAgfSBmcm9tICdAZ2xpbW1lci91dGlsJztcbmltcG9ydCBHbGltbWVyT2JqZWN0IGZyb20gXCJAZ2xpbW1lci9vYmplY3RcIjtcbmltcG9ydCB7IFZPTEFUSUxFX1RBRywgRGlydHlhYmxlVGFnLCBpc0NvbnN0IH0gZnJvbSBcIkBnbGltbWVyL3JlZmVyZW5jZVwiO1xuaW1wb3J0IHsgVXBkYXRhYmxlUmVmZXJlbmNlIH0gZnJvbSBcIkBnbGltbWVyL29iamVjdC1yZWZlcmVuY2VcIjtcbmNsYXNzIEFycmF5SXRlcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGFycmF5LCBrZXlGb3IpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICAgICAgdGhpcy5rZXlGb3IgPSBrZXlGb3I7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5Lmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgbGV0IHsgcG9zaXRpb24sIGFycmF5LCBrZXlGb3IgfSA9IHRoaXM7XG4gICAgICAgIGlmIChwb3NpdGlvbiA+PSBhcnJheS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHZhbHVlID0gYXJyYXlbcG9zaXRpb25dO1xuICAgICAgICBsZXQga2V5ID0ga2V5Rm9yKHZhbHVlLCBwb3NpdGlvbik7XG4gICAgICAgIGxldCBtZW1vID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMucG9zaXRpb24rKztcbiAgICAgICAgcmV0dXJuIHsga2V5LCB2YWx1ZSwgbWVtbyB9O1xuICAgIH1cbn1cbmNsYXNzIE9iamVjdEtleXNJdGVyYXRvciB7XG4gICAgY29uc3RydWN0b3Ioa2V5cywgdmFsdWVzLCBrZXlGb3IpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgICAgIHRoaXMua2V5cyA9IGtleXM7XG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgICAgICB0aGlzLmtleUZvciA9IGtleUZvcjtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGxldCB7IHBvc2l0aW9uLCBrZXlzLCB2YWx1ZXMsIGtleUZvciB9ID0gdGhpcztcbiAgICAgICAgaWYgKHBvc2l0aW9uID49IGtleXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCB2YWx1ZSA9IHZhbHVlc1twb3NpdGlvbl07XG4gICAgICAgIGxldCBtZW1vID0ga2V5c1twb3NpdGlvbl07XG4gICAgICAgIGxldCBrZXkgPSBrZXlGb3IodmFsdWUsIG1lbW8pO1xuICAgICAgICB0aGlzLnBvc2l0aW9uKys7XG4gICAgICAgIHJldHVybiB7IGtleSwgdmFsdWUsIG1lbW8gfTtcbiAgICB9XG59XG5jbGFzcyBFbXB0eUl0ZXJhdG9yIHtcbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY2FsbCBuZXh0KCkgb24gYW4gZW1wdHkgaXRlcmF0b3JgKTtcbiAgICB9XG59XG5jb25zdCBFTVBUWV9JVEVSQVRPUiA9IG5ldyBFbXB0eUl0ZXJhdG9yKCk7XG5jbGFzcyBJdGVyYWJsZSB7XG4gICAgY29uc3RydWN0b3IocmVmLCBrZXlGb3IpIHtcbiAgICAgICAgdGhpcy50YWcgPSByZWYudGFnO1xuICAgICAgICB0aGlzLnJlZiA9IHJlZjtcbiAgICAgICAgdGhpcy5rZXlGb3IgPSBrZXlGb3I7XG4gICAgfVxuICAgIGl0ZXJhdGUoKSB7XG4gICAgICAgIGxldCB7IHJlZiwga2V5Rm9yIH0gPSB0aGlzO1xuICAgICAgICBsZXQgaXRlcmFibGUgPSByZWYudmFsdWUoKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlcmFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlcmFibGUubGVuZ3RoID4gMCA/IG5ldyBBcnJheUl0ZXJhdG9yKGl0ZXJhYmxlLCBrZXlGb3IpIDogRU1QVFlfSVRFUkFUT1I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlcmFibGUgPT09IHVuZGVmaW5lZCB8fCBpdGVyYWJsZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0lURVJBVE9SO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZXJhYmxlLmZvckVhY2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IGFycmF5ID0gW107XG4gICAgICAgICAgICBpdGVyYWJsZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5Lmxlbmd0aCA+IDAgPyBuZXcgQXJyYXlJdGVyYXRvcihhcnJheSwga2V5Rm9yKSA6IEVNUFRZX0lURVJBVE9SO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpdGVyYWJsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMoaXRlcmFibGUpO1xuICAgICAgICAgICAgcmV0dXJuIGtleXMubGVuZ3RoID4gMCA/IG5ldyBPYmplY3RLZXlzSXRlcmF0b3Ioa2V5cywga2V5cy5tYXAoa2V5ID0+IGl0ZXJhYmxlW2tleV0pLCBrZXlGb3IpIDogRU1QVFlfSVRFUkFUT1I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERvbid0IGtub3cgaG93IHRvIHt7I2VhY2ggJHtpdGVyYWJsZX19fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhbHVlUmVmZXJlbmNlRm9yKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGFibGVSZWZlcmVuY2UoaXRlbS52YWx1ZSk7XG4gICAgfVxuICAgIHVwZGF0ZVZhbHVlUmVmZXJlbmNlKHJlZmVyZW5jZSwgaXRlbSkge1xuICAgICAgICByZWZlcmVuY2UudXBkYXRlKGl0ZW0udmFsdWUpO1xuICAgIH1cbiAgICBtZW1vUmVmZXJlbmNlRm9yKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGFibGVSZWZlcmVuY2UoaXRlbS5tZW1vKTtcbiAgICB9XG4gICAgdXBkYXRlTWVtb1JlZmVyZW5jZShyZWZlcmVuY2UsIGl0ZW0pIHtcbiAgICAgICAgcmVmZXJlbmNlLnVwZGF0ZShpdGVtLm1lbW8pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXNpY0NvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoYXR0cnMpIHtcbiAgICAgICAgdGhpcy5hdHRycyA9IGF0dHJzO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBFbWJlcmlzaEN1cmx5Q29tcG9uZW50IGV4dGVuZHMgR2xpbW1lck9iamVjdCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuZGlydGluZXNzVGFnID0gbmV3IERpcnR5YWJsZVRhZygpO1xuICAgICAgICB0aGlzLnRhZ05hbWUgPSBudWxsO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZUJpbmRpbmdzID0gbnVsbDtcbiAgICAgICAgdGhpcy5wYXJlbnRWaWV3ID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhcmdzKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jcmVhdGUoYXJncyk7XG4gICAgfVxuICAgIHJlY29tcHV0ZSgpIHtcbiAgICAgICAgdGhpcy5kaXJ0aW5lc3NUYWcuZGlydHkoKTtcbiAgICB9XG4gICAgZGlkSW5pdEF0dHJzKG9wdGlvbnMpIHsgfVxuICAgIGRpZFVwZGF0ZUF0dHJzKGRpZmYpIHsgfVxuICAgIGRpZFJlY2VpdmVBdHRycyhkaWZmKSB7IH1cbiAgICB3aWxsSW5zZXJ0RWxlbWVudCgpIHsgfVxuICAgIHdpbGxVcGRhdGUoKSB7IH1cbiAgICB3aWxsUmVuZGVyKCkgeyB9XG4gICAgZGlkSW5zZXJ0RWxlbWVudCgpIHsgfVxuICAgIGRpZFVwZGF0ZSgpIHsgfVxuICAgIGRpZFJlbmRlcigpIHsgfVxufVxuZXhwb3J0IGNsYXNzIEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudCBleHRlbmRzIEdsaW1tZXJPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmRpcnRpbmVzc1RhZyA9IG5ldyBEaXJ0eWFibGVUYWcoKTtcbiAgICAgICAgdGhpcy5wYXJlbnRWaWV3ID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhcmdzKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jcmVhdGUoYXJncyk7XG4gICAgfVxuICAgIHJlY29tcHV0ZSgpIHtcbiAgICAgICAgdGhpcy5kaXJ0aW5lc3NUYWcuZGlydHkoKTtcbiAgICB9XG4gICAgZGlkSW5pdEF0dHJzKG9wdGlvbnMpIHsgfVxuICAgIGRpZFVwZGF0ZUF0dHJzKGRpZmYpIHsgfVxuICAgIGRpZFJlY2VpdmVBdHRycyhkaWZmKSB7IH1cbiAgICB3aWxsSW5zZXJ0RWxlbWVudCgpIHsgfVxuICAgIHdpbGxVcGRhdGUoKSB7IH1cbiAgICB3aWxsUmVuZGVyKCkgeyB9XG4gICAgZGlkSW5zZXJ0RWxlbWVudCgpIHsgfVxuICAgIGRpZFVwZGF0ZSgpIHsgfVxuICAgIGRpZFJlbmRlcigpIHsgfVxufVxuY2xhc3MgQmFzaWNDb21wb25lbnRNYW5hZ2VyIHtcbiAgICBwcmVwYXJlQXJncyhkZWZpbml0aW9uLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiBhcmdzO1xuICAgIH1cbiAgICBjcmVhdGUoZW52aXJvbm1lbnQsIGRlZmluaXRpb24sIGFyZ3MpIHtcbiAgICAgICAgbGV0IGtsYXNzID0gZGVmaW5pdGlvbi5Db21wb25lbnRDbGFzcyB8fCBCYXNpY0NvbXBvbmVudDtcbiAgICAgICAgcmV0dXJuIG5ldyBrbGFzcyhhcmdzLm5hbWVkLnZhbHVlKCkpO1xuICAgIH1cbiAgICBsYXlvdXRGb3IoZGVmaW5pdGlvbiwgY29tcG9uZW50LCBlbnYpIHtcbiAgICAgICAgbGV0IGxheW91dCA9IGVudi5jb21waWxlZExheW91dHNbZGVmaW5pdGlvbi5uYW1lXTtcbiAgICAgICAgaWYgKGxheW91dCkge1xuICAgICAgICAgICAgcmV0dXJuIGxheW91dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdID0gY29tcGlsZUxheW91dChuZXcgQmFzaWNDb21wb25lbnRMYXlvdXRDb21waWxlcihkZWZpbml0aW9uLmxheW91dFN0cmluZyksIGVudik7XG4gICAgfVxuICAgIGdldFNlbGYoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgVXBkYXRhYmxlUmVmZXJlbmNlKGNvbXBvbmVudCk7XG4gICAgfVxuICAgIGRpZENyZWF0ZUVsZW1lbnQoY29tcG9uZW50LCBlbGVtZW50KSB7XG4gICAgICAgIGNvbXBvbmVudC5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG4gICAgZGlkUmVuZGVyTGF5b3V0KGNvbXBvbmVudCwgYm91bmRzKSB7XG4gICAgICAgIGNvbXBvbmVudC5ib3VuZHMgPSBib3VuZHM7XG4gICAgfVxuICAgIGRpZENyZWF0ZSgpIHsgfVxuICAgIGdldFRhZygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHVwZGF0ZShjb21wb25lbnQsIGF0dHJzKSB7XG4gICAgICAgIGNvbXBvbmVudC5hdHRycyA9IGF0dHJzLm5hbWVkLnZhbHVlKCk7XG4gICAgfVxuICAgIGRpZFVwZGF0ZUxheW91dCgpIHsgfVxuICAgIGRpZFVwZGF0ZSgpIHsgfVxuICAgIGdldERlc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbmNvbnN0IEJBU0lDX0NPTVBPTkVOVF9NQU5BR0VSID0gbmV3IEJhc2ljQ29tcG9uZW50TWFuYWdlcigpO1xuY2xhc3MgU3RhdGljVGFnbGVzc0NvbXBvbmVudE1hbmFnZXIgZXh0ZW5kcyBCYXNpY0NvbXBvbmVudE1hbmFnZXIge1xuICAgIGxheW91dEZvcihkZWZpbml0aW9uLCBjb21wb25lbnQsIGVudikge1xuICAgICAgICBsZXQgbGF5b3V0ID0gZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdO1xuICAgICAgICBpZiAobGF5b3V0KSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5b3V0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnYuY29tcGlsZWRMYXlvdXRzW2RlZmluaXRpb24ubmFtZV0gPSBjb21waWxlTGF5b3V0KG5ldyBTdGF0aWNUYWdsZXNzQ29tcG9uZW50TGF5b3V0Q29tcGlsZXIoZGVmaW5pdGlvbi5sYXlvdXRTdHJpbmcpLCBlbnYpO1xuICAgIH1cbn1cbmNvbnN0IFNUQVRJQ19UQUdMRVNTX0NPTVBPTkVOVF9NQU5BR0VSID0gbmV3IFN0YXRpY1RhZ2xlc3NDb21wb25lbnRNYW5hZ2VyKCk7XG5jb25zdCBCYXNlRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50ID0gRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50LmV4dGVuZCgpO1xuY2xhc3MgRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50TWFuYWdlciB7XG4gICAgcHJlcGFyZUFyZ3MoZGVmaW5pdGlvbiwgYXJncykge1xuICAgICAgICByZXR1cm4gYXJncztcbiAgICB9XG4gICAgY3JlYXRlKGVudmlyb25tZW50LCBkZWZpbml0aW9uLCBhcmdzLCBkeW5hbWljU2NvcGUsIGNhbGxlclNlbGYsIGhhc0RlZmF1bHRCbG9jaykge1xuICAgICAgICBsZXQga2xhc3MgPSBkZWZpbml0aW9uLkNvbXBvbmVudENsYXNzIHx8IEJhc2VFbWJlcmlzaEdsaW1tZXJDb21wb25lbnQ7XG4gICAgICAgIGxldCBhdHRycyA9IGFyZ3MubmFtZWQudmFsdWUoKTtcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IGtsYXNzLmNyZWF0ZSh7IGF0dHJzIH0pO1xuICAgICAgICBjb21wb25lbnQuZGlkSW5pdEF0dHJzKHsgYXR0cnMgfSk7XG4gICAgICAgIGNvbXBvbmVudC5kaWRSZWNlaXZlQXR0cnMoeyBvbGRBdHRyczogbnVsbCwgbmV3QXR0cnM6IGF0dHJzIH0pO1xuICAgICAgICBjb21wb25lbnQud2lsbEluc2VydEVsZW1lbnQoKTtcbiAgICAgICAgY29tcG9uZW50LndpbGxSZW5kZXIoKTtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgICB9XG4gICAgbGF5b3V0Rm9yKGRlZmluaXRpb24sIGNvbXBvbmVudCwgZW52KSB7XG4gICAgICAgIGlmIChlbnYuY29tcGlsZWRMYXlvdXRzW2RlZmluaXRpb24ubmFtZV0pIHtcbiAgICAgICAgICAgIHJldHVybiBlbnYuY29tcGlsZWRMYXlvdXRzW2RlZmluaXRpb24ubmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudi5jb21waWxlZExheW91dHNbZGVmaW5pdGlvbi5uYW1lXSA9IGNvbXBpbGVMYXlvdXQobmV3IEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudExheW91dENvbXBpbGVyKGRlZmluaXRpb24ubGF5b3V0U3RyaW5nKSwgZW52KTtcbiAgICB9XG4gICAgZ2V0U2VsZihjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGFibGVSZWZlcmVuY2UoY29tcG9uZW50KTtcbiAgICB9XG4gICAgZGlkQ3JlYXRlRWxlbWVudChjb21wb25lbnQsIGVsZW1lbnQpIHtcbiAgICAgICAgY29tcG9uZW50LmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cbiAgICBkaWRSZW5kZXJMYXlvdXQoY29tcG9uZW50LCBib3VuZHMpIHtcbiAgICAgICAgY29tcG9uZW50LmJvdW5kcyA9IGJvdW5kcztcbiAgICB9XG4gICAgZGlkQ3JlYXRlKGNvbXBvbmVudCkge1xuICAgICAgICBjb21wb25lbnQuZGlkSW5zZXJ0RWxlbWVudCgpO1xuICAgICAgICBjb21wb25lbnQuZGlkUmVuZGVyKCk7XG4gICAgfVxuICAgIGdldFRhZyhjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5kaXJ0aW5lc3NUYWc7XG4gICAgfVxuICAgIHVwZGF0ZShjb21wb25lbnQsIGFyZ3MpIHtcbiAgICAgICAgbGV0IG9sZEF0dHJzID0gY29tcG9uZW50LmF0dHJzO1xuICAgICAgICBsZXQgbmV3QXR0cnMgPSBhcmdzLm5hbWVkLnZhbHVlKCk7XG4gICAgICAgIGNvbXBvbmVudC5zZXQoJ2F0dHJzJywgbmV3QXR0cnMpO1xuICAgICAgICBjb21wb25lbnQuZGlkVXBkYXRlQXR0cnMoeyBvbGRBdHRycywgbmV3QXR0cnMgfSk7XG4gICAgICAgIGNvbXBvbmVudC5kaWRSZWNlaXZlQXR0cnMoeyBvbGRBdHRycywgbmV3QXR0cnMgfSk7XG4gICAgICAgIGNvbXBvbmVudC53aWxsVXBkYXRlKCk7XG4gICAgICAgIGNvbXBvbmVudC53aWxsUmVuZGVyKCk7XG4gICAgfVxuICAgIGRpZFVwZGF0ZUxheW91dCgpIHsgfVxuICAgIGRpZFVwZGF0ZShjb21wb25lbnQpIHtcbiAgICAgICAgY29tcG9uZW50LmRpZFVwZGF0ZSgpO1xuICAgICAgICBjb21wb25lbnQuZGlkUmVuZGVyKCk7XG4gICAgfVxuICAgIGdldERlc3RydWN0b3IoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFByb2Nlc3NlZEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKGFyZ3MsIHBvc2l0aW9uYWxQYXJhbXNEZWZpbml0aW9uKSB7XG4gICAgICAgIHRoaXMudGFnID0gYXJncy50YWc7XG4gICAgICAgIHRoaXMubmFtZWQgPSBhcmdzLm5hbWVkO1xuICAgICAgICB0aGlzLnBvc2l0aW9uYWwgPSBhcmdzLnBvc2l0aW9uYWw7XG4gICAgICAgIHRoaXMucG9zaXRpb25hbFBhcmFtTmFtZXMgPSBwb3NpdGlvbmFsUGFyYW1zRGVmaW5pdGlvbjtcbiAgICB9XG4gICAgdmFsdWUoKSB7XG4gICAgICAgIGxldCB7IG5hbWVkLCBwb3NpdGlvbmFsLCBwb3NpdGlvbmFsUGFyYW1OYW1lcyB9ID0gdGhpcztcbiAgICAgICAgbGV0IG1lcmdlZCA9IE9iamVjdC5hc3NpZ24oe30sIG5hbWVkLnZhbHVlKCkpO1xuICAgICAgICBpZiAocG9zaXRpb25hbFBhcmFtTmFtZXMgJiYgcG9zaXRpb25hbFBhcmFtTmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc2l0aW9uYWxQYXJhbU5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBwb3NpdGlvbmFsUGFyYW1OYW1lc1tpXTtcbiAgICAgICAgICAgICAgICBsZXQgcmVmZXJlbmNlID0gcG9zaXRpb25hbC5hdChpKTtcbiAgICAgICAgICAgICAgICBtZXJnZWRbbmFtZV0gPSByZWZlcmVuY2UudmFsdWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXR0cnM6IG1lcmdlZCxcbiAgICAgICAgICAgIHByb3BzOiBtZXJnZWRcbiAgICAgICAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBwcm9jZXNzQXJncyhhcmdzLCBwb3NpdGlvbmFsUGFyYW1zRGVmaW5pdGlvbikge1xuICAgIHJldHVybiBuZXcgUHJvY2Vzc2VkQXJncyhhcmdzLCBwb3NpdGlvbmFsUGFyYW1zRGVmaW5pdGlvbik7XG59XG5jb25zdCBFTUJFUklTSF9HTElNTUVSX0NPTVBPTkVOVF9NQU5BR0VSID0gbmV3IEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudE1hbmFnZXIoKTtcbmNvbnN0IEJhc2VFbWJlcmlzaEN1cmx5Q29tcG9uZW50ID0gRW1iZXJpc2hDdXJseUNvbXBvbmVudC5leHRlbmQoKTtcbmNsYXNzIEVtYmVyaXNoQ3VybHlDb21wb25lbnRNYW5hZ2VyIHtcbiAgICBwcmVwYXJlQXJncyhkZWZpbml0aW9uLCBhcmdzLCBkeW5hbWljU2NvcGUpIHtcbiAgICAgICAgbGV0IGR5biA9IGRlZmluaXRpb24uQ29tcG9uZW50Q2xhc3MgPyBkZWZpbml0aW9uLkNvbXBvbmVudENsYXNzWydmcm9tRHluYW1pY1Njb3BlJ10gOiBudWxsO1xuICAgICAgICBpZiAoZHluKSB7XG4gICAgICAgICAgICBsZXQgbWFwID0gYXNzaWduKHt9LCBhcmdzLm5hbWVkLm1hcCk7XG4gICAgICAgICAgICBkeW4uZm9yRWFjaChuYW1lID0+IG1hcFtuYW1lXSA9IGR5bmFtaWNTY29wZS5nZXQobmFtZSkpO1xuICAgICAgICAgICAgYXJncyA9IEV2YWx1YXRlZEFyZ3MuY3JlYXRlKGFyZ3MucG9zaXRpb25hbCwgRXZhbHVhdGVkTmFtZWRBcmdzLmNyZWF0ZShtYXApLCBhcmdzLmJsb2Nrcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfVxuICAgIGNyZWF0ZShlbnZpcm9ubWVudCwgZGVmaW5pdGlvbiwgYXJncywgZHluYW1pY1Njb3BlLCBjYWxsZXJTZWxmKSB7XG4gICAgICAgIGxldCBrbGFzcyA9IGRlZmluaXRpb24uQ29tcG9uZW50Q2xhc3MgfHwgQmFzZUVtYmVyaXNoQ3VybHlDb21wb25lbnQ7XG4gICAgICAgIGxldCBwcm9jZXNzZWRBcmdzID0gcHJvY2Vzc0FyZ3MoYXJncywga2xhc3NbJ3Bvc2l0aW9uYWxQYXJhbXMnXSk7XG4gICAgICAgIGxldCB7IGF0dHJzIH0gPSBwcm9jZXNzZWRBcmdzLnZhbHVlKCk7XG4gICAgICAgIGxldCBzZWxmID0gY2FsbGVyU2VsZi52YWx1ZSgpO1xuICAgICAgICBsZXQgbWVyZ2VkID0gYXNzaWduKHt9LCBhdHRycywgeyBhdHRycyB9LCB7IGFyZ3M6IHByb2Nlc3NlZEFyZ3MgfSwgeyB0YXJnZXRPYmplY3Q6IHNlbGYgfSk7XG4gICAgICAgIGxldCBjb21wb25lbnQgPSBrbGFzcy5jcmVhdGUobWVyZ2VkKTtcbiAgICAgICAgY29tcG9uZW50LmRpZEluaXRBdHRycyh7IGF0dHJzIH0pO1xuICAgICAgICBjb21wb25lbnQuZGlkUmVjZWl2ZUF0dHJzKHsgb2xkQXR0cnM6IG51bGwsIG5ld0F0dHJzOiBhdHRycyB9KTtcbiAgICAgICAgY29tcG9uZW50LndpbGxJbnNlcnRFbGVtZW50KCk7XG4gICAgICAgIGNvbXBvbmVudC53aWxsUmVuZGVyKCk7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfVxuICAgIGxheW91dEZvcihkZWZpbml0aW9uLCBjb21wb25lbnQsIGVudikge1xuICAgICAgICBsZXQgbGF5b3V0ID0gZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdO1xuICAgICAgICBpZiAobGF5b3V0KSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5b3V0O1xuICAgICAgICB9XG4gICAgICAgIGxldCBsYXlvdXRTdHJpbmcgPSBkZWZpbml0aW9uLmxheW91dFN0cmluZztcbiAgICAgICAgbGV0IGxhdGVCb3VuZCA9ICFsYXlvdXRTdHJpbmc7XG4gICAgICAgIGlmICghbGF5b3V0U3RyaW5nICYmIGxheW91dFN0cmluZyAhPT0gJycpIHtcbiAgICAgICAgICAgIGxheW91dFN0cmluZyA9IGNvbXBvbmVudFsnbGF5b3V0J107XG4gICAgICAgIH1cbiAgICAgICAgbGF5b3V0ID0gY29tcGlsZUxheW91dChuZXcgRW1iZXJpc2hDdXJseUNvbXBvbmVudExheW91dENvbXBpbGVyKGxheW91dFN0cmluZyksIGVudik7XG4gICAgICAgIHJldHVybiBsYXRlQm91bmQgPyBsYXlvdXQgOiAoZW52LmNvbXBpbGVkTGF5b3V0c1tkZWZpbml0aW9uLm5hbWVdID0gbGF5b3V0KTtcbiAgICB9XG4gICAgZ2V0U2VsZihjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGFibGVSZWZlcmVuY2UoY29tcG9uZW50KTtcbiAgICB9XG4gICAgZGlkQ3JlYXRlRWxlbWVudChjb21wb25lbnQsIGVsZW1lbnQsIG9wZXJhdGlvbnMpIHtcbiAgICAgICAgY29tcG9uZW50LmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICBsZXQgYmluZGluZ3MgPSBjb21wb25lbnQuYXR0cmlidXRlQmluZGluZ3M7XG4gICAgICAgIGxldCByb290UmVmID0gbmV3IFVwZGF0YWJsZVJlZmVyZW5jZShjb21wb25lbnQpO1xuICAgICAgICBpZiAoYmluZGluZ3MpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYXR0cmlidXRlID0gYmluZGluZ3NbaV07XG4gICAgICAgICAgICAgICAgbGV0IHJlZmVyZW5jZSA9IHJvb3RSZWYuZ2V0KGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9ucy5hZGREeW5hbWljQXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZSwgcmVmZXJlbmNlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlkUmVuZGVyTGF5b3V0KGNvbXBvbmVudCwgYm91bmRzKSB7XG4gICAgICAgIGNvbXBvbmVudC5ib3VuZHMgPSBib3VuZHM7XG4gICAgfVxuICAgIGRpZENyZWF0ZShjb21wb25lbnQpIHtcbiAgICAgICAgY29tcG9uZW50LmRpZEluc2VydEVsZW1lbnQoKTtcbiAgICAgICAgY29tcG9uZW50LmRpZFJlbmRlcigpO1xuICAgIH1cbiAgICBnZXRUYWcoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuZGlydGluZXNzVGFnO1xuICAgIH1cbiAgICB1cGRhdGUoY29tcG9uZW50LCBhcmdzKSB7XG4gICAgICAgIGxldCBvbGRBdHRycyA9IGNvbXBvbmVudC5hdHRycztcbiAgICAgICAgbGV0IG5ld0F0dHJzID0gY29tcG9uZW50LmFyZ3MudmFsdWUoKS5hdHRycztcbiAgICAgICAgbGV0IG1lcmdlZCA9IGFzc2lnbih7fSwgbmV3QXR0cnMsIHsgYXR0cnM6IG5ld0F0dHJzIH0pO1xuICAgICAgICBjb21wb25lbnQuc2V0UHJvcGVydGllcyhtZXJnZWQpO1xuICAgICAgICBjb21wb25lbnQuZGlkVXBkYXRlQXR0cnMoeyBvbGRBdHRycywgbmV3QXR0cnMgfSk7XG4gICAgICAgIGNvbXBvbmVudC5kaWRSZWNlaXZlQXR0cnMoeyBvbGRBdHRycywgbmV3QXR0cnMgfSk7XG4gICAgICAgIGNvbXBvbmVudC53aWxsVXBkYXRlKCk7XG4gICAgICAgIGNvbXBvbmVudC53aWxsUmVuZGVyKCk7XG4gICAgfVxuICAgIGRpZFVwZGF0ZUxheW91dCgpIHsgfVxuICAgIGRpZFVwZGF0ZShjb21wb25lbnQpIHtcbiAgICAgICAgY29tcG9uZW50LmRpZFVwZGF0ZSgpO1xuICAgICAgICBjb21wb25lbnQuZGlkUmVuZGVyKCk7XG4gICAgfVxuICAgIGdldERlc3RydWN0b3IoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuY29uc3QgRU1CRVJJU0hfQ1VSTFlfQ09NUE9ORU5UX01BTkFHRVIgPSBuZXcgRW1iZXJpc2hDdXJseUNvbXBvbmVudE1hbmFnZXIoKTtcbmZ1bmN0aW9uIGVtYmVyVG9Cb29sKHZhbHVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICEhdmFsdWU7XG4gICAgfVxufVxuY2xhc3MgRW1iZXJpc2hDb25kaXRpb25hbFJlZmVyZW5jZSBleHRlbmRzIENvbmRpdGlvbmFsUmVmZXJlbmNlIHtcbiAgICB0b0Jvb2wodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGVtYmVyVG9Cb29sKHZhbHVlKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU2ltcGxlUGF0aFJlZmVyZW5jZSB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBwcm9wZXJ0eSkge1xuICAgICAgICB0aGlzLnRhZyA9IFZPTEFUSUxFX1RBRztcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMucHJvcGVydHkgPSBwcm9wZXJ0eTtcbiAgICB9XG4gICAgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC52YWx1ZSgpW3RoaXMucHJvcGVydHldO1xuICAgIH1cbiAgICBnZXQocHJvcCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVBhdGhSZWZlcmVuY2UodGhpcywgcHJvcCk7XG4gICAgfVxufVxuY2xhc3MgSGVscGVyUmVmZXJlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihoZWxwZXIsIGFyZ3MpIHtcbiAgICAgICAgdGhpcy50YWcgPSBWT0xBVElMRV9UQUc7XG4gICAgICAgIHRoaXMuaGVscGVyID0gaGVscGVyO1xuICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgIH1cbiAgICB2YWx1ZSgpIHtcbiAgICAgICAgbGV0IHsgaGVscGVyLCBhcmdzOiB7IHBvc2l0aW9uYWwsIG5hbWVkIH0gfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBoZWxwZXIocG9zaXRpb25hbC52YWx1ZSgpLCBuYW1lZC52YWx1ZSgpKTtcbiAgICB9XG4gICAgZ2V0KHByb3ApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVQYXRoUmVmZXJlbmNlKHRoaXMsIHByb3ApO1xuICAgIH1cbn1cbmNsYXNzIEluZXJ0TW9kaWZpZXJNYW5hZ2VyIHtcbiAgICBjcmVhdGUoKSB7IH1cbiAgICBpbnN0YWxsKG1vZGlmaWVyKSB7IH1cbiAgICB1cGRhdGUobW9kaWZpZXIpIHsgfVxuICAgIGdldERlc3RydWN0b3IobW9kaWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFRlc3RNb2RpZmllciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgYXJncywgZG9tKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBUZXN0TW9kaWZpZXJNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbnN0YWxsZWRFbGVtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLnVwZGF0ZWRFbGVtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmRlc3Ryb3llZE1vZGlmaWVycyA9IFtdO1xuICAgIH1cbiAgICBjcmVhdGUoZWxlbWVudCwgYXJncywgZHluYW1pY1Njb3BlLCBkb20pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUZXN0TW9kaWZpZXIoZWxlbWVudCwgYXJncywgZG9tKTtcbiAgICB9XG4gICAgaW5zdGFsbCh7IGVsZW1lbnQsIGFyZ3MsIGRvbSB9KSB7XG4gICAgICAgIHRoaXMuaW5zdGFsbGVkRWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgbGV0IHBhcmFtID0gYXJncy5wb3NpdGlvbmFsLmF0KDApLnZhbHVlKCk7XG4gICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtbW9kaWZpZXInLCBgaW5zdGFsbGVkIC0gJHtwYXJhbX1gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB1cGRhdGUoeyBlbGVtZW50LCBhcmdzLCBkb20gfSkge1xuICAgICAgICB0aGlzLnVwZGF0ZWRFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICBsZXQgcGFyYW0gPSBhcmdzLnBvc2l0aW9uYWwuYXQoMCkudmFsdWUoKTtcbiAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1tb2RpZmllcicsIGB1cGRhdGVkIC0gJHtwYXJhbX1gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnZXREZXN0cnVjdG9yKG1vZGlmaWVyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95ZWRNb2RpZmllcnMucHVzaChtb2RpZmllcik7XG4gICAgICAgICAgICAgICAgbGV0IHsgZWxlbWVudCwgZG9tIH0gPSBtb2RpZmllcjtcbiAgICAgICAgICAgICAgICBkb20ucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLW1vZGlmaWVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFRlc3RFbnZpcm9ubWVudCBleHRlbmRzIEVudmlyb25tZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IGRvY3VtZW50LFxuICAgICAgICAgICAgYXBwZW5kT3BlcmF0aW9uczogbmV3IERPTVRyZWVDb25zdHJ1Y3Rpb24oZG9jdW1lbnQpXG4gICAgICAgIH0pIHtcbiAgICAgICAgc3VwZXIoeyBhcHBlbmRPcGVyYXRpb25zOiBvcHRpb25zLmFwcGVuZE9wZXJhdGlvbnMsIHVwZGF0ZU9wZXJhdGlvbnM6IG5ldyBET01DaGFuZ2VzKG9wdGlvbnMuZG9jdW1lbnQpIH0pO1xuICAgICAgICB0aGlzLmhlbHBlcnMgPSBkaWN0KCk7XG4gICAgICAgIHRoaXMubW9kaWZpZXJzID0gZGljdCgpO1xuICAgICAgICB0aGlzLnBhcnRpYWxzID0gZGljdCgpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBkaWN0KCk7XG4gICAgICAgIHRoaXMuY29tcGlsZWRMYXlvdXRzID0gZGljdCgpO1xuICAgICAgICB0aGlzLnVzZWxlc3NBbmNob3IgPSBvcHRpb25zLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckhlbHBlcihcImlmXCIsIChbY29uZCwgeWVzLCBub10pID0+IGNvbmQgPyB5ZXMgOiBubyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJIZWxwZXIoXCJ1bmxlc3NcIiwgKFtjb25kLCB5ZXMsIG5vXSkgPT4gY29uZCA/IG5vIDogeWVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckludGVybmFsSGVscGVyKFwiLWdldC1keW5hbWljLXZhclwiLCBnZXREeW5hbWljVmFyKTtcbiAgICAgICAgdGhpcy5yZWdpc3Rlck1vZGlmaWVyKFwiYWN0aW9uXCIsIG5ldyBJbmVydE1vZGlmaWVyTWFuYWdlcigpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckludGVybmFsSGVscGVyKFwiY29tcG9uZW50XCIsICh2bSwgYXJncywgc3ltYm9sVGFibGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRHluYW1pY0NvbXBvbmVudFJlZmVyZW5jZShhcmdzLnBvc2l0aW9uYWwuYXQoMCksIHZtLmVudiwgc3ltYm9sVGFibGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckludGVybmFsSGVscGVyKFwiaGFzaFwiLCAodm0sIGFyZ3MpID0+IGFyZ3MubmFtZWQpO1xuICAgIH1cbiAgICBwcm90b2NvbEZvclVSTCh1cmwpIHtcbiAgICAgICAgdGhpcy51c2VsZXNzQW5jaG9yLmhyZWYgPSB1cmw7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZWxlc3NBbmNob3IucHJvdG9jb2w7XG4gICAgfVxuICAgIHJlZ2lzdGVySGVscGVyKG5hbWUsIGhlbHBlcikge1xuICAgICAgICB0aGlzLmhlbHBlcnNbbmFtZV0gPSAodm0sIGFyZ3MpID0+IG5ldyBIZWxwZXJSZWZlcmVuY2UoaGVscGVyLCBhcmdzKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJJbnRlcm5hbEhlbHBlcihuYW1lLCBoZWxwZXIpIHtcbiAgICAgICAgdGhpcy5oZWxwZXJzW25hbWVdID0gaGVscGVyO1xuICAgIH1cbiAgICByZWdpc3Rlck1vZGlmaWVyKG5hbWUsIG1vZGlmaWVyKSB7XG4gICAgICAgIHRoaXMubW9kaWZpZXJzW25hbWVdID0gbW9kaWZpZXI7XG4gICAgfVxuICAgIHJlZ2lzdGVyUGFydGlhbChuYW1lLCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5wYXJ0aWFsc1tuYW1lXSA9IG5ldyBQYXJ0aWFsRGVmaW5pdGlvbihuYW1lLCByYXdDb21waWxlKHNvdXJjZSwgeyBlbnY6IHRoaXMgfSkpO1xuICAgIH1cbiAgICByZWdpc3RlckNvbXBvbmVudChuYW1lLCBkZWZpbml0aW9uKSB7XG4gICAgICAgIHRoaXMuY29tcG9uZW50c1tuYW1lXSA9IGRlZmluaXRpb247XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgIH1cbiAgICByZWdpc3RlckJhc2ljQ29tcG9uZW50KG5hbWUsIENvbXBvbmVudCwgbGF5b3V0KSB7XG4gICAgICAgIGxldCBkZWZpbml0aW9uID0gbmV3IEJhc2ljQ29tcG9uZW50RGVmaW5pdGlvbihuYW1lLCBCQVNJQ19DT01QT05FTlRfTUFOQUdFUiwgQ29tcG9uZW50LCBsYXlvdXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlckNvbXBvbmVudChuYW1lLCBkZWZpbml0aW9uKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTdGF0aWNUYWdsZXNzQ29tcG9uZW50KG5hbWUsIENvbXBvbmVudCwgbGF5b3V0KSB7XG4gICAgICAgIGxldCBkZWZpbml0aW9uID0gbmV3IFN0YXRpY1RhZ2xlc3NDb21wb25lbnREZWZpbml0aW9uKG5hbWUsIFNUQVRJQ19UQUdMRVNTX0NPTVBPTkVOVF9NQU5BR0VSLCBDb21wb25lbnQsIGxheW91dCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50KG5hbWUsIGRlZmluaXRpb24pO1xuICAgIH1cbiAgICByZWdpc3RlckVtYmVyaXNoQ3VybHlDb21wb25lbnQobmFtZSwgQ29tcG9uZW50LCBsYXlvdXQpIHtcbiAgICAgICAgbGV0IGRlZmluaXRpb24gPSBuZXcgRW1iZXJpc2hDdXJseUNvbXBvbmVudERlZmluaXRpb24obmFtZSwgRU1CRVJJU0hfQ1VSTFlfQ09NUE9ORU5UX01BTkFHRVIsIENvbXBvbmVudCwgbGF5b3V0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJDb21wb25lbnQobmFtZSwgZGVmaW5pdGlvbik7XG4gICAgfVxuICAgIHJlZ2lzdGVyRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50KG5hbWUsIENvbXBvbmVudCwgbGF5b3V0KSB7XG4gICAgICAgIGxldCBkZWZpbml0aW9uID0gbmV3IEVtYmVyaXNoR2xpbW1lckNvbXBvbmVudERlZmluaXRpb24obmFtZSwgRU1CRVJJU0hfR0xJTU1FUl9DT01QT05FTlRfTUFOQUdFUiwgQ29tcG9uZW50LCBsYXlvdXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlckNvbXBvbmVudChuYW1lLCBkZWZpbml0aW9uKTtcbiAgICB9XG4gICAgdG9Db25kaXRpb25hbFJlZmVyZW5jZShyZWZlcmVuY2UpIHtcbiAgICAgICAgaWYgKGlzQ29uc3QocmVmZXJlbmNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIFByaW1pdGl2ZVJlZmVyZW5jZS5jcmVhdGUoZW1iZXJUb0Jvb2wocmVmZXJlbmNlLnZhbHVlKCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVtYmVyaXNoQ29uZGl0aW9uYWxSZWZlcmVuY2UocmVmZXJlbmNlKTtcbiAgICB9XG4gICAgbWFjcm9zKCkge1xuICAgICAgICBsZXQgbWFjcm9zID0gc3VwZXIubWFjcm9zKCk7XG4gICAgICAgIHBvcHVsYXRlQmxvY2tzKG1hY3Jvcy5ibG9ja3MsIG1hY3Jvcy5pbmxpbmVzKTtcbiAgICAgICAgcmV0dXJuIG1hY3JvcztcbiAgICB9XG4gICAgaGFzSGVscGVyKGhlbHBlck5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGhlbHBlck5hbWUubGVuZ3RoID09PSAxICYmIChoZWxwZXJOYW1lWzBdIGluIHRoaXMuaGVscGVycyk7XG4gICAgfVxuICAgIGxvb2t1cEhlbHBlcihoZWxwZXJQYXJ0cykge1xuICAgICAgICBsZXQgaGVscGVyTmFtZSA9IGhlbHBlclBhcnRzWzBdO1xuICAgICAgICBsZXQgaGVscGVyID0gdGhpcy5oZWxwZXJzW2hlbHBlck5hbWVdO1xuICAgICAgICBpZiAoIWhlbHBlcilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGVscGVyIGZvciAke2hlbHBlclBhcnRzLmpvaW4oJy4nKX0gbm90IGZvdW5kLmApO1xuICAgICAgICByZXR1cm4gaGVscGVyO1xuICAgIH1cbiAgICBoYXNQYXJ0aWFsKHBhcnRpYWxOYW1lKSB7XG4gICAgICAgIHJldHVybiBwYXJ0aWFsTmFtZSBpbiB0aGlzLnBhcnRpYWxzO1xuICAgIH1cbiAgICBsb29rdXBQYXJ0aWFsKHBhcnRpYWxOYW1lKSB7XG4gICAgICAgIGxldCBwYXJ0aWFsID0gdGhpcy5wYXJ0aWFsc1twYXJ0aWFsTmFtZV07XG4gICAgICAgIHJldHVybiBwYXJ0aWFsO1xuICAgIH1cbiAgICBoYXNDb21wb25lbnREZWZpbml0aW9uKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jb21wb25lbnRzW25hbWVbMF1dO1xuICAgIH1cbiAgICBnZXRDb21wb25lbnREZWZpbml0aW9uKG5hbWUsIGJsb2NrTWV0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzW25hbWVbMF1dO1xuICAgIH1cbiAgICBoYXNNb2RpZmllcihtb2RpZmllck5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG1vZGlmaWVyTmFtZS5sZW5ndGggPT09IDEgJiYgKG1vZGlmaWVyTmFtZVswXSBpbiB0aGlzLm1vZGlmaWVycyk7XG4gICAgfVxuICAgIGxvb2t1cE1vZGlmaWVyKG1vZGlmaWVyTmFtZSkge1xuICAgICAgICBsZXQgW25hbWVdID0gbW9kaWZpZXJOYW1lO1xuICAgICAgICBsZXQgbW9kaWZpZXIgPSB0aGlzLm1vZGlmaWVyc1tuYW1lXTtcbiAgICAgICAgaWYgKCFtb2RpZmllcilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTW9kaWZpZXIgZm9yICR7bW9kaWZpZXJOYW1lLmpvaW4oJy4nKX0gbm90IGZvdW5kLmApO1xuICAgICAgICByZXR1cm4gbW9kaWZpZXI7XG4gICAgfVxuICAgIGNvbXBpbGUodGVtcGxhdGUpIHtcbiAgICAgICAgcmV0dXJuIHJhd0NvbXBpbGUodGVtcGxhdGUsIHsgZW52OiB0aGlzIH0pO1xuICAgIH1cbiAgICBjb21waWxlTGF5b3V0KHRlbXBsYXRlKSB7XG4gICAgICAgIHJldHVybiByYXdDb21waWxlTGF5b3V0KHRlbXBsYXRlLCB7IGVudjogdGhpcyB9KTtcbiAgICB9XG4gICAgaXRlcmFibGVGb3IocmVmLCBhcmdzKSB7XG4gICAgICAgIGxldCBrZXlQYXRoID0gYXJncy5uYW1lZC5nZXQoXCJrZXlcIikudmFsdWUoKTtcbiAgICAgICAgbGV0IGtleUZvcjtcbiAgICAgICAgaWYgKCFrZXlQYXRoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3BlY2lmeSBhIGtleSBmb3IgI2VhY2gnKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGtleVBhdGgpIHtcbiAgICAgICAgICAgIGNhc2UgJ0BpbmRleCc6XG4gICAgICAgICAgICAgICAga2V5Rm9yID0gKF8sIGluZGV4KSA9PiBTdHJpbmcoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQHByaW1pdGl2ZSc6XG4gICAgICAgICAgICAgICAga2V5Rm9yID0gKGl0ZW0pID0+IFN0cmluZyhpdGVtKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAga2V5Rm9yID0gKGl0ZW0pID0+IGl0ZW1ba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYWJsZShyZWYsIGtleUZvcik7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFRlc3REeW5hbWljU2NvcGUge1xuICAgIGNvbnN0cnVjdG9yKGJ1Y2tldCA9IG51bGwpIHtcbiAgICAgICAgaWYgKGJ1Y2tldCkge1xuICAgICAgICAgICAgdGhpcy5idWNrZXQgPSBhc3NpZ24oe30sIGJ1Y2tldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJ1Y2tldCA9IHt9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVja2V0W2tleV07XG4gICAgfVxuICAgIHNldChrZXksIHJlZmVyZW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWNrZXRba2V5XSA9IHJlZmVyZW5jZTtcbiAgICB9XG4gICAgY2hpbGQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGVzdER5bmFtaWNTY29wZSh0aGlzLmJ1Y2tldCk7XG4gICAgfVxufVxuY2xhc3MgRHluYW1pY0NvbXBvbmVudFJlZmVyZW5jZSB7XG4gICAgY29uc3RydWN0b3IobmFtZVJlZiwgZW52LCBzeW1ib2xUYWJsZSkge1xuICAgICAgICB0aGlzLm5hbWVSZWYgPSBuYW1lUmVmO1xuICAgICAgICB0aGlzLmVudiA9IGVudjtcbiAgICAgICAgdGhpcy5zeW1ib2xUYWJsZSA9IHN5bWJvbFRhYmxlO1xuICAgICAgICB0aGlzLnRhZyA9IG5hbWVSZWYudGFnO1xuICAgIH1cbiAgICB2YWx1ZSgpIHtcbiAgICAgICAgbGV0IHsgZW52LCBuYW1lUmVmIH0gPSB0aGlzO1xuICAgICAgICBsZXQgbmFtZU9yRGVmID0gbmFtZVJlZi52YWx1ZSgpO1xuICAgICAgICBpZiAodHlwZW9mIG5hbWVPckRlZiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnYuZ2V0Q29tcG9uZW50RGVmaW5pdGlvbihbbmFtZU9yRGVmXSwgdGhpcy5zeW1ib2xUYWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNDb21wb25lbnREZWZpbml0aW9uKG5hbWVPckRlZikpIHtcbiAgICAgICAgICAgIHJldHVybiBuYW1lT3JEZWY7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZnVuY3Rpb24gZHluYW1pY0NvbXBvbmVudEZvcih2bSwgc3ltYm9sVGFibGUpIHtcbiAgICBsZXQgYXJncyA9IHZtLmdldEFyZ3MoKTtcbiAgICBsZXQgbmFtZVJlZiA9IGFyZ3MucG9zaXRpb25hbC5hdCgwKTtcbiAgICBsZXQgZW52ID0gdm0uZW52O1xuICAgIHJldHVybiBuZXcgRHluYW1pY0NvbXBvbmVudFJlZmVyZW5jZShuYW1lUmVmLCBlbnYsIHN5bWJvbFRhYmxlKTtcbn1cbjtcbmV4cG9ydCBjbGFzcyBHZW5lcmljQ29tcG9uZW50RGVmaW5pdGlvbiBleHRlbmRzIENvbXBvbmVudERlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIG1hbmFnZXIsIENvbXBvbmVudENsYXNzLCBsYXlvdXQpIHtcbiAgICAgICAgc3VwZXIobmFtZSwgbWFuYWdlciwgQ29tcG9uZW50Q2xhc3MpO1xuICAgICAgICB0aGlzLmxheW91dFN0cmluZyA9IGxheW91dDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzaWNDb21wb25lbnREZWZpbml0aW9uIGV4dGVuZHMgR2VuZXJpY0NvbXBvbmVudERlZmluaXRpb24ge1xufVxuY2xhc3MgU3RhdGljVGFnbGVzc0NvbXBvbmVudERlZmluaXRpb24gZXh0ZW5kcyBHZW5lcmljQ29tcG9uZW50RGVmaW5pdGlvbiB7XG59XG5leHBvcnQgY2xhc3MgRW1iZXJpc2hDdXJseUNvbXBvbmVudERlZmluaXRpb24gZXh0ZW5kcyBHZW5lcmljQ29tcG9uZW50RGVmaW5pdGlvbiB7XG59XG5leHBvcnQgY2xhc3MgRW1iZXJpc2hHbGltbWVyQ29tcG9uZW50RGVmaW5pdGlvbiBleHRlbmRzIEdlbmVyaWNDb21wb25lbnREZWZpbml0aW9uIHtcbn1cbmNsYXNzIEdlbmVyaWNDb21wb25lbnRMYXlvdXRDb21waWxlciB7XG4gICAgY29uc3RydWN0b3IobGF5b3V0U3RyaW5nKSB7XG4gICAgICAgIHRoaXMubGF5b3V0U3RyaW5nID0gbGF5b3V0U3RyaW5nO1xuICAgIH1cbiAgICBjb21waWxlTGF5b3V0KGVudikge1xuICAgICAgICByZXR1cm4gcmF3Q29tcGlsZUxheW91dCh0aGlzLmxheW91dFN0cmluZywgeyBlbnYgfSk7XG4gICAgfVxufVxuY2xhc3MgQmFzaWNDb21wb25lbnRMYXlvdXRDb21waWxlciBleHRlbmRzIEdlbmVyaWNDb21wb25lbnRMYXlvdXRDb21waWxlciB7XG4gICAgY29tcGlsZShidWlsZGVyKSB7XG4gICAgICAgIGJ1aWxkZXIuZnJvbUxheW91dCh0aGlzLmNvbXBpbGVMYXlvdXQoYnVpbGRlci5lbnYpKTtcbiAgICB9XG59XG5jbGFzcyBTdGF0aWNUYWdsZXNzQ29tcG9uZW50TGF5b3V0Q29tcGlsZXIgZXh0ZW5kcyBHZW5lcmljQ29tcG9uZW50TGF5b3V0Q29tcGlsZXIge1xuICAgIGNvbXBpbGUoYnVpbGRlcikge1xuICAgICAgICBidWlsZGVyLndyYXBMYXlvdXQodGhpcy5jb21waWxlTGF5b3V0KGJ1aWxkZXIuZW52KSk7XG4gICAgfVxufVxuZnVuY3Rpb24gRW1iZXJUYWdOYW1lKHZtKSB7XG4gICAgbGV0IHNlbGYgPSB2bS5nZXRTZWxmKCkudmFsdWUoKTtcbiAgICBsZXQgdGFnTmFtZSA9IHNlbGZbJ3RhZ05hbWUnXTtcbiAgICB0YWdOYW1lID0gdGFnTmFtZSA9PT0gJycgPyBudWxsIDogc2VsZlsndGFnTmFtZSddIHx8ICdkaXYnO1xuICAgIHJldHVybiBQcmltaXRpdmVSZWZlcmVuY2UuY3JlYXRlKHRhZ05hbWUpO1xufVxuZnVuY3Rpb24gRW1iZXJJRCh2bSkge1xuICAgIGxldCBzZWxmID0gdm0uZ2V0U2VsZigpLnZhbHVlKCk7XG4gICAgcmV0dXJuIFByaW1pdGl2ZVJlZmVyZW5jZS5jcmVhdGUoYGVtYmVyJHtzZWxmLl9ndWlkfWApO1xufVxuY2xhc3MgRW1iZXJpc2hDdXJseUNvbXBvbmVudExheW91dENvbXBpbGVyIGV4dGVuZHMgR2VuZXJpY0NvbXBvbmVudExheW91dENvbXBpbGVyIHtcbiAgICBjb21waWxlKGJ1aWxkZXIpIHtcbiAgICAgICAgYnVpbGRlci53cmFwTGF5b3V0KHRoaXMuY29tcGlsZUxheW91dChidWlsZGVyLmVudikpO1xuICAgICAgICBidWlsZGVyLnRhZy5keW5hbWljKEVtYmVyVGFnTmFtZSk7XG4gICAgICAgIGJ1aWxkZXIuYXR0cnMuc3RhdGljKCdjbGFzcycsICdlbWJlci12aWV3Jyk7XG4gICAgICAgIGJ1aWxkZXIuYXR0cnMuZHluYW1pYygnaWQnLCBFbWJlcklEKTtcbiAgICB9XG59XG5jbGFzcyBFbWJlcmlzaEdsaW1tZXJDb21wb25lbnRMYXlvdXRDb21waWxlciBleHRlbmRzIEdlbmVyaWNDb21wb25lbnRMYXlvdXRDb21waWxlciB7XG4gICAgY29tcGlsZShidWlsZGVyKSB7XG4gICAgICAgIGJ1aWxkZXIuZnJvbUxheW91dCh0aGlzLmNvbXBpbGVMYXlvdXQoYnVpbGRlci5lbnYpKTtcbiAgICAgICAgYnVpbGRlci5hdHRycy5zdGF0aWMoJ2NsYXNzJywgJ2VtYmVyLXZpZXcnKTtcbiAgICAgICAgYnVpbGRlci5hdHRycy5keW5hbWljKCdpZCcsIEVtYmVySUQpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpbnNwZWN0SG9va3MoQ29tcG9uZW50Q2xhc3MpIHtcbiAgICByZXR1cm4gQ29tcG9uZW50Q2xhc3MuZXh0ZW5kKHtcbiAgICAgICAgaW5pdCgpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmhvb2tzID0ge1xuICAgICAgICAgICAgICAgIGRpZEluaXRBdHRyczogMCxcbiAgICAgICAgICAgICAgICBkaWRVcGRhdGVBdHRyczogMCxcbiAgICAgICAgICAgICAgICBkaWRSZWNlaXZlQXR0cnM6IDAsXG4gICAgICAgICAgICAgICAgd2lsbEluc2VydEVsZW1lbnQ6IDAsXG4gICAgICAgICAgICAgICAgd2lsbFVwZGF0ZTogMCxcbiAgICAgICAgICAgICAgICB3aWxsUmVuZGVyOiAwLFxuICAgICAgICAgICAgICAgIGRpZEluc2VydEVsZW1lbnQ6IDAsXG4gICAgICAgICAgICAgICAgZGlkVXBkYXRlOiAwLFxuICAgICAgICAgICAgICAgIGRpZFJlbmRlcjogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZGlkSW5pdEF0dHJzKCkge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuaG9va3NbJ2RpZEluaXRBdHRycyddKys7XG4gICAgICAgIH0sXG4gICAgICAgIGRpZFVwZGF0ZUF0dHJzKCkge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuaG9va3NbJ2RpZFVwZGF0ZUF0dHJzJ10rKztcbiAgICAgICAgfSxcbiAgICAgICAgZGlkUmVjZWl2ZUF0dHJzKCkge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuaG9va3NbJ2RpZFJlY2VpdmVBdHRycyddKys7XG4gICAgICAgIH0sXG4gICAgICAgIHdpbGxJbnNlcnRFbGVtZW50KCkge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuaG9va3NbJ3dpbGxJbnNlcnRFbGVtZW50J10rKztcbiAgICAgICAgfSxcbiAgICAgICAgd2lsbFVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmhvb2tzWyd3aWxsVXBkYXRlJ10rKztcbiAgICAgICAgfSxcbiAgICAgICAgd2lsbFJlbmRlcigpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmhvb2tzWyd3aWxsUmVuZGVyJ10rKztcbiAgICAgICAgfSxcbiAgICAgICAgZGlkSW5zZXJ0RWxlbWVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmhvb2tzWydkaWRJbnNlcnRFbGVtZW50J10rKztcbiAgICAgICAgfSxcbiAgICAgICAgZGlkVXBkYXRlKCkge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuaG9va3NbJ2RpZFVwZGF0ZSddKys7XG4gICAgICAgIH0sXG4gICAgICAgIGRpZFJlbmRlcigpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmhvb2tzWydkaWRSZW5kZXInXSsrO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5jb25zdCB7IGRlZmF1bHRCbG9jaywgaW52ZXJzZUJsb2NrLCBwYXJhbXMsIGhhc2ggfSA9IEJhc2VsaW5lU3ludGF4Lk5lc3RlZEJsb2NrO1xuZnVuY3Rpb24gcG9wdWxhdGVCbG9ja3MoYmxvY2tzLCBpbmxpbmVzKSB7XG4gICAgYmxvY2tzLmFkZCgnaWRlbnRpdHknLCAoc2V4cCwgYnVpbGRlcikgPT4ge1xuICAgICAgICBidWlsZGVyLmV2YWx1YXRlKHNleHBbNF0pO1xuICAgIH0pO1xuICAgIGJsb2Nrcy5hZGQoJ3JlbmRlci1pbnZlcnNlJywgKHNleHAsIGJ1aWxkZXIpID0+IHtcbiAgICAgICAgYnVpbGRlci5ldmFsdWF0ZShzZXhwWzVdKTtcbiAgICB9KTtcbiAgICBibG9ja3MuYWRkKCctd2l0aC1keW5hbWljLXZhcnMnLCAoc2V4cCwgYnVpbGRlcikgPT4ge1xuICAgICAgICBsZXQgYmxvY2sgPSBkZWZhdWx0QmxvY2soc2V4cCk7XG4gICAgICAgIGxldCBhcmdzID0gY29tcGlsZUFyZ3MocGFyYW1zKHNleHApLCBoYXNoKHNleHApLCBidWlsZGVyKTtcbiAgICAgICAgYnVpbGRlci51bml0KGIgPT4ge1xuICAgICAgICAgICAgYi5wdXRBcmdzKGFyZ3MpO1xuICAgICAgICAgICAgYi5wdXNoRHluYW1pY1Njb3BlKCk7XG4gICAgICAgICAgICBiLmJpbmREeW5hbWljU2NvcGUoYXJncy5uYW1lZC5rZXlzKTtcbiAgICAgICAgICAgIGIuZXZhbHVhdGUodW53cmFwKGJsb2NrKSk7XG4gICAgICAgICAgICBiLnBvcER5bmFtaWNTY29wZSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBibG9ja3MuYWRkKCctaW4tZWxlbWVudCcsIChzZXhwLCBidWlsZGVyKSA9PiB7XG4gICAgICAgIGxldCBibG9jayA9IGRlZmF1bHRCbG9jayhzZXhwKTtcbiAgICAgICAgbGV0IGFyZ3MgPSBjb21waWxlQXJncyhwYXJhbXMoc2V4cCksIGhhc2goc2V4cCksIGJ1aWxkZXIpO1xuICAgICAgICBidWlsZGVyLnB1dEFyZ3MoYXJncyk7XG4gICAgICAgIGJ1aWxkZXIudGVzdCgnc2ltcGxlJyk7XG4gICAgICAgIGJ1aWxkZXIubGFiZWxsZWQobnVsbCwgYiA9PiB7XG4gICAgICAgICAgICBiLmp1bXBVbmxlc3MoJ0VORCcpO1xuICAgICAgICAgICAgYi5wdXNoUmVtb3RlRWxlbWVudCgpO1xuICAgICAgICAgICAgYi5ldmFsdWF0ZSh1bndyYXAoYmxvY2spKTtcbiAgICAgICAgICAgIGIucG9wUmVtb3RlRWxlbWVudCgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBibG9ja3MuYWRkKCdjb21wb25lbnQnLCAoc2V4cCwgYnVpbGRlcikgPT4ge1xuICAgICAgICBsZXQgWywgcGF0aCwgcGFyYW1zLCBoYXNoLCBfZGVmYXVsdCwgaW52ZXJzZV0gPSBzZXhwO1xuICAgICAgICBsZXQgZGVmaW5pdGlvbkFyZ3MgPSBbcGFyYW1zLnNsaWNlKDAsIDEpLCBudWxsLCBudWxsLCBudWxsXTtcbiAgICAgICAgbGV0IGFyZ3MgPSBbcGFyYW1zLnNsaWNlKDEpLCBoYXNoLCBfZGVmYXVsdCwgaW52ZXJzZV07XG4gICAgICAgIGJ1aWxkZXIuY29tcG9uZW50LmR5bmFtaWMoZGVmaW5pdGlvbkFyZ3MsIGR5bmFtaWNDb21wb25lbnRGb3IsIGFyZ3MsIGJ1aWxkZXIuc3ltYm9sVGFibGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBibG9ja3MuYWRkTWlzc2luZygoc2V4cCwgYnVpbGRlcikgPT4ge1xuICAgICAgICBsZXQgWywgcGF0aCwgcGFyYW1zLCBoYXNoLCBfZGVmYXVsdCwgaW52ZXJzZV0gPSBzZXhwO1xuICAgICAgICBsZXQgdGFibGUgPSBidWlsZGVyLnN5bWJvbFRhYmxlO1xuICAgICAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICAgICAgcGFyYW1zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgbGV0IGRlZmluaXRpb25BcmdzID0gW1tbJ2dldCcsIHBhdGhdXSwgaGFzaCwgX2RlZmF1bHQsIGludmVyc2VdO1xuICAgICAgICAgICAgbGV0IGFyZ3MgPSBbcGFyYW1zLCBoYXNoLCBfZGVmYXVsdCwgaW52ZXJzZV07XG4gICAgICAgICAgICBidWlsZGVyLmNvbXBvbmVudC5keW5hbWljKGRlZmluaXRpb25BcmdzLCBkeW5hbWljQ29tcG9uZW50Rm9yLCBhcmdzLCB0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGVmaW5pdGlvbiA9IGJ1aWxkZXIuZW52LmdldENvbXBvbmVudERlZmluaXRpb24ocGF0aCwgYnVpbGRlci5zeW1ib2xUYWJsZSk7XG4gICAgICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICAgICAgICBidWlsZGVyLmNvbXBvbmVudC5zdGF0aWMoZGVmaW5pdGlvbiwgW3BhcmFtcywgaGFzaCwgX2RlZmF1bHQsIGludmVyc2VdLCB0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgaW5saW5lcy5hZGQoJ2NvbXBvbmVudCcsIChwYXRoLCBwYXJhbXMsIGhhc2gsIGJ1aWxkZXIpID0+IHtcbiAgICAgICAgbGV0IGRlZmluaXRpb25BcmdzID0gW3BhcmFtcy5zbGljZSgwLCAxKSwgbnVsbCwgbnVsbCwgbnVsbF07XG4gICAgICAgIGxldCBhcmdzID0gW3BhcmFtcy5zbGljZSgxKSwgaGFzaCwgbnVsbCwgbnVsbF07XG4gICAgICAgIGJ1aWxkZXIuY29tcG9uZW50LmR5bmFtaWMoZGVmaW5pdGlvbkFyZ3MsIGR5bmFtaWNDb21wb25lbnRGb3IsIGFyZ3MsIGJ1aWxkZXIuc3ltYm9sVGFibGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBpbmxpbmVzLmFkZE1pc3NpbmcoKHBhdGgsIHBhcmFtcywgaGFzaCwgYnVpbGRlcikgPT4ge1xuICAgICAgICBsZXQgdGFibGUgPSBidWlsZGVyLnN5bWJvbFRhYmxlO1xuICAgICAgICBsZXQgZGVmaW5pdGlvbiA9IGJ1aWxkZXIuZW52LmdldENvbXBvbmVudERlZmluaXRpb24ocGF0aCwgYnVpbGRlci5zeW1ib2xUYWJsZSk7XG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGxldCBkZWZpbml0aW9uQXJncyA9IFtbWydnZXQnLCBwYXRoXV0sIGhhc2gsIG51bGwsIG51bGxdO1xuICAgICAgICAgICAgbGV0IGFyZ3MgPSBbcGFyYW1zLCBoYXNoLCBudWxsLCBudWxsXTtcbiAgICAgICAgICAgIGJ1aWxkZXIuY29tcG9uZW50LmR5bmFtaWMoZGVmaW5pdGlvbkFyZ3MsIGR5bmFtaWNDb21wb25lbnRGb3IsIGFyZ3MsIHRhYmxlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICAgICAgICBidWlsZGVyLmNvbXBvbmVudC5zdGF0aWMoZGVmaW5pdGlvbiwgW3BhcmFtcywgaGFzaCwgbnVsbCwgbnVsbF0sIHRhYmxlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICByZXR1cm4geyBibG9ja3MsIGlubGluZXMgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHNFbGVtZW50KGVsZW1lbnQsIHRhZ05hbWUsIGF0dHJpYnV0ZXMsIGNvbnRlbnQpIHtcbiAgICBRVW5pdC5wdXNoKGVsZW1lbnQudGFnTmFtZSA9PT0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpLCBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSwgdGFnTmFtZSwgYGV4cGVjdCB0YWdOYW1lIHRvIGJlICR7dGFnTmFtZX1gKTtcbiAgICBsZXQgZXhwZWN0ZWRBdHRycyA9IGRpY3QoKTtcbiAgICBsZXQgZXhwZWN0ZWRDb3VudCA9IDA7XG4gICAgZm9yIChsZXQgcHJvcCBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGV4cGVjdGVkQ291bnQrKztcbiAgICAgICAgbGV0IGV4cGVjdGVkID0gYXR0cmlidXRlc1twcm9wXTtcbiAgICAgICAgbGV0IG1hdGNoZXIgPSB0eXBlb2YgZXhwZWN0ZWQgPT09ICdvYmplY3QnICYmIE1BVENIRVIgaW4gZXhwZWN0ZWQgPyBleHBlY3RlZCA6IGVxdWFsc0F0dHIoZXhwZWN0ZWQpO1xuICAgICAgICBleHBlY3RlZEF0dHJzW3Byb3BdID0gbWF0Y2hlcjtcbiAgICAgICAgUVVuaXQucHVzaChleHBlY3RlZEF0dHJzW3Byb3BdLm1hdGNoKGVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApKSwgbWF0Y2hlci5mYWlsKGVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApKSwgbWF0Y2hlci5mYWlsKGVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApKSwgYEV4cGVjdGVkIGVsZW1lbnQncyAke3Byb3B9IGF0dHJpYnV0ZSAke21hdGNoZXIuZXhwZWN0ZWQoKX1gKTtcbiAgICB9XG4gICAgbGV0IGFjdHVhbEF0dHJpYnV0ZXMgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgYWN0dWFsQXR0cmlidXRlc1tlbGVtZW50LmF0dHJpYnV0ZXNbaV0ubmFtZV0gPSBlbGVtZW50LmF0dHJpYnV0ZXNbaV0udmFsdWU7XG4gICAgfVxuICAgIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgUVVuaXQucHVzaChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQsIG51bGwsIG51bGwsIFwiRWxlbWVudCBtdXN0IGJlIGFuIEhUTUwgRWxlbWVudCwgbm90IGFuIFNWRyBFbGVtZW50XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgUVVuaXQucHVzaChlbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoID09PSBleHBlY3RlZENvdW50LCBlbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoLCBleHBlY3RlZENvdW50LCBgRXhwZWN0ZWQgJHtleHBlY3RlZENvdW50fSBhdHRyaWJ1dGVzOyBnb3QgJHtlbGVtZW50Lm91dGVySFRNTH1gKTtcbiAgICAgICAgaWYgKGNvbnRlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIFFVbml0LnB1c2goZWxlbWVudC5pbm5lckhUTUwgPT09IGNvbnRlbnQsIGVsZW1lbnQuaW5uZXJIVE1MLCBjb250ZW50LCBgVGhlIGVsZW1lbnQgaGFkICcke2NvbnRlbnR9JyBhcyBpdHMgY29udGVudGApO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IE1BVENIRVIgPSBcIjNkNGVmMTk0LTEzYmUtNGNjZi04ZGM3LTg2MmVlYTAyYzkzZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFsc0F0dHIoZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcIjNkNGVmMTk0LTEzYmUtNGNjZi04ZGM3LTg2MmVlYTAyYzkzZVwiOiB0cnVlLFxuICAgICAgICBtYXRjaChhY3R1YWwpIHtcbiAgICAgICAgICAgIHJldHVybiBleHBlY3RlZCA9PT0gYWN0dWFsO1xuICAgICAgICB9LFxuICAgICAgICBleHBlY3RlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBgdG8gZXF1YWwgJHtleHBlY3RlZH1gO1xuICAgICAgICB9LFxuICAgICAgICBmYWlsKGFjdHVhbCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke2FjdHVhbH0gZGlkIG5vdCBlcXVhbCAke2V4cGVjdGVkfWA7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhleHBlY3RlZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwiM2Q0ZWYxOTQtMTNiZS00Y2NmLThkYzctODYyZWVhMDJjOTNlXCI6IHRydWUsXG4gICAgICAgIG1hdGNoKGFjdHVhbCkge1xuICAgICAgICAgICAgcmV0dXJuIGV4cGVjdGVkID09PSBhY3R1YWw7XG4gICAgICAgIH0sXG4gICAgICAgIGV4cGVjdGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIGB0byBlcXVhbCAke2V4cGVjdGVkfWA7XG4gICAgICAgIH0sXG4gICAgICAgIGZhaWwoYWN0dWFsKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7YWN0dWFsfSBkaWQgbm90IGVxdWFsICR7ZXhwZWN0ZWR9YDtcbiAgICAgICAgfVxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcmVnZXgocikge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwiM2Q0ZWYxOTQtMTNiZS00Y2NmLThkYzctODYyZWVhMDJjOTNlXCI6IHRydWUsXG4gICAgICAgIG1hdGNoKHYpIHtcbiAgICAgICAgICAgIHJldHVybiByLnRlc3Qodik7XG4gICAgICAgIH0sXG4gICAgICAgIGV4cGVjdGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIGB0byBtYXRjaCAke3J9YDtcbiAgICAgICAgfSxcbiAgICAgICAgZmFpbChhY3R1YWwpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHthY3R1YWx9IGRpZCBub3QgbWF0Y2ggJHtyfWA7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsYXNzZXMoZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcIjNkNGVmMTk0LTEzYmUtNGNjZi04ZGM3LTg2MmVlYTAyYzkzZVwiOiB0cnVlLFxuICAgICAgICBtYXRjaChhY3R1YWwpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3R1YWwgJiYgKGV4cGVjdGVkLnNwbGl0KCcgJykuc29ydCgpLmpvaW4oJyAnKSA9PT0gYWN0dWFsLnNwbGl0KCcgJykuc29ydCgpLmpvaW4oJyAnKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4cGVjdGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIGB0byBpbmNsdWRlICcke2V4cGVjdGVkfSdgO1xuICAgICAgICB9LFxuICAgICAgICBmYWlsKGFjdHVhbCkge1xuICAgICAgICAgICAgcmV0dXJuIGAnJHthY3R1YWx9JycgZGlkIG5vdCBtYXRjaCAnJHtleHBlY3RlZH0nYDtcbiAgICAgICAgfVxuICAgIH07XG59XG4iXX0=