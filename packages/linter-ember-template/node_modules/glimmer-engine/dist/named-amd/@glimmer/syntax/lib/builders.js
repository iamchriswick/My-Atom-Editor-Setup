enifed("@glimmer/syntax/lib/builders", ["exports"], function (exports) {
    // Statements
    "use strict";

    function buildMustache(path, params, hash, raw, loc) {
        return {
            type: "MustacheStatement",
            path: buildPath(path),
            params: params || [],
            hash: hash || buildHash([]),
            escaped: !raw,
            loc: buildLoc(loc)
        };
    }
    function buildBlock(path, params, hash, program, inverse, loc) {
        return {
            type: "BlockStatement",
            path: buildPath(path),
            params: params ? params.map(buildPath) : [],
            hash: hash || buildHash([]),
            program: program || null,
            inverse: inverse || null,
            loc: buildLoc(loc)
        };
    }
    function buildElementModifier(path, params, hash, loc) {
        return {
            type: "ElementModifierStatement",
            path: buildPath(path),
            params: params || [],
            hash: hash || buildHash([]),
            loc: buildLoc(loc)
        };
    }
    function buildPartial(name, params, hash, indent) {
        return {
            type: "PartialStatement",
            name: name,
            params: params || [],
            hash: hash || buildHash([]),
            indent: indent
        };
    }
    function buildComment(value, loc) {
        return {
            type: "CommentStatement",
            value: value,
            loc: buildLoc(loc)
        };
    }
    function buildMustacheComment(value, loc) {
        return {
            type: "MustacheCommentStatement",
            value: value,
            loc: buildLoc(loc)
        };
    }
    function buildConcat(parts) {
        return {
            type: "ConcatStatement",
            parts: parts || []
        };
    }
    // Nodes
    function buildElement(tag, attributes, modifiers, children, comments, loc) {
        // this is used for backwards compat prior to `comments` being added to the AST
        if (!Array.isArray(comments)) {
            loc = comments;
            comments = [];
        }
        return {
            type: "ElementNode",
            tag: tag || "",
            attributes: attributes || [],
            blockParams: [],
            modifiers: modifiers || [],
            comments: comments || [],
            children: children || [],
            loc: buildLoc(loc)
        };
    }
    function buildAttr(name, value, loc) {
        return {
            type: "AttrNode",
            name: name,
            value: value,
            loc: buildLoc(loc)
        };
    }
    function buildText(chars, loc) {
        return {
            type: "TextNode",
            chars: chars || "",
            loc: buildLoc(loc)
        };
    }
    // Expressions
    function buildSexpr(path, params, hash, loc) {
        return {
            type: "SubExpression",
            path: buildPath(path),
            params: params || [],
            hash: hash || buildHash([]),
            loc: buildLoc(loc)
        };
    }
    function buildPath(original, loc) {
        if (typeof original !== 'string') return original;
        var parts = original.split('.');
        if (parts[0] === 'this') {
            parts[0] = null;
        }
        return {
            type: "PathExpression",
            original: original,
            parts: parts,
            data: false,
            loc: buildLoc(loc)
        };
    }
    function buildString(value) {
        return {
            type: "StringLiteral",
            value: value,
            original: value
        };
    }
    function buildBoolean(value) {
        return {
            type: "BooleanLiteral",
            value: value,
            original: value
        };
    }
    function buildNumber(value) {
        return {
            type: "NumberLiteral",
            value: value,
            original: value
        };
    }
    function buildNull() {
        return {
            type: "NullLiteral",
            value: null,
            original: null
        };
    }
    function buildUndefined() {
        return {
            type: "UndefinedLiteral",
            value: undefined,
            original: undefined
        };
    }
    // Miscellaneous
    function buildHash(pairs) {
        return {
            type: "Hash",
            pairs: pairs || []
        };
    }
    function buildPair(key, value) {
        return {
            type: "HashPair",
            key: key,
            value: value
        };
    }
    function buildProgram(body, blockParams, loc) {
        return {
            type: "Program",
            body: body || [],
            blockParams: blockParams || [],
            loc: buildLoc(loc)
        };
    }
    function buildSource(source) {
        return source || null;
    }
    function buildPosition(line, column) {
        return {
            line: typeof line === 'number' ? line : null,
            column: typeof column === 'number' ? column : null
        };
    }
    function buildLoc() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        if (args.length === 1) {
            var loc = args[0];
            if (typeof loc === 'object') {
                return {
                    source: buildSource(loc.source),
                    start: buildPosition(loc.start.line, loc.start.column),
                    end: buildPosition(loc.end.line, loc.end.column)
                };
            } else {
                return null;
            }
        } else {
            var startLine = args[0];
            var startColumn = args[1];
            var endLine = args[2];
            var endColumn = args[3];
            var source = args[4];

            return {
                source: buildSource(source),
                start: buildPosition(startLine, startColumn),
                end: buildPosition(endLine, endColumn)
            };
        }
    }
    exports.default = {
        mustache: buildMustache,
        block: buildBlock,
        partial: buildPartial,
        comment: buildComment,
        mustacheComment: buildMustacheComment,
        element: buildElement,
        elementModifier: buildElementModifier,
        attr: buildAttr,
        text: buildText,
        sexpr: buildSexpr,
        path: buildPath,
        string: buildString,
        boolean: buildBoolean,
        number: buildNumber,
        undefined: buildUndefined,
        null: buildNull,
        concat: buildConcat,
        hash: buildHash,
        pair: buildPair,
        program: buildProgram,
        loc: buildLoc,
        pos: buildPosition
    };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkBnbGltbWVyL3N5bnRheC9saWIvYnVpbGRlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUVBLGFBQUEsYUFBQSxDQUF1QixJQUFJLEVBQUUsTUFBTyxFQUFFLElBQUssRUFBRSxHQUFJLEVBQUUsR0FBSSxFQUFBO0FBQ3JELGVBQU87QUFDTCxnQkFBSSxFQUFFLG1CQUFtQjtBQUN6QixnQkFBSSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFDckIsa0JBQU0sRUFBRSxNQUFNLElBQUksRUFBRTtBQUNwQixnQkFBSSxFQUFFLElBQUksSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDO0FBQzNCLG1CQUFPLEVBQUUsQ0FBQyxHQUFHO0FBQ2IsZUFBRyxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUM7U0FDbkIsQ0FBQztLQUNIO0FBRUQsYUFBQSxVQUFBLENBQW9CLElBQUksRUFBRSxNQUFPLEVBQUUsSUFBSyxFQUFFLE9BQVEsRUFBRSxPQUFRLEVBQUUsR0FBSSxFQUFBO0FBQ2hFLGVBQU87QUFDTCxnQkFBSSxFQUFFLGdCQUFnQjtBQUN0QixnQkFBSSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFDckIsa0JBQU0sRUFBRSxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO0FBQzNDLGdCQUFJLEVBQUUsSUFBSSxJQUFJLFNBQVMsQ0FBQyxFQUFFLENBQUM7QUFDM0IsbUJBQU8sRUFBRSxPQUFPLElBQUksSUFBSTtBQUN4QixtQkFBTyxFQUFFLE9BQU8sSUFBSSxJQUFJO0FBQ3hCLGVBQUcsRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDO1NBQ25CLENBQUM7S0FDSDtBQUVELGFBQUEsb0JBQUEsQ0FBOEIsSUFBSSxFQUFFLE1BQU8sRUFBRSxJQUFLLEVBQUUsR0FBSSxFQUFBO0FBQ3RELGVBQU87QUFDTCxnQkFBSSxFQUFFLDBCQUEwQjtBQUNoQyxnQkFBSSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUM7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QixlQUFPLEVBQUUsWUFBWTtBQUNyQixjQUFNLEVBQUUsV0FBVztBQUNuQixpQkFBUyxFQUFFLGNBQWM7QUFDekIsWUFBSSxFQUFFLFNBQVM7QUFDZixjQUFNLEVBQUUsV0FBVztBQUNuQixZQUFJLEVBQUUsU0FBUztBQUNmLFlBQUksRUFBRSxTQUFTO0FBQ2YsZUFBTyxFQUFFLFlBQVk7QUFDckIsV0FBRyxFQUFFLFFBQVE7QUFDYixXQUFHLEVBQUUsYUFBYTtLQUNuQiIsImZpbGUiOiJidWlsZGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFN0YXRlbWVudHNcblxuZnVuY3Rpb24gYnVpbGRNdXN0YWNoZShwYXRoLCBwYXJhbXM/LCBoYXNoPywgcmF3PywgbG9jPykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiTXVzdGFjaGVTdGF0ZW1lbnRcIixcbiAgICBwYXRoOiBidWlsZFBhdGgocGF0aCksXG4gICAgcGFyYW1zOiBwYXJhbXMgfHwgW10sXG4gICAgaGFzaDogaGFzaCB8fCBidWlsZEhhc2goW10pLFxuICAgIGVzY2FwZWQ6ICFyYXcsXG4gICAgbG9jOiBidWlsZExvYyhsb2MpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQmxvY2socGF0aCwgcGFyYW1zPywgaGFzaD8sIHByb2dyYW0/LCBpbnZlcnNlPywgbG9jPykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiQmxvY2tTdGF0ZW1lbnRcIixcbiAgICBwYXRoOiBidWlsZFBhdGgocGF0aCksXG4gICAgcGFyYW1zOiBwYXJhbXMgPyBwYXJhbXMubWFwKGJ1aWxkUGF0aCkgOiBbXSxcbiAgICBoYXNoOiBoYXNoIHx8IGJ1aWxkSGFzaChbXSksXG4gICAgcHJvZ3JhbTogcHJvZ3JhbSB8fCBudWxsLFxuICAgIGludmVyc2U6IGludmVyc2UgfHwgbnVsbCxcbiAgICBsb2M6IGJ1aWxkTG9jKGxvYylcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRFbGVtZW50TW9kaWZpZXIocGF0aCwgcGFyYW1zPywgaGFzaD8sIGxvYz8pIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIkVsZW1lbnRNb2RpZmllclN0YXRlbWVudFwiLFxuICAgIHBhdGg6IGJ1aWxkUGF0aChwYXRoKSxcbiAgICBwYXJhbXM6IHBhcmFtcyB8fCBbXSxcbiAgICBoYXNoOiBoYXNoIHx8IGJ1aWxkSGFzaChbXSksXG4gICAgbG9jOiBidWlsZExvYyhsb2MpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUGFydGlhbChuYW1lLCBwYXJhbXMsIGhhc2gsIGluZGVudCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiUGFydGlhbFN0YXRlbWVudFwiLFxuICAgIG5hbWU6IG5hbWUsXG4gICAgcGFyYW1zOiBwYXJhbXMgfHwgW10sXG4gICAgaGFzaDogaGFzaCB8fCBidWlsZEhhc2goW10pLFxuICAgIGluZGVudDogaW5kZW50XG4gIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQ29tbWVudCh2YWx1ZSwgbG9jPykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiQ29tbWVudFN0YXRlbWVudFwiLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBsb2M6IGJ1aWxkTG9jKGxvYylcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRNdXN0YWNoZUNvbW1lbnQodmFsdWUsIGxvYz8pIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIk11c3RhY2hlQ29tbWVudFN0YXRlbWVudFwiLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBsb2M6IGJ1aWxkTG9jKGxvYylcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRDb25jYXQocGFydHMpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIkNvbmNhdFN0YXRlbWVudFwiLFxuICAgIHBhcnRzOiBwYXJ0cyB8fCBbXVxuICB9O1xufVxuXG4vLyBOb2Rlc1xuXG5mdW5jdGlvbiBidWlsZEVsZW1lbnQodGFnLCBhdHRyaWJ1dGVzPywgbW9kaWZpZXJzPywgY2hpbGRyZW4/LCBjb21tZW50cz8sIGxvYz8pIHtcbiAgLy8gdGhpcyBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0IHByaW9yIHRvIGBjb21tZW50c2AgYmVpbmcgYWRkZWQgdG8gdGhlIEFTVFxuICBpZiAoIUFycmF5LmlzQXJyYXkoY29tbWVudHMpKSB7XG4gICAgbG9jID0gY29tbWVudHM7XG4gICAgY29tbWVudHMgPSBbXTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJFbGVtZW50Tm9kZVwiLFxuICAgIHRhZzogdGFnIHx8IFwiXCIsXG4gICAgYXR0cmlidXRlczogYXR0cmlidXRlcyB8fCBbXSxcbiAgICBibG9ja1BhcmFtczogW10sXG4gICAgbW9kaWZpZXJzOiBtb2RpZmllcnMgfHwgW10sXG4gICAgY29tbWVudHM6IGNvbW1lbnRzIHx8IFtdLFxuICAgIGNoaWxkcmVuOiBjaGlsZHJlbiB8fCBbXSxcbiAgICBsb2M6IGJ1aWxkTG9jKGxvYylcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRBdHRyKG5hbWUsIHZhbHVlLCBsb2M/KSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJBdHRyTm9kZVwiLFxuICAgIG5hbWU6IG5hbWUsXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGxvYzogYnVpbGRMb2MobG9jKVxuICB9O1xufVxuXG5mdW5jdGlvbiBidWlsZFRleHQoY2hhcnM/LCBsb2M/KSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJUZXh0Tm9kZVwiLFxuICAgIGNoYXJzOiBjaGFycyB8fCBcIlwiLFxuICAgIGxvYzogYnVpbGRMb2MobG9jKVxuICB9O1xufVxuXG4vLyBFeHByZXNzaW9uc1xuXG5mdW5jdGlvbiBidWlsZFNleHByKHBhdGgsIHBhcmFtcz8sIGhhc2g/LCBsb2M/KSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJTdWJFeHByZXNzaW9uXCIsXG4gICAgcGF0aDogYnVpbGRQYXRoKHBhdGgpLFxuICAgIHBhcmFtczogcGFyYW1zIHx8IFtdLFxuICAgIGhhc2g6IGhhc2ggfHwgYnVpbGRIYXNoKFtdKSxcbiAgICBsb2M6IGJ1aWxkTG9jKGxvYylcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRQYXRoKG9yaWdpbmFsLCBsb2M/KSB7XG4gIGlmICh0eXBlb2Ygb3JpZ2luYWwgIT09ICdzdHJpbmcnKSByZXR1cm4gb3JpZ2luYWw7XG5cbiAgbGV0IHBhcnRzID0gb3JpZ2luYWwuc3BsaXQoJy4nKTtcblxuICBpZiAocGFydHNbMF0gPT09ICd0aGlzJykge1xuICAgIHBhcnRzWzBdID0gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJQYXRoRXhwcmVzc2lvblwiLFxuICAgIG9yaWdpbmFsLFxuICAgIHBhcnRzLFxuICAgIGRhdGE6IGZhbHNlLFxuICAgIGxvYzogYnVpbGRMb2MobG9jKVxuICB9O1xufVxuXG5mdW5jdGlvbiBidWlsZFN0cmluZyh2YWx1ZSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiU3RyaW5nTGl0ZXJhbFwiLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBvcmlnaW5hbDogdmFsdWVcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRCb29sZWFuKHZhbHVlKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJCb29sZWFuTGl0ZXJhbFwiLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBvcmlnaW5hbDogdmFsdWVcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGROdW1iZXIodmFsdWUpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIk51bWJlckxpdGVyYWxcIixcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgb3JpZ2luYWw6IHZhbHVlXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkTnVsbCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIk51bGxMaXRlcmFsXCIsXG4gICAgdmFsdWU6IG51bGwsXG4gICAgb3JpZ2luYWw6IG51bGxcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRVbmRlZmluZWQoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJVbmRlZmluZWRMaXRlcmFsXCIsXG4gICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICBvcmlnaW5hbDogdW5kZWZpbmVkXG4gIH07XG59XG5cbi8vIE1pc2NlbGxhbmVvdXNcblxuZnVuY3Rpb24gYnVpbGRIYXNoKHBhaXJzPykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiSGFzaFwiLFxuICAgIHBhaXJzOiBwYWlycyB8fCBbXVxuICB9O1xufVxuXG5mdW5jdGlvbiBidWlsZFBhaXIoa2V5LCB2YWx1ZSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiSGFzaFBhaXJcIixcbiAgICBrZXk6IGtleSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRQcm9ncmFtKGJvZHk/LCBibG9ja1BhcmFtcz8sIGxvYz8pIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIlByb2dyYW1cIixcbiAgICBib2R5OiBib2R5IHx8IFtdLFxuICAgIGJsb2NrUGFyYW1zOiBibG9ja1BhcmFtcyB8fCBbXSxcbiAgICBsb2M6IGJ1aWxkTG9jKGxvYylcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRTb3VyY2Uoc291cmNlPykge1xuICByZXR1cm4gc291cmNlIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUG9zaXRpb24obGluZSwgY29sdW1uKSB7XG4gIHJldHVybiB7XG4gICAgbGluZTogKHR5cGVvZiBsaW5lID09PSAnbnVtYmVyJykgPyBsaW5lIDogbnVsbCxcbiAgICBjb2x1bW46ICh0eXBlb2YgY29sdW1uID09PSAnbnVtYmVyJykgPyBjb2x1bW4gOiBudWxsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkTG9jKGxvYzogeyBzb3VyY2U6IGFueSwgc3RhcnQ6IGFueSwgZW5kOiBhbnkgfSk6IHsgc291cmNlOiBhbnksIHN0YXJ0OiBhbnksIGVuZDogYW55IH07XG5mdW5jdGlvbiBidWlsZExvYyhzdGFydExpbmUsIHN0YXJ0Q29sdW1uLCBlbmRMaW5lPywgZW5kQ29sdW1uPywgc291cmNlPyk6IHsgc291cmNlOiBhbnksIHN0YXJ0OiBhbnksIGVuZDogYW55IH07XG5cbmZ1bmN0aW9uIGJ1aWxkTG9jKC4uLmFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgbGV0IGxvYyA9IGFyZ3NbMF07XG5cbiAgICBpZiAodHlwZW9mIGxvYyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNvdXJjZTogYnVpbGRTb3VyY2UobG9jLnNvdXJjZSksXG4gICAgICAgIHN0YXJ0OiBidWlsZFBvc2l0aW9uKGxvYy5zdGFydC5saW5lLCBsb2Muc3RhcnQuY29sdW1uKSxcbiAgICAgICAgZW5kOiBidWlsZFBvc2l0aW9uKGxvYy5lbmQubGluZSwgbG9jLmVuZC5jb2x1bW4pXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IFsgc3RhcnRMaW5lLCBzdGFydENvbHVtbiwgZW5kTGluZSwgZW5kQ29sdW1uLCBzb3VyY2UgXSA9IGFyZ3M7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNvdXJjZTogYnVpbGRTb3VyY2Uoc291cmNlKSxcbiAgICAgIHN0YXJ0OiBidWlsZFBvc2l0aW9uKHN0YXJ0TGluZSwgc3RhcnRDb2x1bW4pLFxuICAgICAgZW5kOiBidWlsZFBvc2l0aW9uKGVuZExpbmUsIGVuZENvbHVtbilcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbXVzdGFjaGU6IGJ1aWxkTXVzdGFjaGUsXG4gIGJsb2NrOiBidWlsZEJsb2NrLFxuICBwYXJ0aWFsOiBidWlsZFBhcnRpYWwsXG4gIGNvbW1lbnQ6IGJ1aWxkQ29tbWVudCxcbiAgbXVzdGFjaGVDb21tZW50OiBidWlsZE11c3RhY2hlQ29tbWVudCxcbiAgZWxlbWVudDogYnVpbGRFbGVtZW50LFxuICBlbGVtZW50TW9kaWZpZXI6IGJ1aWxkRWxlbWVudE1vZGlmaWVyLFxuICBhdHRyOiBidWlsZEF0dHIsXG4gIHRleHQ6IGJ1aWxkVGV4dCxcbiAgc2V4cHI6IGJ1aWxkU2V4cHIsXG4gIHBhdGg6IGJ1aWxkUGF0aCxcbiAgc3RyaW5nOiBidWlsZFN0cmluZyxcbiAgYm9vbGVhbjogYnVpbGRCb29sZWFuLFxuICBudW1iZXI6IGJ1aWxkTnVtYmVyLFxuICB1bmRlZmluZWQ6IGJ1aWxkVW5kZWZpbmVkLFxuICBudWxsOiBidWlsZE51bGwsXG4gIGNvbmNhdDogYnVpbGRDb25jYXQsXG4gIGhhc2g6IGJ1aWxkSGFzaCxcbiAgcGFpcjogYnVpbGRQYWlyLFxuICBwcm9ncmFtOiBidWlsZFByb2dyYW0sXG4gIGxvYzogYnVpbGRMb2MsXG4gIHBvczogYnVpbGRQb3NpdGlvblxufTtcbiJdfQ==