enifed('@glimmer/runtime/lib/compiled/expressions/named-args', ['exports', '@glimmer/runtime/lib/references', '@glimmer/runtime/lib/utils', '@glimmer/reference', '@glimmer/util'], function (exports, _glimmerRuntimeLibReferences, _glimmerRuntimeLibUtils, _glimmerReference, _glimmerUtil) {
    'use strict';

    var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

    function _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

    function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }

    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

    var CompiledNamedArgs = (function () {
        function CompiledNamedArgs(keys, values) {
            _classCallCheck(this, CompiledNamedArgs);

            this.keys = keys;
            this.values = values;
            this.length = keys.length;
            _glimmerUtil.assert(keys.length === values.length, 'Keys and values do not have the same length');
        }

        CompiledNamedArgs.empty = function empty() {
            return COMPILED_EMPTY_NAMED_ARGS;
        };

        CompiledNamedArgs.create = function create(map) {
            var keys = Object.keys(map);
            var length = keys.length;
            if (length > 0) {
                var values = [];
                for (var i = 0; i < length; i++) {
                    values[i] = map[keys[i]];
                }
                return new this(keys, values);
            } else {
                return COMPILED_EMPTY_NAMED_ARGS;
            }
        };

        CompiledNamedArgs.prototype.evaluate = function evaluate(vm) {
            var keys = this.keys;
            var values = this.values;
            var length = this.length;

            var evaluated = new Array(length);
            for (var i = 0; i < length; i++) {
                evaluated[i] = values[i].evaluate(vm);
            }
            return new EvaluatedNamedArgs(keys, evaluated);
        };

        CompiledNamedArgs.prototype.toJSON = function toJSON() {
            var keys = this.keys;
            var values = this.values;

            var inner = keys.map(function (key, i) {
                return key + ': ' + values[i].toJSON();
            }).join(", ");
            return '{' + inner + '}';
        };

        return CompiledNamedArgs;
    })();

    exports.CompiledNamedArgs = CompiledNamedArgs;
    var COMPILED_EMPTY_NAMED_ARGS = new ((function (_CompiledNamedArgs) {
        _inherits(_class, _CompiledNamedArgs);

        function _class() {
            _classCallCheck(this, _class);

            _CompiledNamedArgs.call(this, _glimmerRuntimeLibUtils.EMPTY_ARRAY, _glimmerRuntimeLibUtils.EMPTY_ARRAY);
        }

        _class.prototype.evaluate = function evaluate(_vm) {
            return EVALUATED_EMPTY_NAMED_ARGS;
        };

        _class.prototype.toJSON = function toJSON() {
            return '<EMPTY>';
        };

        return _class;
    })(CompiledNamedArgs))();
    exports.COMPILED_EMPTY_NAMED_ARGS = COMPILED_EMPTY_NAMED_ARGS;

    var EvaluatedNamedArgs = (function () {
        function EvaluatedNamedArgs(keys, values) {
            var _map = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

            _classCallCheck(this, EvaluatedNamedArgs);

            this.keys = keys;
            this.values = values;
            this._map = _map;
            this.tag = _glimmerReference.combineTagged(values);
            this.length = keys.length;
            _glimmerUtil.assert(keys.length === values.length, 'Keys and values do not have the same length');
        }

        EvaluatedNamedArgs.create = function create(map) {
            var keys = Object.keys(map);
            var length = keys.length;
            if (length > 0) {
                var values = new Array(length);
                for (var i = 0; i < length; i++) {
                    values[i] = map[keys[i]];
                }
                return new this(keys, values, map);
            } else {
                return EVALUATED_EMPTY_NAMED_ARGS;
            }
        };

        EvaluatedNamedArgs.empty = function empty() {
            return EVALUATED_EMPTY_NAMED_ARGS;
        };

        EvaluatedNamedArgs.prototype.get = function get(key) {
            var keys = this.keys;
            var values = this.values;

            var index = keys.indexOf(key);
            return index === -1 ? _glimmerRuntimeLibReferences.UNDEFINED_REFERENCE : values[index];
        };

        EvaluatedNamedArgs.prototype.has = function has(key) {
            return this.keys.indexOf(key) !== -1;
        };

        EvaluatedNamedArgs.prototype.value = function value() {
            var keys = this.keys;
            var values = this.values;

            var out = _glimmerUtil.dict();
            for (var i = 0; i < keys.length; i++) {
                var key = keys[i];
                var ref = values[i];
                out[key] = ref.value();
            }
            return out;
        };

        _createClass(EvaluatedNamedArgs, [{
            key: 'map',
            get: function () {
                var map = this._map;

                if (map) {
                    return map;
                }
                map = this._map = _glimmerUtil.dict();
                var keys = this.keys;
                var values = this.values;
                var length = this.length;

                for (var i = 0; i < length; i++) {
                    map[keys[i]] = values[i];
                }
                return map;
            }
        }]);

        return EvaluatedNamedArgs;
    })();

    exports.EvaluatedNamedArgs = EvaluatedNamedArgs;
    var EVALUATED_EMPTY_NAMED_ARGS = new ((function (_EvaluatedNamedArgs) {
        _inherits(_class2, _EvaluatedNamedArgs);

        function _class2() {
            _classCallCheck(this, _class2);

            _EvaluatedNamedArgs.call(this, _glimmerRuntimeLibUtils.EMPTY_ARRAY, _glimmerRuntimeLibUtils.EMPTY_ARRAY, _glimmerRuntimeLibUtils.EMPTY_DICT);
        }

        _class2.prototype.get = function get() {
            return _glimmerRuntimeLibReferences.UNDEFINED_REFERENCE;
        };

        _class2.prototype.has = function has(_key) {
            return false;
        };

        _class2.prototype.value = function value() {
            return _glimmerRuntimeLibUtils.EMPTY_DICT;
        };

        return _class2;
    })(EvaluatedNamedArgs))();
    exports.EVALUATED_EMPTY_NAMED_ARGS = EVALUATED_EMPTY_NAMED_ARGS;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkBnbGltbWVyL3J1bnRpbWUvbGliL2NvbXBpbGVkL2V4cHJlc3Npb25zL25hbWVkLWFyZ3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUFPTSxpQkFBQTtBQXdCSixpQkF4QkksaUJBQUEsQ0F5QkssSUFBMkIsRUFDM0IsTUFBaUQsRUFBQTtrQ0ExQnRELGlCQUFBOztBQXlCSyxnQkFBQSxDQUFBLElBQUksR0FBSixJQUFJLENBQXVCO0FBQzNCLGdCQUFBLENBQUEsTUFBTSxHQUFOLE1BQU0sQ0FBMkM7QUFFeEQsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUMxQix5QkEvQjJCLE1BQU0sQ0ErQjFCLElBQUksQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLE1BQU0sRUFBRSw2Q0FBNkMsQ0FBQyxDQUFDO1NBQ3RGOztBQTlCRyx5QkFBQSxDQUNHLEtBQUssR0FBQSxpQkFBQTtBQUNWLG1CQUFPLHlCQUF5QixDQUFDO1NBQ2xDOztBQUhHLHlCQUFBLENBS0csTUFBTSxHQUFBLGdCQUFDLEdBQXFDLEVBQUE7QUFDakQsZ0JBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDNUIsZ0JBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7QUFFekIsZ0JBQUksTUFBTSxHQUFHLENBQUMsRUFBRTtBQUNkLG9CQUFJLE1BQU0sR0FBaUMsRUFBRSxDQUFDO0FBRTlDLHFCQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQy9CLDBCQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUMxQjtBQUVELHVCQUFPLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQzthQUMvQixNQUFNO0FBQ0wsdUJBQU8seUJB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QUFBOztpQkFtQ0csWUFBQTtvQkFDTyxHQUFHLEdBQUssSUFBSSxDQUFsQixJQUFJOztBQUVWLG9CQUFJLEdBQUcsRUFBRTtBQUNQLDJCQUFPLEdBQUcsQ0FBQztpQkFDWjtBQUVELG1CQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxhQTVHaUIsSUFBSSxFQTRHUSxDQUFDO29CQUUxQyxJQUFJLEdBQXFCLElBQUksQ0FBN0IsSUFBSTtvQkFBRSxNQUFNLEdBQWEsSUFBSSxDQUF2QixNQUFNO29CQUFFLE1BQU0sR0FBSyxJQUFJLENBQWYsTUFBTTs7QUFFMUIscUJBQUksSUFBSSxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDMUIsdUJBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQzFCO0FBRUQsdUJBQU8sR0FBRyxDQUFDO2FBQ1o7OztlQW5ERyxrQkFBQTs7OztBQThFQyxRQUFNLDBCQUEwQixHQUF1Qjs7O0FBQzVELDJCQUFBOzs7QUFDRSxtRUFwSkssV0FBVywwQkFBWCxXQUFXLDBCQUFFLFVBQVUsQ0FvSmUsQ0FBQztTQUM3Qzs7MEJBRUQsR0FBRyxHQUFBLGVBQUE7QUFDRCxnREEzSkssbUJBQW1CLENBMkpHO1NBQzVCOzswQkFFRCxHQUFHLEdBQUEsYUFBQyxJQUFZLEVBQUE7QUFDZCxtQkFBTyxLQUFLLENBQUM7U0FDZDs7MEJBRUQsS0FBSyxHQUFBLGlCQUFBO0FBQ0gsMkNBaEtrQixVQUFVLENBZ0tWO1NBQ25COzs7T0FmOEUsa0JBQWtCLElBZ0JqRyxDQUFDIiwiZmlsZSI6Im5hbWVkLWFyZ3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVTkRFRklORURfUkVGRVJFTkNFIH0gZnJvbSAnLi4vLi4vcmVmZXJlbmNlcyc7XG5pbXBvcnQgeyBDb21waWxlZEV4cHJlc3Npb24gfSBmcm9tICcuLi9leHByZXNzaW9ucyc7XG5pbXBvcnQgVk0gZnJvbSAnLi4vLi4vdm0vYXBwZW5kJztcbmltcG9ydCB7IEVNUFRZX0FSUkFZLCBFTVBUWV9ESUNUIH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgUGF0aFJlZmVyZW5jZSwgUmV2aXNpb25UYWcsIGNvbWJpbmVUYWdnZWQgfSBmcm9tICdAZ2xpbW1lci9yZWZlcmVuY2UnO1xuaW1wb3J0IHsgT3B0aW9uLCBEaWN0LCBPcGFxdWUsIGFzc2VydCwgZGljdCB9IGZyb20gJ0BnbGltbWVyL3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgQ29tcGlsZWROYW1lZEFyZ3Mge1xuICBzdGF0aWMgZW1wdHkoKTogQ29tcGlsZWROYW1lZEFyZ3Mge1xuICAgIHJldHVybiBDT01QSUxFRF9FTVBUWV9OQU1FRF9BUkdTO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZShtYXA6IERpY3Q8Q29tcGlsZWRFeHByZXNzaW9uPE9wYXF1ZT4+KTogQ29tcGlsZWROYW1lZEFyZ3Mge1xuICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMobWFwKTtcbiAgICBsZXQgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG5cbiAgICBpZiAobGVuZ3RoID4gMCkge1xuICAgICAgbGV0IHZhbHVlczogQ29tcGlsZWRFeHByZXNzaW9uPE9wYXF1ZT5bXSA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlc1tpXSA9IG1hcFtrZXlzW2ldXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyB0aGlzKGtleXMsIHZhbHVlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBDT01QSUxFRF9FTVBUWV9OQU1FRF9BUkdTO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBsZW5ndGg6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMga2V5czogUmVhZG9ubHlBcnJheTxzdHJpbmc+LFxuICAgIHB1YmxpYyB2YWx1ZXM6IFJlYWRvbmx5QXJyYXk8Q29tcGlsZWRFeHByZXNzaW9uPE9wYXF1ZT4+XG4gICkge1xuICAgIHRoaXMubGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgYXNzZXJ0KGtleXMubGVuZ3RoID09PSB2YWx1ZXMubGVuZ3RoLCAnS2V5cyBhbmQgdmFsdWVzIGRvIG5vdCBoYXZlIHRoZSBzYW1lIGxlbmd0aCcpO1xuICB9XG5cbiAgZXZhbHVhdGUodm06IFZNKTogRXZhbHVhdGVkTmFtZWRBcmdzIHtcbiAgICBsZXQgeyBrZXlzLCB2YWx1ZXMsIGxlbmd0aCB9ID0gdGhpcztcbiAgICBsZXQgZXZhbHVhdGVkOiBQYXRoUmVmZXJlbmNlPE9wYXF1ZT5bXSA9IG5ldyBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yIChsZXQgaT0wOyBpPGxlbmd0aDsgaSsrKSB7XG4gICAgICBldmFsdWF0ZWRbaV0gPSB2YWx1ZXNbaV0uZXZhbHVhdGUodm0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRXZhbHVhdGVkTmFtZWRBcmdzKGtleXMsIGV2YWx1YXRlZCk7XG4gIH1cblxuICB0b0pTT04oKTogc3RyaW5nIHtcbiAgICBsZXQgeyBrZXlzLCB2YWx1ZXMgfSA9IHRoaXM7XG4gICAgbGV0IGlubmVyID0ga2V5cy5tYXAoKGtleSwgaSkgPT4gYCR7a2V5fTogJHt2YWx1ZXNbaV0udG9KU09OKCl9YCkuam9pbihcIiwgXCIpO1xuICAgIHJldHVybiBgeyR7aW5uZXJ9fWA7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IENPTVBJTEVEX0VNUFRZX05BTUVEX0FSR1M6IENvbXBpbGVkTmFtZWRBcmdzID0gbmV3IChjbGFzcyBleHRlbmRzIENvbXBpbGVkTmFtZWRBcmdzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoRU1QVFlfQVJSQVksIEVNUFRZX0FSUkFZKTtcbiAgfVxuXG4gIGV2YWx1YXRlKF92bTogVk0pOiBFdmFsdWF0ZWROYW1lZEFyZ3Mge1xuICAgIHJldHVybiBFVkFMVUFURURfRU1QVFlfTkFNRURfQVJHUztcbiAgfVxuXG4gIHRvSlNPTigpOiBzdHJpbmcge1xuICAgIHJldHVybiBgPEVNUFRZPmA7XG4gIH1cbn0pO1xuXG5leHBvcnQgY2xhc3MgRXZhbHVhdGVkTmFtZWRBcmdzIHtcbiAgc3RhdGljIGNyZWF0ZShtYXA6IERpY3Q8UGF0aFJlZmVyZW5jZTxPcGFxdWU+Pikge1xuICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMobWFwKTtcbiAgICBsZXQgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG5cbiAgICBpZiAobGVuZ3RoID4gMCkge1xuICAgICAgbGV0IHZhbHVlczogUGF0aFJlZmVyZW5jZTxPcGFxdWU+W10gPSBuZXcgQXJyYXkobGVuZ3RoKTtcblxuICAgICAgZm9yIChsZXQgaT0wOyBpPGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlc1tpXSA9IG1hcFtrZXlzW2ldXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyB0aGlzKGtleXMsIHZhbHVlcywgbWFwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEVWQUxVQVRFRF9FTVBUWV9OQU1FRF9BUkdTO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBlbXB0eSgpOiBFdmFsdWF0ZWROYW1lZEFyZ3Mge1xuICAgIHJldHVybiBFVkFMVUFURURfRU1QVFlfTkFNRURfQVJHUztcbiAgfVxuXG4gIHB1YmxpYyB0YWc6IFJldmlzaW9uVGFnO1xuICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGtleXM6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPixcbiAgICBwdWJsaWMgdmFsdWVzOiBSZWFkb25seUFycmF5PFBhdGhSZWZlcmVuY2U8T3BhcXVlPj4sXG4gICAgcHJpdmF0ZSBfbWFwOiBPcHRpb248RGljdDxQYXRoUmVmZXJlbmNlPE9wYXF1ZT4+PiA9IG51bGxcbiAgKSB7XG4gICAgdGhpcy50YWcgPSBjb21iaW5lVGFnZ2VkKHZhbHVlcyk7XG4gICAgdGhpcy5sZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICBhc3NlcnQoa2V5cy5sZW5ndGggPT09IHZhbHVlcy5sZW5ndGgsICdLZXlzIGFuZCB2YWx1ZXMgZG8gbm90IGhhdmUgdGhlIHNhbWUgbGVuZ3RoJyk7XG4gIH1cblxuICBnZXQgbWFwKCk6IERpY3Q8UGF0aFJlZmVyZW5jZTxPcGFxdWU+PiB7XG4gICAgbGV0IHsgX21hcDogbWFwIH0gPSB0aGlzO1xuXG4gICAgaWYgKG1hcCkge1xuICAgICAgcmV0dXJuIG1hcDtcbiAgICB9XG5cbiAgICBtYXAgPSB0aGlzLl9tYXAgPSBkaWN0PFBhdGhSZWZlcmVuY2U8T3BhcXVlPj4oKTtcblxuICAgIGxldCB7IGtleXMsIHZhbHVlcywgbGVuZ3RoIH0gPSB0aGlzO1xuXG4gICAgZm9yKGxldCBpPTA7IGk8bGVuZ3RoOyBpKyspIHtcbiAgICAgIG1hcFtrZXlzW2ldXSA9IHZhbHVlc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFwO1xuICB9XG5cbiAgZ2V0KGtleTogc3RyaW5nKTogUGF0aFJlZmVyZW5jZTxPcGFxdWU+IHtcbiAgICBsZXQgeyBrZXlzLCB2YWx1ZXMgfSA9IHRoaXM7XG4gICAgbGV0IGluZGV4ID0ga2V5cy5pbmRleE9mKGtleSk7XG4gICAgcmV0dXJuIChpbmRleCA9PT0gLTEpID8gVU5ERUZJTkVEX1JFRkVSRU5DRSA6IHZhbHVlc1tpbmRleF07XG4gIH1cblxuICBoYXMoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5rZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTE7XG4gIH1cblxuICB2YWx1ZSgpOiBEaWN0PE9wYXF1ZT4ge1xuICAgIGxldCB7IGtleXMsIHZhbHVlcyB9ID0gdGhpcztcblxuICAgIGxldCBvdXQgPSBkaWN0PE9wYXF1ZT4oKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGtleSA9IGtleXNbaV07XG4gICAgICBsZXQgcmVmID0gdmFsdWVzW2ldO1xuICAgICAgb3V0W2tleV0gPSByZWYudmFsdWUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0O1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBFVkFMVUFURURfRU1QVFlfTkFNRURfQVJHUzogRXZhbHVhdGVkTmFtZWRBcmdzID0gbmV3IChjbGFzcyBleHRlbmRzIEV2YWx1YXRlZE5hbWVkQXJncyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKEVNUFRZX0FSUkFZLCBFTVBUWV9BUlJBWSwgRU1QVFlfRElDVCk7XG4gIH1cblxuICBnZXQoKTogUGF0aFJlZmVyZW5jZTxPcGFxdWU+IHtcbiAgICByZXR1cm4gVU5ERUZJTkVEX1JFRkVSRU5DRTtcbiAgfVxuXG4gIGhhcyhfa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YWx1ZSgpOiBEaWN0PE9wYXF1ZT4ge1xuICAgIHJldHVybiBFTVBUWV9ESUNUO1xuICB9XG59KTtcbiJdfQ==