enifed('@glimmer/runtime/lib/compiled/opcodes/dom', ['exports', '@glimmer/runtime/lib/opcodes', '@glimmer/util', '@glimmer/reference', '@glimmer/runtime/lib/references', '@glimmer/runtime/lib/compiled/opcodes/vm'], function (exports, _glimmerRuntimeLibOpcodes, _glimmerUtil, _glimmerReference, _glimmerRuntimeLibReferences, _glimmerRuntimeLibCompiledOpcodesVm) {
    'use strict';

    function _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

    function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }

    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.Text, function (vm, _ref) {
        var text = _ref.op1;

        vm.stack().appendText(vm.constants.getString(text));
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.Comment, function (vm, _ref2) {
        var text = _ref2.op1;

        vm.stack().appendComment(vm.constants.getString(text));
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.OpenElement, function (vm, _ref3) {
        var tag = _ref3.op1;

        vm.stack().openElement(vm.constants.getString(tag));
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.PushRemoteElement, function (vm) {
        var reference = vm.frame.getOperand();
        var cache = _glimmerReference.isConst(reference) ? undefined : new _glimmerReference.ReferenceCache(reference);
        var element = cache ? cache.peek() : reference.value();
        vm.stack().pushRemoteElement(element);
        if (cache) {
            vm.updateWith(new _glimmerRuntimeLibCompiledOpcodesVm.Assert(cache));
        }
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.PopRemoteElement, function (vm) {
        return vm.stack().popRemoteElement();
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.OpenComponentElement, function (vm, _ref4) {
        var _tag = _ref4.op1;

        var tag = vm.constants.getString(_tag);
        vm.stack().openElement(tag, new ComponentElementOperations(vm.env));
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.OpenDynamicElement, function (vm) {
        var tagName = vm.frame.getOperand().value();
        vm.stack().openElement(tagName);
    });

    var ClassList = (function () {
        function ClassList() {
            _classCallCheck(this, ClassList);

            this.list = null;
            this.isConst = true;
        }

        ClassList.prototype.append = function append(reference) {
            var list = this.list;
            var isConst = this.isConst;

            if (list === null) list = this.list = [];
            list.push(reference);
            this.isConst = isConst && _glimmerReference.isConst(reference);
        };

        ClassList.prototype.toReference = function toReference() {
            var list = this.list;
            var isConst = this.isConst;

            if (!list) return _glimmerRuntimeLibReferences.NULL_REFERENCE;
            if (isConst) return _glimmerRuntimeLibReferences.PrimitiveReference.create(toClassName(list));
            return new ClassListReference(list);
        };

        return ClassList;
    })();

    var ClassListReference = (function (_CachedReference) {
        _inherits(ClassListReference, _CachedReference);

        function ClassListReference(list) {
            _classCallCheck(this, ClassListReference);

            _CachedReference.call(this);
            this.list = [];
            this.tag = _glimmerReference.combineTagged(list);
            this.list = list;
        }

        ClassListReference.prototype.compute = function compute() {
            return toClassName(this.list);
        };

        return ClassListReference;
    })(_glimmerReference.CachedReference);

    function toClassName(list) {
        var ret = [];
        for (var i = 0; i < list.length; i++) {
            var value = list[i].value();
            if (value !== false && value !== null && value !== undefined) ret.push(value);
        }
        return ret.length === 0 ? null : ret.join(' ');
    }

    var SimpleElementOperations = (function () {
        function SimpleElementOperations(env) {
            _classCallCheck(this, SimpleElementOperations);

            this.env = env;
            this.opcodes = null;
            this.classList = null;
        }

        SimpleElementOperations.prototype.addStaticAttribute = function addStaticAttribute(element, name, value) {
            if (name === 'class') {
                this.addClass(_glimmerRuntimeLibReferences.PrimitiveReference.create(value));
            } else {
                this.env.getAppendOperations().setAttribute(element, name, value);
            }
        };

        SimpleElementOperations.prototype.addStaticAttributeNS = function addStaticAttributeNS(element, namespace, name, value) {
            this.env.getAppendOperations().setAttribute(element, name, value, namespace);
        };

        SimpleElementOperations.prototype.addDynamicAttribute = function addDynamicAttribute(element, name, reference, isTrusting) {
            if (name === 'class') {
                this.addClass(reference);
            } else {
                var attributeManager = this.env.attributeFor(element, name, isTrusting);
                var attribute = new DynamicAttribute(element, attributeManager, name, reference);
                this.addAttribute(attribute);
            }
        };

        SimpleElementOperations.prototype.addDynamicAttributeNS = function addDynamicAttributeNS(element, namespace, name, reference, isTrusting) {
            var attributeManager = this.env.attributeFor(element, name, isTrusting, namespace);
            var nsAttribute = new DynamicAttribute(element, attributeManager, name, reference, namespace);
            this.addAttribute(nsAttribute);
        };

        SimpleElementOperations.prototype.flush = function flush(element, vm) {
            var env = vm.env;
            var opcodes = this.opcodes;
            var classList = this.classList;

            for (var i = 0; opcodes && i < opcodes.length; i++) {
                vm.updateWith(opcodes[i]);
            }
            if (classList) {
                var attributeManager = env.attributeFor(element, 'class', false);
                var attribute = new DynamicAttribute(element, attributeManager, 'class', classList.toReference());
                var opcode = attribute.flush(env);
                if (opcode) {
                    vm.updateWith(opcode);
                }
            }
            this.opcodes = null;
            this.classList = null;
        };

        SimpleElementOperations.prototype.addClass = function addClass(reference) {
            var classList = this.classList;

            if (!classList) {
                classList = this.classList = new ClassList();
            }
            classList.append(reference);
        };

        SimpleElementOperations.prototype.addAttribute = function addAttribute(attribute) {
            var opcode = attribute.flush(this.env);
            if (opcode) {
                var opcodes = this.opcodes;

                if (!opcodes) {
                    opcodes = this.opcodes = [];
                }
                opcodes.push(opcode);
            }
        };

        return SimpleElementOperations;
    })();

    exports.SimpleElementOperations = SimpleElementOperations;

    var ComponentElementOperations = (function () {
        function ComponentElementOperations(env) {
            _classCallCheck(this, ComponentElementOperations);

            this.env = env;
            this.attributeNames = null;
            this.attributes = null;
            this.classList = null;
        }

        ComponentElementOperations.prototype.addStaticAttribute = function addStaticAttribute(element, name, value) {
            if (name === 'class') {
                this.addClass(_glimmerRuntimeLibReferences.PrimitiveReference.create(value));
            } else if (this.shouldAddAttribute(name)) {
                this.addAttribute(name, new StaticAttribute(element, name, value));
            }
        };

        ComponentElementOperations.prototype.addStaticAttributeNS = function addStaticAttributeNS(element, namespace, name, value) {
            if (this.shouldAddAttribute(name)) {
                this.addAttribute(name, new StaticAttribute(element, name, value, namespace));
            }
        };

        ComponentElementOperations.prototype.addDynamicAttribute = function addDynamicAttribute(element, name, reference, isTrusting) {
            if (name === 'class') {
                this.addClass(reference);
            } else if (this.shouldAddAttribute(name)) {
                var attributeManager = this.env.attributeFor(element, name, isTrusting);
                var attribute = new DynamicAttribute(element, attributeManager, name, reference);
                this.addAttribute(name, attribute);
            }
        };

        ComponentElementOperations.prototype.addDynamicAttributeNS = function addDynamicAttributeNS(element, namespace, name, reference, isTrusting) {
            if (this.shouldAddAttribute(name)) {
                var attributeManager = this.env.attributeFor(element, name, isTrusting, namespace);
                var nsAttribute = new DynamicAttribute(element, attributeManager, name, reference, namespace);
                this.addAttribute(name, nsAttribute);
            }
        };

        ComponentElementOperations.prototype.flush = function flush(element, vm) {
            var env = this.env;
            var attributes = this.attributes;
            var classList = this.classList;

            for (var i = 0; attributes && i < attributes.length; i++) {
                var opcode = attributes[i].flush(env);
                if (opcode) {
                    vm.updateWith(opcode);
                }
            }
            if (classList) {
                var attributeManager = env.attributeFor(element, 'class', false);
                var attribute = new DynamicAttribute(element, attributeManager, 'class', classList.toReference());
                var opcode = attribute.flush(env);
                if (opcode) {
                    vm.updateWith(opcode);
                }
            }
        };

        ComponentElementOperations.prototype.shouldAddAttribute = function shouldAddAttribute(name) {
            return !this.attributeNames || this.attributeNames.indexOf(name) === -1;
        };

        ComponentElementOperations.prototype.addClass = function addClass(reference) {
            var classList = this.classList;

            if (!classList) {
                classList = this.classList = new ClassList();
            }
            classList.append(reference);
        };

        ComponentElementOperations.prototype.addAttribute = function addAttribute(name, attribute) {
            var attributeNames = this.attributeNames;
            var attributes = this.attributes;

            if (!attributeNames) {
                attributeNames = this.attributeNames = [];
                attributes = this.attributes = [];
            }
            attributeNames.push(name);
            _glimmerUtil.unwrap(attributes).push(attribute);
        };

        return ComponentElementOperations;
    })();

    exports.ComponentElementOperations = ComponentElementOperations;

    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.FlushElement, function (vm) {
        var stack = vm.stack();
        var action = 'FlushElementOpcode#evaluate';
        stack.expectOperations(action).flush(stack.expectConstructing(action), vm);
        stack.flushElement();
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.CloseElement, function (vm) {
        return vm.stack().closeElement();
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.PopElement, function (vm) {
        return vm.stack().popElement();
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.StaticAttr, function (vm, _ref5) {
        var _name = _ref5.op1;
        var _value = _ref5.op2;
        var _namespace = _ref5.op3;

        var name = vm.constants.getString(_name);
        var value = vm.constants.getString(_value);
        if (_namespace) {
            var namespace = vm.constants.getString(_namespace);
            vm.stack().setStaticAttributeNS(namespace, name, value);
        } else {
            vm.stack().setStaticAttribute(name, value);
        }
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.Modifier, function (vm, _ref6) {
        var _name = _ref6.op1;
        var _manager = _ref6.op2;
        var _args = _ref6.op3;

        var manager = vm.constants.getOther(_manager);
        var rawArgs = vm.constants.getExpression(_args);
        var stack = vm.stack();
        var element = stack.constructing;
        var updateOperations = stack.updateOperations;

        var args = rawArgs.evaluate(vm);
        var dynamicScope = vm.dynamicScope();
        var modifier = manager.create(element, args, dynamicScope, updateOperations);
        vm.env.scheduleInstallModifier(modifier, manager);
        var destructor = manager.getDestructor(modifier);
        if (destructor) {
            vm.newDestroyable(destructor);
        }
        vm.updateWith(new UpdateModifierOpcode(manager, modifier, args));
    });

    var UpdateModifierOpcode = (function (_UpdatingOpcode) {
        _inherits(UpdateModifierOpcode, _UpdatingOpcode);

        function UpdateModifierOpcode(manager, modifier, args) {
            _classCallCheck(this, UpdateModifierOpcode);

            _UpdatingOpcode.call(this);
            this.manager = manager;
            this.modifier = modifier;
            this.args = args;
            this.type = "update-modifier";
            this.tag = args.tag;
            this.lastUpdated = args.tag.value();
        }

        UpdateModifierOpcode.prototype.evaluate = function evaluate(vm) {
            var manager = this.manager;
            var modifier = this.modifier;
            var tag = this.tag;
            var lastUpdated = this.lastUpdated;

            if (!tag.validate(lastUpdated)) {
                vm.env.scheduleUpdateModifier(modifier, manager);
                this.lastUpdated = tag.value();
            }
        };

        UpdateModifierOpcode.prototype.toJSON = function toJSON() {
            return {
                guid: this._guid,
                type: this.type,
                args: [JSON.stringify(this.args)]
            };
        };

        return UpdateModifierOpcode;
    })(_glimmerRuntimeLibOpcodes.UpdatingOpcode);

    exports.UpdateModifierOpcode = UpdateModifierOpcode;

    var StaticAttribute = (function () {
        function StaticAttribute(element, name, value, namespace) {
            _classCallCheck(this, StaticAttribute);

            this.element = element;
            this.name = name;
            this.value = value;
            this.namespace = namespace;
        }

        StaticAttribute.prototype.flush = function flush(env) {
            env.getAppendOperations().setAttribute(this.element, this.name, this.value, this.namespace);
            return null;
        };

        return StaticAttribute;
    })();

    exports.StaticAttribute = StaticAttribute;

    var DynamicAttribute = (function () {
        function DynamicAttribute(element, attributeManager, name, reference, namespace) {
            _classCallCheck(this, DynamicAttribute);

            this.element = element;
            this.attributeManager = attributeManager;
            this.name = name;
            this.reference = reference;
            this.namespace = namespace;
            this.cache = null;
            this.tag = reference.tag;
        }

        DynamicAttribute.prototype.patch = function patch(env) {
            var element = this.element;
            var cache = this.cache;

            var value = _glimmerUtil.expect(cache, 'must patch after flush').revalidate();
            if (_glimmerReference.isModified(value)) {
                this.attributeManager.updateAttribute(env, element, value, this.namespace);
            }
        };

        DynamicAttribute.prototype.flush = function flush(env) {
            var reference = this.reference;
            var element = this.element;

            if (_glimmerReference.isConst(reference)) {
                var value = reference.value();
                this.attributeManager.setAttribute(env, element, value, this.namespace);
                return null;
            } else {
                var cache = this.cache = new _glimmerReference.ReferenceCache(reference);
                var value = cache.peek();
                this.attributeManager.setAttribute(env, element, value, this.namespace);
                return new PatchElementOpcode(this);
            }
        };

        DynamicAttribute.prototype.toJSON = function toJSON() {
            var element = this.element;
            var namespace = this.namespace;
            var name = this.name;
            var cache = this.cache;

            var formattedElement = formatElement(element);
            var lastValue = _glimmerUtil.expect(cache, 'must serialize after flush').peek();
            if (namespace) {
                return {
                    element: formattedElement,
                    type: 'attribute',
                    namespace: namespace,
                    name: name,
                    lastValue: lastValue
                };
            }
            return {
                element: formattedElement,
                type: 'attribute',
                namespace: namespace === undefined ? null : namespace,
                name: name,
                lastValue: lastValue
            };
        };

        return DynamicAttribute;
    })();

    exports.DynamicAttribute = DynamicAttribute;

    function formatElement(element) {
        return JSON.stringify('<' + element.tagName.toLowerCase() + ' />');
    }
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.DynamicAttrNS, function (vm, _ref7) {
        var _name = _ref7.op1;
        var _namespace = _ref7.op2;
        var trusting = _ref7.op3;

        var name = vm.constants.getString(_name);
        var namespace = vm.constants.getString(_namespace);
        var reference = vm.frame.getOperand();
        vm.stack().setDynamicAttributeNS(namespace, name, reference, !!trusting);
    });
    _glimmerRuntimeLibOpcodes.APPEND_OPCODES.add(_glimmerRuntimeLibOpcodes.OpcodeName.DynamicAttr, function (vm, _ref8) {
        var _name = _ref8.op1;
        var trusting = _ref8.op2;

        var name = vm.constants.getString(_name);
        var reference = vm.frame.getOperand();
        vm.stack().setDynamicAttribute(name, reference, !!trusting);
    });

    var PatchElementOpcode = (function (_UpdatingOpcode2) {
        _inherits(PatchElementOpcode, _UpdatingOpcode2);

        function PatchElementOpcode(operation) {
            _classCallCheck(this, PatchElementOpcode);

            _UpdatingOpcode2.call(this);
            this.type = "patch-element";
            this.tag = operation.tag;
            this.operation = operation;
        }

        PatchElementOpcode.prototype.evaluate = function evaluate(vm) {
            this.operation.patch(vm.env);
        };

        PatchElementOpcode.prototype.toJSON = function toJSON() {
            var _guid = this._guid;
            var type = this.type;
            var operation = this.operation;

            return {
                guid: _guid,
                type: type,
                details: operation.toJSON()
            };
        };

        return PatchElementOpcode;
    })(_glimmerRuntimeLibOpcodes.UpdatingOpcode);

    exports.PatchElementOpcode = PatchElementOpcode;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkBnbGltbWVyL3J1bnRpbWUvbGliL2NvbXBpbGVkL29wY29kZXMvZG9tLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQXlCQSw4QkFGUyxjQUFjLENBRVIsR0FBRyxDQUFDLDBCQUZNLFVBQVUsQ0FFYixJQUFJLEVBQUUsVUFBQyxFQUFFLEVBQUUsSUFBYSxFQUFBO1lBQU4sSUFBSSxHQUFYLElBQWEsQ0FBWCxHQUFHOztBQUNwQyxVQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7S0FDckQsQ0FBQyxDQUFDO0FBRUgsOEJBTlMsY0FBYyxDQU1SLEdBQUcsQ0FBQywwQkFOTSxVQUFVLENBTWIsT0FBTyxFQUFFLFVBQUMsRUFBRSxFQUFFLEtBQWEsRUFBQTtZQUFOLElBQUksR0FBWCxLQUFhLENBQVgsR0FBRzs7QUFDdkMsVUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0tBQ3hELENBQUMsQ0FBQztBQUVILDhCQVZTLGNBQWMsQ0FVUixHQUFHLENBQUMsMEJBVk0sVUFBVSxDQVViLFdBQVcsRUFBRSxVQUFDLEVBQUUsRUFBRSxLQUFZLEVBQUE7WUFBTCxHQUFHLEdBQVYsS0FBWSxDQUFWLEdBQUc7O0FBQzNDLFVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNyRCxDQUFDLENBQUM7QUFFSCw4QkFkUyxjQUFjLENBY1IsR0FBRyxDQUFDLDBCQWRNLFVBQVUsQ0FjYixpQkFBaUIsRUFBRSxVQUFBLEVBQUUsRUFBQTtBQUN6QyxZQUFJLFNBQVMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBa0IsQ0FBQztBQUN0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dkQsWUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekMsWUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQVUsQ0FBQztBQUM5QyxVQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsbUJBQW1CLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDN0QsQ0FBQyxDQUFDOztRQUVHLGtCQUEwQjtrQkFBMUIsa0JBQTBCOztBQUs5QixpQkFMSSxrQkFBMEIsQ0FLbEIsU0FBMkIsRUFBQTtrQ0FMbkMsa0JBQTBCOztBQU01Qix1Q0FBTyxDQUFDO0FBTEgsZ0JBQUEsQ0FBQSxJQUFJLEdBQUcsZUFBZSxDQUFDO0FBTTVCLGdCQUFJLENBQUMsR0FBRyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUM7QUFDekIsZ0JBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1NBQzVCOztBQVRHLDBCQUEwQixXQVc5QixRQUFRLEdBQUEsa0JBQUMsRUFBYyxFQUFBO0FBQ3JCLGdCQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDOUI7O0FBYkcsMEJBQTBCLFdBZTlCLE1BQU0sR0FBQSxrQkFBQTtnQkFDRSxLQUFLLEdBQXNCLElBQUksQ0FBL0IsS0FBSztnQkFBRSxJQUFJLEdBQWdCLElBQUksQ0FBeEIsSUFBSTtnQkFBRSxTQUFTLEdBQUssSUFBSSxDQUFsQixTQUFTOztBQUU1QixtQkFBTztBQUNMLG9CQUFJLEVBQUUsS0FBSztBQUNYLG9CQUFJLEVBQUosSUFBSTtBQUNKLHVCQUFPLEVBQUUsU0FBUyxDQUFDLE1BQU0sRUFBRTthQUM1QixDQUFDO1NBQ0g7O2VBdkJHLGtCQUEwQjtpQ0FyZFgsY0FBYyIsImZpbGUiOiJkb20uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGNvZGVKU09OLCBVcGRhdGluZ09wY29kZSB9IGZyb20gJy4uLy4uL29wY29kZXMnO1xuaW1wb3J0IHsgVk0sIFVwZGF0aW5nVk0gfSBmcm9tICcuLi8uLi92bSc7XG5pbXBvcnQgKiBhcyBTaW1wbGUgZnJvbSAnLi4vLi4vZG9tL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgRklYX1JFSUZJQ0FUSU9OIH0gZnJvbSAnLi4vLi4vZG9tL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tICcuLi8uLi9lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBGSVhNRSwgT3B0aW9uLCBPcGFxdWUsIERpY3QsIHVud3JhcCwgZXhwZWN0IH0gZnJvbSAnQGdsaW1tZXIvdXRpbCc7XG5pbXBvcnQge1xuICBDYWNoZWRSZWZlcmVuY2UsXG4gIFJlZmVyZW5jZSxcbiAgUmVmZXJlbmNlQ2FjaGUsXG4gIFJldmlzaW9uVGFnLFxuICBSZXZpc2lvbixcbiAgUGF0aFJlZmVyZW5jZSxcbiAgY29tYmluZVRhZ2dlZCxcbiAgaXNDb25zdCBhcyBpc0NvbnN0UmVmZXJlbmNlLFxuICBpc01vZGlmaWVkXG59IGZyb20gJ0BnbGltbWVyL3JlZmVyZW5jZSc7XG5pbXBvcnQgeyBNb2RpZmllck1hbmFnZXIgfSBmcm9tICcuLi8uLi9tb2RpZmllci9pbnRlcmZhY2VzJztcbmltcG9ydCB7IE5VTExfUkVGRVJFTkNFLCBQcmltaXRpdmVSZWZlcmVuY2UgfSBmcm9tICcuLi8uLi9yZWZlcmVuY2VzJztcbmltcG9ydCB7IENvbXBpbGVkQXJncywgRXZhbHVhdGVkQXJncyB9IGZyb20gJy4uLy4uL2NvbXBpbGVkL2V4cHJlc3Npb25zL2FyZ3MnO1xuaW1wb3J0IHsgQXR0cmlidXRlTWFuYWdlciB9IGZyb20gJy4uLy4uL2RvbS9hdHRyaWJ1dGUtbWFuYWdlcnMnO1xuaW1wb3J0IHsgRWxlbWVudE9wZXJhdGlvbnMgfSBmcm9tICcuLi8uLi9idWlsZGVyJztcbmltcG9ydCB7IEFzc2VydCB9IGZyb20gJy4vdm0nO1xuaW1wb3J0IHsgQVBQRU5EX09QQ09ERVMsIE9wY29kZU5hbWUgYXMgT3AgfSBmcm9tICcuLi8uLi9vcGNvZGVzJztcblxuQVBQRU5EX09QQ09ERVMuYWRkKE9wLlRleHQsICh2bSwgeyBvcDE6IHRleHQgfSkgPT4ge1xuICB2bS5zdGFjaygpLmFwcGVuZFRleHQodm0uY29uc3RhbnRzLmdldFN0cmluZyh0ZXh0KSk7XG59KTtcblxuQVBQRU5EX09QQ09ERVMuYWRkKE9wLkNvbW1lbnQsICh2bSwgeyBvcDE6IHRleHQgfSkgPT4ge1xuICB2bS5zdGFjaygpLmFwcGVuZENvbW1lbnQodm0uY29uc3RhbnRzLmdldFN0cmluZyh0ZXh0KSk7XG59KTtcblxuQVBQRU5EX09QQ09ERVMuYWRkKE9wLk9wZW5FbGVtZW50LCAodm0sIHsgb3AxOiB0YWcgfSkgPT4ge1xuICB2bS5zdGFjaygpLm9wZW5FbGVtZW50KHZtLmNvbnN0YW50cy5nZXRTdHJpbmcodGFnKSk7XG59KTtcblxuQVBQRU5EX09QQ09ERVMuYWRkKE9wLlB1c2hSZW1vdGVFbGVtZW50LCB2bSA9PiB7XG4gIGxldCByZWZlcmVuY2UgPSB2bS5mcmFtZS5nZXRPcGVyYW5kPFNpbXBsZS5FbGVtZW50PigpO1xuICBsZXQgY2FjaGUgPSBpc0NvbnN0UmVmZXJlbmNlKHJlZmVyZW5jZSkgPyB1bmRlZmluZWQgOiBuZXcgUmVmZXJlbmNlQ2FjaGUocmVmZXJlbmNlKTtcbiAgbGV0IGVsZW1lbnQgPSBjYWNoZSA/IGNhY2hlLnBlZWsoKSA6IHJlZmVyZW5jZS52YWx1ZSgpO1xuXG4gIHZtLnN0YWNrKCkucHVzaFJlbW90ZUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgaWYgKGNhY2hlKSB7XG4gICAgdm0udXBkYXRlV2l0aChuZXcgQXNzZXJ0KGNhY2hlKSk7XG4gIH1cbn0pO1xuXG5BUFBFTkRfT1BDT0RFUy5hZGQoT3AuUG9wUmVtb3RlRWxlbWVudCwgdm0gPT4gdm0uc3RhY2soKS5wb3BSZW1vdGVFbGVtZW50KCkpO1xuXG5BUFBFTkRfT1BDT0RFUy5hZGQoT3AuT3BlbkNvbXBvbmVudEVsZW1lbnQsICh2bSwgeyBvcDE6IF90YWcgfSkgPT4ge1xuICBsZXQgdGFnID0gdm0uY29uc3RhbnRzLmdldFN0cmluZyhfdGFnKTtcbiAgdm0uc3RhY2soKS5vcGVuRWxlbWVudCh0YWcsIG5ldyBDb21wb25lbnRFbGVtZW50T3BlcmF0aW9ucyh2bS5lbnYpKTtcbn0pO1xuXG5BUFBFTkRfT1BDT0RFUy5hZGQoT3AuT3BlbkR5bmFtaWNFbGVtZW50LCB2bSA9PiB7XG4gIGxldCB0YWdOYW1lID0gdm0uZnJhbWUuZ2V0T3BlcmFuZDxzdHJpbmc+KCkudmFsdWUoKTtcbiAgdm0uc3RhY2soKS5vcGVuRWxlbWVudCh0YWdOYW1lKTtcbn0pO1xuXG5jbGFzcyBDbGFzc0xpc3Qge1xuICBwcml2YXRlIGxpc3Q6IE9wdGlvbjxSZWZlcmVuY2U8c3RyaW5nPltdPiA9IG51bGw7XG4gIHByaXZhdGUgaXNDb25zdCA9IHRydWU7XG5cbiAgYXBwZW5kKHJlZmVyZW5jZTogUmVmZXJlbmNlPHN0cmluZz4pIHtcbiAgICBsZXQgeyBsaXN0LCBpc0NvbnN0IH0gPSB0aGlzO1xuXG4gICAgaWYgKGxpc3QgPT09IG51bGwpIGxpc3QgPSB0aGlzLmxpc3QgPSBbXTtcblxuICAgIGxpc3QucHVzaChyZWZlcmVuY2UpO1xuICAgIHRoaXMuaXNDb25zdCA9IGlzQ29uc3QgJiYgaXNDb25zdFJlZmVyZW5jZShyZWZlcmVuY2UpO1xuICB9XG5cbiAgdG9SZWZlcmVuY2UoKTogUmVmZXJlbmNlPE9wdGlvbjxzdHJpbmc+PiB7XG4gICAgbGV0IHsgbGlzdCwgaXNDb25zdCB9ID0gdGhpcztcblxuICAgIGlmICghbGlzdCkgcmV0dXJuIE5VTExfUkVGRVJFTkNFO1xuXG4gICAgaWYgKGlzQ29uc3QpIHJldHVybiBQcmltaXRpdmVSZWZlcmVuY2UuY3JlYXRlKHRvQ2xhc3NOYW1lKGxpc3QpKTtcblxuICAgIHJldHVybiBuZXcgQ2xhc3NMaXN0UmVmZXJlbmNlKGxpc3QpO1xuICB9XG5cbn1cblxuY2xhc3MgQ2xhc3NMaXN0UmVmZXJlbmNlIGV4dGVuZHMgQ2FjaGVkUmVmZXJlbmNlPE9wdGlvbjxzdHJpbmc+PiB7XG4gIHB1YmxpYyB0YWc6IFJldmlzaW9uVGFnO1xuICBwcml2YXRlIGxpc3Q6IFJlZmVyZW5jZTxzdHJpbmc+W10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihsaXN0OiBSZWZlcmVuY2U8c3RyaW5nPltdKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnRhZyA9IGNvbWJpbmVUYWdnZWQobGlzdCk7XG4gICAgdGhpcy5saXN0ID0gbGlzdDtcbiAgfVxuXG4gIHByb3RlY3RlZCBjb21wdXRlKCk6IE9wdGlvbjxzdHJpbmc+IHtcbiAgICByZXR1cm4gdG9DbGFzc05hbWUodGhpcy5saXN0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b0NsYXNzTmFtZShsaXN0OiBSZWZlcmVuY2U8c3RyaW5nPltdKTogT3B0aW9uPHN0cmluZz4ge1xuICBsZXQgcmV0OiBPcGFxdWVbXSA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGxldCB2YWx1ZTogRklYTUU8T3BhcXVlLCAndXNlIE9wYXF1ZSBhbmQgbm9ybWFsaXplJz4gPSBsaXN0W2ldLnZhbHVlKCk7XG4gICAgaWYgKHZhbHVlICE9PSBmYWxzZSAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSByZXQucHVzaCh2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gKHJldC5sZW5ndGggPT09IDApID8gbnVsbCA6IHJldC5qb2luKCcgJyk7XG59XG5cbmV4cG9ydCBjbGFzcyBTaW1wbGVFbGVtZW50T3BlcmF0aW9ucyBpbXBsZW1lbnRzIEVsZW1lbnRPcGVyYXRpb25zIHtcbiAgcHJpdmF0ZSBvcGNvZGVzOiBPcHRpb248VXBkYXRpbmdPcGNvZGVbXT4gPSBudWxsO1xuICBwcml2YXRlIGNsYXNzTGlzdDogT3B0aW9uPENsYXNzTGlzdD4gPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZW52OiBFbnZpcm9ubWVudCkge1xuICB9XG5cbiAgYWRkU3RhdGljQXR0cmlidXRlKGVsZW1lbnQ6IFNpbXBsZS5FbGVtZW50LCBuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJykge1xuICAgICAgdGhpcy5hZGRDbGFzcyhQcmltaXRpdmVSZWZlcmVuY2UuY3JlYXRlKHZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW52LmdldEFwcGVuZE9wZXJhdGlvbnMoKS5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIGFkZFN0YXRpY0F0dHJpYnV0ZU5TKGVsZW1lbnQ6IFNpbXBsZS5FbGVtZW50LCBuYW1lc3BhY2U6IHN0cmluZywgbmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5lbnYuZ2V0QXBwZW5kT3BlcmF0aW9ucygpLnNldEF0dHJpYnV0ZShlbGVtZW50LCBuYW1lLCB2YWx1ZSwgbmFtZXNwYWNlKTtcbiAgfVxuXG4gIGFkZER5bmFtaWNBdHRyaWJ1dGUoZWxlbWVudDogU2ltcGxlLkVsZW1lbnQsIG5hbWU6IHN0cmluZywgcmVmZXJlbmNlOiBQYXRoUmVmZXJlbmNlPHN0cmluZz4sIGlzVHJ1c3Rpbmc6IGJvb2xlYW4pIHtcbiAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJykge1xuICAgICAgdGhpcy5hZGRDbGFzcyhyZWZlcmVuY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgYXR0cmlidXRlTWFuYWdlciA9IHRoaXMuZW52LmF0dHJpYnV0ZUZvcihlbGVtZW50LCBuYW1lLCBpc1RydXN0aW5nKTtcbiAgICAgIGxldCBhdHRyaWJ1dGUgPSBuZXcgRHluYW1pY0F0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGVNYW5hZ2VyLCBuYW1lLCByZWZlcmVuY2UpO1xuXG4gICAgICB0aGlzLmFkZEF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgIH1cbiAgfVxuXG4gIGFkZER5bmFtaWNBdHRyaWJ1dGVOUyhlbGVtZW50OiBTaW1wbGUuRWxlbWVudCwgbmFtZXNwYWNlOiBTaW1wbGUuTmFtZXNwYWNlLCBuYW1lOiBzdHJpbmcsIHJlZmVyZW5jZTogUGF0aFJlZmVyZW5jZTxzdHJpbmc+LCBpc1RydXN0aW5nOiBib29sZWFuKSB7XG4gICAgbGV0IGF0dHJpYnV0ZU1hbmFnZXIgPSB0aGlzLmVudi5hdHRyaWJ1dGVGb3IoZWxlbWVudCwgbmFtZSwgaXNUcnVzdGluZywgbmFtZXNwYWNlKTtcbiAgICBsZXQgbnNBdHRyaWJ1dGUgPSBuZXcgRHluYW1pY0F0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGVNYW5hZ2VyLCBuYW1lLCByZWZlcmVuY2UsIG5hbWVzcGFjZSk7XG5cbiAgICB0aGlzLmFkZEF0dHJpYnV0ZShuc0F0dHJpYnV0ZSk7XG4gIH1cblxuICBmbHVzaChlbGVtZW50OiBTaW1wbGUuRWxlbWVudCwgdm06IFZNKSB7XG4gICAgbGV0IHsgZW52IH0gPSB2bTtcbiAgICBsZXQgeyBvcGNvZGVzLCBjbGFzc0xpc3QgfSA9IHRoaXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgb3Bjb2RlcyAmJiBpIDwgb3Bjb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdm0udXBkYXRlV2l0aChvcGNvZGVzW2ldKTtcbiAgICB9XG5cbiAgICBpZiAoY2xhc3NMaXN0KSB7XG4gICAgICBsZXQgYXR0cmlidXRlTWFuYWdlciA9IGVudi5hdHRyaWJ1dGVGb3IoZWxlbWVudCwgJ2NsYXNzJywgZmFsc2UpO1xuICAgICAgbGV0IGF0dHJpYnV0ZSA9IG5ldyBEeW5hbWljQXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZU1hbmFnZXIsICdjbGFzcycsIGNsYXNzTGlzdC50b1JlZmVyZW5jZSgpKTtcbiAgICAgIGxldCBvcGNvZGUgPSBhdHRyaWJ1dGUuZmx1c2goZW52KTtcblxuICAgICAgaWYgKG9wY29kZSkge1xuICAgICAgICB2bS51cGRhdGVXaXRoKG9wY29kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5vcGNvZGVzID0gbnVsbDtcbiAgICB0aGlzLmNsYXNzTGlzdCA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGFkZENsYXNzKHJlZmVyZW5jZTogUGF0aFJlZmVyZW5jZTxzdHJpbmc+KSB7XG4gICAgbGV0IHsgY2xhc3NMaXN0IH0gPSB0aGlzO1xuXG4gICAgaWYgKCFjbGFzc0xpc3QpIHtcbiAgICAgIGNsYXNzTGlzdCA9IHRoaXMuY2xhc3NMaXN0ID0gbmV3IENsYXNzTGlzdCgpO1xuICAgIH1cblxuICAgIGNsYXNzTGlzdC5hcHBlbmQocmVmZXJlbmNlKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkQXR0cmlidXRlKGF0dHJpYnV0ZTogQXR0cmlidXRlKSB7XG4gICAgbGV0IG9wY29kZSA9IGF0dHJpYnV0ZS5mbHVzaCh0aGlzLmVudik7XG5cbiAgICBpZiAob3Bjb2RlKSB7XG4gICAgICBsZXQgeyBvcGNvZGVzIH0gPSB0aGlzO1xuXG4gICAgICBpZiAoIW9wY29kZXMpIHtcbiAgICAgICAgb3Bjb2RlcyA9IHRoaXMub3Bjb2RlcyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBvcGNvZGVzLnB1c2gob3Bjb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbXBvbmVudEVsZW1lbnRPcGVyYXRpb25zIGltcGxlbWVudHMgRWxlbWVudE9wZXJhdGlvbnMge1xuICBwcml2YXRlIGF0dHJpYnV0ZU5hbWVzOiBPcHRpb248c3RyaW5nW10+ID0gbnVsbDtcbiAgcHJpdmF0ZSBhdHRyaWJ1dGVzOiBPcHRpb248QXR0cmlidXRlW10+ID0gbnVsbDtcbiAgcHJpdmF0ZSBjbGFzc0xpc3Q6IE9wdGlvbjxDbGFzc0xpc3Q+ID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVudjogRW52aXJvbm1lbnQpIHtcbiAgfVxuXG4gIGFkZFN0YXRpY0F0dHJpYnV0ZShlbGVtZW50OiBTaW1wbGUuRWxlbWVudCwgbmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKG5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoUHJpbWl0aXZlUmVmZXJlbmNlLmNyZWF0ZSh2YWx1ZSkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zaG91bGRBZGRBdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIHRoaXMuYWRkQXR0cmlidXRlKG5hbWUsIG5ldyBTdGF0aWNBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSwgdmFsdWUpKTtcbiAgICB9XG4gIH1cblxuICBhZGRTdGF0aWNBdHRyaWJ1dGVOUyhlbGVtZW50OiBTaW1wbGUuRWxlbWVudCwgbmFtZXNwYWNlOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLnNob3VsZEFkZEF0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUobmFtZSwgbmV3IFN0YXRpY0F0dHJpYnV0ZShlbGVtZW50LCBuYW1lLCB2YWx1ZSwgbmFtZXNwYWNlKSk7XG4gICAgfVxuICB9XG5cbiAgYWRkRHluYW1pY0F0dHJpYnV0ZShlbGVtZW50OiBTaW1wbGUuRWxlbWVudCwgbmFtZTogc3RyaW5nLCByZWZlcmVuY2U6IFBhdGhSZWZlcmVuY2U8c3RyaW5nPiwgaXNUcnVzdGluZzogYm9vbGVhbikge1xuICAgIGlmIChuYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICB0aGlzLmFkZENsYXNzKHJlZmVyZW5jZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNob3VsZEFkZEF0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgbGV0IGF0dHJpYnV0ZU1hbmFnZXIgPSB0aGlzLmVudi5hdHRyaWJ1dGVGb3IoZWxlbWVudCwgbmFtZSwgaXNUcnVzdGluZyk7XG4gICAgICBsZXQgYXR0cmlidXRlID0gbmV3IER5bmFtaWNBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlTWFuYWdlciwgbmFtZSwgcmVmZXJlbmNlKTtcblxuICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUobmFtZSwgYXR0cmlidXRlKTtcbiAgICB9XG4gIH1cblxuICBhZGREeW5hbWljQXR0cmlidXRlTlMoZWxlbWVudDogU2ltcGxlLkVsZW1lbnQsIG5hbWVzcGFjZTogU2ltcGxlLk5hbWVzcGFjZSwgbmFtZTogc3RyaW5nLCByZWZlcmVuY2U6IFBhdGhSZWZlcmVuY2U8c3RyaW5nPiwgaXNUcnVzdGluZzogYm9vbGVhbikge1xuICAgIGlmICh0aGlzLnNob3VsZEFkZEF0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgbGV0IGF0dHJpYnV0ZU1hbmFnZXIgPSB0aGlzLmVudi5hdHRyaWJ1dGVGb3IoZWxlbWVudCwgbmFtZSwgaXNUcnVzdGluZywgbmFtZXNwYWNlKTtcbiAgICAgIGxldCBuc0F0dHJpYnV0ZSA9IG5ldyBEeW5hbWljQXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZU1hbmFnZXIsIG5hbWUsIHJlZmVyZW5jZSwgbmFtZXNwYWNlKTtcblxuICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUobmFtZSwgbnNBdHRyaWJ1dGUpO1xuICAgIH1cbiAgfVxuXG4gIGZsdXNoKGVsZW1lbnQ6IFNpbXBsZS5FbGVtZW50LCB2bTogVk0pIHtcbiAgICBsZXQgeyBlbnYgfSA9IHRoaXM7XG4gICAgbGV0IHsgYXR0cmlidXRlcywgY2xhc3NMaXN0IH0gPSB0aGlzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGF0dHJpYnV0ZXMgJiYgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBvcGNvZGUgPSBhdHRyaWJ1dGVzW2ldLmZsdXNoKGVudik7XG5cbiAgICAgIGlmIChvcGNvZGUpIHtcbiAgICAgICAgdm0udXBkYXRlV2l0aChvcGNvZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbGFzc0xpc3QpIHtcbiAgICAgIGxldCBhdHRyaWJ1dGVNYW5hZ2VyID0gZW52LmF0dHJpYnV0ZUZvcihlbGVtZW50LCAnY2xhc3MnLCBmYWxzZSk7XG4gICAgICBsZXQgYXR0cmlidXRlID0gbmV3IER5bmFtaWNBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlTWFuYWdlciwgJ2NsYXNzJywgY2xhc3NMaXN0LnRvUmVmZXJlbmNlKCkpO1xuICAgICAgbGV0IG9wY29kZSA9IGF0dHJpYnV0ZS5mbHVzaChlbnYpO1xuXG4gICAgICBpZiAob3Bjb2RlKSB7XG4gICAgICAgIHZtLnVwZGF0ZVdpdGgob3Bjb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3VsZEFkZEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuYXR0cmlidXRlTmFtZXMgfHwgdGhpcy5hdHRyaWJ1dGVOYW1lcy5pbmRleE9mKG5hbWUpID09PSAtMTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkQ2xhc3MocmVmZXJlbmNlOiBQYXRoUmVmZXJlbmNlPHN0cmluZz4pIHtcbiAgICBsZXQgeyBjbGFzc0xpc3QgfSA9IHRoaXM7XG5cbiAgICBpZiAoIWNsYXNzTGlzdCkge1xuICAgICAgY2xhc3NMaXN0ID0gdGhpcy5jbGFzc0xpc3QgPSBuZXcgQ2xhc3NMaXN0KCk7XG4gICAgfVxuXG4gICAgY2xhc3NMaXN0LmFwcGVuZChyZWZlcmVuY2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRBdHRyaWJ1dGUobmFtZTogc3RyaW5nLCBhdHRyaWJ1dGU6IEF0dHJpYnV0ZSkge1xuICAgIGxldCB7IGF0dHJpYnV0ZU5hbWVzLCBhdHRyaWJ1dGVzIH0gPSB0aGlzO1xuXG4gICAgaWYgKCFhdHRyaWJ1dGVOYW1lcykge1xuICAgICAgYXR0cmlidXRlTmFtZXMgPSB0aGlzLmF0dHJpYnV0ZU5hbWVzID0gW107XG4gICAgICBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzID0gW107XG4gICAgfVxuXG4gICAgYXR0cmlidXRlTmFtZXMucHVzaChuYW1lKTtcbiAgICB1bndyYXAoYXR0cmlidXRlcykucHVzaChhdHRyaWJ1dGUpO1xuICB9XG59XG5cbkFQUEVORF9PUENPREVTLmFkZChPcC5GbHVzaEVsZW1lbnQsIHZtID0+IHtcbiAgbGV0IHN0YWNrID0gdm0uc3RhY2soKTtcblxuICBsZXQgYWN0aW9uID0gJ0ZsdXNoRWxlbWVudE9wY29kZSNldmFsdWF0ZSc7XG4gIHN0YWNrLmV4cGVjdE9wZXJhdGlvbnMoYWN0aW9uKS5mbHVzaChzdGFjay5leHBlY3RDb25zdHJ1Y3RpbmcoYWN0aW9uKSwgdm0pO1xuICBzdGFjay5mbHVzaEVsZW1lbnQoKTtcbn0pO1xuXG5BUFBFTkRfT1BDT0RFUy5hZGQoT3AuQ2xvc2VFbGVtZW50LCB2bSA9PiB2bS5zdGFjaygpLmNsb3NlRWxlbWVudCgpKTtcblxuQVBQRU5EX09QQ09ERVMuYWRkKE9wLlBvcEVsZW1lbnQsIHZtID0+IHZtLnN0YWNrKCkucG9wRWxlbWVudCgpKTtcblxuQVBQRU5EX09QQ09ERVMuYWRkKE9wLlN0YXRpY0F0dHIsICh2bSwgeyBvcDE6IF9uYW1lLCBvcDI6IF92YWx1ZSwgb3AzOiBfbmFtZXNwYWNlIH0pID0+IHtcbiAgbGV0IG5hbWUgPSB2bS5jb25zdGFudHMuZ2V0U3RyaW5nKF9uYW1lKTtcbiAgbGV0IHZhbHVlID0gdm0uY29uc3RhbnRzLmdldFN0cmluZyhfdmFsdWUpO1xuXG4gIGlmIChfbmFtZXNwYWNlKSB7XG4gICAgbGV0IG5hbWVzcGFjZSA9IHZtLmNvbnN0YW50cy5nZXRTdHJpbmcoX25hbWVzcGFjZSk7XG4gICAgdm0uc3RhY2soKS5zZXRTdGF0aWNBdHRyaWJ1dGVOUyhuYW1lc3BhY2UsIG5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB2bS5zdGFjaygpLnNldFN0YXRpY0F0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH1cbn0pO1xuXG5BUFBFTkRfT1BDT0RFUy5hZGQoT3AuTW9kaWZpZXIsICh2bSwgeyBvcDE6IF9uYW1lLCBvcDI6IF9tYW5hZ2VyLCBvcDM6IF9hcmdzIH0pID0+IHtcbiAgbGV0IG1hbmFnZXIgPSB2bS5jb25zdGFudHMuZ2V0T3RoZXI8TW9kaWZpZXJNYW5hZ2VyPE9wYXF1ZT4+KF9tYW5hZ2VyKTtcbiAgbGV0IHJhd0FyZ3MgPSB2bS5jb25zdGFudHMuZ2V0RXhwcmVzc2lvbjxDb21waWxlZEFyZ3M+KF9hcmdzKTtcbiAgbGV0IHN0YWNrID0gdm0uc3RhY2soKTtcbiAgbGV0IHsgY29uc3RydWN0aW5nOiBlbGVtZW50LCB1cGRhdGVPcGVyYXRpb25zIH0gPSBzdGFjaztcbiAgbGV0IGFyZ3MgPSByYXdBcmdzLmV2YWx1YXRlKHZtKTtcbiAgbGV0IGR5bmFtaWNTY29wZSA9IHZtLmR5bmFtaWNTY29wZSgpO1xuICBsZXQgbW9kaWZpZXIgPSBtYW5hZ2VyLmNyZWF0ZShlbGVtZW50IGFzIEZJWF9SRUlGSUNBVElPTjxFbGVtZW50PiwgYXJncywgZHluYW1pY1Njb3BlLCB1cGRhdGVPcGVyYXRpb25zKTtcblxuICB2bS5lbnYuc2NoZWR1bGVJbnN0YWxsTW9kaWZpZXIobW9kaWZpZXIsIG1hbmFnZXIpO1xuICBsZXQgZGVzdHJ1Y3RvciA9IG1hbmFnZXIuZ2V0RGVzdHJ1Y3Rvcihtb2RpZmllcik7XG5cbiAgaWYgKGRlc3RydWN0b3IpIHtcbiAgICB2bS5uZXdEZXN0cm95YWJsZShkZXN0cnVjdG9yKTtcbiAgfVxuXG4gIHZtLnVwZGF0ZVdpdGgobmV3IFVwZGF0ZU1vZGlmaWVyT3Bjb2RlKFxuICAgIG1hbmFnZXIsXG4gICAgbW9kaWZpZXIsXG4gICAgYXJnc1xuICApKTtcbn0pO1xuXG5leHBvcnQgY2xhc3MgVXBkYXRlTW9kaWZpZXJPcGNvZGUgZXh0ZW5kcyBVcGRhdGluZ09wY29kZSB7XG4gIHB1YmxpYyB0eXBlID0gXCJ1cGRhdGUtbW9kaWZpZXJcIjtcbiAgcHJpdmF0ZSBsYXN0VXBkYXRlZDogUmV2aXNpb247XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBtYW5hZ2VyOiBNb2RpZmllck1hbmFnZXI8T3BhcXVlPixcbiAgICBwcml2YXRlIG1vZGlmaWVyOiBPcGFxdWUsXG4gICAgcHJpdmF0ZSBhcmdzOiBFdmFsdWF0ZWRBcmdzXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy50YWcgPSBhcmdzLnRhZztcbiAgICB0aGlzLmxhc3RVcGRhdGVkID0gYXJncy50YWcudmFsdWUoKTtcbiAgfVxuXG4gIGV2YWx1YXRlKHZtOiBVcGRhdGluZ1ZNKSB7XG4gICAgbGV0IHsgbWFuYWdlciwgbW9kaWZpZXIsIHRhZywgbGFzdFVwZGF0ZWQgfSA9IHRoaXM7XG5cbiAgICBpZiAoIXRhZy52YWxpZGF0ZShsYXN0VXBkYXRlZCkpIHtcbiAgICAgIHZtLmVudi5zY2hlZHVsZVVwZGF0ZU1vZGlmaWVyKG1vZGlmaWVyLCBtYW5hZ2VyKTtcbiAgICAgIHRoaXMubGFzdFVwZGF0ZWQgPSB0YWcudmFsdWUoKTtcbiAgICB9XG4gIH1cblxuICB0b0pTT04oKTogT3Bjb2RlSlNPTiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGd1aWQ6IHRoaXMuX2d1aWQsXG4gICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICBhcmdzOiBbSlNPTi5zdHJpbmdpZnkodGhpcy5hcmdzKV1cbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXR0cmlidXRlIHtcbiAgbmFtZTogc3RyaW5nO1xuICBmbHVzaChlbnY6IEVudmlyb25tZW50KTogT3B0aW9uPFVwZGF0aW5nT3Bjb2RlPjtcbn1cblxuZXhwb3J0IGNsYXNzIFN0YXRpY0F0dHJpYnV0ZSBpbXBsZW1lbnRzIEF0dHJpYnV0ZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZWxlbWVudDogU2ltcGxlLkVsZW1lbnQsXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyxcbiAgICBwcml2YXRlIHZhbHVlOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBuYW1lc3BhY2U/OiBzdHJpbmdcbiAgKSB7fVxuXG4gIGZsdXNoKGVudjogRW52aXJvbm1lbnQpOiBPcHRpb248VXBkYXRpbmdPcGNvZGU+IHtcbiAgICBlbnYuZ2V0QXBwZW5kT3BlcmF0aW9ucygpLnNldEF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHRoaXMubmFtZSwgdGhpcy52YWx1ZSwgdGhpcy5uYW1lc3BhY2UpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljQXR0cmlidXRlIGltcGxlbWVudHMgQXR0cmlidXRlICB7XG4gIHByaXZhdGUgY2FjaGU6IE9wdGlvbjxSZWZlcmVuY2VDYWNoZTxPcGFxdWU+PiA9IG51bGw7XG5cbiAgcHVibGljIHRhZzogUmV2aXNpb25UYWc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBTaW1wbGUuRWxlbWVudCxcbiAgICBwcml2YXRlIGF0dHJpYnV0ZU1hbmFnZXI6IEF0dHJpYnV0ZU1hbmFnZXIsXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyxcbiAgICBwcml2YXRlIHJlZmVyZW5jZTogUmVmZXJlbmNlPE9wYXF1ZT4sXG4gICAgcHJpdmF0ZSBuYW1lc3BhY2U/OiBTaW1wbGUuTmFtZXNwYWNlXG4gICkge1xuICAgIHRoaXMudGFnID0gcmVmZXJlbmNlLnRhZztcbiAgfVxuXG4gIHBhdGNoKGVudjogRW52aXJvbm1lbnQpIHtcbiAgICBsZXQgeyBlbGVtZW50LCBjYWNoZSB9ID0gdGhpcztcblxuICAgIGxldCB2YWx1ZSA9IGV4cGVjdChjYWNoZSwgJ211c3QgcGF0Y2ggYWZ0ZXIgZmx1c2gnKS5yZXZhbGlkYXRlKCk7XG5cbiAgICBpZiAoaXNNb2RpZmllZCh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuYXR0cmlidXRlTWFuYWdlci51cGRhdGVBdHRyaWJ1dGUoZW52LCBlbGVtZW50IGFzIEZJWE1FPEVsZW1lbnQsICduZWVkcyB0byBiZSByZWlmaWVkIHByb3Blcmx5Jz4sIHZhbHVlLCB0aGlzLm5hbWVzcGFjZSk7XG4gICAgfVxuICB9XG5cbiAgZmx1c2goZW52OiBFbnZpcm9ubWVudCk6IE9wdGlvbjxVcGRhdGluZ09wY29kZT4ge1xuICAgIGxldCB7IHJlZmVyZW5jZSwgZWxlbWVudCB9ID0gdGhpcztcblxuICAgIGlmIChpc0NvbnN0UmVmZXJlbmNlKHJlZmVyZW5jZSkpIHtcbiAgICAgIGxldCB2YWx1ZSA9IHJlZmVyZW5jZS52YWx1ZSgpO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVNYW5hZ2VyLnNldEF0dHJpYnV0ZShlbnYsIGVsZW1lbnQsIHZhbHVlLCB0aGlzLm5hbWVzcGFjZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNhY2hlID0gdGhpcy5jYWNoZSA9IG5ldyBSZWZlcmVuY2VDYWNoZShyZWZlcmVuY2UpO1xuICAgICAgbGV0IHZhbHVlID0gY2FjaGUucGVlaygpO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVNYW5hZ2VyLnNldEF0dHJpYnV0ZShlbnYsIGVsZW1lbnQsIHZhbHVlLCB0aGlzLm5hbWVzcGFjZSk7XG4gICAgICByZXR1cm4gbmV3IFBhdGNoRWxlbWVudE9wY29kZSh0aGlzKTtcbiAgICB9XG4gIH1cblxuICB0b0pTT04oKTogRGljdDxPcHRpb248c3RyaW5nPj4ge1xuICAgIGxldCB7IGVsZW1lbnQsIG5hbWVzcGFjZSwgbmFtZSwgY2FjaGUgfSA9IHRoaXM7XG5cbiAgICBsZXQgZm9ybWF0dGVkRWxlbWVudCA9IGZvcm1hdEVsZW1lbnQoZWxlbWVudCk7XG4gICAgbGV0IGxhc3RWYWx1ZSA9IGV4cGVjdChjYWNoZSwgJ211c3Qgc2VyaWFsaXplIGFmdGVyIGZsdXNoJykucGVlaygpIGFzIHN0cmluZztcblxuICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnQ6IGZvcm1hdHRlZEVsZW1lbnQsXG4gICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxhc3RWYWx1ZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZWxlbWVudDogZm9ybWF0dGVkRWxlbWVudCxcbiAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBuYW1lc3BhY2UsXG4gICAgICBuYW1lLFxuICAgICAgbGFzdFZhbHVlXG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRFbGVtZW50KGVsZW1lbnQ6IFNpbXBsZS5FbGVtZW50KTogc3RyaW5nIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGA8JHtlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKX0gLz5gKTtcbn1cblxuQVBQRU5EX09QQ09ERVMuYWRkKE9wLkR5bmFtaWNBdHRyTlMsICh2bSwgeyBvcDE6IF9uYW1lLCBvcDI6IF9uYW1lc3BhY2UsIG9wMzogdHJ1c3RpbmcgfSkgPT4ge1xuICBsZXQgbmFtZSA9IHZtLmNvbnN0YW50cy5nZXRTdHJpbmcoX25hbWUpO1xuICBsZXQgbmFtZXNwYWNlID0gdm0uY29uc3RhbnRzLmdldFN0cmluZyhfbmFtZXNwYWNlKTtcbiAgbGV0IHJlZmVyZW5jZSA9IHZtLmZyYW1lLmdldE9wZXJhbmQ8c3RyaW5nPigpO1xuICB2bS5zdGFjaygpLnNldER5bmFtaWNBdHRyaWJ1dGVOUyhuYW1lc3BhY2UsIG5hbWUsIHJlZmVyZW5jZSwgISF0cnVzdGluZyk7XG59KTtcblxuQVBQRU5EX09QQ09ERVMuYWRkKE9wLkR5bmFtaWNBdHRyLCAodm0sIHsgb3AxOiBfbmFtZSwgb3AyOiB0cnVzdGluZyB9KSA9PiB7XG4gIGxldCBuYW1lID0gdm0uY29uc3RhbnRzLmdldFN0cmluZyhfbmFtZSk7XG4gIGxldCByZWZlcmVuY2UgPSB2bS5mcmFtZS5nZXRPcGVyYW5kPHN0cmluZz4oKTtcbiAgdm0uc3RhY2soKS5zZXREeW5hbWljQXR0cmlidXRlKG5hbWUsIHJlZmVyZW5jZSwgISF0cnVzdGluZyk7XG59KTtcblxuZXhwb3J0IGNsYXNzIFBhdGNoRWxlbWVudE9wY29kZSBleHRlbmRzIFVwZGF0aW5nT3Bjb2RlIHtcbiAgcHVibGljIHR5cGUgPSBcInBhdGNoLWVsZW1lbnRcIjtcblxuICBwcml2YXRlIG9wZXJhdGlvbjogRHluYW1pY0F0dHJpYnV0ZTtcblxuICBjb25zdHJ1Y3RvcihvcGVyYXRpb246IER5bmFtaWNBdHRyaWJ1dGUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudGFnID0gb3BlcmF0aW9uLnRhZztcbiAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcbiAgfVxuXG4gIGV2YWx1YXRlKHZtOiBVcGRhdGluZ1ZNKSB7XG4gICAgdGhpcy5vcGVyYXRpb24ucGF0Y2godm0uZW52KTtcbiAgfVxuXG4gIHRvSlNPTigpOiBPcGNvZGVKU09OIHtcbiAgICBsZXQgeyBfZ3VpZCwgdHlwZSwgb3BlcmF0aW9uIH0gPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGd1aWQ6IF9ndWlkLFxuICAgICAgdHlwZSxcbiAgICAgIGRldGFpbHM6IG9wZXJhdGlvbi50b0pTT04oKVxuICAgIH07XG4gIH1cbn1cbiJdfQ==