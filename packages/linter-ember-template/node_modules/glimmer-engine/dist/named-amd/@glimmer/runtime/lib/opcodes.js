enifed('@glimmer/runtime/lib/opcodes', ['exports', '@glimmer/util', '@glimmer/runtime/lib/references'], function (exports, _glimmerUtil, _glimmerRuntimeLibReferences) {
    'use strict';

    exports.pretty = pretty;
    exports.defaultToJSON = defaultToJSON;
    exports.inspect = inspect;

    function _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

    function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }

    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

    function pretty(json) {
        return json.type + '(' + (json.args ? json.args.join(', ') : '') + ')';
    }

    function defaultToJSON(opcode) {
        return { type: opcode[0] };
    }

    var OpcodeName;
    exports.OpcodeName = OpcodeName;
    (function (OpcodeName) {
        OpcodeName[OpcodeName["PushChildScope"] = 0] = "PushChildScope";
        OpcodeName[OpcodeName["PopScope"] = 1] = "PopScope";
        OpcodeName[OpcodeName["PushDynamicScope"] = 2] = "PushDynamicScope";
        OpcodeName[OpcodeName["PopDynamicScope"] = 3] = "PopDynamicScope";
        OpcodeName[OpcodeName["Put"] = 4] = "Put";
        OpcodeName[OpcodeName["EvaluatePut"] = 5] = "EvaluatePut";
        OpcodeName[OpcodeName["PutArgs"] = 6] = "PutArgs";
        OpcodeName[OpcodeName["BindPositionalArgs"] = 7] = "BindPositionalArgs";
        OpcodeName[OpcodeName["BindNamedArgs"] = 8] = "BindNamedArgs";
        OpcodeName[OpcodeName["BindBlocks"] = 9] = "BindBlocks";
        OpcodeName[OpcodeName["BindPartialArgs"] = 10] = "BindPartialArgs";
        OpcodeName[OpcodeName["BindCallerScope"] = 11] = "BindCallerScope";
        OpcodeName[OpcodeName["BindDynamicScope"] = 12] = "BindDynamicScope";
        OpcodeName[OpcodeName["Enter"] = 13] = "Enter";
        OpcodeName[OpcodeName["Exit"] = 14] = "Exit";
        OpcodeName[OpcodeName["Evaluate"] = 15] = "Evaluate";
        OpcodeName[OpcodeName["Jump"] = 16] = "Jump";
        OpcodeName[OpcodeName["JumpIf"] = 17] = "JumpIf";
        OpcodeName[OpcodeName["JumpUnless"] = 18] = "JumpUnless";
        OpcodeName[OpcodeName["Test"] = 19] = "Test";
        OpcodeName[OpcodeName["OpenBlock"] = 20] = "OpenBlock";
        OpcodeName[OpcodeName["CloseBlock"] = 21] = "CloseBlock";
        OpcodeName[OpcodeName["PutDynamicComponent"] = 22] = "PutDynamicComponent";
        OpcodeName[OpcodeName["PutComponent"] = 23] = "PutComponent";
        OpcodeName[OpcodeName["OpenComponent"] = 24] = "OpenComponent";
        OpcodeName[OpcodeName["DidCreateElement"] = 25] = "DidCreateElement";
        OpcodeName[OpcodeName["ShadowAttributes"] = 26] = "ShadowAttributes";
        OpcodeName[OpcodeName["DidRenderLayout"] = 27] = "DidRenderLayout";
        OpcodeName[OpcodeName["CloseComponent"] = 28] = "CloseComponent";
        OpcodeName[OpcodeName["Text"] = 29] = "Text";
        OpcodeName[OpcodeName["Comment"] = 30] = "Comment";
        OpcodeName[OpcodeName["DynamicContent"] = 31] = "DynamicContent";
        OpcodeName[OpcodeName["OpenElement"] = 32] = "OpenElement";
        OpcodeName[OpcodeName["PushRemoteElement"] = 33] = "PushRemoteElement";
        OpcodeName[OpcodeName["PopRemoteElement"] = 34] = "PopRemoteElement";
        OpcodeName[OpcodeName["OpenComponentElement"] = 35] = "OpenComponentElement";
        OpcodeName[OpcodeName["OpenDynamicElement"] = 36] = "OpenDynamicElement";
        OpcodeName[OpcodeName["FlushElement"] = 37] = "FlushElement";
        OpcodeName[OpcodeName["CloseElement"] = 38] = "CloseElement";
        OpcodeName[OpcodeName["PopElement"] = 39] = "PopElement";
        OpcodeName[OpcodeName["StaticAttr"] = 40] = "StaticAttr";
        OpcodeName[OpcodeName["Modifier"] = 41] = "Modifier";
        OpcodeName[OpcodeName["DynamicAttrNS"] = 42] = "DynamicAttrNS";
        OpcodeName[OpcodeName["DynamicAttr"] = 43] = "DynamicAttr";
        OpcodeName[OpcodeName["PutIterator"] = 44] = "PutIterator";
        OpcodeName[OpcodeName["EnterList"] = 45] = "EnterList";
        OpcodeName[OpcodeName["ExitList"] = 46] = "ExitList";
        OpcodeName[OpcodeName["EnterWithKey"] = 47] = "EnterWithKey";
        OpcodeName[OpcodeName["NextIter"] = 48] = "NextIter";
        OpcodeName[OpcodeName["PutDynamicPartial"] = 49] = "PutDynamicPartial";
        OpcodeName[OpcodeName["PutPartial"] = 50] = "PutPartial";
        OpcodeName[OpcodeName["EvaluatePartial"] = 51] = "EvaluatePartial"; // (Other<SymbolTable>, Other<Dict<PartialBlock>>)
    })(OpcodeName || (exports.OpcodeName = OpcodeName = {}));

    var Constants = (function () {
        function Constants() {
            _classCallCheck(this, Constants);

            // `0` means NULL
            this.references = [];
            this.strings = [];
            this.expressions = [];
            this.arrays = [];
            this.slices = [];
            this.blocks = [];
            this.functions = [];
            this.others = [];
            this.NULL_REFERENCE = this.reference(_glimmerRuntimeLibReferences.NULL_REFERENCE);
            this.UNDEFINED_REFERENCE = this.reference(_glimmerRuntimeLibReferences.UNDEFINED_REFERENCE);
        }

        Constants.prototype.getReference = function getReference(value) {
            return this.references[value - 1];
        };

        Constants.prototype.reference = function reference(value) {
            var index = this.references.length;
            this.references.push(value);
            return index + 1;
        };

        Constants.prototype.getString = function getString(value) {
            return this.strings[value - 1];
        };

        Constants.prototype.string = function string(value) {
            var index = this.strings.length;
            this.strings.push(value);
            return index + 1;
        };

        Constants.prototype.getExpression = function getExpression(value) {
            return this.expressions[value - 1];
        };

        Constants.prototype.expression = function expression(value) {
            var index = this.expressions.length;
            this.expressions.push(value);
            return index + 1;
        };

        Constants.prototype.getArray = function getArray(value) {
            return this.arrays[value - 1];
        };

        Constants.prototype.array = function array(values) {
            var index = this.arrays.length;
            this.arrays.push(values);
            return index + 1;
        };

        Constants.prototype.getSlice = function getSlice(value) {
            return this.slices[value - 1];
        };

        Constants.prototype.slice = function slice(_slice) {
            // TODO: Put the entire program in one big array
            var index = this.slices.length;
            this.slices.push(_slice);
            return index + 1;
        };

        Constants.prototype.getBlock = function getBlock(value) {
            return this.blocks[value - 1];
        };

        Constants.prototype.block = function block(_block) {
            var index = this.blocks.length;
            this.blocks.push(_block);
            return index + 1;
        };

        Constants.prototype.getFunction = function getFunction(value) {
            return this.functions[value - 1];
        };

        Constants.prototype.function = function _function(f) {
            var index = this.functions.length;
            this.functions.push(f);
            return index + 1;
        };

        Constants.prototype.getOther = function getOther(value) {
            return this.others[value - 1];
        };

        Constants.prototype.other = function other(_other) {
            var index = this.others.length;
            this.others.push(_other);
            return index + 1;
        };

        return Constants;
    })();

    exports.Constants = Constants;

    var AppendOpcodes = (function () {
        function AppendOpcodes() {
            _classCallCheck(this, AppendOpcodes);

            this.evaluateOpcode = _glimmerUtil.fillNulls(OpcodeName.EvaluatePartial + 1);
        }

        AppendOpcodes.prototype.add = function add(name, evaluate) {
            this.evaluateOpcode[name] = evaluate;
        };

        AppendOpcodes.prototype.construct = function construct(name, _debug, op1, op2, op3) {
            return [name | 0, (op1 || 0) | 0, (op2 || 0) | 0, (op3 || 0) | 0];
        };

        AppendOpcodes.prototype.evaluate = function evaluate(vm, opcode) {
            _glimmerUtil.LOGGER.debug('[VM] OPCODE: ' + opcode.type);
            var func = this.evaluateOpcode[opcode.type];
            func(vm, opcode);
        };

        return AppendOpcodes;
    })();

    exports.AppendOpcodes = AppendOpcodes;
    var APPEND_OPCODES = new AppendOpcodes();
    exports.APPEND_OPCODES = APPEND_OPCODES;

    var AbstractOpcode = (function () {
        function AbstractOpcode() {
            _classCallCheck(this, AbstractOpcode);

            _glimmerUtil.initializeGuid(this);
        }

        AbstractOpcode.prototype.toJSON = function toJSON() {
            return { guid: this._guid, type: this.type };
        };

        return AbstractOpcode;
    })();

    exports.AbstractOpcode = AbstractOpcode;

    var UpdatingOpcode = (function (_AbstractOpcode) {
        _inherits(UpdatingOpcode, _AbstractOpcode);

        function UpdatingOpcode() {
            _classCallCheck(this, UpdatingOpcode);

            _AbstractOpcode.apply(this, arguments);
            this.next = null;
            this.prev = null;
        }

        return UpdatingOpcode;
    })(AbstractOpcode);

    exports.UpdatingOpcode = UpdatingOpcode;

    function inspect(opcodes) {
        var buffer = [];
        opcodes.forEach(function (opcode, i) {
            _inspect(opcode.toJSON(), buffer, 0, i);
        });
        return buffer.join('');
    }

    function _inspect(opcode, buffer, level, index) {
        var indentation = [];
        for (var i = 0; i < level; i++) {
            indentation.push('  ');
        }
        buffer.push.apply(buffer, indentation);
        buffer.push(index + '. ' + opcode.type);
        if (opcode.args || opcode.details) {
            buffer.push('(');
            if (opcode.args) {
                buffer.push(opcode.args.join(', '));
            }
            if (opcode.details) {
                var _keys = Object.keys(opcode.details);
                if (_keys.length) {
                    if (opcode.args && opcode.args.length) {
                        buffer.push(', ');
                    }
                    buffer.push(_keys.map(function (key) {
                        return key + '=' + (opcode.details && opcode.details[key]);
                    }).join(', '));
                }
            }
            buffer.push(')');
        }
        buffer.push('\n');
        if (opcode.children && opcode.children.length) {
            for (var i = 0; i < opcode.children.length; i++) {
                _inspect(opcode.children[i], buffer, level + 1, i);
            }
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkBnbGltbWVyL3J1bnRpbWUvbGliL29wY29kZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQW1CTSxhQUFBLE1BQUEsQ0FBaUIsSUFBZ0IsRUFBQTtBQUNyQyxlQUFVLElBQUksQ0FBQyxJQUFJLFVBQUksSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUEsT0FBSTtLQUNqRTs7QUFFSyxhQUFBLGFBQUEsQ0FBd0IsTUFBb0IsRUFBQTtBQUNoRCxlQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0tBQzVCOztBQUVELFFBQWtCLFVBcURqQixDQUFBOztBQXJERCxLQUFBLFVBQWtCLFVBQVUsRUFBQTtBQUMxQixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxnQkFBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLEdBQUEsZ0JBQWMsQ0FBQTtBQUNkLGtCQUFBLENBQUEsVUFBQSxDQUFBLFVBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLFVBQVEsQ0FBQTtBQUNSLGtCQUFBLENBQUEsVUFBQSxDQUFBLGtCQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsR0FBQSxrQkFBZ0IsQ0FBQTtBQUNoQixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxpQkFBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLEdBQUEsaUJBQWUsQ0FBQTtBQUNmLGtCQUFBLENBQUEsVUFBQSxDQUFBLEtBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLEtBQUcsQ0FBQTtBQUNILGtCQUFBLENBQUEsVUFBQSxDQUFBLGFBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLGFBQVcsQ0FBQTtBQUNYLGtCQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLFNBQU8sQ0FBQTtBQUNQLGtCQUFBLENBQUEsVUFBQSxDQUFBLG9CQUFBLENBQUEs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Q0FBQSxrQkFBQSxDQUFBLEdBQUEsRUFBQSxDQUFBLEdBQUEsa0JBQWdCLENBQUE7QUFDaEIsa0JBQUEsQ0FBQSxVQUFBLENBQUEsc0JBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQSxHQUFBLHNCQUFvQixDQUFBO0FBQ3BCLGtCQUFBLENBQUEsVUFBQSxDQUFBLG9CQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxvQkFBa0IsQ0FBQTtBQUNsQixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxjQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxjQUFZLENBQUE7QUFDWixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxjQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxjQUFZLENBQUE7QUFDWixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxZQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxZQUFVLENBQUE7QUFDVixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxZQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxZQUFVLENBQUE7QUFDVixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxVQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxVQUFRLENBQUE7QUFDUixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxlQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxlQUFhLENBQUE7QUFDYixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxhQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxhQUFXLENBQUE7QUFDWCxrQkFBQSxDQUFBLFVBQUEsQ0FBQSxhQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxhQUFXLENBQUE7QUFDWCxrQkFBQSxDQUFBLFVBQUEsQ0FBQSxXQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxXQUFTLENBQUE7QUFDVCxrQkFBQSxDQUFBLFVBQUEsQ0FBQSxVQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxVQUFRLENBQUE7QUFDUixrQkFBQSxDQUFBLFVBQUEsQ0FBQSxjQUFBLENBQUEsR0FBQSxFQUFBLENBQUEs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LENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNyQyw4QkFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDbkI7QUFFRCwwQkFBTSxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsR0FBRyxDQUFDLFVBQUEsR0FBRzsrQkFBTyxHQUFHLFVBQUksTUFBTSxDQUFDLE9BQU8sSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFBO3FCQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztpQkFDNUY7YUFDRjtBQUVELGtCQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2xCO0FBRUQsY0FBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUVsQixZQUFJLE1BQU0sQ0FBQyxRQUFRLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUU7QUFDN0MsaUJBQUssSUFBSSxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUMzQyx3QkFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssR0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDbEQ7U0FDRjtLQUNGIiwiZmlsZSI6Im9wY29kZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMT0dHRVIsIE9wYXF1ZSwgT3B0aW9uLCBEaWN0LCBTbGljZSBhcyBMaXN0U2xpY2UsIGluaXRpYWxpemVHdWlkLCBmaWxsTnVsbHMgfSBmcm9tICdAZ2xpbW1lci91dGlsJztcbmltcG9ydCB7IFJldmlzaW9uVGFnLCBWZXJzaW9uZWRQYXRoUmVmZXJlbmNlIH0gZnJvbSAnQGdsaW1tZXIvcmVmZXJlbmNlJztcbmltcG9ydCB7IFZNLCBVcGRhdGluZ1ZNIH0gZnJvbSAnLi92bSc7XG5pbXBvcnQgeyBDb21waWxlZEV4cHJlc3Npb24sIENvbXBpbGVkQXJncyB9IGZyb20gJy4vY29tcGlsZWQvZXhwcmVzc2lvbnMnO1xuaW1wb3J0IHsgTlVMTF9SRUZFUkVOQ0UsIFVOREVGSU5FRF9SRUZFUkVOQ0UgfSBmcm9tICcuL3JlZmVyZW5jZXMnO1xuaW1wb3J0IHsgSW5saW5lQmxvY2sgfSBmcm9tICcuL3NjYW5uZXInO1xuaW1wb3J0IHsgT3Bjb2RlIH0gZnJvbSAnLi9lbnZpcm9ubWVudCc7XG5cbmV4cG9ydCB0eXBlIFNsaWNlID0gW251bWJlciwgbnVtYmVyXTtcblxuZXhwb3J0IGludGVyZmFjZSBPcGNvZGVKU09OIHtcbiAgdHlwZTogbnVtYmVyIHwgc3RyaW5nO1xuICBndWlkPzogT3B0aW9uPG51bWJlcj47XG4gIGRlb3B0ZWQ/OiBib29sZWFuO1xuICBhcmdzPzogc3RyaW5nW107XG4gIGRldGFpbHM/OiBEaWN0PE9wdGlvbjxzdHJpbmc+PjtcbiAgY2hpbGRyZW4/OiBPcGNvZGVKU09OW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV0dHkoanNvbjogT3Bjb2RlSlNPTik6IHN0cmluZyB7XG4gIHJldHVybiBgJHtqc29uLnR5cGV9KCR7anNvbi5hcmdzID8ganNvbi5hcmdzLmpvaW4oJywgJykgOiAnJ30pYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRUb0pTT04ob3Bjb2RlOiBBcHBlbmRPcGNvZGUpOiBPcGNvZGVKU09OIHtcbiAgcmV0dXJuIHsgdHlwZTogb3Bjb2RlWzBdIH07XG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIE9wY29kZU5hbWUge1xuICBQdXNoQ2hpbGRTY29wZSwgICAgICAgICAgICAvLyAoKVxuICBQb3BTY29wZSwgICAgICAgICAgICAgICAgICAvLyAoKVxuICBQdXNoRHluYW1pY1Njb3BlLCAgICAgICAgICAvLyAoKVxuICBQb3BEeW5hbWljU2NvcGUsICAgICAgICAgICAvLyAoKVxuICBQdXQsICAgICAgICAgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRSZWZlcmVuY2UpXG4gIEV2YWx1YXRlUHV0LCAgICAgICAgICAgICAgIC8vIChDb25zdGFudEV4cHJlc3Npb24pXG4gIFB1dEFyZ3MsICAgICAgICAgICAgICAgICAgIC8vIChDb25zdGFudEV4cHJlc3Npb24pXG4gIEJpbmRQb3NpdGlvbmFsQXJncywgICAgICAgIC8vXG4gIEJpbmROYW1lZEFyZ3MsICAgICAgICAgICAgIC8vIChDb25zdGFudEFycmF5PHN0cmluZz4sIENvbnN0YW50QXJyYXk8bnVtYmVyPilcbiAgQmluZEJsb2NrcywgICAgICAgICAgICAgICAgLy8gKENvbnN0YW50QXJyYXk8c3RyaW5nPiwgQ29uc3RhbnRBcnJheTxudW1iZXI+KVxuICBCaW5kUGFydGlhbEFyZ3MsICAgICAgICAgICAvLyAobnVtYmVyKVxuICBCaW5kQ2FsbGVyU2NvcGUsICAgICAgICAgICAvLyAoKVxuICBCaW5kRHluYW1pY1Njb3BlLCAgICAgICAgICAvLyAoQ29uc3RhbnRBcnJheTxzdHJpbmc+KVxuICBFbnRlciwgICAgICAgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRTbGljZSlcbiAgRXhpdCwgICAgICAgICAgICAgICAgICAgICAgLy8gKClcbiAgRXZhbHVhdGUsICAgICAgICAgICAgICAgICAgLy8gKENvbnN0YW50QmxvY2spXG4gIEp1bXAsICAgICAgICAgICAgICAgICAgICAgIC8vIChudW1iZXIpXG4gIEp1bXBJZiwgICAgICAgICAgICAgICAgICAgIC8vIChudW1iZXIpXG4gIEp1bXBVbmxlc3MsICAgICAgICAgICAgICAgIC8vIChudW1iZXIpXG4gIFRlc3QsICAgICAgICAgICAgICAgICAgICAgIC8vIChDb25zdGFudEZ1bmN0aW9uKVxuICBPcGVuQmxvY2ssICAgICAgICAgICAgICAgICAvLyAoT3RoZXI8Q29tcGlsZWRHZXRCbG9jaz4sIENvbnN0YW50RXhwcmVzc2lvbilcbiAgQ2xvc2VCbG9jaywgICAgICAgICAgICAgICAgLy8gKClcbiAgUHV0RHluYW1pY0NvbXBvbmVudCwgICAgICAgLy8gKClcbiAgUHV0Q29tcG9uZW50LCAgICAgICAgICAgICAgLy8gKE90aGVyPENvbXBvbmVudERlZmluaXRpb24+KVxuICBPcGVuQ29tcG9uZW50LCAgICAgICAgICAgICAvLyAoQ29uc3RhbnRFeHByZXNzaW9uLCBDb25zdGFudEJsb2NrKVxuICBEaWRDcmVhdGVFbGVtZW50LCAgICAgICAgICAvL1xuICBTaGFkb3dBdHRyaWJ1dGVzLCAgICAgICAgICAvLyAoKVxuICBEaWRSZW5kZXJMYXlvdXQsICAgICAgICAgICAvLyAoKVxuICBDbG9zZUNvbXBvbmVudCwgICAgICAgICAgICAvLyAoKVxuICBUZXh0LCAgICAgICAgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRTdHJpbmcpXG4gIENvbW1lbnQsICAgICAgICAgICAgICAgICAgIC8vIChDb25zdGFudFN0cmluZylcbiAgRHluYW1pY0NvbnRlbnQsICAgICAgICAgICAgLy8gKE90aGVyPEFwcGVuZER5bmFtaWNPcGNvZGU+KVxuICBPcGVuRWxlbWVudCwgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRTdHJpbmcpXG4gIFB1c2hSZW1vdGVFbGVtZW50LCAgICAgICAgIC8vICgpXG4gIFBvcFJlbW90ZUVsZW1lbnQsICAgICAgICAgIC8vICgpXG4gIE9wZW5Db21wb25lbnRFbGVtZW50LCAgICAgIC8vIChDb25zdGFudFN0cmluZylcbiAgT3BlbkR5bmFtaWNFbGVtZW50LCAgICAgICAgLy8gKClcbiAgRmx1c2hFbGVtZW50LCAgICAgICAgICAgICAgLy8gKClcbiAgQ2xvc2VFbGVtZW50LCAgICAgICAgICAgICAgLy8gKClcbiAgUG9wRWxlbWVudCwgICAgICAgICAgICAgICAgLy8gKClcbiAgU3RhdGljQXR0ciwgICAgICAgICAgICAgICAgLy8gKENvbnN0YW50U3RyaW5nLCBDb25zdGFudFN0cmluZywgQ29uc3RhbnRTdHJpbmcpXG4gIE1vZGlmaWVyLCAgICAgICAgICAgICAgICAgIC8vIChDb25zdGFudFN0cmluZywgQ29uc3RhbnRPdGhlcjxNb2RpZmllck1hbmFnZXI+LCBDb25zdGFudEV4cHJlc3Npb24pXG4gIER5bmFtaWNBdHRyTlMsICAgICAgICAgICAgIC8vIChDb25zdGFudFN0cmluZywgQ29uc3RhbnRTdHJpbmcsIG51bWJlcilcbiAgRHluYW1pY0F0dHIsICAgICAgICAgICAgICAgLy8gKENvbnN0YW50U3RyaW5nLCBudW1iZXIpXG4gIFB1dEl0ZXJhdG9yLCAgICAgICAgICAgICAgIC8vICgpXG4gIEVudGVyTGlzdCwgICAgICAgICAgICAgICAgIC8vIChDb25zdGFudFNsaWNlKVxuICBFeGl0TGlzdCwgICAgICAgICAgICAgICAgICAvLyAoKVxuICBFbnRlcldpdGhLZXksICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRTbGljZSlcbiAgTmV4dEl0ZXIsICAgICAgICAgICAgICAgICAgLy8gKG51bWJlcilcbiAgUHV0RHluYW1pY1BhcnRpYWwsICAgICAgICAgLy8gKE90aGVyPFN5bWJvbFRhYmxlPilcbiAgUHV0UGFydGlhbCwgICAgICAgICAgICAgICAgLy8gKE90aGVyPFBhcnRpYWxEZWZpbml0aW9uPilcbiAgRXZhbHVhdGVQYXJ0aWFsICAgICAgICAgICAgLy8gKE90aGVyPFN5bWJvbFRhYmxlPiwgT3RoZXI8RGljdDxQYXJ0aWFsQmxvY2s+Pilcbn1cblxuLy8gZXhwb3J0IHR5cGUgT3Bjb2RlTmFtZSA9XG4vLyAgICAgXCJQdXNoQ2hpbGRTY29wZVwiICAgICAgICAgICAgLy8gKClcbi8vICAgfCBcIlBvcFNjb3BlXCIgICAgICAgICAgICAgICAgICAvLyAoKVxuLy8gICB8IFwiUHVzaER5bmFtaWNTY29wZVwiICAgICAgICAgIC8vICgpXG4vLyAgIHwgXCJQb3BEeW5hbWljU2NvcGVcIiAgICAgICAgICAgLy8gKClcbi8vICAgfCBcIlB1dFwiICAgICAgICAgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRSZWZlcmVuY2UpXG4vLyAgIHwgXCJFdmFsdWF0ZVB1dFwiICAgICAgICAgICAgICAgLy8gKENvbnN0YW50RXhwcmVzc2lvbilcbi8vICAgfCBcIlB1dEFyZ3NcIiAgICAgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRFeHByZXNzaW9uKVxuLy8gICB8IFwiQmluZFBvc2l0aW9uYWxBcmdzXCIgICAgICAgIC8vXG4vLyAgIHwgXCJCaW5kTmFtZWRBcmdzXCIgICAgICAgICAgICAgLy8gKENvbnN0YW50QXJyYXk8c3RyaW5nPiwgQ29uc3RhbnRBcnJheTxudW1iZXI+KVxuLy8gICB8IFwiQmluZEJsb2Nrc1wiICAgICAgICAgICAgICAgIC8vIChDb25zdGFudEFycmF5PHN0cmluZz4sIENvbnN0YW50QXJyYXk8bnVtYmVyPilcbi8vICAgfCBcIkJpbmRQYXJ0aWFsQXJnc1wiICAgICAgICAgICAvLyAobnVtYmVyKVxuLy8gICB8IFwiQmluZENhbGxlclNjb3BlXCIgICAgICAgICAgIC8vICgpXG4vLyAgIHwgXCJCaW5kRHluYW1pY1Njb3BlXCIgICAgICAgICAgLy8gKENvbnN0YW50QXJyYXk8c3RyaW5nPilcbi8vICAgfCBcIkVudGVyXCIgICAgICAgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRTbGljZSlcbi8vICAgfCBcIkV4aXRcIiAgICAgICAgICAgICAgICAgICAgICAvLyAoKVxuLy8gICB8IFwiRXZhbHVhdGVcIiAgICAgICAgICAgICAgICAgIC8vIChDb25zdGFudEJsb2NrKVxuLy8gICB8IFwiSnVtcFwiICAgICAgICAgICAgICAgICAgICAgIC8vIChudW1iZXIpXG4vLyAgIHwgXCJKdW1wSWZcIiAgICAgICAgICAgICAgICAgICAgLy8gKG51bWJlcilcbi8vICAgfCBcIkp1bXBVbmxlc3NcIiAgICAgICAgICAgICAgICAvLyAobnVtYmVyKVxuLy8gICB8IFwiVGVzdFwiICAgICAgICAgICAgICAgICAgICAgIC8vIChDb25zdGFudEZ1bmN0aW9uKVxuLy8gICB8IFwiT3BlbkJsb2NrXCIgICAgICAgICAgICAgICAgIC8vIChPdGhlcjxDb21waWxlZEdldEJsb2NrPiwgQ29uc3RhbnRFeHByZXNzaW9uKVxuLy8gICB8IFwiQ2xvc2VCbG9ja1wiICAgICAgICAgICAgICAgIC8vICgpXG4vLyAgIHwgXCJQdXREeW5hbWljQ29tcG9uZW50XCIgICAgICAgLy8gKClcbi8vICAgfCBcIlB1dENvbXBvbmVudFwiICAgICAgICAgICAgICAvLyAoT3RoZXI8Q29tcG9uZW50RGVmaW5pdGlvbj4pXG4vLyAgIHwgXCJPcGVuQ29tcG9uZW50XCIgICAgICAgICAgICAgLy8gKENvbnN0YW50RXhwcmVzc2lvbiwgQ29uc3RhbnRCbG9jaylcbi8vICAgfCBcIkRpZENyZWF0ZUVsZW1lbnRcIiAgICAgICAgICAvL1xuLy8gICB8IFwiU2hhZG93QXR0cmlidXRlc1wiICAgICAgICAgIC8vICgpXG4vLyAgIHwgXCJEaWRSZW5kZXJMYXlvdXRcIiAgICAgICAgICAgLy8gKClcbi8vICAgfCBcIkNsb3NlQ29tcG9uZW50XCIgICAgICAgICAgICAvLyAoKVxuLy8gICB8IFwiVGV4dFwiICAgICAgICAgICAgICAgICAgICAgIC8vIChDb25zdGFudFN0cmluZylcbi8vICAgfCBcIkNvbW1lbnRcIiAgICAgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRTdHJpbmcpXG4vLyAgIHwgXCJEeW5hbWljQ29udGVudFwiICAgICAgICAgICAgLy8gKE90aGVyPEFwcGVuZER5bmFtaWNPcGNvZGU+KVxuLy8gICB8IFwiT3BlbkVsZW1lbnRcIiAgICAgICAgICAgICAgIC8vIChDb25zdGFudFN0cmluZylcbi8vICAgfCBcIlB1c2hSZW1vdGVFbGVtZW50XCIgICAgICAgICAvLyAoKVxuLy8gICB8IFwiUG9wUmVtb3RlRWxlbWVudFwiICAgICAgICAgIC8vICgpXG4vLyAgIHwgXCJPcGVuQ29tcG9uZW50RWxlbWVudFwiICAgICAgLy8gKENvbnN0YW50U3RyaW5nKVxuLy8gICB8IFwiT3BlbkR5bmFtaWNFbGVtZW50XCIgICAgICAgIC8vICgpXG4vLyAgIHwgXCJGbHVzaEVsZW1lbnRcIiAgICAgICAgICAgICAgLy8gKClcbi8vICAgfCBcIkNsb3NlRWxlbWVudFwiICAgICAgICAgICAgICAvLyAoKVxuLy8gICB8IFwiUG9wRWxlbWVudFwiICAgICAgICAgICAgICAgIC8vICgpXG4vLyAgIHwgXCJTdGF0aWNBdHRyXCIgICAgICAgICAgICAgICAgLy8gKENvbnN0YW50U3RyaW5nLCBDb25zdGFudFN0cmluZywgQ29uc3RhbnRTdHJpbmcpXG4vLyAgIHwgXCJNb2RpZmllclwiICAgICAgICAgICAgICAgICAgLy8gKENvbnN0YW50U3RyaW5nLCBDb25zdGFudE90aGVyPE1vZGlmaWVyTWFuYWdlcj4sIENvbnN0YW50RXhwcmVzc2lvbilcbi8vICAgfCBcIkR5bmFtaWNBdHRyTlNcIiAgICAgICAgICAgICAvLyAoQ29uc3RhbnRTdHJpbmcsIENvbnN0YW50U3RyaW5nLCBudW1iZXIpXG4vLyAgIHwgXCJEeW5hbWljQXR0clwiICAgICAgICAgICAgICAgLy8gKENvbnN0YW50U3RyaW5nLCBudW1iZXIpXG4vLyAgIHwgXCJQdXRJdGVyYXRvclwiICAgICAgICAgICAgICAgLy8gKClcbi8vICAgfCBcIkVudGVyTGlzdFwiICAgICAgICAgICAgICAgICAvLyAoQ29uc3RhbnRTbGljZSlcbi8vICAgfCBcIkV4aXRMaXN0XCIgICAgICAgICAgICAgICAgICAvLyAoKVxuLy8gICB8IFwiRW50ZXJXaXRoS2V5XCIgICAgICAgICAgICAgIC8vIChDb25zdGFudFNsaWNlKVxuLy8gICB8IFwiTmV4dEl0ZXJcIiAgICAgICAgICAgICAgICAgIC8vIChudW1iZXIpXG4vLyAgIHwgXCJQdXREeW5hbWljUGFydGlhbFwiICAgICAgICAgLy8gKE90aGVyPFN5bWJvbFRhYmxlPilcbi8vICAgfCBcIlB1dFBhcnRpYWxcIiAgICAgICAgICAgICAgICAvLyAoT3RoZXI8UGFydGlhbERlZmluaXRpb24+KVxuLy8gICB8IFwiRXZhbHVhdGVQYXJ0aWFsXCIgICAgICAgICAgIC8vIChPdGhlcjxTeW1ib2xUYWJsZT4sIE90aGVyPERpY3Q8UGFydGlhbEJsb2NrPj4pXG4vLyAgIDtcblxuZXhwb3J0IHR5cGUgQ29uc3RhbnRUeXBlID0gJ3NsaWNlJyB8ICdibG9jaycgfCAncmVmZXJlbmNlJyB8ICdzdHJpbmcnIHwgJ251bWJlcicgfCAnZXhwcmVzc2lvbic7XG5leHBvcnQgdHlwZSBDb25zdGFudFJlZmVyZW5jZSA9ICBudW1iZXI7XG5leHBvcnQgdHlwZSBDb25zdGFudFN0cmluZyA9IG51bWJlcjtcbmV4cG9ydCB0eXBlIENvbnN0YW50RXhwcmVzc2lvbiA9IG51bWJlcjtcbmV4cG9ydCB0eXBlIENvbnN0YW50U2xpY2UgPSBudW1iZXI7XG5leHBvcnQgdHlwZSBDb25zdGFudEJsb2NrID0gbnVtYmVyO1xuZXhwb3J0IHR5cGUgQ29uc3RhbnRGdW5jdGlvbiA9IG51bWJlcjtcbmV4cG9ydCB0eXBlIENvbnN0YW50QXJyYXkgPSBudW1iZXI7XG5leHBvcnQgdHlwZSBDb25zdGFudE90aGVyID0gbnVtYmVyO1xuXG5leHBvcnQgY2xhc3MgQ29uc3RhbnRzIHtcbiAgLy8gYDBgIG1lYW5zIE5VTExcblxuICBwcml2YXRlIHJlZmVyZW5jZXM6IFZlcnNpb25lZFBhdGhSZWZlcmVuY2U8T3BhcXVlPltdID0gW107XG4gIHByaXZhdGUgc3RyaW5nczogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBleHByZXNzaW9uczogT3BhcXVlW10gPSBbXTtcbiAgcHJpdmF0ZSBhcnJheXM6IG51bWJlcltdW10gPSBbXTtcbiAgcHJpdmF0ZSBzbGljZXM6IFNsaWNlW10gPSBbXTtcbiAgcHJpdmF0ZSBibG9ja3M6IElubGluZUJsb2NrW10gPSBbXTtcbiAgcHJpdmF0ZSBmdW5jdGlvbnM6IEZ1bmN0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBvdGhlcnM6IE9wYXF1ZVtdID0gW107XG5cbiAgcHVibGljIE5VTExfUkVGRVJFTkNFOiBudW1iZXI7XG4gIHB1YmxpYyBVTkRFRklORURfUkVGRVJFTkNFOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5OVUxMX1JFRkVSRU5DRSA9IHRoaXMucmVmZXJlbmNlKE5VTExfUkVGRVJFTkNFKTtcbiAgICB0aGlzLlVOREVGSU5FRF9SRUZFUkVOQ0UgPSB0aGlzLnJlZmVyZW5jZShVTkRFRklORURfUkVGRVJFTkNFKTtcbiAgfVxuXG4gIGdldFJlZmVyZW5jZTxUIGV4dGVuZHMgT3BhcXVlPih2YWx1ZTogQ29uc3RhbnRSZWZlcmVuY2UpOiBWZXJzaW9uZWRQYXRoUmVmZXJlbmNlPFQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VzW3ZhbHVlIC0gMV0gYXMgVmVyc2lvbmVkUGF0aFJlZmVyZW5jZTxUPjtcbiAgfVxuXG4gIHJlZmVyZW5jZSh2YWx1ZTogVmVyc2lvbmVkUGF0aFJlZmVyZW5jZTxPcGFxdWU+KTogQ29uc3RhbnRSZWZlcmVuY2Uge1xuICAgIGxldCBpbmRleCA9IHRoaXMucmVmZXJlbmNlcy5sZW5ndGg7XG4gICAgdGhpcy5yZWZlcmVuY2VzLnB1c2godmFsdWUpO1xuICAgIHJldHVybiBpbmRleCArIDE7XG4gIH1cblxuICBnZXRTdHJpbmcodmFsdWU6IENvbnN0YW50U3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpbmdzW3ZhbHVlIC0gMV07XG4gIH1cblxuICBzdHJpbmcodmFsdWU6IHN0cmluZyk6IENvbnN0YW50U3RyaW5nIHtcbiAgICBsZXQgaW5kZXggPSB0aGlzLnN0cmluZ3MubGVuZ3RoO1xuICAgIHRoaXMuc3RyaW5ncy5wdXNoKHZhbHVlKTtcbiAgICByZXR1cm4gaW5kZXggKyAxO1xuICB9XG5cbiAgZ2V0RXhwcmVzc2lvbjxUPih2YWx1ZTogQ29uc3RhbnRFeHByZXNzaW9uKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbnNbdmFsdWUgLSAxXSBhcyBUO1xuICB9XG5cbiAgZXhwcmVzc2lvbih2YWx1ZTogQ29tcGlsZWRFeHByZXNzaW9uPE9wYXF1ZT4gfCBDb21waWxlZEFyZ3MpOiBDb25zdGFudEV4cHJlc3Npb24ge1xuICAgIGxldCBpbmRleCA9IHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgIHRoaXMuZXhwcmVzc2lvbnMucHVzaCh2YWx1ZSk7XG4gICAgcmV0dXJuIGluZGV4ICsgMTtcbiAgfVxuXG4gIGdldEFycmF5KHZhbHVlOiBDb25zdGFudEFycmF5KTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLmFycmF5c1t2YWx1ZSAtIDFdO1xuICB9XG5cbiAgYXJyYXkodmFsdWVzOiBudW1iZXJbXSk6IENvbnN0YW50QXJyYXkge1xuICAgIGxldCBpbmRleCA9IHRoaXMuYXJyYXlzLmxlbmd0aDtcbiAgICB0aGlzLmFycmF5cy5wdXNoKHZhbHVlcyk7XG4gICAgcmV0dXJuIGluZGV4ICsgMTtcbiAgfVxuXG4gIGdldFNsaWNlKHZhbHVlOiBDb25zdGFudFNsaWNlKTogU2xpY2Uge1xuICAgIHJldHVybiB0aGlzLnNsaWNlc1t2YWx1ZSAtIDFdO1xuICB9XG5cbiAgc2xpY2Uoc2xpY2U6IFNsaWNlKTogQ29uc3RhbnRTbGljZSB7XG4gICAgLy8gVE9ETzogUHV0IHRoZSBlbnRpcmUgcHJvZ3JhbSBpbiBvbmUgYmlnIGFycmF5XG4gICAgbGV0IGluZGV4ID0gdGhpcy5zbGljZXMubGVuZ3RoO1xuICAgIHRoaXMuc2xpY2VzLnB1c2goc2xpY2UpO1xuICAgIHJldHVybiBpbmRleCArIDE7XG4gIH1cblxuICBnZXRCbG9jayh2YWx1ZTogQ29uc3RhbnRCbG9jayk6IElubGluZUJsb2NrIHtcbiAgICByZXR1cm4gdGhpcy5ibG9ja3NbdmFsdWUgLSAxXTtcbiAgfVxuXG4gIGJsb2NrKGJsb2NrOiBJbmxpbmVCbG9jayk6IENvbnN0YW50QmxvY2sge1xuICAgIGxldCBpbmRleCA9IHRoaXMuYmxvY2tzLmxlbmd0aDtcbiAgICB0aGlzLmJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICByZXR1cm4gaW5kZXggKyAxO1xuICB9XG5cbiAgZ2V0RnVuY3Rpb248VCBleHRlbmRzIEZ1bmN0aW9uPih2YWx1ZTogQ29uc3RhbnRGdW5jdGlvbik6IFQge1xuICAgIHJldHVybiB0aGlzLmZ1bmN0aW9uc1t2YWx1ZSAtIDFdIGFzIFQ7XG4gIH1cblxuICBmdW5jdGlvbihmOiBGdW5jdGlvbik6IENvbnN0YW50RnVuY3Rpb24ge1xuICAgIGxldCBpbmRleCA9IHRoaXMuZnVuY3Rpb25zLmxlbmd0aDtcbiAgICB0aGlzLmZ1bmN0aW9ucy5wdXNoKGYpO1xuICAgIHJldHVybiBpbmRleCArIDE7XG4gIH1cblxuICBnZXRPdGhlcjxUPih2YWx1ZTogQ29uc3RhbnRPdGhlcik6IFQge1xuICAgIHJldHVybiB0aGlzLm90aGVyc1t2YWx1ZSAtIDFdIGFzIFQ7XG4gIH1cblxuICBvdGhlcihvdGhlcjogT3BhcXVlKTogQ29uc3RhbnRPdGhlciB7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5vdGhlcnMubGVuZ3RoO1xuICAgIHRoaXMub3RoZXJzLnB1c2gob3RoZXIpO1xuICAgIHJldHVybiBpbmRleCArIDE7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgT3BlcmFuZDEgPSBudW1iZXI7XG5leHBvcnQgdHlwZSBPcGVyYW5kMiA9IG51bWJlcjtcbmV4cG9ydCB0eXBlIE9wZXJhbmQzID0gbnVtYmVyO1xuXG5leHBvcnQgdHlwZSBPcGNvZGVUb0pTT04gPSAoZGF0YTogQXBwZW5kT3Bjb2RlLCBjb25zdGFudHM6IENvbnN0YW50cykgPT4gT3Bjb2RlSlNPTjtcbmV4cG9ydCB0eXBlIEV2YWx1YXRlT3Bjb2RlID0gKHZtOiBWTSwgb3Bjb2RlOiBPcGNvZGUpID0+IHZvaWQ7XG5cbmV4cG9ydCBjbGFzcyBBcHBlbmRPcGNvZGVzIHtcbiAgcHJpdmF0ZSBldmFsdWF0ZU9wY29kZTogRXZhbHVhdGVPcGNvZGVbXSA9IGZpbGxOdWxsczxFdmFsdWF0ZU9wY29kZT4oT3Bjb2RlTmFtZS5FdmFsdWF0ZVBhcnRpYWwgKyAxKTtcblxuICBhZGQ8TmFtZSBleHRlbmRzIE9wY29kZU5hbWU+KG5hbWU6IE5hbWUsIGV2YWx1YXRlOiBFdmFsdWF0ZU9wY29kZSk6IHZvaWQge1xuICAgIHRoaXMuZXZhbHVhdGVPcGNvZGVbbmFtZSBhcyBudW1iZXJdID0gZXZhbHVhdGU7XG4gIH1cblxuICBjb25zdHJ1Y3Q8TmFtZSBleHRlbmRzIE9wY29kZU5hbWU+KG5hbWU6IE5hbWUsIF9kZWJ1ZzogT3B0aW9uPE9iamVjdD4sIG9wMT86IE9wZXJhbmQxLCBvcDI/OiBPcGVyYW5kMiwgb3AzPzogT3BlcmFuZDMpOiBBcHBlbmRPcGNvZGUge1xuICAgIHJldHVybiBbKG5hbWUgYXMgbnVtYmVyKXwwLCAob3AxIHx8IDApfDAsIChvcDIgfHwgMCl8MCwgKG9wMyB8fCAwKXwwXTtcbiAgfVxuXG4gIGV2YWx1YXRlKHZtOiBWTSwgb3Bjb2RlOiBPcGNvZGUpIHtcbiAgICBMT0dHRVIuZGVidWcoYFtWTV0gT1BDT0RFOiAke29wY29kZS50eXBlfWApO1xuICAgIGxldCBmdW5jID0gdGhpcy5ldmFsdWF0ZU9wY29kZVtvcGNvZGUudHlwZV07XG4gICAgZnVuYyh2bSwgb3Bjb2RlKTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBBcHBlbmRPcGNvZGUgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcblxuZXhwb3J0IGNvbnN0IEFQUEVORF9PUENPREVTID0gbmV3IEFwcGVuZE9wY29kZXMoKTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0T3Bjb2RlIHtcbiAgcHVibGljIHR5cGU6IHN0cmluZztcbiAgcHVibGljIF9ndWlkOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaW5pdGlhbGl6ZUd1aWQodGhpcyk7XG4gIH1cblxuICB0b0pTT04oKTogT3Bjb2RlSlNPTiB7XG4gICAgcmV0dXJuIHsgZ3VpZDogdGhpcy5fZ3VpZCwgdHlwZTogdGhpcy50eXBlIH07XG4gIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFVwZGF0aW5nT3Bjb2RlIGV4dGVuZHMgQWJzdHJhY3RPcGNvZGUge1xuICBwdWJsaWMgdGFnOiBSZXZpc2lvblRhZztcblxuICBuZXh0OiBPcHRpb248VXBkYXRpbmdPcGNvZGU+ID0gbnVsbDtcbiAgcHJldjogT3B0aW9uPFVwZGF0aW5nT3Bjb2RlPiA9IG51bGw7XG5cbiAgYWJzdHJhY3QgZXZhbHVhdGUodm06IFVwZGF0aW5nVk0pOiB2b2lkO1xufVxuXG5leHBvcnQgdHlwZSBVcGRhdGluZ09wU2VxID0gTGlzdFNsaWNlPFVwZGF0aW5nT3Bjb2RlPjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluc3BlY3Qob3Bjb2RlczogUmVhZG9ubHlBcnJheTxBYnN0cmFjdE9wY29kZT4pOiBzdHJpbmcge1xuICBsZXQgYnVmZmVyOiBzdHJpbmdbXSA9IFtdO1xuXG4gIG9wY29kZXMuZm9yRWFjaCgob3Bjb2RlLCBpKSA9PiB7XG4gICAgX2luc3BlY3Qob3Bjb2RlLnRvSlNPTigpLCBidWZmZXIsIDAsIGkpO1xuICB9KTtcblxuICByZXR1cm4gYnVmZmVyLmpvaW4oJycpO1xufVxuXG5mdW5jdGlvbiBfaW5zcGVjdChvcGNvZGU6IE9wY29kZUpTT04sIGJ1ZmZlcjogc3RyaW5nW10sIGxldmVsOiBudW1iZXIsIGluZGV4OiBudW1iZXIpIHtcbiAgbGV0IGluZGVudGF0aW9uOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGZvciAobGV0IGk9MDsgaTxsZXZlbDsgaSsrKSB7XG4gICAgaW5kZW50YXRpb24ucHVzaCgnICAnKTtcbiAgfVxuXG4gIGJ1ZmZlci5wdXNoKC4uLmluZGVudGF0aW9uKTtcbiAgYnVmZmVyLnB1c2goYCR7aW5kZXh9LiAke29wY29kZS50eXBlfWApO1xuXG4gIGlmIChvcGNvZGUuYXJncyB8fCBvcGNvZGUuZGV0YWlscykge1xuICAgIGJ1ZmZlci5wdXNoKCcoJyk7XG5cbiAgICBpZiAob3Bjb2RlLmFyZ3MpIHtcbiAgICAgIGJ1ZmZlci5wdXNoKG9wY29kZS5hcmdzLmpvaW4oJywgJykpO1xuICAgIH1cblxuICAgIGlmIChvcGNvZGUuZGV0YWlscykge1xuICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhvcGNvZGUuZGV0YWlscyk7XG5cbiAgICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgICBpZiAob3Bjb2RlLmFyZ3MgJiYgb3Bjb2RlLmFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgYnVmZmVyLnB1c2goJywgJyk7XG4gICAgICAgIH1cblxuICAgICAgICBidWZmZXIucHVzaChrZXlzLm1hcChrZXkgPT4gYCR7a2V5fT0ke29wY29kZS5kZXRhaWxzICYmIG9wY29kZS5kZXRhaWxzW2tleV19YCkuam9pbignLCAnKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYnVmZmVyLnB1c2goJyknKTtcbiAgfVxuXG4gIGJ1ZmZlci5wdXNoKCdcXG4nKTtcblxuICBpZiAob3Bjb2RlLmNoaWxkcmVuICYmIG9wY29kZS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICBmb3IgKGxldCBpPTA7IGk8b3Bjb2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBfaW5zcGVjdChvcGNvZGUuY2hpbGRyZW5baV0sIGJ1ZmZlciwgbGV2ZWwrMSwgaSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBMT0dHRVIsIGluaXRpYWxpemVHdWlkLCBmaWxsTnVsbHMgfSBmcm9tICdAZ2xpbW1lci91dGlsJztcbmltcG9ydCB7IE5VTExfUkVGRVJFTkNFLCBVTkRFRklORURfUkVGRVJFTkNFIH0gZnJvbSAnLi9yZWZlcmVuY2VzJztcbmV4cG9ydCBmdW5jdGlvbiBwcmV0dHkoanNvbikge1xuICAgIHJldHVybiBgJHtqc29uLnR5cGV9KCR7anNvbi5hcmdzID8ganNvbi5hcmdzLmpvaW4oJywgJykgOiAnJ30pYDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0VG9KU09OKG9wY29kZSkge1xuICAgIHJldHVybiB7IHR5cGU6IG9wY29kZVswXSB9O1xufVxuZXhwb3J0IHZhciBPcGNvZGVOYW1lO1xuKGZ1bmN0aW9uIChPcGNvZGVOYW1lKSB7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiUHVzaENoaWxkU2NvcGVcIl0gPSAwXSA9IFwiUHVzaENoaWxkU2NvcGVcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJQb3BTY29wZVwiXSA9IDFdID0gXCJQb3BTY29wZVwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIlB1c2hEeW5hbWljU2NvcGVcIl0gPSAyXSA9IFwiUHVzaER5bmFtaWNTY29wZVwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIlBvcER5bmFtaWNTY29wZVwiXSA9IDNdID0gXCJQb3BEeW5hbWljU2NvcGVcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJQdXRcIl0gPSA0XSA9IFwiUHV0XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRXZhbHVhdGVQdXRcIl0gPSA1XSA9IFwiRXZhbHVhdGVQdXRcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJQdXRBcmdzXCJdID0gNl0gPSBcIlB1dEFyZ3NcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJCaW5kUG9zaXRpb25hbEFyZ3NcIl0gPSA3XSA9IFwiQmluZFBvc2l0aW9uYWxBcmdzXCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiQmluZE5hbWVkQXJnc1wiXSA9IDhdID0gXCJCaW5kTmFtZWRBcmdzXCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiQmluZEJsb2Nrc1wiXSA9IDldID0gXCJCaW5kQmxvY2tzXCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiQmluZFBhcnRpYWxBcmdzXCJdID0gMTBdID0gXCJCaW5kUGFydGlhbEFyZ3NcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJCaW5kQ2FsbGVyU2NvcGVcIl0gPSAxMV0gPSBcIkJpbmRDYWxsZXJTY29wZVwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIkJpbmREeW5hbWljU2NvcGVcIl0gPSAxMl0gPSBcIkJpbmREeW5hbWljU2NvcGVcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJFbnRlclwiXSA9IDEzXSA9IFwiRW50ZXJcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJFeGl0XCJdID0gMTRdID0gXCJFeGl0XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRXZhbHVhdGVcIl0gPSAxNV0gPSBcIkV2YWx1YXRlXCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiSnVtcFwiXSA9IDE2XSA9IFwiSnVtcFwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIkp1bXBJZlwiXSA9IDE3XSA9IFwiSnVtcElmXCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiSnVtcFVubGVzc1wiXSA9IDE4XSA9IFwiSnVtcFVubGVzc1wiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIlRlc3RcIl0gPSAxOV0gPSBcIlRlc3RcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJPcGVuQmxvY2tcIl0gPSAyMF0gPSBcIk9wZW5CbG9ja1wiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIkNsb3NlQmxvY2tcIl0gPSAyMV0gPSBcIkNsb3NlQmxvY2tcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJQdXREeW5hbWljQ29tcG9uZW50XCJdID0gMjJdID0gXCJQdXREeW5hbWljQ29tcG9uZW50XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiUHV0Q29tcG9uZW50XCJdID0gMjNdID0gXCJQdXRDb21wb25lbnRcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJPcGVuQ29tcG9uZW50XCJdID0gMjRdID0gXCJPcGVuQ29tcG9uZW50XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRGlkQ3JlYXRlRWxlbWVudFwiXSA9IDI1XSA9IFwiRGlkQ3JlYXRlRWxlbWVudFwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIlNoYWRvd0F0dHJpYnV0ZXNcIl0gPSAyNl0gPSBcIlNoYWRvd0F0dHJpYnV0ZXNcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJEaWRSZW5kZXJMYXlvdXRcIl0gPSAyN10gPSBcIkRpZFJlbmRlckxheW91dFwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIkNsb3NlQ29tcG9uZW50XCJdID0gMjhdID0gXCJDbG9zZUNvbXBvbmVudFwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIlRleHRcIl0gPSAyOV0gPSBcIlRleHRcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJDb21tZW50XCJdID0gMzBdID0gXCJDb21tZW50XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRHluYW1pY0NvbnRlbnRcIl0gPSAzMV0gPSBcIkR5bmFtaWNDb250ZW50XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiT3BlbkVsZW1lbnRcIl0gPSAzMl0gPSBcIk9wZW5FbGVtZW50XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiUHVzaFJlbW90ZUVsZW1lbnRcIl0gPSAzM10gPSBcIlB1c2hSZW1vdGVFbGVtZW50XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiUG9wUmVtb3RlRWxlbWVudFwiXSA9IDM0XSA9IFwiUG9wUmVtb3RlRWxlbWVudFwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIk9wZW5Db21wb25lbnRFbGVtZW50XCJdID0gMzVdID0gXCJPcGVuQ29tcG9uZW50RWxlbWVudFwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIk9wZW5EeW5hbWljRWxlbWVudFwiXSA9IDM2XSA9IFwiT3BlbkR5bmFtaWNFbGVtZW50XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRmx1c2hFbGVtZW50XCJdID0gMzddID0gXCJGbHVzaEVsZW1lbnRcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJDbG9zZUVsZW1lbnRcIl0gPSAzOF0gPSBcIkNsb3NlRWxlbWVudFwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIlBvcEVsZW1lbnRcIl0gPSAzOV0gPSBcIlBvcEVsZW1lbnRcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJTdGF0aWNBdHRyXCJdID0gNDBdID0gXCJTdGF0aWNBdHRyXCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiTW9kaWZpZXJcIl0gPSA0MV0gPSBcIk1vZGlmaWVyXCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRHluYW1pY0F0dHJOU1wiXSA9IDQyXSA9IFwiRHluYW1pY0F0dHJOU1wiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIkR5bmFtaWNBdHRyXCJdID0gNDNdID0gXCJEeW5hbWljQXR0clwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIlB1dEl0ZXJhdG9yXCJdID0gNDRdID0gXCJQdXRJdGVyYXRvclwiO1xuICAgIE9wY29kZU5hbWVbT3Bjb2RlTmFtZVtcIkVudGVyTGlzdFwiXSA9IDQ1XSA9IFwiRW50ZXJMaXN0XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRXhpdExpc3RcIl0gPSA0Nl0gPSBcIkV4aXRMaXN0XCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRW50ZXJXaXRoS2V5XCJdID0gNDddID0gXCJFbnRlcldpdGhLZXlcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJOZXh0SXRlclwiXSA9IDQ4XSA9IFwiTmV4dEl0ZXJcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJQdXREeW5hbWljUGFydGlhbFwiXSA9IDQ5XSA9IFwiUHV0RHluYW1pY1BhcnRpYWxcIjtcbiAgICBPcGNvZGVOYW1lW09wY29kZU5hbWVbXCJQdXRQYXJ0aWFsXCJdID0gNTBdID0gXCJQdXRQYXJ0aWFsXCI7XG4gICAgT3Bjb2RlTmFtZVtPcGNvZGVOYW1lW1wiRXZhbHVhdGVQYXJ0aWFsXCJdID0gNTFdID0gXCJFdmFsdWF0ZVBhcnRpYWxcIjsgLy8gKE90aGVyPFN5bWJvbFRhYmxlPiwgT3RoZXI8RGljdDxQYXJ0aWFsQmxvY2s+Pilcbn0pKE9wY29kZU5hbWUgfHwgKE9wY29kZU5hbWUgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIENvbnN0YW50cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIGAwYCBtZWFucyBOVUxMXG4gICAgICAgIHRoaXMucmVmZXJlbmNlcyA9IFtdO1xuICAgICAgICB0aGlzLnN0cmluZ3MgPSBbXTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IFtdO1xuICAgICAgICB0aGlzLmFycmF5cyA9IFtdO1xuICAgICAgICB0aGlzLnNsaWNlcyA9IFtdO1xuICAgICAgICB0aGlzLmJsb2NrcyA9IFtdO1xuICAgICAgICB0aGlzLmZ1bmN0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLm90aGVycyA9IFtdO1xuICAgICAgICB0aGlzLk5VTExfUkVGRVJFTkNFID0gdGhpcy5yZWZlcmVuY2UoTlVMTF9SRUZFUkVOQ0UpO1xuICAgICAgICB0aGlzLlVOREVGSU5FRF9SRUZFUkVOQ0UgPSB0aGlzLnJlZmVyZW5jZShVTkRFRklORURfUkVGRVJFTkNFKTtcbiAgICB9XG4gICAgZ2V0UmVmZXJlbmNlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZXNbdmFsdWUgLSAxXTtcbiAgICB9XG4gICAgcmVmZXJlbmNlKHZhbHVlKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMucmVmZXJlbmNlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGluZGV4ICsgMTtcbiAgICB9XG4gICAgZ2V0U3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmluZ3NbdmFsdWUgLSAxXTtcbiAgICB9XG4gICAgc3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuc3RyaW5ncy5sZW5ndGg7XG4gICAgICAgIHRoaXMuc3RyaW5ncy5wdXNoKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGluZGV4ICsgMTtcbiAgICB9XG4gICAgZ2V0RXhwcmVzc2lvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uc1t2YWx1ZSAtIDFdO1xuICAgIH1cbiAgICBleHByZXNzaW9uKHZhbHVlKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zLnB1c2godmFsdWUpO1xuICAgICAgICByZXR1cm4gaW5kZXggKyAxO1xuICAgIH1cbiAgICBnZXRBcnJheSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJheXNbdmFsdWUgLSAxXTtcbiAgICB9XG4gICAgYXJyYXkodmFsdWVzKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuYXJyYXlzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5hcnJheXMucHVzaCh2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gaW5kZXggKyAxO1xuICAgIH1cbiAgICBnZXRTbGljZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zbGljZXNbdmFsdWUgLSAxXTtcbiAgICB9XG4gICAgc2xpY2Uoc2xpY2UpIHtcbiAgICAgICAgLy8gVE9ETzogUHV0IHRoZSBlbnRpcmUgcHJvZ3JhbSBpbiBvbmUgYmlnIGFycmF5XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuc2xpY2VzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5zbGljZXMucHVzaChzbGljZSk7XG4gICAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgfVxuICAgIGdldEJsb2NrKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsb2Nrc1t2YWx1ZSAtIDFdO1xuICAgIH1cbiAgICBibG9jayhibG9jaykge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmJsb2Nrcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuYmxvY2tzLnB1c2goYmxvY2spO1xuICAgICAgICByZXR1cm4gaW5kZXggKyAxO1xuICAgIH1cbiAgICBnZXRGdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5mdW5jdGlvbnNbdmFsdWUgLSAxXTtcbiAgICB9XG4gICAgZnVuY3Rpb24oZikge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmZ1bmN0aW9ucy5sZW5ndGg7XG4gICAgICAgIHRoaXMuZnVuY3Rpb25zLnB1c2goZik7XG4gICAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgfVxuICAgIGdldE90aGVyKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm90aGVyc1t2YWx1ZSAtIDFdO1xuICAgIH1cbiAgICBvdGhlcihvdGhlcikge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLm90aGVycy5sZW5ndGg7XG4gICAgICAgIHRoaXMub3RoZXJzLnB1c2gob3RoZXIpO1xuICAgICAgICByZXR1cm4gaW5kZXggKyAxO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBcHBlbmRPcGNvZGVzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ldmFsdWF0ZU9wY29kZSA9IGZpbGxOdWxscyhPcGNvZGVOYW1lLkV2YWx1YXRlUGFydGlhbCArIDEpO1xuICAgIH1cbiAgICBhZGQobmFtZSwgZXZhbHVhdGUpIHtcbiAgICAgICAgdGhpcy5ldmFsdWF0ZU9wY29kZVtuYW1lXSA9IGV2YWx1YXRlO1xuICAgIH1cbiAgICBjb25zdHJ1Y3QobmFtZSwgX2RlYnVnLCBvcDEsIG9wMiwgb3AzKSB7XG4gICAgICAgIHJldHVybiBbbmFtZSB8IDAsIChvcDEgfHwgMCkgfCAwLCAob3AyIHx8IDApIHwgMCwgKG9wMyB8fCAwKSB8IDBdO1xuICAgIH1cbiAgICBldmFsdWF0ZSh2bSwgb3Bjb2RlKSB7XG4gICAgICAgIExPR0dFUi5kZWJ1ZyhgW1ZNXSBPUENPREU6ICR7b3Bjb2RlLnR5cGV9YCk7XG4gICAgICAgIGxldCBmdW5jID0gdGhpcy5ldmFsdWF0ZU9wY29kZVtvcGNvZGUudHlwZV07XG4gICAgICAgIGZ1bmModm0sIG9wY29kZSk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IEFQUEVORF9PUENPREVTID0gbmV3IEFwcGVuZE9wY29kZXMoKTtcbmV4cG9ydCBjbGFzcyBBYnN0cmFjdE9wY29kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGluaXRpYWxpemVHdWlkKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7IGd1aWQ6IHRoaXMuX2d1aWQsIHR5cGU6IHRoaXMudHlwZSB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBVcGRhdGluZ09wY29kZSBleHRlbmRzIEFic3RyYWN0T3Bjb2RlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaW5zcGVjdChvcGNvZGVzKSB7XG4gICAgbGV0IGJ1ZmZlciA9IFtdO1xuICAgIG9wY29kZXMuZm9yRWFjaCgob3Bjb2RlLCBpKSA9PiB7XG4gICAgICAgIF9pbnNwZWN0KG9wY29kZS50b0pTT04oKSwgYnVmZmVyLCAwLCBpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYnVmZmVyLmpvaW4oJycpO1xufVxuZnVuY3Rpb24gX2luc3BlY3Qob3Bjb2RlLCBidWZmZXIsIGxldmVsLCBpbmRleCkge1xuICAgIGxldCBpbmRlbnRhdGlvbiA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGV2ZWw7IGkrKykge1xuICAgICAgICBpbmRlbnRhdGlvbi5wdXNoKCcgICcpO1xuICAgIH1cbiAgICBidWZmZXIucHVzaCguLi5pbmRlbnRhdGlvbik7XG4gICAgYnVmZmVyLnB1c2goYCR7aW5kZXh9LiAke29wY29kZS50eXBlfWApO1xuICAgIGlmIChvcGNvZGUuYXJncyB8fCBvcGNvZGUuZGV0YWlscykge1xuICAgICAgICBidWZmZXIucHVzaCgnKCcpO1xuICAgICAgICBpZiAob3Bjb2RlLmFyZ3MpIHtcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKG9wY29kZS5hcmdzLmpvaW4oJywgJykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcGNvZGUuZGV0YWlscykge1xuICAgICAgICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhvcGNvZGUuZGV0YWlscyk7XG4gICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAob3Bjb2RlLmFyZ3MgJiYgb3Bjb2RlLmFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKCcsICcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidWZmZXIucHVzaChrZXlzLm1hcChrZXkgPT4gYCR7a2V5fT0ke29wY29kZS5kZXRhaWxzICYmIG9wY29kZS5kZXRhaWxzW2tleV19YCkuam9pbignLCAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyLnB1c2goJyknKTtcbiAgICB9XG4gICAgYnVmZmVyLnB1c2goJ1xcbicpO1xuICAgIGlmIChvcGNvZGUuY2hpbGRyZW4gJiYgb3Bjb2RlLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wY29kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgX2luc3BlY3Qob3Bjb2RlLmNoaWxkcmVuW2ldLCBidWZmZXIsIGxldmVsICsgMSwgaSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=