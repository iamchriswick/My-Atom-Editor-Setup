/*
Note that if your data is too large, there _will_ be overflow.
*/
"use strict";
function asc(a, b) { return a - b; }
var config_params = {
    bucket_precision: function (o, s) {
        if (typeof s !== "number" || s <= 0) {
            throw new Error("bucket_precision must be a positive number");
        }
        o._config.bucket_precision = s;
        o.buckets = [];
    },
    buckets: function (o, b) {
        if (!Array.isArray(b) || b.length === 0) {
            throw new Error("buckets must be an array of bucket limits");
        }
        o._config.buckets = b;
        o.buckets = [];
    },
    bucket_extension_interval: function (o, s) {
        if (s === undefined)
            return;
        if (typeof s !== "number" || s <= 0) {
            throw new Error("bucket_extension_interval must be a positive number");
        }
        o._config.bucket_extension_interval = s;
    },
    store_data: function (o, s) {
        if (typeof s !== "boolean") {
            throw new Error("store_data must be a true or false");
        }
        o._config.store_data = s;
    },
    sampling: function (o, s) {
        if (typeof s !== "boolean") {
            throw new Error("sampling must be a true or false");
        }
        o._config.sampling = s;
    }
};
function Stats(c) {
    this._config = { store_data: true };
    if (c) {
        for (var k in config_params) {
            if (c.hasOwnProperty(k)) {
                config_params[k](this, c[k]);
            }
        }
    }
    this.reset();
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Stats;
Stats.prototype = {
    reset: function () {
        if (this._config.store_data)
            this.data = [];
        this.length = 0;
        this.sum = 0;
        this.sum_of_squares = 0;
        this.sum_of_logs = 0;
        this.sum_of_square_of_logs = 0;
        this.zeroes = 0;
        this.max = this.min = null;
        this._reset_cache();
        return this;
    },
    _reset_cache: function () {
        this._stddev = null;
        if (this._config.store_data)
            this._data_sorted = null;
    },
    _find_bucket: function (a) {
        var b = 0, e, l;
        if (this._config.buckets) {
            l = this._config.buckets.length;
            if (this._config.bucket_extension_interval && a >= this._config.buckets[l - 1]) {
                e = a - this._config.buckets[l - 1];
                b = e / this._config.bucket_extension_interval + l;
                if (this._config.buckets[b] === undefined)
                    this._config.buckets[b] = this._config.buckets[l - 1] + (e / this._config.bucket_extension_interval + 1) * this._config.bucket_extension_interval;
                if (this._config.buckets[b - 1] === undefined)
                    this._config.buckets[b - 1] = this._config.buckets[l - 1] + e;
            }
            for (; b < l; b++) {
                if (a < this._config.buckets[b]) {
                    break;
                }
            }
        }
        else if (this._config.bucket_precision) {
            b = Math.floor(a / this._config.bucket_precision);
        }
        return b;
    },
    _add_cache: function (a) {
        var tuple = [1], i;
        if (a instanceof Array) {
            tuple = a;
            a = tuple.shift();
        }
        this.sum += a * tuple[0];
        this.sum_of_squares += a * a * tuple[0];
        if (a === 0) {
            this.zeroes++;
        }
        else {
            this.sum_of_logs += Math.log(a) * tuple[0];
            this.sum_of_square_of_logs += Math.pow(Math.log(a), 2) * tuple[0];
        }
        this.length += tuple[0];
        if (tuple[0] > 0) {
            if (this.max === null || this.max < a)
                this.max = a;
            if (this.min === null || this.min > a)
                this.min = a;
        }
        if (this.buckets) {
            var b = this._find_bucket(a);
            if (!this.buckets[b])
                this.buckets[b] = [0];
            this.buckets[b][0] += tuple.shift();
            for (i = 0; i < tuple.length; i++)
                this.buckets[b][i + 1] = (this.buckets[b][i + 1] | 0) + (tuple[i] | 0);
        }
        this._reset_cache();
    },
    _del_cache: function (a) {
        var tuple = [1], i;
        if (a instanceof Array) {
            tuple = a;
            a = tuple.shift();
        }
        this.sum -= a * tuple[0];
        this.sum_of_squares -= a * a * tuple[0];
        if (a === 0) {
            this.zeroes--;
        }
        else {
            this.sum_of_logs -= Math.log(a) * tuple[0];
            this.sum_of_square_of_logs -= Math.pow(Math.log(a), 2) * tuple[0];
        }
        this.length -= tuple[0];
        if (this._config.store_data) {
            if (this.length === 0) {
                this.max = this.min = null;
            }
            if (this.length === 1) {
                this.max = this.min = this.data[0];
            }
            else if (tuple[0] > 0 && (this.max === a || this.min === a)) {
                var i_1 = this.length - 1;
                if (i_1 >= 0) {
                    this.max = this.min = this.data[i_1--];
                    while (i_1-- >= 0) {
                        if (this.max < this.data[i_1])
                            this.max = this.data[i_1];
                        if (this.min > this.data[i_1])
                            this.min = this.data[i_1];
                    }
                }
            }
        }
        if (this.buckets) {
            var b = this._find_bucket(a);
            if (this.buckets[b]) {
                this.buckets[b][0] -= tuple.shift();
                if (this.buckets[b][0] === 0)
                    delete this.buckets[b];
                else
                    for (i = 0; i < tuple.length; i++)
                        this.buckets[b][i + 1] = (this.buckets[b][i + 1] | 0) - (tuple[i] | 0);
            }
        }
        this._reset_cache();
    },
    push: function () {
        var i, a, args = Array.prototype.slice.call(arguments, 0);
        if (args.length && args[0] instanceof Array)
            args = args[0];
        for (i = 0; i < args.length; i++) {
            a = args[i];
            if (this._config.store_data)
                this.data.push(a);
            this._add_cache(a);
        }
        return this;
    },
    push_tuple: function (tuple) {
        if (!this.buckets) {
            throw new Error("push_tuple is only valid when using buckets");
        }
        this._add_cache(tuple);
    },
    pop: function () {
        if (this.length === 0 || this._config.store_data === false)
            return undefined;
        var a = this.data.pop();
        this._del_cache(a);
        return a;
    },
    remove_tuple: function (tuple) {
        if (!this.buckets) {
            throw new Error("remove_tuple is only valid when using buckets");
        }
        this._del_cache(tuple);
    },
    reset_tuples: function (tuple) {
        var b, l, t, ts = tuple.length;
        if (!this.buckets) {
            throw new Error("reset_tuple is only valid when using buckets");
        }
        for (b = 0, l = this.buckets.length; b < l; b++) {
            if (!this.buckets[b] || this.buckets[b].length <= 1) {
                continue;
            }
            for (t = 0; t < ts; t++) {
                if (typeof tuple[t] !== 'undefined') {
                    this.buckets[b][t] = tuple[t];
                }
            }
        }
    },
    unshift: function () {
        var i, a, args = Array.prototype.slice.call(arguments, 0);
        if (args.length && args[0] instanceof Array)
            args = args[0];
        i = args.length;
        while (i--) {
            a = args[i];
            if (this._config.store_data)
                this.data.unshift(a);
            this._add_cache(a);
        }
        return this;
    },
    shift: function () {
        if (this.length === 0 || this._config.store_data === false)
            return undefined;
        var a = this.data.shift();
        this._del_cache(a);
        return a;
    },
    amean: function () {
        if (this.length === 0)
            return NaN;
        return this.sum / this.length;
    },
    gmean: function () {
        if (this.length === 0)
            return NaN;
        if (this.zeroes > 0)
            return NaN;
        return Math.exp(this.sum_of_logs / this.length);
    },
    stddev: function () {
        if (this.length === 0)
            return NaN;
        var n = this.length;
        if (this._config.sampling)
            n--;
        if (this._stddev === null)
            this._stddev = Math.sqrt((this.length * this.sum_of_squares - this.sum * this.sum) / (this.length * n));
        return this._stddev;
    },
    gstddev: function () {
        if (this.length === 0)
            return NaN;
        if (this.zeroes > 0)
            return NaN;
        var n = this.length;
        if (this._config.sampling)
            n--;
        return Math.exp(Math.sqrt((this.length * this.sum_of_square_of_logs - this.sum_of_logs * this.sum_of_logs) / (this.length * n)));
    },
    moe: function () {
        if (this.length === 0)
            return NaN;
        // see http://en.wikipedia.org/wiki/Standard_error_%28statistics%29
        return 1.96 * this.stddev() / Math.sqrt(this.length);
    },
    range: function () {
        if (this.length === 0)
            return [NaN, NaN];
        return [this.min, this.max];
    },
    distribution: function () {
        if (this.length === 0)
            return [];
        if (!this.buckets)
            throw new Error("bucket_precision or buckets not configured.");
        var d = [], i, j, l;
        if (this._config.buckets) {
            j = this.min;
            l = Math.min(this.buckets.length, this._config.buckets.length);
            for (i = 0; i < l; j = this._config.buckets[i++]) {
                if (this._config.buckets[i] === undefined && this._config.bucket_extension_interval)
                    this._config.buckets[i] = this._config.buckets[i - 1] + this._config.bucket_extension_interval;
                if (this.min > this._config.buckets[i])
                    continue;
                d[i] = {
                    bucket: (j + this._config.buckets[i]) / 2,
                    range: [j, this._config.buckets[i]],
                    count: (this.buckets[i] ? this.buckets[i][0] : 0),
                    tuple: this.buckets[i] ? this.buckets[i].slice(1) : []
                };
                if (this.max < this._config.buckets[i])
                    break;
            }
            if (i === l && this.buckets[i]) {
                d[i] = {
                    bucket: (j + this.max) / 2,
                    range: [j, this.max],
                    count: this.buckets[i][0],
                    tuple: this.buckets[i] ? this.buckets[i].slice(1) : []
                };
            }
        }
        else if (this._config.bucket_precision) {
            i = Math.floor(this.min / this._config.bucket_precision);
            l = Math.floor(this.max / this._config.bucket_precision) + 1;
            for (j = 0; i < l && i < this.buckets.length; i++, j++) {
                d[j] = {
                    bucket: (i + 0.5) * this._config.bucket_precision,
                    range: [i * this._config.bucket_precision, (i + 1) * this._config.bucket_precision],
                    count: this.buckets[i] ? this.buckets[i][0] : 0,
                    tuple: this.buckets[i] ? this.buckets[i].slice(1) : []
                };
            }
        }
        return d;
    },
    percentile: function (p) {
        if (this.length === 0 || (!this._config.store_data && !this.buckets))
            return NaN;
        // If we come here, we either have sorted data or sorted buckets
        var v;
        if (p <= 0)
            v = 0;
        else if (p === 25)
            v = [Math.floor((this.length - 1) * 0.25), Math.ceil((this.length - 1) * 0.25)];
        else if (p === 50)
            v = [Math.floor((this.length - 1) * 0.5), Math.ceil((this.length - 1) * 0.5)];
        else if (p === 75)
            v = [Math.floor((this.length - 1) * 0.75), Math.ceil((this.length - 1) * 0.75)];
        else if (p >= 100)
            v = this.length - 1;
        else
            v = Math.floor(this.length * p / 100);
        if (v === 0)
            return this.min;
        if (v === this.length - 1)
            return this.max;
        if (this._config.store_data) {
            if (this._data_sorted === null)
                this._data_sorted = this.data.slice(0).sort(asc);
            if (typeof v === 'number')
                return this._data_sorted[v];
            else
                return (this._data_sorted[v[0]] + this._data_sorted[v[1]]) / 2;
        }
        else {
            var j = void 0;
            if (typeof v !== 'number')
                v = (v[0] + v[1]) / 2;
            if (this._config.buckets)
                j = 0;
            else if (this._config.bucket_precision)
                j = Math.floor(this.min / this._config.bucket_precision);
            for (; j < this.buckets.length; j++) {
                if (!this.buckets[j])
                    continue;
                if (v <= this.buckets[j][0]) {
                    break;
                }
                v -= this.buckets[j][0];
            }
            return this._get_nth_in_bucket(v, j);
        }
    },
    _get_nth_in_bucket: function (n, b) {
        var range = [];
        if (this._config.buckets) {
            range[0] = (b > 0 ? this._config.buckets[b - 1] : this.min);
            range[1] = (b < this._config.buckets.length ? this._config.buckets[b] : this.max);
        }
        else if (this._config.bucket_precision) {
            range[0] = Math.max(b * this._config.bucket_precision, this.min);
            range[1] = Math.min((b + 1) * this._config.bucket_precision, this.max);
        }
        return range[0] + (range[1] - range[0]) * n / this.buckets[b][0];
    },
    median: function () {
        return this.percentile(50);
    },
    iqr: function () {
        var q1, q3, fw;
        q1 = this.percentile(25);
        q3 = this.percentile(75);
        fw = (q3 - q1) * 1.5;
        return this.band_pass(q1 - fw, q3 + fw, true);
    },
    band_pass: function (low, high, open, config) {
        var i, j, b, b_val, i_val;
        if (!config)
            config = this._config;
        b = new Stats(config);
        if (this.length === 0)
            return b;
        if (this._config.store_data) {
            if (this._data_sorted === null)
                this._data_sorted = this.data.slice(0).sort(asc);
            for (i = 0; i < this.length && (this._data_sorted[i] < high || (!open && this._data_sorted[i] === high)); i++) {
                if (this._data_sorted[i] > low || (!open && this._data_sorted[i] === low)) {
                    b.push(this._data_sorted[i]);
                }
            }
        }
        else if (this._config.buckets) {
            for (i = 0; i <= this._config.buckets.length; i++) {
                if (this._config.buckets[i] < this.min)
                    continue;
                b_val = (i === 0 ? this.min : this._config.buckets[i - 1]);
                if (b_val < this.min)
                    b_val = this.min;
                if (b_val > this.max)
                    b_val = this.max;
                if (high < b_val || (open && high === b_val)) {
                    break;
                }
                if (low < b_val || (!open && low === b_val)) {
                    for (j = 0; j < (this.buckets[i] ? this.buckets[i][0] : 0); j++) {
                        i_val = Stats.prototype._get_nth_in_bucket.call(this, j, i);
                        if ((i_val > low || (!open && i_val === low))
                            && (i_val < high || (!open && i_val === high))) {
                            b.push(i_val);
                        }
                    }
                }
            }
            b.min = Math.max(low, b.min);
            b.max = Math.min(high, b.max);
        }
        else if (this._config.bucket_precision) {
            var low_i = Math.floor(low / this._config.bucket_precision), high_i = Math.floor(high / this._config.bucket_precision) + 1;
            for (i = low_i; i < Math.min(this.buckets.length, high_i); i++) {
                for (j = 0; j < (this.buckets[i] ? this.buckets[i][0] : 0); j++) {
                    i_val = Stats.prototype._get_nth_in_bucket.call(this, j, i);
                    if ((i_val > low || (!open && i_val === low))
                        && (i_val < high || (!open && i_val === high))) {
                        b.push(i_val);
                    }
                }
            }
            b.min = Math.max(low, b.min);
            b.max = Math.min(high, b.max);
        }
        return b;
    },
    copy: function (config) {
        var b = Stats.prototype.band_pass.call(this, this.min, this.max, false, config);
        b.sum = this.sum;
        b.sum_of_squares = this.sum_of_squares;
        b.sum_of_logs = this.sum_of_logs;
        b.sum_of_square_of_logs = this.sum_of_square_of_logs;
        b.zeroes = this.zeroes;
        return b;
    },
    Σ: function () {
        return this.sum;
    },
    Π: function () {
        return this.zeroes > 0 ? 0 : Math.exp(this.sum_of_logs);
    }
};
Stats.prototype.σ = Stats.prototype.stddev;
Stats.prototype.μ = Stats.prototype.amean;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJnbGltbWVyLWJlbmNobWFya3MvbGliL3N0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztFQUVFOztBQUVGLGFBQWEsQ0FBQyxFQUFFLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFFbEMsSUFBSSxhQUFhLEdBQUc7SUFDbEIsZ0JBQWdCLEVBQUUsVUFBUyxDQUFDLEVBQUUsQ0FBQztRQUM3QixFQUFFLENBQUEsQ0FBQyxPQUFPLENBQUMsS0FBSyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbkMsTUFBTSxJQUFJLEtBQUssQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO1FBQ2hFLENBQUM7UUFDRCxDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQztRQUMvQixDQUFDLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRUQsT0FBTyxFQUFFLFVBQVMsQ0FBQyxFQUFFLENBQUM7UUFDcEIsRUFBRSxDQUFBLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN2QyxNQUFNLElBQUksS0FBSyxDQUFDLDJDQUEyQyxDQUFDLENBQUM7UUFDL0QsQ0FBQztRQUVELENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztRQUN0QixDQUFDLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRUQseUJBQXlCLEVBQUUsVUFBUyxDQUFDLEVBQUUsQ0FBQztRQUN0QyxFQUFFLENBQUEsQ0FBQyxDQUFDLEtBQUssU0FBUyxDQUFDO1lBQ2pCLE1BQU0sQ0FBQztRQUNULEVBQUUsQ0FBQSxDQUFDLE9BQU8sQ0FBQyxLQUFLLFFBQVEsSUFB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Q0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDckIsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztZQUM3QixDQUFDO1lBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQyxDQUFDO1lBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDM0QsSUFBSSxHQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBQyxDQUFDLENBQUM7Z0JBQ3RCLEVBQUUsQ0FBQSxDQUFDLEdBQUMsSUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNSLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ3JDLE9BQU0sR0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUM7d0JBQ2YsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUMsQ0FBQyxDQUFDOzRCQUN6QixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBQyxDQUFDLENBQUM7d0JBQzFCLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFDLENBQUMsQ0FBQzs0QkFDekIsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUMsQ0FBQyxDQUFDO29CQUM1QixDQUFDO2dCQUNILENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztRQUVELEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2hCLElBQUksQ0FBQyxHQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0IsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUVwQyxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDMUIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN6QixJQUFJO29CQUNGLEdBQUcsQ0FBQSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFO3dCQUMxQixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JFLENBQUM7UUFDSCxDQUFDO1FBRUQsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxJQUFJLEVBQUU7UUFDSixJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxHQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEQsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQVksS0FBSyxDQUFDO1lBQ3pDLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsR0FBRyxDQUFBLENBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxDQUFDLEdBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQzVCLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDWixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztnQkFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQixDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxVQUFVLEVBQUUsVUFBUyxLQUFLO1FBQ3hCLEVBQUUsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDakIsTUFBTSxJQUFJLEtBQUssQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDO1FBQ2pFLENBQUM7UUFDRCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxHQUFHLEVBQUU7UUFDSCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsS0FBSyxLQUFLLENBQUM7WUFDeEQsTUFBTSxDQUFDLFNBQVMsQ0FBQztRQUVuQixJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFbkIsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFRCxZQUFZLEVBQUUsVUFBUyxLQUFLO1FBQzFCLEVBQUUsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDakIsTUFBTSxJQUFJLEtBQUssQ0FBQywrQ0FBK0MsQ0FBQyxDQUFDO1FBQ25FLENBQUM7UUFDRCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxZQUFZLEVBQUUsVUFBUyxLQUFLO1FBQzFCLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDN0IsRUFBRSxDQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNqQixNQUFNLElBQUksS0FBSyxDQUFDLDhDQUE4QyxDQUFDLENBQUM7UUFDbEUsQ0FBQztRQUVELEdBQUcsQ0FBQSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUN6QyxFQUFFLENBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkQsUUFBUSxDQUFDO1lBQ1gsQ0FBQztZQUNELEdBQUcsQ0FBQSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUNuQixFQUFFLENBQUEsQ0FBQyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDO29CQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDaEMsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELE9BQU8sRUFBRTtRQUNQLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLEdBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN4RCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxLQUFLLENBQUM7WUFDekMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixDQUFDLEdBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNkLE9BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNWLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDWixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztnQkFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQixDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxLQUFLLEVBQUU7UUFDTCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsS0FBSyxLQUFLLENBQUM7WUFDeEQsTUFBTSxDQUFDLFNBQVMsQ0FBQztRQUVuQixJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzFCLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFbkIsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFRCxLQUFLLEVBQUU7UUFDTCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztZQUNuQixNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUM5QixDQUFDO0lBRUQsS0FBSyxFQUFFO1FBQ0wsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7WUFDbkIsTUFBTSxDQUFDLEdBQUcsQ0FBQztRQUNiLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBQ2pCLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFDYixNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBRUQsTUFBTSxFQUFFO1FBQ04sRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7WUFDbkIsTUFBTSxDQUFDLEdBQUcsQ0FBQztRQUNiLElBQUksQ0FBQyxHQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDbEIsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7WUFDdkIsQ0FBQyxFQUFFLENBQUM7UUFDTixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQztZQUN2QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFcEcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDdEIsQ0FBQztJQUVELE9BQU8sRUFBRTtRQUNQLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1lBQ25CLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFDYixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUNqQixNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ2IsSUFBSSxDQUFDLEdBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNsQixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztZQUN2QixDQUFDLEVBQUUsQ0FBQztRQUNOLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdILENBQUM7SUFFRCxHQUFHLEVBQUU7UUFDSCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztZQUNuQixNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ2IsbUVBQW1FO1FBQ25FLE1BQU0sQ0FBQyxJQUFJLEdBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFRCxLQUFLLEVBQUU7UUFDTCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztZQUNuQixNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDcEIsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVELFlBQVksRUFBRTtRQUNaLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1lBQ25CLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDWixFQUFFLENBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDZixNQUFNLElBQUksS0FBSyxDQUFDLDZDQUE2QyxDQUFDLENBQUM7UUFFakUsSUFBSSxDQUFDLEdBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRWxCLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUN4QixDQUFDLEdBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztZQUNYLENBQUMsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRTdELEdBQUcsQ0FBQSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLENBQUMsRUFBRSxDQUFDLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO2dCQUMxQyxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxTQUFTLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQztvQkFDakYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMseUJBQXlCLENBQUM7Z0JBQy9GLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3BDLFFBQVEsQ0FBQztnQkFFWCxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUc7b0JBQ0wsTUFBTSxFQUFFLENBQUMsQ0FBQyxHQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQztvQkFDckMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNuQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDO29CQUM3QyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBQyxFQUFFO2lCQUNuRCxDQUFDO2dCQUVGLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3BDLEtBQUssQ0FBQztZQUNWLENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM5QixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUc7b0JBQ0wsTUFBTSxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBQyxDQUFDO29CQUN4QixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQztvQkFDcEIsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN6QixLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBQyxFQUFFO2lCQUNuRCxDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7UUFDRCxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDdEMsQ0FBQyxHQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDckQsQ0FBQyxHQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEdBQUMsQ0FBQyxDQUFDO1lBQ3ZELEdBQUcsQ0FBQSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLENBQUMsSUFBSSxDQUFDLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDaEQsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHO29CQUNMLE1BQU0sRUFBRSxDQUFDLENBQUMsR0FBQyxHQUFHLENBQUMsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQjtvQkFDN0MsS0FBSyxFQUFFLENBQUMsQ0FBQyxHQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztvQkFDN0UsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDO29CQUMzQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBQyxFQUFFO2lCQUNuRCxDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7UUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBRVgsQ0FBQztJQUVELFVBQVUsRUFBRSxVQUFTLENBQUM7UUFDcEIsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFFYixnRUFBZ0U7UUFFaEUsSUFBSSxDQUFDLENBQUM7UUFFTixFQUFFLENBQUEsQ0FBQyxDQUFDLElBQUssQ0FBQyxDQUFDO1lBQ1QsQ0FBQyxHQUFDLENBQUMsQ0FBQztRQUNOLElBQUksQ0FBQyxFQUFFLENBQUEsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2YsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUMsQ0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUMsQ0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMxRSxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNmLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBQyxHQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBQyxHQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDZixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzFFLElBQUksQ0FBQyxFQUFFLENBQUEsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDO1lBQ2YsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUMsQ0FBQyxDQUFDO1FBQ3BCLElBQUk7WUFDRixDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFDLENBQUMsR0FBQyxHQUFHLENBQUMsQ0FBQztRQUVwQyxFQUFFLENBQUEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ1QsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDbEIsRUFBRSxDQUFBLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxNQUFNLEdBQUMsQ0FBQyxDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBRWxCLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUMzQixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsWUFBWSxLQUFLLElBQUksQ0FBQztnQkFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFbkQsRUFBRSxDQUFBLENBQUMsT0FBTyxDQUFDLEtBQUssUUFBUSxDQUFDO2dCQUN2QixNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QixJQUFJO2dCQUNGLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQztRQUNqRSxDQUFDO1FBQ0QsSUFBSSxDQUFDLENBQUM7WUFDSixJQUFJLENBQUMsU0FBQSxDQUFDO1lBQ04sRUFBRSxDQUFBLENBQUMsT0FBTyxDQUFDLEtBQUssUUFBUSxDQUFDO2dCQUN2QixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDO1lBRXBCLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO2dCQUN0QixDQUFDLEdBQUMsQ0FBQyxDQUFDO1lBQ04sSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7Z0JBQ3BDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBRXpELEdBQUcsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxHQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ2pDLEVBQUUsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbEIsUUFBUSxDQUFDO2dCQUNYLEVBQUUsQ0FBQSxDQUFDLENBQUMsSUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDekIsS0FBSyxDQUFDO2dCQUNSLENBQUM7Z0JBQ0QsQ0FBQyxJQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsQ0FBQztZQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLENBQUM7SUFDSCxDQUFDO0lBRUQsa0JBQWtCLEVBQUUsVUFBUyxDQUFDLEVBQUUsQ0FBQztRQUMvQixJQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDZixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDeEIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BELEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzlFLENBQUM7UUFDRCxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDdEMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQy9ELEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3JFLENBQUM7UUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFRCxNQUFNLEVBQUU7UUFDTixNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRUQsR0FBRyxFQUFFO1FBQ0gsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUVmLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3pCLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRXpCLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBQyxFQUFFLENBQUMsR0FBQyxHQUFHLENBQUM7UUFFakIsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFRCxTQUFTLEVBQUUsVUFBUyxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNO1FBQ3pDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQztRQUUxQixFQUFFLENBQUEsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUNULE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBRXhCLENBQUMsR0FBRyxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUV0QixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztZQUNuQixNQUFNLENBQUMsQ0FBQyxDQUFDO1FBRVgsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQzNCLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxZQUFZLEtBQUssSUFBSSxDQUFDO2dCQUM1QixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUVuRCxHQUFHLENBQUEsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDekcsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDekUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQy9CLENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztRQUNELElBQUksQ0FBQyxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDN0IsR0FBRyxDQUFBLENBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxDQUFDLElBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzdDLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7b0JBQ3BDLFFBQVEsQ0FBQztnQkFFWCxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUcsQ0FBQyxHQUFDLElBQUksQ0FBQyxHQUFHLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25ELEVBQUUsQ0FBQSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO29CQUNsQixLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztnQkFDbkIsRUFBRSxDQUFBLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7b0JBQ2xCLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUVuQixFQUFFLENBQUEsQ0FBQyxJQUFJLEdBQUcsS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzVDLEtBQUssQ0FBQztnQkFDUixDQUFDO2dCQUNELEVBQUUsQ0FBQSxDQUFDLEdBQUcsR0FBRyxLQUFLLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxHQUFHLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUMzQyxHQUFHLENBQUEsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO3dCQUN2RCxLQUFLLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzt3QkFDNUQsRUFBRSxDQUFBLENBQUUsQ0FBQyxLQUFLLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQyxDQUFDOytCQUN4QyxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxLQUFLLEtBQUssSUFBSSxDQUFDLENBQy9DLENBQUMsQ0FBQyxDQUFDOzRCQUNELENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ2hCLENBQUM7b0JBQ0gsQ0FBQztnQkFDSCxDQUFDO1lBQ0gsQ0FBQztZQUVELENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzdCLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFDRCxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDdEMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUNyRCxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFDLENBQUMsQ0FBQztZQUU5RCxHQUFHLENBQUEsQ0FBQyxDQUFDLEdBQUMsS0FBSyxFQUFFLENBQUMsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzFELEdBQUcsQ0FBQSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7b0JBQ3ZELEtBQUssR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUM1RCxFQUFFLENBQUEsQ0FBRSxDQUFDLEtBQUssR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxLQUFLLEtBQUssR0FBRyxDQUFDLENBQUM7MkJBQ3hDLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FDL0MsQ0FBQyxDQUFDLENBQUM7d0JBQ0QsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDaEIsQ0FBQztnQkFDSCxDQUFDO1lBQ0gsQ0FBQztZQUVELENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzdCLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVELElBQUksRUFBRSxVQUFTLE1BQU07UUFDbkIsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRWhGLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUNqQixDQUFDLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDdkMsQ0FBQyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUM7UUFDckQsQ0FBQyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBRXZCLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDWCxDQUFDO0lBRUQsQ0FBQyxFQUFFO1FBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDbEIsQ0FBQztJQUVELENBQUMsRUFBRTtRQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDMUQsQ0FBQztDQUNGLENBQUM7QUFFRixLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQztBQUN6QyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Ob3RlIHRoYXQgaWYgeW91ciBkYXRhIGlzIHRvbyBsYXJnZSwgdGhlcmUgX3dpbGxfIGJlIG92ZXJmbG93LlxuKi9cblxuZnVuY3Rpb24gYXNjKGEsIGIpIHsgcmV0dXJuIGEtYjsgfVxuXG5sZXQgY29uZmlnX3BhcmFtcyA9IHtcbiAgYnVja2V0X3ByZWNpc2lvbjogZnVuY3Rpb24obywgcykge1xuICAgIGlmKHR5cGVvZiBzICE9PSBcIm51bWJlclwiIHx8IHMgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYnVja2V0X3ByZWNpc2lvbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCIpO1xuICAgIH1cbiAgICBvLl9jb25maWcuYnVja2V0X3ByZWNpc2lvbiA9IHM7XG4gICAgby5idWNrZXRzID0gW107XG4gIH0sXG5cbiAgYnVja2V0czogZnVuY3Rpb24obywgYikge1xuICAgIGlmKCFBcnJheS5pc0FycmF5KGIpIHx8IGIubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJidWNrZXRzIG11c3QgYmUgYW4gYXJyYXkgb2YgYnVja2V0IGxpbWl0c1wiKTtcbiAgICB9XG5cbiAgICBvLl9jb25maWcuYnVja2V0cyA9IGI7XG4gICAgby5idWNrZXRzID0gW107XG4gIH0sXG5cbiAgYnVja2V0X2V4dGVuc2lvbl9pbnRlcnZhbDogZnVuY3Rpb24obywgcykge1xuICAgIGlmKHMgPT09IHVuZGVmaW5lZClcbiAgICAgIHJldHVybjtcbiAgICBpZih0eXBlb2YgcyAhPT0gXCJudW1iZXJcIiB8fCBzPD0wKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJidWNrZXRfZXh0ZW5zaW9uX2ludGVydmFsIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7XG4gICAgfVxuICAgIG8uX2NvbmZpZy5idWNrZXRfZXh0ZW5zaW9uX2ludGVydmFsID0gcztcbiAgfSxcblxuICBzdG9yZV9kYXRhOiBmdW5jdGlvbihvLCBzKSB7XG4gICAgaWYodHlwZW9mIHMgIT09IFwiYm9vbGVhblwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzdG9yZV9kYXRhIG11c3QgYmUgYSB0cnVlIG9yIGZhbHNlXCIpO1xuICAgIH1cbiAgICBvLl9jb25maWcuc3RvcmVfZGF0YSA9IHM7XG4gIH0sXG5cbiAgc2FtcGxpbmc6IGZ1bmN0aW9uKG8sIHMpIHtcbiAgICBpZih0eXBlb2YgcyAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInNhbXBsaW5nIG11c3QgYmUgYSB0cnVlIG9yIGZhbHNlXCIpO1xuICAgIH1cbiAgICBvLl9jb25maWcuc2FtcGxpbmcgPSBzO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdGF0cyhjKSB7XG4gIHRoaXMuX2NvbmZpZyA9IHsgc3RvcmVfZGF0YTogIHRydWUgfTtcblxuICBpZihjKSB7XG4gICAgZm9yKGxldCBrIGluIGNvbmZpZ19wYXJhbXMpIHtcbiAgICAgIGlmKGMuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgY29uZmlnX3BhcmFtc1trXSh0aGlzLCBjW2tdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0aGlzLnJlc2V0KCk7XG59XG5cblN0YXRzLnByb3RvdHlwZSA9IHtcblxuICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgaWYodGhpcy5fY29uZmlnLnN0b3JlX2RhdGEpXG4gICAgICB0aGlzLmRhdGEgPSBbXTtcblxuICAgIHRoaXMubGVuZ3RoID0gMDtcblxuICAgIHRoaXMuc3VtID0gMDtcbiAgICB0aGlzLnN1bV9vZl9zcXVhcmVzID0gMDtcbiAgICB0aGlzLnN1bV9vZl9sb2dzID0gMDtcbiAgICB0aGlzLnN1bV9vZl9zcXVhcmVfb2ZfbG9ncyA9IDA7XG4gICAgdGhpcy56ZXJvZXMgPSAwO1xuICAgIHRoaXMubWF4ID0gdGhpcy5taW4gPSBudWxsO1xuXG4gICAgdGhpcy5fcmVzZXRfY2FjaGUoKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIF9yZXNldF9jYWNoZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fc3RkZGV2ID0gbnVsbDtcblxuICAgIGlmKHRoaXMuX2NvbmZpZy5zdG9yZV9kYXRhKVxuICAgICAgdGhpcy5fZGF0YV9zb3J0ZWQgPSBudWxsO1xuICB9LFxuXG4gIF9maW5kX2J1Y2tldDogZnVuY3Rpb24oYSkge1xuICAgIGxldCBiPTAsIGUsIGw7XG4gICAgaWYodGhpcy5fY29uZmlnLmJ1Y2tldHMpIHtcbiAgICAgIGwgPSB0aGlzLl9jb25maWcuYnVja2V0cy5sZW5ndGg7XG4gICAgICBpZih0aGlzLl9jb25maWcuYnVja2V0X2V4dGVuc2lvbl9pbnRlcnZhbCAmJiBhID49IHRoaXMuX2NvbmZpZy5idWNrZXRzW2wtMV0pIHtcbiAgICAgICAgZT1hLXRoaXMuX2NvbmZpZy5idWNrZXRzW2wtMV07XG4gICAgICAgIGIgPSBlIC8gdGhpcy5fY29uZmlnLmJ1Y2tldF9leHRlbnNpb25faW50ZXJ2YWwgKyBsO1xuICAgICAgICBpZih0aGlzLl9jb25maWcuYnVja2V0c1tiXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgIHRoaXMuX2NvbmZpZy5idWNrZXRzW2JdID0gdGhpcy5fY29uZmlnLmJ1Y2tldHNbbC0xXSArIChlIC8gdGhpcy5fY29uZmlnLmJ1Y2tldF9leHRlbnNpb25faW50ZXJ2YWwgKyAxKSp0aGlzLl9jb25maWcuYnVja2V0X2V4dGVuc2lvbl9pbnRlcnZhbDtcbiAgICAgICAgaWYodGhpcy5fY29uZmlnLmJ1Y2tldHNbYi0xXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgIHRoaXMuX2NvbmZpZy5idWNrZXRzW2ItMV0gPSB0aGlzLl9jb25maWcuYnVja2V0c1tsLTFdICsgZTtcbiAgICAgIH1cbiAgICAgIGZvcig7IGI8bDsgYisrKSB7XG4gICAgICAgIGlmKGEgPCB0aGlzLl9jb25maWcuYnVja2V0c1tiXSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYodGhpcy5fY29uZmlnLmJ1Y2tldF9wcmVjaXNpb24pIHtcbiAgICAgIGIgPSBNYXRoLmZsb29yKGEvdGhpcy5fY29uZmlnLmJ1Y2tldF9wcmVjaXNpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBiO1xuICB9LFxuXG4gIF9hZGRfY2FjaGU6IGZ1bmN0aW9uKGEpIHtcbiAgICBsZXQgdHVwbGU9WzFdLCBpO1xuICAgIGlmKGEgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgdHVwbGUgPSBhO1xuICAgICAgYSA9IHR1cGxlLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5zdW0gKz0gYSp0dXBsZVswXTtcbiAgICB0aGlzLnN1bV9vZl9zcXVhcmVzICs9IGEqYSp0dXBsZVswXTtcbiAgICBpZihhID09PSAwKSB7XG4gICAgICB0aGlzLnplcm9lcysrO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuc3VtX29mX2xvZ3MgKz0gTWF0aC5sb2coYSkqdHVwbGVbMF07XG4gICAgICB0aGlzLnN1bV9vZl9zcXVhcmVfb2ZfbG9ncyArPSBNYXRoLnBvdyhNYXRoLmxvZyhhKSwgMikqdHVwbGVbMF07XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoICs9IHR1cGxlWzBdO1xuXG4gICAgaWYodHVwbGVbMF0gPiAwKSB7XG4gICAgICBpZih0aGlzLm1heCA9PT0gbnVsbCB8fCB0aGlzLm1heCA8IGEpXG4gICAgICAgIHRoaXMubWF4ID0gYTtcbiAgICAgIGlmKHRoaXMubWluID09PSBudWxsIHx8IHRoaXMubWluID4gYSlcbiAgICAgICAgdGhpcy5taW4gPSBhO1xuICAgIH1cblxuICAgIGlmKHRoaXMuYnVja2V0cykge1xuICAgICAgbGV0IGIgPSB0aGlzLl9maW5kX2J1Y2tldChhKTtcbiAgICAgIGlmKCF0aGlzLmJ1Y2tldHNbYl0pXG4gICAgICAgIHRoaXMuYnVja2V0c1tiXSA9IFswXTtcbiAgICAgIHRoaXMuYnVja2V0c1tiXVswXSArPSB0dXBsZS5zaGlmdCgpO1xuXG4gICAgICBmb3IoaT0wOyBpPHR1cGxlLmxlbmd0aDsgaSsrKVxuICAgICAgICB0aGlzLmJ1Y2tldHNbYl1baSsxXSA9ICh0aGlzLmJ1Y2tldHNbYl1baSsxXXwwKSArICh0dXBsZVtpXXwwKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZXNldF9jYWNoZSgpO1xuICB9LFxuXG4gIF9kZWxfY2FjaGU6IGZ1bmN0aW9uKGEpIHtcbiAgICBsZXQgdHVwbGU9WzFdLCBpO1xuICAgIGlmKGEgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgdHVwbGUgPSBhO1xuICAgICAgYSA9IHR1cGxlLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5zdW0gLT0gYSp0dXBsZVswXTtcbiAgICB0aGlzLnN1bV9vZl9zcXVhcmVzIC09IGEqYSp0dXBsZVswXTtcbiAgICBpZihhID09PSAwKSB7XG4gICAgICB0aGlzLnplcm9lcy0tO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuc3VtX29mX2xvZ3MgLT0gTWF0aC5sb2coYSkqdHVwbGVbMF07XG4gICAgICB0aGlzLnN1bV9vZl9zcXVhcmVfb2ZfbG9ncyAtPSBNYXRoLnBvdyhNYXRoLmxvZyhhKSwgMikqdHVwbGVbMF07XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoIC09IHR1cGxlWzBdO1xuXG4gICAgaWYodGhpcy5fY29uZmlnLnN0b3JlX2RhdGEpIHtcbiAgICAgIGlmKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5taW4gPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYodGhpcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLm1pbiA9IHRoaXMuZGF0YVswXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYodHVwbGVbMF0gPiAwICYmICh0aGlzLm1heCA9PT0gYSB8fCB0aGlzLm1pbiA9PT0gYSkpIHtcbiAgICAgICAgbGV0IGkgPSB0aGlzLmxlbmd0aC0xO1xuICAgICAgICBpZihpPj0wKSB7XG4gICAgICAgICAgdGhpcy5tYXggPSB0aGlzLm1pbiA9IHRoaXMuZGF0YVtpLS1dO1xuICAgICAgICAgIHdoaWxlKGktLSA+PSAwKSB7XG4gICAgICAgICAgICBpZih0aGlzLm1heCA8IHRoaXMuZGF0YVtpXSlcbiAgICAgICAgICAgICAgdGhpcy5tYXggPSB0aGlzLmRhdGFbaV07XG4gICAgICAgICAgICBpZih0aGlzLm1pbiA+IHRoaXMuZGF0YVtpXSlcbiAgICAgICAgICAgICAgdGhpcy5taW4gPSB0aGlzLmRhdGFbaV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYodGhpcy5idWNrZXRzKSB7XG4gICAgICBsZXQgYj10aGlzLl9maW5kX2J1Y2tldChhKTtcbiAgICAgIGlmKHRoaXMuYnVja2V0c1tiXSkge1xuICAgICAgICB0aGlzLmJ1Y2tldHNbYl1bMF0gLT0gdHVwbGUuc2hpZnQoKTtcblxuICAgICAgICBpZih0aGlzLmJ1Y2tldHNbYl1bMF0gPT09IDApXG4gICAgICAgICAgZGVsZXRlIHRoaXMuYnVja2V0c1tiXTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGZvcihpPTA7IGk8dHVwbGUubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB0aGlzLmJ1Y2tldHNbYl1baSsxXSA9ICh0aGlzLmJ1Y2tldHNbYl1baSsxXXwwKSAtICh0dXBsZVtpXXwwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9yZXNldF9jYWNoZSgpO1xuICB9LFxuXG4gIHB1c2g6IGZ1bmN0aW9uKCkge1xuICAgIGxldCBpLCBhLCBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgaWYoYXJncy5sZW5ndGggJiYgYXJnc1swXSBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgYXJncyA9IGFyZ3NbMF07XG4gICAgZm9yKGk9MDsgaTxhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhID0gYXJnc1tpXTtcbiAgICAgIGlmKHRoaXMuX2NvbmZpZy5zdG9yZV9kYXRhKVxuICAgICAgICB0aGlzLmRhdGEucHVzaChhKTtcbiAgICAgIHRoaXMuX2FkZF9jYWNoZShhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICBwdXNoX3R1cGxlOiBmdW5jdGlvbih0dXBsZSkge1xuICAgIGlmKCF0aGlzLmJ1Y2tldHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInB1c2hfdHVwbGUgaXMgb25seSB2YWxpZCB3aGVuIHVzaW5nIGJ1Y2tldHNcIik7XG4gICAgfVxuICAgIHRoaXMuX2FkZF9jYWNoZSh0dXBsZSk7XG4gIH0sXG5cbiAgcG9wOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLmxlbmd0aCA9PT0gMCB8fCB0aGlzLl9jb25maWcuc3RvcmVfZGF0YSA9PT0gZmFsc2UpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgbGV0IGEgPSB0aGlzLmRhdGEucG9wKCk7XG4gICAgdGhpcy5fZGVsX2NhY2hlKGEpO1xuXG4gICAgcmV0dXJuIGE7XG4gIH0sXG5cbiAgcmVtb3ZlX3R1cGxlOiBmdW5jdGlvbih0dXBsZSkge1xuICAgIGlmKCF0aGlzLmJ1Y2tldHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInJlbW92ZV90dXBsZSBpcyBvbmx5IHZhbGlkIHdoZW4gdXNpbmcgYnVja2V0c1wiKTtcbiAgICB9XG4gICAgdGhpcy5fZGVsX2NhY2hlKHR1cGxlKTtcbiAgfSxcblxuICByZXNldF90dXBsZXM6IGZ1bmN0aW9uKHR1cGxlKSB7XG4gICAgbGV0IGIsIGwsIHQsIHRzPXR1cGxlLmxlbmd0aDtcbiAgICBpZighdGhpcy5idWNrZXRzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJyZXNldF90dXBsZSBpcyBvbmx5IHZhbGlkIHdoZW4gdXNpbmcgYnVja2V0c1wiKTtcbiAgICB9XG5cbiAgICBmb3IoYj0wLCBsPXRoaXMuYnVja2V0cy5sZW5ndGg7IGI8bDsgYisrKSB7XG4gICAgICBpZighdGhpcy5idWNrZXRzW2JdIHx8IHRoaXMuYnVja2V0c1tiXS5sZW5ndGggPD0gMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGZvcih0PTA7IHQ8dHM7IHQrKykge1xuICAgICAgICBpZih0eXBlb2YgdHVwbGVbdF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5idWNrZXRzW2JdW3RdID0gdHVwbGVbdF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdW5zaGlmdDogZnVuY3Rpb24oKSB7XG4gICAgbGV0IGksIGEsIGFyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICBpZihhcmdzLmxlbmd0aCAmJiBhcmdzWzBdIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICBhcmdzID0gYXJnc1swXTtcbiAgICBpPWFyZ3MubGVuZ3RoO1xuICAgIHdoaWxlKGktLSkge1xuICAgICAgYSA9IGFyZ3NbaV07XG4gICAgICBpZih0aGlzLl9jb25maWcuc3RvcmVfZGF0YSlcbiAgICAgICAgdGhpcy5kYXRhLnVuc2hpZnQoYSk7XG4gICAgICB0aGlzLl9hZGRfY2FjaGUoYSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgc2hpZnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmKHRoaXMubGVuZ3RoID09PSAwIHx8IHRoaXMuX2NvbmZpZy5zdG9yZV9kYXRhID09PSBmYWxzZSlcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cbiAgICBsZXQgYSA9IHRoaXMuZGF0YS5zaGlmdCgpO1xuICAgIHRoaXMuX2RlbF9jYWNoZShhKTtcblxuICAgIHJldHVybiBhO1xuICB9LFxuXG4gIGFtZWFuOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiBOYU47XG4gICAgcmV0dXJuIHRoaXMuc3VtL3RoaXMubGVuZ3RoO1xuICB9LFxuXG4gIGdtZWFuOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiBOYU47XG4gICAgaWYodGhpcy56ZXJvZXMgPiAwKVxuICAgICAgcmV0dXJuIE5hTjtcbiAgICByZXR1cm4gTWF0aC5leHAodGhpcy5zdW1fb2ZfbG9ncy90aGlzLmxlbmd0aCk7XG4gIH0sXG5cbiAgc3RkZGV2OiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiBOYU47XG4gICAgbGV0IG49dGhpcy5sZW5ndGg7XG4gICAgaWYodGhpcy5fY29uZmlnLnNhbXBsaW5nKVxuICAgICAgbi0tO1xuICAgIGlmKHRoaXMuX3N0ZGRldiA9PT0gbnVsbClcbiAgICAgIHRoaXMuX3N0ZGRldiA9IE1hdGguc3FydCgodGhpcy5sZW5ndGggKiB0aGlzLnN1bV9vZl9zcXVhcmVzIC0gdGhpcy5zdW0qdGhpcy5zdW0pLyh0aGlzLmxlbmd0aCpuKSk7XG5cbiAgICByZXR1cm4gdGhpcy5fc3RkZGV2O1xuICB9LFxuXG4gIGdzdGRkZXY6IGZ1bmN0aW9uKCkge1xuICAgIGlmKHRoaXMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuIE5hTjtcbiAgICBpZih0aGlzLnplcm9lcyA+IDApXG4gICAgICByZXR1cm4gTmFOO1xuICAgIGxldCBuPXRoaXMubGVuZ3RoO1xuICAgIGlmKHRoaXMuX2NvbmZpZy5zYW1wbGluZylcbiAgICAgIG4tLTtcbiAgICByZXR1cm4gTWF0aC5leHAoTWF0aC5zcXJ0KCh0aGlzLmxlbmd0aCAqIHRoaXMuc3VtX29mX3NxdWFyZV9vZl9sb2dzIC0gdGhpcy5zdW1fb2ZfbG9ncyp0aGlzLnN1bV9vZl9sb2dzKS8odGhpcy5sZW5ndGgqbikpKTtcbiAgfSxcblxuICBtb2U6IGZ1bmN0aW9uKCkge1xuICAgIGlmKHRoaXMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuIE5hTjtcbiAgICAvLyBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGFuZGFyZF9lcnJvcl8lMjhzdGF0aXN0aWNzJTI5XG4gICAgcmV0dXJuIDEuOTYqdGhpcy5zdGRkZXYoKS9NYXRoLnNxcnQodGhpcy5sZW5ndGgpO1xuICB9LFxuXG4gIHJhbmdlOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiBbTmFOLCBOYU5dO1xuICAgIHJldHVybiBbdGhpcy5taW4sIHRoaXMubWF4XTtcbiAgfSxcblxuICBkaXN0cmlidXRpb246IGZ1bmN0aW9uKCkge1xuICAgIGlmKHRoaXMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuIFtdO1xuICAgIGlmKCF0aGlzLmJ1Y2tldHMpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJidWNrZXRfcHJlY2lzaW9uIG9yIGJ1Y2tldHMgbm90IGNvbmZpZ3VyZWQuXCIpO1xuXG4gICAgbGV0IGQ9W10sIGksIGosIGw7XG5cbiAgICBpZih0aGlzLl9jb25maWcuYnVja2V0cykge1xuICAgICAgaj10aGlzLm1pbjtcbiAgICAgIGw9TWF0aC5taW4odGhpcy5idWNrZXRzLmxlbmd0aCwgdGhpcy5fY29uZmlnLmJ1Y2tldHMubGVuZ3RoKTtcblxuICAgICAgZm9yKGk9MDsgaTxsOyBqPXRoaXMuX2NvbmZpZy5idWNrZXRzW2krK10pIHsgIC8vIHRoaXMgaGFzIHRvIGJlIGkrKyBhbmQgbm90ICsraVxuICAgICAgICBpZih0aGlzLl9jb25maWcuYnVja2V0c1tpXSA9PT0gdW5kZWZpbmVkICYmIHRoaXMuX2NvbmZpZy5idWNrZXRfZXh0ZW5zaW9uX2ludGVydmFsKVxuICAgICAgICAgIHRoaXMuX2NvbmZpZy5idWNrZXRzW2ldID0gdGhpcy5fY29uZmlnLmJ1Y2tldHNbaS0xXSArIHRoaXMuX2NvbmZpZy5idWNrZXRfZXh0ZW5zaW9uX2ludGVydmFsO1xuICAgICAgICBpZih0aGlzLm1pbiA+IHRoaXMuX2NvbmZpZy5idWNrZXRzW2ldKVxuICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIGRbaV0gPSB7XG4gICAgICAgICAgYnVja2V0OiAoait0aGlzLl9jb25maWcuYnVja2V0c1tpXSkvMixcbiAgICAgICAgICByYW5nZTogW2osIHRoaXMuX2NvbmZpZy5idWNrZXRzW2ldXSxcbiAgICAgICAgICBjb3VudDogKHRoaXMuYnVja2V0c1tpXT90aGlzLmJ1Y2tldHNbaV1bMF06MCksXG4gICAgICAgICAgdHVwbGU6IHRoaXMuYnVja2V0c1tpXT90aGlzLmJ1Y2tldHNbaV0uc2xpY2UoMSk6W11cbiAgICAgICAgfTtcblxuICAgICAgICBpZih0aGlzLm1heCA8IHRoaXMuX2NvbmZpZy5idWNrZXRzW2ldKVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYoaSA9PT0gbCAmJiB0aGlzLmJ1Y2tldHNbaV0pIHtcbiAgICAgICAgZFtpXSA9IHtcbiAgICAgICAgICBidWNrZXQ6IChqICsgdGhpcy5tYXgpLzIsXG4gICAgICAgICAgcmFuZ2U6IFtqLCB0aGlzLm1heF0sXG4gICAgICAgICAgY291bnQ6IHRoaXMuYnVja2V0c1tpXVswXSxcbiAgICAgICAgICB0dXBsZTogdGhpcy5idWNrZXRzW2ldP3RoaXMuYnVja2V0c1tpXS5zbGljZSgxKTpbXVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmKHRoaXMuX2NvbmZpZy5idWNrZXRfcHJlY2lzaW9uKSB7XG4gICAgICBpPU1hdGguZmxvb3IodGhpcy5taW4vdGhpcy5fY29uZmlnLmJ1Y2tldF9wcmVjaXNpb24pO1xuICAgICAgbD1NYXRoLmZsb29yKHRoaXMubWF4L3RoaXMuX2NvbmZpZy5idWNrZXRfcHJlY2lzaW9uKSsxO1xuICAgICAgZm9yKGo9MDsgaTxsICYmIGk8dGhpcy5idWNrZXRzLmxlbmd0aDsgaSsrLCBqKyspIHtcbiAgICAgICAgZFtqXSA9IHtcbiAgICAgICAgICBidWNrZXQ6IChpKzAuNSkqdGhpcy5fY29uZmlnLmJ1Y2tldF9wcmVjaXNpb24sXG4gICAgICAgICAgcmFuZ2U6IFtpKnRoaXMuX2NvbmZpZy5idWNrZXRfcHJlY2lzaW9uLCAoaSsxKSp0aGlzLl9jb25maWcuYnVja2V0X3ByZWNpc2lvbl0sXG4gICAgICAgICAgY291bnQ6IHRoaXMuYnVja2V0c1tpXT90aGlzLmJ1Y2tldHNbaV1bMF06MCxcbiAgICAgICAgICB0dXBsZTogdGhpcy5idWNrZXRzW2ldP3RoaXMuYnVja2V0c1tpXS5zbGljZSgxKTpbXVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkO1xuXG4gIH0sXG5cbiAgcGVyY2VudGlsZTogZnVuY3Rpb24ocCkge1xuICAgIGlmKHRoaXMubGVuZ3RoID09PSAwIHx8ICghdGhpcy5fY29uZmlnLnN0b3JlX2RhdGEgJiYgIXRoaXMuYnVja2V0cykpXG4gICAgICByZXR1cm4gTmFOO1xuXG4gICAgLy8gSWYgd2UgY29tZSBoZXJlLCB3ZSBlaXRoZXIgaGF2ZSBzb3J0ZWQgZGF0YSBvciBzb3J0ZWQgYnVja2V0c1xuXG4gICAgbGV0IHY7XG5cbiAgICBpZihwIDw9ICAwKVxuICAgICAgdj0wO1xuICAgIGVsc2UgaWYocCA9PT0gMjUpXG4gICAgICB2ID0gW01hdGguZmxvb3IoKHRoaXMubGVuZ3RoLTEpKjAuMjUpLCBNYXRoLmNlaWwoKHRoaXMubGVuZ3RoLTEpKjAuMjUpXTtcbiAgICBlbHNlIGlmKHAgPT09IDUwKVxuICAgICAgdiA9IFtNYXRoLmZsb29yKCh0aGlzLmxlbmd0aC0xKSowLjUpLCBNYXRoLmNlaWwoKHRoaXMubGVuZ3RoLTEpKjAuNSldO1xuICAgIGVsc2UgaWYocCA9PT0gNzUpXG4gICAgICB2ID0gW01hdGguZmxvb3IoKHRoaXMubGVuZ3RoLTEpKjAuNzUpLCBNYXRoLmNlaWwoKHRoaXMubGVuZ3RoLTEpKjAuNzUpXTtcbiAgICBlbHNlIGlmKHAgPj0gMTAwKVxuICAgICAgdiA9IHRoaXMubGVuZ3RoLTE7XG4gICAgZWxzZVxuICAgICAgdiA9IE1hdGguZmxvb3IodGhpcy5sZW5ndGgqcC8xMDApO1xuXG4gICAgaWYodiA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLm1pbjtcbiAgICBpZih2ID09PSB0aGlzLmxlbmd0aC0xKVxuICAgICAgcmV0dXJuIHRoaXMubWF4O1xuXG4gICAgaWYodGhpcy5fY29uZmlnLnN0b3JlX2RhdGEpIHtcbiAgICAgIGlmKHRoaXMuX2RhdGFfc29ydGVkID09PSBudWxsKVxuICAgICAgICB0aGlzLl9kYXRhX3NvcnRlZCA9IHRoaXMuZGF0YS5zbGljZSgwKS5zb3J0KGFzYyk7XG5cbiAgICAgIGlmKHR5cGVvZiB2ID09PSAnbnVtYmVyJylcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFfc29ydGVkW3ZdO1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gKHRoaXMuX2RhdGFfc29ydGVkW3ZbMF1dICsgdGhpcy5fZGF0YV9zb3J0ZWRbdlsxXV0pLzI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGV0IGo7XG4gICAgICBpZih0eXBlb2YgdiAhPT0gJ251bWJlcicpXG4gICAgICAgIHYgPSAodlswXSt2WzFdKS8yO1xuXG4gICAgICBpZih0aGlzLl9jb25maWcuYnVja2V0cylcbiAgICAgICAgaj0wO1xuICAgICAgZWxzZSBpZih0aGlzLl9jb25maWcuYnVja2V0X3ByZWNpc2lvbilcbiAgICAgICAgaiA9IE1hdGguZmxvb3IodGhpcy5taW4vdGhpcy5fY29uZmlnLmJ1Y2tldF9wcmVjaXNpb24pO1xuXG4gICAgICBmb3IoOyBqPHRoaXMuYnVja2V0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBpZighdGhpcy5idWNrZXRzW2pdKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBpZih2PD10aGlzLmJ1Y2tldHNbal1bMF0pIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2LT10aGlzLmJ1Y2tldHNbal1bMF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9nZXRfbnRoX2luX2J1Y2tldCh2LCBqKTtcbiAgICB9XG4gIH0sXG5cbiAgX2dldF9udGhfaW5fYnVja2V0OiBmdW5jdGlvbihuLCBiKSB7XG4gICAgbGV0IHJhbmdlID0gW107XG4gICAgaWYodGhpcy5fY29uZmlnLmJ1Y2tldHMpIHtcbiAgICAgIHJhbmdlWzBdID0gKGI+MD90aGlzLl9jb25maWcuYnVja2V0c1tiLTFdOnRoaXMubWluKTtcbiAgICAgIHJhbmdlWzFdID0gKGI8dGhpcy5fY29uZmlnLmJ1Y2tldHMubGVuZ3RoP3RoaXMuX2NvbmZpZy5idWNrZXRzW2JdOnRoaXMubWF4KTtcbiAgICB9XG4gICAgZWxzZSBpZih0aGlzLl9jb25maWcuYnVja2V0X3ByZWNpc2lvbikge1xuICAgICAgcmFuZ2VbMF0gPSBNYXRoLm1heChiKnRoaXMuX2NvbmZpZy5idWNrZXRfcHJlY2lzaW9uLCB0aGlzLm1pbik7XG4gICAgICByYW5nZVsxXSA9IE1hdGgubWluKChiKzEpKnRoaXMuX2NvbmZpZy5idWNrZXRfcHJlY2lzaW9uLCB0aGlzLm1heCk7XG4gICAgfVxuICAgIHJldHVybiByYW5nZVswXSArIChyYW5nZVsxXSAtIHJhbmdlWzBdKSpuL3RoaXMuYnVja2V0c1tiXVswXTtcbiAgfSxcblxuICBtZWRpYW46IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnBlcmNlbnRpbGUoNTApO1xuICB9LFxuXG4gIGlxcjogZnVuY3Rpb24oKSB7XG4gICAgbGV0IHExLCBxMywgZnc7XG5cbiAgICBxMSA9IHRoaXMucGVyY2VudGlsZSgyNSk7XG4gICAgcTMgPSB0aGlzLnBlcmNlbnRpbGUoNzUpO1xuXG4gICAgZncgPSAocTMtcTEpKjEuNTtcblxuICAgIHJldHVybiB0aGlzLmJhbmRfcGFzcyhxMS1mdywgcTMrZncsIHRydWUpO1xuICB9LFxuXG4gIGJhbmRfcGFzczogZnVuY3Rpb24obG93LCBoaWdoLCBvcGVuLCBjb25maWcpIHtcbiAgICBsZXQgaSwgaiwgYiwgYl92YWwsIGlfdmFsO1xuXG4gICAgaWYoIWNvbmZpZylcbiAgICAgIGNvbmZpZyA9IHRoaXMuX2NvbmZpZztcblxuICAgIGIgPSBuZXcgU3RhdHMoY29uZmlnKTtcblxuICAgIGlmKHRoaXMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuIGI7XG5cbiAgICBpZih0aGlzLl9jb25maWcuc3RvcmVfZGF0YSkge1xuICAgICAgaWYodGhpcy5fZGF0YV9zb3J0ZWQgPT09IG51bGwpXG4gICAgICAgIHRoaXMuX2RhdGFfc29ydGVkID0gdGhpcy5kYXRhLnNsaWNlKDApLnNvcnQoYXNjKTtcblxuICAgICAgZm9yKGk9MDsgaTx0aGlzLmxlbmd0aCAmJiAodGhpcy5fZGF0YV9zb3J0ZWRbaV0gPCBoaWdoIHx8ICghb3BlbiAmJiB0aGlzLl9kYXRhX3NvcnRlZFtpXSA9PT0gaGlnaCkpOyBpKyspIHtcbiAgICAgICAgaWYodGhpcy5fZGF0YV9zb3J0ZWRbaV0gPiBsb3cgfHwgKCFvcGVuICYmIHRoaXMuX2RhdGFfc29ydGVkW2ldID09PSBsb3cpKSB7XG4gICAgICAgICAgYi5wdXNoKHRoaXMuX2RhdGFfc29ydGVkW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmKHRoaXMuX2NvbmZpZy5idWNrZXRzKSB7XG4gICAgICBmb3IoaT0wOyBpPD10aGlzLl9jb25maWcuYnVja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZih0aGlzLl9jb25maWcuYnVja2V0c1tpXSA8IHRoaXMubWluKVxuICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIGJfdmFsID0gKGk9PT0wP3RoaXMubWluOnRoaXMuX2NvbmZpZy5idWNrZXRzW2ktMV0pO1xuICAgICAgICBpZihiX3ZhbCA8IHRoaXMubWluKVxuICAgICAgICAgIGJfdmFsID0gdGhpcy5taW47XG4gICAgICAgIGlmKGJfdmFsID4gdGhpcy5tYXgpXG4gICAgICAgICAgYl92YWwgPSB0aGlzLm1heDtcblxuICAgICAgICBpZihoaWdoIDwgYl92YWwgfHwgKG9wZW4gJiYgaGlnaCA9PT0gYl92YWwpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYobG93IDwgYl92YWwgfHwgKCFvcGVuICYmIGxvdyA9PT0gYl92YWwpKSB7XG4gICAgICAgICAgZm9yKGo9MDsgajwodGhpcy5idWNrZXRzW2ldP3RoaXMuYnVja2V0c1tpXVswXTowKTsgaisrKSB7XG4gICAgICAgICAgICBpX3ZhbCA9IFN0YXRzLnByb3RvdHlwZS5fZ2V0X250aF9pbl9idWNrZXQuY2FsbCh0aGlzLCBqLCBpKTtcbiAgICAgICAgICAgIGlmKCAoaV92YWwgPiBsb3cgfHwgKCFvcGVuICYmIGlfdmFsID09PSBsb3cpKVxuICAgICAgICAgICAgICAmJiAoaV92YWwgPCBoaWdoIHx8ICghb3BlbiAmJiBpX3ZhbCA9PT0gaGlnaCkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgYi5wdXNoKGlfdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYi5taW4gPSBNYXRoLm1heChsb3csIGIubWluKTtcbiAgICAgIGIubWF4ID0gTWF0aC5taW4oaGlnaCwgYi5tYXgpO1xuICAgIH1cbiAgICBlbHNlIGlmKHRoaXMuX2NvbmZpZy5idWNrZXRfcHJlY2lzaW9uKSB7XG4gICAgICBsZXQgbG93X2kgPSBNYXRoLmZsb29yKGxvdy90aGlzLl9jb25maWcuYnVja2V0X3ByZWNpc2lvbiksXG4gICAgICAgICAgaGlnaF9pID0gTWF0aC5mbG9vcihoaWdoL3RoaXMuX2NvbmZpZy5idWNrZXRfcHJlY2lzaW9uKSsxO1xuXG4gICAgICBmb3IoaT1sb3dfaTsgaTxNYXRoLm1pbih0aGlzLmJ1Y2tldHMubGVuZ3RoLCBoaWdoX2kpOyBpKyspIHtcbiAgICAgICAgZm9yKGo9MDsgajwodGhpcy5idWNrZXRzW2ldP3RoaXMuYnVja2V0c1tpXVswXTowKTsgaisrKSB7XG4gICAgICAgICAgaV92YWwgPSBTdGF0cy5wcm90b3R5cGUuX2dldF9udGhfaW5fYnVja2V0LmNhbGwodGhpcywgaiwgaSk7XG4gICAgICAgICAgaWYoIChpX3ZhbCA+IGxvdyB8fCAoIW9wZW4gJiYgaV92YWwgPT09IGxvdykpXG4gICAgICAgICAgICAmJiAoaV92YWwgPCBoaWdoIHx8ICghb3BlbiAmJiBpX3ZhbCA9PT0gaGlnaCkpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBiLnB1c2goaV92YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBiLm1pbiA9IE1hdGgubWF4KGxvdywgYi5taW4pO1xuICAgICAgYi5tYXggPSBNYXRoLm1pbihoaWdoLCBiLm1heCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGI7XG4gIH0sXG5cbiAgY29weTogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgbGV0IGIgPSBTdGF0cy5wcm90b3R5cGUuYmFuZF9wYXNzLmNhbGwodGhpcywgdGhpcy5taW4sIHRoaXMubWF4LCBmYWxzZSwgY29uZmlnKTtcblxuICAgIGIuc3VtID0gdGhpcy5zdW07XG4gICAgYi5zdW1fb2Zfc3F1YXJlcyA9IHRoaXMuc3VtX29mX3NxdWFyZXM7XG4gICAgYi5zdW1fb2ZfbG9ncyA9IHRoaXMuc3VtX29mX2xvZ3M7XG4gICAgYi5zdW1fb2Zfc3F1YXJlX29mX2xvZ3MgPSB0aGlzLnN1bV9vZl9zcXVhcmVfb2ZfbG9ncztcbiAgICBiLnplcm9lcyA9IHRoaXMuemVyb2VzO1xuXG4gICAgcmV0dXJuIGI7XG4gIH0sXG5cbiAgzqM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN1bTtcbiAgfSxcblxuICDOoDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuemVyb2VzID4gMCA/IDAgOiBNYXRoLmV4cCh0aGlzLnN1bV9vZl9sb2dzKTtcbiAgfVxufTtcblxuU3RhdHMucHJvdG90eXBlLs+DPVN0YXRzLnByb3RvdHlwZS5zdGRkZXY7XG5TdGF0cy5wcm90b3R5cGUuzrw9U3RhdHMucHJvdG90eXBlLmFtZWFuO1xuIl19