"use strict";
var support_1 = require("./support");
var object_1 = require("@glimmer/object");
QUnit.module('Mixin.concatenatedProperties');
QUnit.test('defining concatenated properties should concat future version', function () {
    var MixinA = object_1.Mixin.create({
        concatenatedProperties: ['foo'],
        foo: ['a', 'b', 'c']
    });
    var MixinB = object_1.Mixin.create({
        foo: ['d', 'e', 'f']
    });
    var obj = support_1.mixin({}, MixinA, MixinB);
    deepEqual(support_1.get(obj, 'foo'), ['a', 'b', 'c', 'd', 'e', 'f']);
});
QUnit.test('defining concatenated properties should concat future version', function () {
    var MixinA = object_1.Mixin.create({
        concatenatedProperties: null
    });
    var MixinB = object_1.Mixin.create({
        concatenatedProperties: null
    });
    var obj = support_1.mixin({}, MixinA, MixinB);
    deepEqual(obj.concatenatedProperties, []);
});
QUnit.test('concatenatedProperties should be concatenated', function () {
    var MixinA = object_1.Mixin.create({
        concatenatedProperties: ['foo'],
        foo: ['a', 'b', 'c']
    });
    var MixinB = object_1.Mixin.create({
        concatenatedProperties: 'bar',
        foo: ['d', 'e', 'f'],
        bar: [1, 2, 3]
    });
    var MixinC = object_1.Mixin.create({
        bar: [4, 5, 6]
    });
    var obj = support_1.mixin({}, MixinA, MixinB, MixinC);
    deepEqual(support_1.get(obj, 'concatenatedProperties'), ['foo', 'bar'], 'get concatenatedProperties');
    deepEqual(support_1.get(obj, 'foo'), ['a', 'b', 'c', 'd', 'e', 'f'], 'get foo');
    deepEqual(support_1.get(obj, 'bar'), [1, 2, 3, 4, 5, 6], 'get bar');
});
QUnit.test('adding a prop that is not an array should make array', function () {
    var MixinA = object_1.Mixin.create({
        concatenatedProperties: ['foo'],
        foo: [1, 2, 3]
    });
    var MixinB = object_1.Mixin.create({
        foo: 4
    });
    var obj = support_1.mixin({}, MixinA, MixinB);
    deepEqual(support_1.get(obj, 'foo'), [1, 2, 3, 4]);
});
QUnit.test('adding a prop that is not an array should make array', function () {
    var MixinA = object_1.Mixin.create({
        concatenatedProperties: ['foo'],
        foo: 'bar'
    });
    var obj = support_1.mixin({}, MixinA);
    deepEqual(support_1.get(obj, 'foo'), ['bar']);
});
QUnit.skip('adding a non-concatenable property that already has a defined value should result in an array with both values', function () {
    var mixinA = object_1.Mixin.create({
        foo: 1
    });
    var mixinB = object_1.Mixin.create({
        concatenatedProperties: ['foo'],
        foo: 2
    });
    var obj = support_1.mixin({}, mixinA, mixinB);
    deepEqual(support_1.get(obj, 'foo'), [1, 2]);
});
QUnit.skip('adding a concatenable property that already has a defined value should result in a concatenated value', function () {
    var mixinA = object_1.Mixin.create({
        foobar: 'foo'
    });
    var mixinB = object_1.Mixin.create({
        concatenatedProperties: ['foobar'],
        foobar: 'bar'
    });
    var obj = support_1.mixin({}, mixinA, mixinB);
    equal(support_1.get(obj, 'foobar'), 'foobar');
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW1iZXItbWV0YWwtY29uY2F0ZW5hdGVkLXByb3BlcnRpZXMtdGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkBnbGltbWVyL29iamVjdC90ZXN0cy9lbWJlci1tZXRhbC1jb25jYXRlbmF0ZWQtcHJvcGVydGllcy10ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxxQ0FBdUM7QUFDdkMsMENBQXdDO0FBRXhDLEtBQUssQ0FBQyxNQUFNLENBQUMsOEJBQThCLENBQUMsQ0FBQztBQUU3QyxLQUFLLENBQUMsSUFBSSxDQUFDLCtEQUErRCxFQUFFO0lBQzFFLElBQUksTUFBTSxHQUFHLGNBQUssQ0FBQyxNQUFNLENBQUM7UUFDeEIsc0JBQXNCLEVBQUUsQ0FBQyxLQUFLLENBQUM7UUFDL0IsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7S0FDckIsQ0FBQyxDQUFDO0lBRUgsSUFBSSxNQUFNLEdBQUcsY0FBSyxDQUFDLE1BQU0sQ0FBQztRQUN4QixHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztLQUNyQixDQUFDLENBQUM7SUFFSCxJQUFJLEdBQUcsR0FBRyxlQUFLLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNwQyxTQUFTLENBQUMsYUFBRyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM3RCxDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxJQUFJLENBQUMsK0RBQStELEVBQUU7SUFDMUUsSUFBSSxNQUFNLEdBQUcsY0FBSyxDQUFDLE1BQU0sQ0FBQztRQUN4QixzQkFBc0IsRUFBRSxJQUFJO0tBQzdCLENBQUMsQ0FBQztJQUVILElBQUksTUFBTSxHQUFHLGNBQUssQ0FBQyxN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IHsgTWl4aW4gfSBmcm9tICdAZ2xpbW1lci9vYmplY3QnO1xuXG5RVW5pdC5tb2R1bGUoJ01peGluLmNvbmNhdGVuYXRlZFByb3BlcnRpZXMnKTtcblxuUVVuaXQudGVzdCgnZGVmaW5pbmcgY29uY2F0ZW5hdGVkIHByb3BlcnRpZXMgc2hvdWxkIGNvbmNhdCBmdXR1cmUgdmVyc2lvbicsIGZ1bmN0aW9uKCkge1xuICBsZXQgTWl4aW5BID0gTWl4aW4uY3JlYXRlKHtcbiAgICBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOiBbJ2ZvbyddLFxuICAgIGZvbzogWydhJywgJ2InLCAnYyddXG4gIH0pO1xuXG4gIGxldCBNaXhpbkIgPSBNaXhpbi5jcmVhdGUoe1xuICAgIGZvbzogWydkJywgJ2UnLCAnZiddXG4gIH0pO1xuXG4gIGxldCBvYmogPSBtaXhpbih7fSwgTWl4aW5BLCBNaXhpbkIpO1xuICBkZWVwRXF1YWwoZ2V0KG9iaiwgJ2ZvbycpLCBbJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJ10pO1xufSk7XG5cblFVbml0LnRlc3QoJ2RlZmluaW5nIGNvbmNhdGVuYXRlZCBwcm9wZXJ0aWVzIHNob3VsZCBjb25jYXQgZnV0dXJlIHZlcnNpb24nLCBmdW5jdGlvbigpIHtcbiAgbGV0IE1peGluQSA9IE1peGluLmNyZWF0ZSh7XG4gICAgY29uY2F0ZW5hdGVkUHJvcGVydGllczogbnVsbFxuICB9KTtcblxuICBsZXQgTWl4aW5CID0gTWl4aW4uY3JlYXRlKHtcbiAgICBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOiBudWxsXG4gIH0pO1xuXG4gIGxldCBvYmogPSBtaXhpbih7fSwgTWl4aW5BLCBNaXhpbkIpO1xuXG4gIGRlZXBFcXVhbChvYmouY29uY2F0ZW5hdGVkUHJvcGVydGllcywgW10pO1xufSk7XG5cblFVbml0LnRlc3QoJ2NvbmNhdGVuYXRlZFByb3BlcnRpZXMgc2hvdWxkIGJlIGNvbmNhdGVuYXRlZCcsIGZ1bmN0aW9uKCkge1xuICBsZXQgTWl4aW5BID0gTWl4aW4uY3JlYXRlKHtcbiAgICBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOiBbJ2ZvbyddLFxuICAgIGZvbzogWydhJywgJ2InLCAnYyddXG4gIH0pO1xuXG4gIGxldCBNaXhpbkIgPSBNaXhpbi5jcmVhdGUoe1xuICAgIGNvbmNhdGVuYXRlZFByb3BlcnRpZXM6ICdiYXInLFxuICAgIGZvbzogWydkJywgJ2UnLCAnZiddLFxuICAgIGJhcjogWzEsIDIsIDNdXG4gIH0pO1xuXG4gIGxldCBNaXhpbkMgPSBNaXhpbi5jcmVhdGUoe1xuICAgIGJhcjogWzQsIDUsIDZdXG4gIH0pO1xuXG4gIGxldCBvYmogPSBtaXhpbih7fSwgTWl4aW5BLCBNaXhpbkIsIE1peGluQyk7XG4gIGRlZXBFcXVhbChnZXQob2JqLCAnY29uY2F0ZW5hdGVkUHJvcGVydGllcycpLCBbJ2ZvbycsICdiYXInXSwgJ2dldCBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzJyk7XG4gIGRlZXBFcXVhbChnZXQob2JqLCAnZm9vJyksIFsnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnXSwgJ2dldCBmb28nKTtcbiAgZGVlcEVxdWFsKGdldChvYmosICdiYXInKSwgWzEsIDIsIDMsIDQsIDUsIDZdLCAnZ2V0IGJhcicpO1xufSk7XG5cblFVbml0LnRlc3QoJ2FkZGluZyBhIHByb3AgdGhhdCBpcyBub3QgYW4gYXJyYXkgc2hvdWxkIG1ha2UgYXJyYXknLCBmdW5jdGlvbigpIHtcbiAgbGV0IE1peGluQSA9IE1peGluLmNyZWF0ZSh7XG4gICAgY29uY2F0ZW5hdGVkUHJvcGVydGllczogWydmb28nXSxcbiAgICBmb286IFsxLCAyLCAzXVxuICB9KTtcblxuICBsZXQgTWl4aW5CID0gTWl4aW4uY3JlYXRlKHtcbiAgICBmb286IDRcbiAgfSk7XG5cbiAgbGV0IG9iaiA9IG1peGluKHt9LCBNaXhpbkEsIE1peGluQik7XG4gIGRlZXBFcXVhbChnZXQob2JqLCAnZm9vJyksIFsxLCAyLCAzLCA0XSk7XG59KTtcblxuUVVuaXQudGVzdCgnYWRkaW5nIGEgcHJvcCB0aGF0IGlzIG5vdCBhbiBhcnJheSBzaG91bGQgbWFrZSBhcnJheScsIGZ1bmN0aW9uKCkge1xuICBsZXQgTWl4aW5BID0gTWl4aW4uY3JlYXRlKHtcbiAgICBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOiBbJ2ZvbyddLFxuICAgIGZvbzogJ2JhcidcbiAgfSk7XG5cbiAgbGV0IG9iaiA9IG1peGluKHt9LCBNaXhpbkEpO1xuICBkZWVwRXF1YWwoZ2V0KG9iaiwgJ2ZvbycpLCBbJ2JhciddKTtcbn0pO1xuXG5RVW5pdC5za2lwKCdhZGRpbmcgYSBub24tY29uY2F0ZW5hYmxlIHByb3BlcnR5IHRoYXQgYWxyZWFkeSBoYXMgYSBkZWZpbmVkIHZhbHVlIHNob3VsZCByZXN1bHQgaW4gYW4gYXJyYXkgd2l0aCBib3RoIHZhbHVlcycsIGZ1bmN0aW9uKCkge1xuICBsZXQgbWl4aW5BID0gTWl4aW4uY3JlYXRlKHtcbiAgICBmb286IDFcbiAgfSk7XG5cbiAgbGV0IG1peGluQiA9IE1peGluLmNyZWF0ZSh7XG4gICAgY29uY2F0ZW5hdGVkUHJvcGVydGllczogWydmb28nXSxcbiAgICBmb286IDJcbiAgfSk7XG5cbiAgbGV0IG9iaiA9IG1peGluKHt9LCBtaXhpbkEsIG1peGluQik7XG4gIGRlZXBFcXVhbChnZXQob2JqLCAnZm9vJyksIFsxLCAyXSk7XG59KTtcblxuUVVuaXQuc2tpcCgnYWRkaW5nIGEgY29uY2F0ZW5hYmxlIHByb3BlcnR5IHRoYXQgYWxyZWFkeSBoYXMgYSBkZWZpbmVkIHZhbHVlIHNob3VsZCByZXN1bHQgaW4gYSBjb25jYXRlbmF0ZWQgdmFsdWUnLCBmdW5jdGlvbigpIHtcbiAgbGV0IG1peGluQSA9IE1peGluLmNyZWF0ZSh7XG4gICAgZm9vYmFyOiAnZm9vJ1xuICB9KTtcblxuICBsZXQgbWl4aW5CID0gTWl4aW4uY3JlYXRlKHtcbiAgICBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOiBbJ2Zvb2JhciddLFxuICAgIGZvb2JhcjogJ2JhcidcbiAgfSk7XG5cbiAgbGV0IG9iaiA9IG1peGluKHt9LCBtaXhpbkEsIG1peGluQik7XG4gIGVxdWFsKGdldChvYmosICdmb29iYXInKSwgJ2Zvb2JhcicpO1xufSk7XG4iXX0=