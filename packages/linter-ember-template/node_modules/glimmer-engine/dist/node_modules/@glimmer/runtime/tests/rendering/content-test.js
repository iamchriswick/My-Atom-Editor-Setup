"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var test_helpers_1 = require("@glimmer/test-helpers");
var StaticContentTests = (function (_super) {
    __extends(StaticContentTests, _super);
    function StaticContentTests() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    StaticContentTests.prototype[_a = 'renders text'] = function () {
        this.render({});
        this.assertContent("Hello World!");
        this.assertStableRerender();
    };
    StaticContentTests.prototype[_b = 'renders static element'] = function () {
        this.render({});
        this.assertContent("<h1>Hello World!</h1>");
        this.assertStableRerender();
    };
    StaticContentTests.prototype[_c = 'renders custom elements'] = function () {
        this.render({});
        this.assertContent("<use-the-platform></use-the-platform>");
        this.assertStableRerender();
    };
    StaticContentTests.prototype[_d = 'renders static template'] = function () {
        this.render({});
        this.assertContent((_a = ["\n    <div class=\"world\">\n      <h1>Hello World!</h1>\n      <p>This is just a paragraph</p>\n      <a href=\"http://linkedin.com\">Some Link</a>\n    </div>\n    "], _a.raw = ["\n    <div class=\"world\">\n      <h1>Hello World!</h1>\n      <p>This is just a paragraph</p>\n      <a href=\"http://linkedin.com\">Some Link</a>\n    </div>\n    "], test_helpers_1.strip(_a)));
        this.assertStableRerender();
        var _a;
    };
    return StaticContentTests;
}(test_helpers_1.RenderingTest));
__decorate([
    test_helpers_1.template("Hello World!")
], StaticContentTests.prototype, _a, null);
__decorate([
    test_helpers_1.template("<h1>Hello World!</h1>")
], StaticContentTests.prototype, _b, null);
__decorate([
    test_helpers_1.template("<use-the-platform />")
], StaticContentTests.prototype, _c, null);
__decorate([
    test_helpers_1.template((_a = ["\n    <div class=\"world\">\n      <h1>Hello World!</h1>\n      <p>This is just a paragraph</p>\n      <a href=\"http://linkedin.com\">Some Link</a>\n    </div>\n  "], _a.raw = ["\n    <div class=\"world\">\n      <h1>Hello World!</h1>\n      <p>This is just a paragraph</p>\n      <a href=\"http://linkedin.com\">Some Link</a>\n    </div>\n  "], test_helpers_1.strip(_a)))
], StaticContentTests.prototype, _d, null);
StaticContentTests = __decorate([
    test_helpers_1.testModule('Static Content Tests')
], StaticContentTests);
var DynamicContentTests = (function (_super) {
    __extends(DynamicContentTests, _super);
    function DynamicContentTests() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DynamicContentTests.prototype[_a = 'renders simple curly'] = function (assert) {
        var _this = this;
        this.render({ value: 'hello world' });
        this.assertContent('<div><p>hello world</p></div>');
        this.assertStableRerender();
        this.runTask(function () { return _this.context.set('value', "goodbye world"); });
        this.assertContent('<div><p>goodbye world</p></div>');
        this.assertInvariants();
        this.runTask(function () { return _this.context.update({ value: 'hello world' }); });
        this.assertContent('<div><p>hello world</p></div>');
        this.assertInvariants();
    };
    DynamicContentTests.prototype[_b = 'renders simple curly with sibling'] = function (assert) {
        var _this = this;
        this.render({ value: 'hello' });
        this.assertContent('<div><p>hello world</p></div>');
        this.assertStableRerender();
        this.runTask(function () { return _this.context.set('value', "goodbye"); });
        this.assertContent('<div><p>goodbye world</p></div>');
        this.assertInvariants();
        this.runTask(function () { return _this.context.update({ value: 'hello' }); });
        this.assertContent('<div><p>hello world</p></div>');
        this.assertInvariants();
    };
    DynamicContentTests.prototype[_c = 'null and undefined produces empty text nodes'] = function (assert) {
        var _this = this;
        this.render({ v1: null, v2: undefined });
        this.assertContent('<div><p></p><p></p></div>');
        this.assertStableRerender();
        this.runTask(function () {
            _this.context.set('v1', "hello");
            _this.context.set('v2', "world");
        });
        this.assertContent('<div><p>hello</p><p>world</p></div>');
        this.assertInvariants();
        this.runTask(function () {
            _this.context.update({ v1: null, v2: undefined });
        });
        this.assertContent('<div><p></p><p></p></div>');
        this.assertInvariants();
    };
    DynamicContentTests.prototype[_d = 'renders path expression'] = function () {
        var _this = this;
        this.render({ foo: { bar: { baz: 'Hello World' } } });
        this.assertStableRerender();
        this.assertContent('<div>Hello World</div>');
        this.runTask(function () { return _this.context.set('foo', { bar: { baz: 'WOOT' } }); });
        this.assertContent('<div>WOOT</div>');
        this.runTask(function () { return _this.context.set('foo', { bar: { baz: 'Hello World' } }); });
        this.assertContent('<div>Hello World</div>');
    };
    DynamicContentTests.prototype[_e = 'updating a single trusting curly'] = function () {
        var _this = this;
        this.render({ value: '<p>hello world</p>' });
        this.assertStableRerender();
        this.assertContent('<div><p>hello world</p></div>');
        this.runTask(function () { return _this.context.set('value', '<h1>WORD</h1>'); });
        this.assertContent('<div><h1>WORD</h1></div>');
        this.runTask(function () { return _this.context.update({ value: '<p>hello world</p>' }); });
        this.assertContent('<div><p>hello world</p></div>');
    };
    return DynamicContentTests;
}(test_helpers_1.RenderingTest));
__decorate([
    test_helpers_1.template("<div><p>{{value}}</p></div>")
], DynamicContentTests.prototype, _a, null);
__decorate([
    test_helpers_1.template("<div><p>{{value}} world</p></div>")
], DynamicContentTests.prototype, _b, null);
__decorate([
    test_helpers_1.template("<div><p>{{v1}}</p><p>{{v2}}</p></div>")
], DynamicContentTests.prototype, _c, null);
__decorate([
    test_helpers_1.template("<div>{{foo.bar.baz}}</div>")
], DynamicContentTests.prototype, _d, null);
__decorate([
    test_helpers_1.template("<div>{{{value}}}</div>")
], DynamicContentTests.prototype, _e, null);
DynamicContentTests = __decorate([
    test_helpers_1.testModule('Content Tests')
], DynamicContentTests);
var _a, _b, _c, _d, _a, _b, _c, _d, _e;
var _a;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC10ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQGdsaW1tZXIvcnVudGltZS90ZXN0cy9yZW5kZXJpbmcvY29udGVudC10ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLHNEQU0rQjtBQUcvQixJQUFNLGtCQUFrQjtJQUFTLHNDQUFhO0lBQTlDOztJQXdDQSxDQUFDO0lBdENDLGtDQUFDLGNBQWMsQ0FBQyxHQUFoQjtRQUNFLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBR0Qsa0NBQUMsd0JBQXdCLENBQUMsR0FBMUI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxhQUFhLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUM1QyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBR0Qsa0NBQUMseUJBQXlCLENBQUMsR0FBM0I7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxhQUFhLENBQUMsdUNBQXVDLENBQUMsQ0FBQztRQUM1RCxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBU0Qsa0NBQUMseUJBQXlCLENBQUMsR0FBM0I7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxhQUFhLDZMQUFNLHdLQU12QixHQU5rQixvQkFBSyxNQU10QixDQUFDO1FBQ0gsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7O0lBQzlCLENBQUM7SUFDSCx5QkFBQztBQUFELENBQUMsQUF4Q0QsQ0FBaUMsNEJBQWEsR0F3QzdDO0FBdENDO0lB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Qy9DLENBQUM7SUFHRCxtQ0FBQyxrQ0FBa0MsQ0FBQyxHQUFwQztRQURBLGlCQWVDO1FBYkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxvQkFBb0IsRUFBRSxDQUFDLENBQUM7UUFFN0MsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFFNUIsSUFBSSxDQUFDLGFBQWEsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1FBRXBELElBQUksQ0FBQyxPQUFPLENBQUMsY0FBTSxPQUFBLEtBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxlQUFlLENBQUUsRUFBM0MsQ0FBMkMsQ0FBQyxDQUFDO1FBRWhFLElBQUksQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUUvQyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQU0sT0FBQSxLQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxvQkFBb0IsRUFBRSxDQUFDLEVBQXBELENBQW9ELENBQUMsQ0FBQztRQUV6RSxJQUFJLENBQUMsYUFBYSxDQUFDLCtCQUErQixDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUNILDBCQUFDO0FBQUQsQ0FBQyxBQXRGRCxDQUFrQyw0QkFBYSxHQXNGOUM7QUFsRkM7SUFEQyx1QkFBUSxDQUFDLDZCQUE2QixDQUFDOzJDQWF2QztBQUdEO0lBREMsdUJBQVEsQ0FBQyxtQ0FBbUMsQ0FBQzsyQ0FhN0M7QUFHRDtJQURDLHVCQUFRLENBQUMsdUNBQXVDLENBQUM7MkNBa0JqRDtBQUdEO0lBREMsdUJBQVEsQ0FBQyw0QkFBNEIsQ0FBQzsyQ0FldEM7QUFHRDtJQURDLHVCQUFRLENBQUMsd0JBQXdCLENBQUM7MkNBZWxDO0FBckZHLG1CQUFtQjtJQUR4Qix5QkFBVSxDQUFDLGVBQWUsQ0FBQztHQUN0QixtQkFBbUIsQ0FzRnhCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgVmVyc2lvbmVkT2JqZWN0LFxuICBzdHJpcCxcbiAgdGVtcGxhdGUsXG4gIHRlc3RNb2R1bGUsXG4gIFJlbmRlcmluZ1Rlc3Rcbn0gZnJvbSBcIkBnbGltbWVyL3Rlc3QtaGVscGVyc1wiO1xuXG5AdGVzdE1vZHVsZSgnU3RhdGljIENvbnRlbnQgVGVzdHMnKVxuY2xhc3MgU3RhdGljQ29udGVudFRlc3RzIGV4dGVuZHMgUmVuZGVyaW5nVGVzdCB7XG4gIEB0ZW1wbGF0ZShgSGVsbG8gV29ybGQhYClcbiAgWydyZW5kZXJzIHRleHQnXSgpIHtcbiAgICB0aGlzLnJlbmRlcih7fSk7XG4gICAgdGhpcy5hc3NlcnRDb250ZW50KGBIZWxsbyBXb3JsZCFgKTtcbiAgICB0aGlzLmFzc2VydFN0YWJsZVJlcmVuZGVyKCk7XG4gIH1cblxuICBAdGVtcGxhdGUoYDxoMT5IZWxsbyBXb3JsZCE8L2gxPmApXG4gIFsncmVuZGVycyBzdGF0aWMgZWxlbWVudCddKCkge1xuICAgIHRoaXMucmVuZGVyKHt9KTtcbiAgICB0aGlzLmFzc2VydENvbnRlbnQoYDxoMT5IZWxsbyBXb3JsZCE8L2gxPmApO1xuICAgIHRoaXMuYXNzZXJ0U3RhYmxlUmVyZW5kZXIoKTtcbiAgfVxuXG4gIEB0ZW1wbGF0ZShgPHVzZS10aGUtcGxhdGZvcm0gLz5gKVxuICBbJ3JlbmRlcnMgY3VzdG9tIGVsZW1lbnRzJ10oKSB7XG4gICAgdGhpcy5yZW5kZXIoe30pO1xuICAgIHRoaXMuYXNzZXJ0Q29udGVudChgPHVzZS10aGUtcGxhdGZvcm0+PC91c2UtdGhlLXBsYXRmb3JtPmApO1xuICAgIHRoaXMuYXNzZXJ0U3RhYmxlUmVyZW5kZXIoKTtcbiAgfVxuXG4gIEB0ZW1wbGF0ZShzdHJpcGBcbiAgICA8ZGl2IGNsYXNzPVwid29ybGRcIj5cbiAgICAgIDxoMT5IZWxsbyBXb3JsZCE8L2gxPlxuICAgICAgPHA+VGhpcyBpcyBqdXN0IGEgcGFyYWdyYXBoPC9wPlxuICAgICAgPGEgaHJlZj1cImh0dHA6Ly9saW5rZWRpbi5jb21cIj5Tb21lIExpbms8L2E+XG4gICAgPC9kaXY+XG4gIGApXG4gIFsncmVuZGVycyBzdGF0aWMgdGVtcGxhdGUnXSgpIHtcbiAgICB0aGlzLnJlbmRlcih7fSk7XG4gICAgdGhpcy5hc3NlcnRDb250ZW50KHN0cmlwYFxuICAgIDxkaXYgY2xhc3M9XCJ3b3JsZFwiPlxuICAgICAgPGgxPkhlbGxvIFdvcmxkITwvaDE+XG4gICAgICA8cD5UaGlzIGlzIGp1c3QgYSBwYXJhZ3JhcGg8L3A+XG4gICAgICA8YSBocmVmPVwiaHR0cDovL2xpbmtlZGluLmNvbVwiPlNvbWUgTGluazwvYT5cbiAgICA8L2Rpdj5cbiAgICBgKTtcbiAgICB0aGlzLmFzc2VydFN0YWJsZVJlcmVuZGVyKCk7XG4gIH1cbn1cblxuQHRlc3RNb2R1bGUoJ0NvbnRlbnQgVGVzdHMnKVxuY2xhc3MgRHluYW1pY0NvbnRlbnRUZXN0cyBleHRlbmRzIFJlbmRlcmluZ1Rlc3Qge1xuICBwcm90ZWN0ZWQgY29udGV4dDogVmVyc2lvbmVkT2JqZWN0O1xuXG4gIEB0ZW1wbGF0ZShgPGRpdj48cD57e3ZhbHVlfX08L3A+PC9kaXY+YClcbiAgWydyZW5kZXJzIHNpbXBsZSBjdXJseSddKGFzc2VydCkge1xuICAgIHRoaXMucmVuZGVyKHsgdmFsdWU6ICdoZWxsbyB3b3JsZCcgfSk7XG4gICAgdGhpcy5hc3NlcnRDb250ZW50KCc8ZGl2PjxwPmhlbGxvIHdvcmxkPC9wPjwvZGl2PicpO1xuICAgIHRoaXMuYXNzZXJ0U3RhYmxlUmVyZW5kZXIoKTtcblxuICAgIHRoaXMucnVuVGFzaygoKSA9PiB0aGlzLmNvbnRleHQuc2V0KCd2YWx1ZScsIFwiZ29vZGJ5ZSB3b3JsZFwiKSk7XG4gICAgdGhpcy5hc3NlcnRDb250ZW50KCc8ZGl2PjxwPmdvb2RieWUgd29ybGQ8L3A+PC9kaXY+Jyk7XG4gICAgdGhpcy5hc3NlcnRJbnZhcmlhbnRzKCk7XG5cbiAgICB0aGlzLnJ1blRhc2soKCkgPT4gdGhpcy5jb250ZXh0LnVwZGF0ZSh7IHZhbHVlOiAnaGVsbG8gd29ybGQnfSkpO1xuICAgIHRoaXMuYXNzZXJ0Q29udGVudCgnPGRpdj48cD5oZWxsbyB3b3JsZDwvcD48L2Rpdj4nKTtcbiAgICB0aGlzLmFzc2VydEludmFyaWFudHMoKTtcbiAgfVxuXG4gIEB0ZW1wbGF0ZShgPGRpdj48cD57e3ZhbHVlfX0gd29ybGQ8L3A+PC9kaXY+YClcbiAgWydyZW5kZXJzIHNpbXBsZSBjdXJseSB3aXRoIHNpYmxpbmcnXShhc3NlcnQpIHtcbiAgICB0aGlzLnJlbmRlcih7IHZhbHVlOiAnaGVsbG8nIH0pO1xuICAgIHRoaXMuYXNzZXJ0Q29udGVudCgnPGRpdj48cD5oZWxsbyB3b3JsZDwvcD48L2Rpdj4nKTtcbiAgICB0aGlzLmFzc2VydFN0YWJsZVJlcmVuZGVyKCk7XG5cbiAgICB0aGlzLnJ1blRhc2soKCkgPT4gdGhpcy5jb250ZXh0LnNldCgndmFsdWUnLCBcImdvb2RieWVcIikpO1xuICAgIHRoaXMuYXNzZXJ0Q29udGVudCgnPGRpdj48cD5nb29kYnllIHdvcmxkPC9wPjwvZGl2PicpO1xuICAgIHRoaXMuYXNzZXJ0SW52YXJpYW50cygpO1xuXG4gICAgdGhpcy5ydW5UYXNrKCgpID0+IHRoaXMuY29udGV4dC51cGRhdGUoeyB2YWx1ZTogJ2hlbGxvJyB9KSk7XG4gICAgdGhpcy5hc3NlcnRDb250ZW50KCc8ZGl2PjxwPmhlbGxvIHdvcmxkPC9wPjwvZGl2PicpO1xuICAgIHRoaXMuYXNzZXJ0SW52YXJpYW50cygpO1xuICB9XG5cbiAgQHRlbXBsYXRlKGA8ZGl2PjxwPnt7djF9fTwvcD48cD57e3YyfX08L3A+PC9kaXY+YClcbiAgWydudWxsIGFuZCB1bmRlZmluZWQgcHJvZHVjZXMgZW1wdHkgdGV4dCBub2RlcyddKGFzc2VydCkge1xuICAgIHRoaXMucmVuZGVyKHsgdjE6IG51bGwsIHYyOiB1bmRlZmluZWQgfSk7XG4gICAgdGhpcy5hc3NlcnRDb250ZW50KCc8ZGl2PjxwPjwvcD48cD48L3A+PC9kaXY+Jyk7XG4gICAgdGhpcy5hc3NlcnRTdGFibGVSZXJlbmRlcigpO1xuXG4gICAgdGhpcy5ydW5UYXNrKCgpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC5zZXQoJ3YxJywgXCJoZWxsb1wiKTtcbiAgICAgIHRoaXMuY29udGV4dC5zZXQoJ3YyJywgXCJ3b3JsZFwiKTtcbiAgICB9KTtcbiAgICB0aGlzLmFzc2VydENvbnRlbnQoJzxkaXY+PHA+aGVsbG88L3A+PHA+d29ybGQ8L3A+PC9kaXY+Jyk7XG4gICAgdGhpcy5hc3NlcnRJbnZhcmlhbnRzKCk7XG5cbiAgICB0aGlzLnJ1blRhc2soKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0LnVwZGF0ZSh7IHYxOiBudWxsLCB2MjogdW5kZWZpbmVkIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuYXNzZXJ0Q29udGVudCgnPGRpdj48cD48L3A+PHA+PC9wPjwvZGl2PicpO1xuICAgIHRoaXMuYXNzZXJ0SW52YXJpYW50cygpO1xuICB9XG5cbiAgQHRlbXBsYXRlKGA8ZGl2Pnt7Zm9vLmJhci5iYXp9fTwvZGl2PmApXG4gIFsncmVuZGVycyBwYXRoIGV4cHJlc3Npb24nXSgpIHtcbiAgICB0aGlzLnJlbmRlcih7IGZvbzogeyBiYXI6IHsgYmF6OiAnSGVsbG8gV29ybGQnfSB9IH0pO1xuXG4gICAgdGhpcy5hc3NlcnRTdGFibGVSZXJlbmRlcigpO1xuXG4gICAgdGhpcy5hc3NlcnRDb250ZW50KCc8ZGl2PkhlbGxvIFdvcmxkPC9kaXY+Jyk7XG5cbiAgICB0aGlzLnJ1blRhc2soKCkgPT4gdGhpcy5jb250ZXh0LnNldCgnZm9vJywgeyBiYXI6IHsgYmF6OiAnV09PVCcgfSB9KSk7XG5cbiAgICB0aGlzLmFzc2VydENvbnRlbnQoJzxkaXY+V09PVDwvZGl2PicpO1xuXG4gICAgdGhpcy5ydW5UYXNrKCgpID0+IHRoaXMuY29udGV4dC5zZXQoJ2ZvbycsIHsgYmFyOiB7IGJhejogJ0hlbGxvIFdvcmxkJyB9IH0pKTtcblxuICAgIHRoaXMuYXNzZXJ0Q29udGVudCgnPGRpdj5IZWxsbyBXb3JsZDwvZGl2PicpO1xuICB9XG5cbiAgQHRlbXBsYXRlKGA8ZGl2Pnt7e3ZhbHVlfX19PC9kaXY+YClcbiAgWyd1cGRhdGluZyBhIHNpbmdsZSB0cnVzdGluZyBjdXJseSddKCkge1xuICAgIHRoaXMucmVuZGVyKHsgdmFsdWU6ICc8cD5oZWxsbyB3b3JsZDwvcD4nIH0pO1xuXG4gICAgdGhpcy5hc3NlcnRTdGFibGVSZXJlbmRlcigpO1xuXG4gICAgdGhpcy5hc3NlcnRDb250ZW50KCc8ZGl2PjxwPmhlbGxvIHdvcmxkPC9wPjwvZGl2PicpO1xuXG4gICAgdGhpcy5ydW5UYXNrKCgpID0+IHRoaXMuY29udGV4dC5zZXQoJ3ZhbHVlJywgJzxoMT5XT1JEPC9oMT4nICkpO1xuXG4gICAgdGhpcy5hc3NlcnRDb250ZW50KCc8ZGl2PjxoMT5XT1JEPC9oMT48L2Rpdj4nKTtcblxuICAgIHRoaXMucnVuVGFzaygoKSA9PiB0aGlzLmNvbnRleHQudXBkYXRlKHsgdmFsdWU6ICc8cD5oZWxsbyB3b3JsZDwvcD4nIH0pKTtcblxuICAgIHRoaXMuYXNzZXJ0Q29udGVudCgnPGRpdj48cD5oZWxsbyB3b3JsZDwvcD48L2Rpdj4nKTtcbiAgfVxufVxuIl19