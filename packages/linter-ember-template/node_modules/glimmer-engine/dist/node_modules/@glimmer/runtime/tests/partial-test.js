"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var test_helpers_1 = require("@glimmer/test-helpers");
var object_reference_1 = require("@glimmer/object-reference");
var env, root, result, self;
function rootElement() {
    return env.getDOM().createElement('div');
}
function compile(template) {
    return env.compile(template);
}
function commonSetup() {
    env = new test_helpers_1.TestEnvironment(); // TODO: Support SimpleDOM
    root = rootElement();
}
function render(template, context) {
    if (context === void 0) { context = {}; }
    self = new object_reference_1.UpdatableReference(context);
    env.begin();
    result = template.render(self, root, new test_helpers_1.TestDynamicScope());
    env.commit();
    assertInvariants(result);
    return result;
}
function rerender(context, params) {
    if (context === void 0) { context = null; }
    if (params === void 0) { params = { assertStable: false }; }
    var snapshot;
    if (params.assertStable) {
        snapshot = test_helpers_1.generateSnapshot(root);
    }
    if (context !== null)
        self.update(context);
    env.begin();
    result.rerender();
    env.commit();
    if (params.assertStable) {
        test_helpers_1.equalSnapshots(test_helpers_1.generateSnapshot(root), snapshot);
    }
}
function assertInvariants(result) {
    strictEqual(result.firstNode(), root.firstChild, "The firstNode of the result is the same as the root's firstChild");
    strictEqual(result.lastNode(), root.lastChild, "The lastNode of the result is the same as the root's lastChild");
}
QUnit.module("Partials", {
    setup: commonSetup
});
QUnit.test('static partial with static content', function (assert) {
    var template = compile("Before {{partial 'test'}} After");
    env.registerPartial('test', "<div>Testing</div>");
    render(template);
    test_helpers_1.equalTokens(root, "Before <div>Testing</div> After");
    rerender(null, { assertStable: true });
    test_helpers_1.equalTokens(root, "Before <div>Testing</div> After");
});
QUnit.test('static partial with self reference', function (assert) {
    var template = compile("{{partial 'birdman'}}");
    env.registerPartial('birdman', "Respeck my {{item}}. When my {{item}} come up put some respeck on it.");
    render(template, { item: 'name' });
    rerender(null, { assertStable: true });
    test_helpers_1.equalTokens(root, "Respeck my name. When my name come up put some respeck on it.");
    rerender({ item: 'name' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "Respeck my name. When my name come up put some respeck on it.");
});
QUnit.test('static partial with local reference', function (assert) {
    var template = compile("{{#each qualities key='id' as |quality|}}{{partial 'test'}}. {{/each}}");
    env.registerPartial('test', "You {{quality.value}}");
    render(template, { qualities: [{ id: 1, value: 'smaht' }, { id: 2, value: 'loyal' }] });
    rerender(null, { assertStable: true });
    test_helpers_1.equalTokens(root, "You smaht. You loyal. ");
    rerender({ qualities: [{ id: 1, value: 'smaht' }, { id: 2, value: 'loyal' }] }, { assertStable: true });
    test_helpers_1.equalTokens(root, "You smaht. You loyal. ");
});
QUnit.test('static partial with named arguments', function (assert) {
    env.registerBasicComponent('foo-bar', test_helpers_1.BasicComponent, "<p>{{@foo}}-{{partial 'test'}}</p>");
    var template = compile("<foo-bar @foo={{foo}} @bar={{bar}} />");
    env.registerPartial('test', "{{@foo}}-{{@bar}}");
    render(template, { foo: 'foo', bar: 'bar' });
    test_helpers_1.equalTokens(root, "<p>foo-foo-bar</p>");
    rerender(null, { assertStable: true });
    rerender({ foo: 'FOO', bar: 'BAR' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "<p>FOO-FOO-BAR</p>");
    rerender({ foo: 'foo', bar: 'bar' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "<p>foo-foo-bar</p>");
});
QUnit.test('static partial with has-block in basic component', function (assert) {
    env.registerBasicComponent('foo-bar', test_helpers_1.BasicComponent, "<p>{{partial 'test'}}</p>");
    env.registerBasicComponent('foo-bar-baz', test_helpers_1.BasicComponent, "<p>{{partial 'test'}}-{{has-block}}-{{has-block 'inverse'}}</p>");
    env.registerPartial('test', "{{has-block}}-{{has-block 'inverse'}}");
    render(compile((_a = ["\n    <foo-bar>a block</foo-bar>\n    <foo-bar />\n    <foo-bar-baz>a block</foo-bar-baz>\n    <foo-bar-baz />\n  "], _a.raw = ["\n    <foo-bar>a block</foo-bar>\n    <foo-bar />\n    <foo-bar-baz>a block</foo-bar-baz>\n    <foo-bar-baz />\n  "], test_helpers_1.strip(_a))));
    test_helpers_1.equalTokens(root, (_b = ["\n    <p>true-false</p>\n    <p>true-false</p>\n    <p>true-false-true-false</p>\n    <p>true-false-true-false</p>\n  "], _b.raw = ["\n    <p>true-false</p>\n    <p>true-false</p>\n    <p>true-false-true-false</p>\n    <p>true-false-true-false</p>\n  "], test_helpers_1.strip(_b)));
    rerender(null, { assertStable: true });
    var _a, _b;
});
QUnit.test('static partial with has-block in curly component', function (assert) {
    var TaglessComponent = (function (_super) {
        __extends(TaglessComponent, _super);
        function TaglessComponent() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.tagName = '';
            return _this;
        }
        return TaglessComponent;
    }(test_helpers_1.EmberishCurlyComponent));
    env.registerEmberishCurlyComponent('foo-bar', TaglessComponent, "<p>{{partial 'test'}}</p>");
    env.registerEmberishCurlyComponent('foo-bar-baz', TaglessComponent, "<p>{{partial 'test'}}-{{has-block}}-{{has-block 'inverse'}}</p>");
    env.registerPartial('test', "{{has-block}}-{{has-block 'inverse'}}");
    render(compile((_a = ["\n    {{#foo-bar}}a block{{/foo-bar}}\n    {{#foo-bar}}a block{{else}}inverse{{/foo-bar}}\n    {{foo-bar}}\n    {{#foo-bar-baz}}a block{{/foo-bar-baz}}\n    {{#foo-bar-baz}}a block{{else}}inverse{{/foo-bar-baz}}\n    {{foo-bar-baz}}\n  "], _a.raw = ["\n    {{#foo-bar}}a block{{/foo-bar}}\n    {{#foo-bar}}a block{{else}}inverse{{/foo-bar}}\n    {{foo-bar}}\n    {{#foo-bar-baz}}a block{{/foo-bar-baz}}\n    {{#foo-bar-baz}}a block{{else}}inverse{{/foo-bar-baz}}\n    {{foo-bar-baz}}\n  "], test_helpers_1.strip(_a))));
    test_helpers_1.equalTokens(root, (_b = ["\n    <p>true-false</p>\n    <p>true-true</p>\n    <p>false-false</p>\n    <p>true-false-true-false</p>\n    <p>true-true-true-true</p>\n    <p>false-false-false-false</p>\n  "], _b.raw = ["\n    <p>true-false</p>\n    <p>true-true</p>\n    <p>false-false</p>\n    <p>true-false-true-false</p>\n    <p>true-true-true-true</p>\n    <p>false-false-false-false</p>\n  "], test_helpers_1.strip(_b)));
    rerender(null, { assertStable: true });
    var _a, _b;
});
QUnit.test('static partial with has-block-params in basic component', function (assert) {
    env.registerBasicComponent('foo-bar', test_helpers_1.BasicComponent, "<p>{{partial 'test'}}</p>");
    env.registerBasicComponent('foo-bar-baz', test_helpers_1.BasicComponent, "<p>{{partial 'test'}}-{{has-block-params}}-{{has-block-params \"inverse\"}}</p>");
    env.registerPartial('test', "{{has-block-params}}-{{has-block-params \"inverse\"}}");
    render(compile((_a = ["\n    <foo-bar as |x|>a block</foo-bar>\n    <foo-bar>a block</foo-bar>\n    <foo-bar />\n    <foo-bar-baz as |x|>a block</foo-bar-baz>\n    <foo-bar-baz>a block</foo-bar-baz>\n    <foo-bar-baz />\n  "], _a.raw = ["\n    <foo-bar as |x|>a block</foo-bar>\n    <foo-bar>a block</foo-bar>\n    <foo-bar />\n    <foo-bar-baz as |x|>a block</foo-bar-baz>\n    <foo-bar-baz>a block</foo-bar-baz>\n    <foo-bar-baz />\n  "], test_helpers_1.strip(_a))));
    test_helpers_1.equalTokens(root, (_b = ["\n    <p>true-false</p>\n    <p>false-false</p>\n    <p>false-false</p>\n    <p>true-false-true-false</p>\n    <p>false-false-false-false</p>\n    <p>false-false-false-false</p>\n  "], _b.raw = ["\n    <p>true-false</p>\n    <p>false-false</p>\n    <p>false-false</p>\n    <p>true-false-true-false</p>\n    <p>false-false-false-false</p>\n    <p>false-false-false-false</p>\n  "], test_helpers_1.strip(_b)));
    rerender(null, { assertStable: true });
    var _a, _b;
});
QUnit.test('static partial with has-block-params in curly component', function (assert) {
    var TaglessComponent = (function (_super) {
        __extends(TaglessComponent, _super);
        function TaglessComponent() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.tagName = '';
            return _this;
        }
        return TaglessComponent;
    }(test_helpers_1.EmberishCurlyComponent));
    env.registerEmberishCurlyComponent('foo-bar', TaglessComponent, "<p>{{partial 'test'}}</p>");
    env.registerEmberishCurlyComponent('foo-bar-baz', TaglessComponent, "<p>{{partial 'test'}}-{{has-block-params}}-{{has-block-params \"inverse\"}}</p>");
    env.registerPartial('test', "{{has-block-params}}-{{has-block-params \"inverse\"}}");
    render(compile((_a = ["\n    {{#foo-bar as |x|}}a block{{/foo-bar}}\n    {{#foo-bar}}a block{{else}}inverse{{/foo-bar}}\n    {{#foo-bar}}a block{{/foo-bar}}\n    {{foo-bar}}\n    {{#foo-bar-baz as |x|}}a block{{/foo-bar-baz}}\n    {{#foo-bar-baz}}a block{{else}}inverse{{/foo-bar-baz}}\n    {{#foo-bar-baz}}a block{{/foo-bar-baz}}\n    {{foo-bar-baz}}\n  "], _a.raw = ["\n    {{#foo-bar as |x|}}a block{{/foo-bar}}\n    {{#foo-bar}}a block{{else}}inverse{{/foo-bar}}\n    {{#foo-bar}}a block{{/foo-bar}}\n    {{foo-bar}}\n    {{#foo-bar-baz as |x|}}a block{{/foo-bar-baz}}\n    {{#foo-bar-baz}}a block{{else}}inverse{{/foo-bar-baz}}\n    {{#foo-bar-baz}}a block{{/foo-bar-baz}}\n    {{foo-bar-baz}}\n  "], test_helpers_1.strip(_a))));
    test_helpers_1.equalTokens(root, (_b = ["\n    <p>true-false</p>\n    <p>false-false</p>\n    <p>false-false</p>\n    <p>false-false</p>\n    <p>true-false-true-false</p>\n    <p>false-false-false-false</p>\n    <p>false-false-false-false</p>\n    <p>false-false-false-false</p>\n  "], _b.raw = ["\n    <p>true-false</p>\n    <p>false-false</p>\n    <p>false-false</p>\n    <p>false-false</p>\n    <p>true-false-true-false</p>\n    <p>false-false-false-false</p>\n    <p>false-false-false-false</p>\n    <p>false-false-false-false</p>\n  "], test_helpers_1.strip(_b)));
    rerender(null, { assertStable: true });
    var _a, _b;
});
QUnit.test('static partial with yield in basic component', function (assert) {
    env.registerBasicComponent('foo-bar', test_helpers_1.BasicComponent, "<p>{{partial 'test'}}</p>");
    env.registerBasicComponent('foo-bar-baz', test_helpers_1.BasicComponent, "<p>{{partial 'test'}}-{{yield \"layout\"}}-{{yield to='inverse'}}</p>");
    env.registerPartial('test', "{{yield \"partial\"}}-{{yield to='inverse'}}");
    render(compile((_a = ["\n    <foo-bar as |source|>from {{source}}</foo-bar>\n    <foo-bar />\n    <foo-bar-baz as |source|>from {{source}}</foo-bar-baz>\n    <foo-bar-baz />\n  "], _a.raw = ["\n    <foo-bar as |source|>from {{source}}</foo-bar>\n    <foo-bar />\n    <foo-bar-baz as |source|>from {{source}}</foo-bar-baz>\n    <foo-bar-baz />\n  "], test_helpers_1.strip(_a))));
    test_helpers_1.equalTokens(root, (_b = ["\n    <p>from partial-</p>\n    <p>-</p>\n    <p>from partial--from layout-</p>\n    <p>---</p>\n  "], _b.raw = ["\n    <p>from partial-</p>\n    <p>-</p>\n    <p>from partial--from layout-</p>\n    <p>---</p>\n  "], test_helpers_1.strip(_b)));
    rerender(null, { assertStable: true });
    var _a, _b;
});
QUnit.test('static partial with yield in curly component', function (assert) {
    var TaglessComponent = (function (_super) {
        __extends(TaglessComponent, _super);
        function TaglessComponent() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.tagName = '';
            return _this;
        }
        return TaglessComponent;
    }(test_helpers_1.EmberishCurlyComponent));
    env.registerEmberishCurlyComponent('foo-bar', TaglessComponent, "<p>{{partial 'test'}}</p>");
    env.registerEmberishCurlyComponent('foo-bar-baz', TaglessComponent, "<p>{{partial 'test'}}-{{yield \"layout\"}}-{{yield to='inverse'}}</p>");
    env.registerPartial('test', "{{yield \"partial\"}}-{{yield to='inverse'}}");
    render(compile((_a = ["\n    {{#foo-bar as |source|}}from {{source}}{{/foo-bar}}\n    {{#foo-bar as |source|}}from {{source}}{{else}}inverse{{/foo-bar}}\n    {{foo-bar}}\n    {{#foo-bar-baz as |source|}}from {{source}}{{/foo-bar-baz}}\n    {{#foo-bar-baz as |source|}}from {{source}}{{else}}inverse{{/foo-bar-baz}}\n    {{foo-bar-baz}}\n  "], _a.raw = ["\n    {{#foo-bar as |source|}}from {{source}}{{/foo-bar}}\n    {{#foo-bar as |source|}}from {{source}}{{else}}inverse{{/foo-bar}}\n    {{foo-bar}}\n    {{#foo-bar-baz as |source|}}from {{source}}{{/foo-bar-baz}}\n    {{#foo-bar-baz as |source|}}from {{source}}{{else}}inverse{{/foo-bar-baz}}\n    {{foo-bar-baz}}\n  "], test_helpers_1.strip(_a))));
    test_helpers_1.equalTokens(root, (_b = ["\n    <p>from partial-</p>\n    <p>from partial-inverse</p>\n    <p>-</p>\n    <p>from partial--from layout-</p>\n    <p>from partial-inverse-from layout-inverse</p>\n    <p>---</p>\n  "], _b.raw = ["\n    <p>from partial-</p>\n    <p>from partial-inverse</p>\n    <p>-</p>\n    <p>from partial--from layout-</p>\n    <p>from partial-inverse-from layout-inverse</p>\n    <p>---</p>\n  "], test_helpers_1.strip(_b)));
    rerender(null, { assertStable: true });
    var _a, _b;
});
QUnit.test('dynamic partial with static content', function (assert) {
    var template = compile("Before {{partial name}} After");
    env.registerPartial('test', "<div>Testing</div>");
    render(template, { name: 'test' });
    test_helpers_1.equalTokens(root, "Before <div>Testing</div> After");
    rerender({ name: 'test' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "Before <div>Testing</div> After");
});
QUnit.test('nested dynamic partial with dynamic content', function (assert) {
    var template = compile("Before {{partial name}} After");
    env.registerPartial('test', "<div>Testing {{wat}} {{partial nest}}</div>");
    env.registerPartial('nested', "<div>Nested {{lol}}</div>");
    render(template, { name: 'test', nest: 'nested', wat: 'wat are', lol: 'you doing?' });
    test_helpers_1.equalTokens(root, "Before <div>Testing wat are <div>Nested you doing?</div></div> After");
    rerender({ name: 'test', nest: 'nested', wat: 'wat are', lol: 'you doing?' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "Before <div>Testing wat are <div>Nested you doing?</div></div> After");
});
QUnit.test('dynamic partial with falsy value does not render', function (assert) {
    var template = compile("Before {{partial name}} After");
    render(template, { name: false });
    test_helpers_1.equalTokens(root, "Before <!----> After");
    rerender({ name: false }, { assertStable: true });
    test_helpers_1.equalTokens(root, "Before <!----> After");
});
QUnit.test('static partial that does not exist asserts', function (assert) {
    var template = compile("Before {{partial 'test'}} After");
    assert.throws(function () {
        render(template);
    }, /Could not find a partial named "test"/);
});
QUnit.test('dynamic partial that does not exist does not render', function (assert) {
    var template = compile("Before {{partial name}} After");
    assert.throws(function () {
        render(template, { name: 'illuminati' });
    }, /Could not find a partial named "illuminati"/);
});
QUnit.test('dynamic partial with can change from falsy to real template', function (assert) {
    var template = compile("Before {{partial name}} After");
    env.registerPartial('test', "<div>Testing</div>");
    render(template, { name: false });
    test_helpers_1.equalTokens(root, "Before <!----> After");
    rerender({ name: false }, { assertStable: true });
    rerender({ name: 'test' });
    test_helpers_1.equalTokens(root, "Before <div>Testing</div> After");
    rerender({ name: false });
    test_helpers_1.equalTokens(root, "Before <!----> After");
    rerender({ name: 'test' });
    test_helpers_1.equalTokens(root, "Before <div>Testing</div> After");
    rerender({ name: null });
    test_helpers_1.equalTokens(root, "Before <!----> After");
    rerender({ name: 'test' });
    test_helpers_1.equalTokens(root, "Before <div>Testing</div> After");
    rerender({ name: undefined });
    test_helpers_1.equalTokens(root, "Before <!----> After");
});
QUnit.test('dynamic partial with self reference', function (assert) {
    var template = compile("{{partial name}}");
    env.registerPartial('test', "I know {{item}}. I have the best {{item}}s.");
    render(template, { name: 'test', item: 'partial' });
    test_helpers_1.equalTokens(root, "I know partial. I have the best partials.");
    rerender({ name: 'test', item: 'partial' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "I know partial. I have the best partials.");
});
QUnit.test('changing dynamic partial with self reference', function (assert) {
    var template = compile("{{partial name}}");
    env.registerPartial('weezy', "Ain't my birthday but I got my {{item}} on the cake.");
    env.registerPartial('birdman', "Respeck my {{item}}. When my {{item}} come up put some respeck on it.");
    render(template, { name: 'weezy', item: 'name' });
    test_helpers_1.equalTokens(root, "Ain't my birthday but I got my name on the cake.");
    rerender({ name: 'birdman', item: 'name' });
    test_helpers_1.equalTokens(root, "Respeck my name. When my name come up put some respeck on it.");
    rerender({ name: 'birdman', item: 'name' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "Respeck my name. When my name come up put some respeck on it.");
});
QUnit.test('changing dynamic partial and changing reference values', function (assert) {
    var template = compile("{{partial name}}");
    env.registerPartial('weezy', "Ain't my birthday but I got my {{item}} on the cake.");
    env.registerPartial('birdman', "Respeck my {{item}}. When my {{item}} come up put some respeck on it.");
    render(template, { name: 'weezy', item: 'partial' });
    test_helpers_1.equalTokens(root, "Ain't my birthday but I got my partial on the cake.");
    rerender({ name: 'birdman', item: 'name' });
    test_helpers_1.equalTokens(root, "Respeck my name. When my name come up put some respeck on it.");
    rerender({ name: 'birdman', item: 'name' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "Respeck my name. When my name come up put some respeck on it.");
});
QUnit.test('changing dynamic partial and changing references', function (assert) {
    var template = compile("{{partial name}}");
    env.registerPartial('weezy', "Ain't my birthday but I got my {{item}} on the cake.");
    env.registerPartial('birdman', "Respeck my {{noun}}. When my {{noun}} come up put some respeck on it.");
    render(template, { name: 'weezy', item: 'partial' });
    test_helpers_1.equalTokens(root, "Ain't my birthday but I got my partial on the cake.");
    rerender({ name: 'birdman', noun: 'name' });
    test_helpers_1.equalTokens(root, "Respeck my name. When my name come up put some respeck on it.");
    rerender({ name: 'birdman', noun: 'name' }, { assertStable: true });
    test_helpers_1.equalTokens(root, "Respeck my name. When my name come up put some respeck on it.");
});
QUnit.skip('FIXME (bug?) dynamic partial with local reference', function (assert) {
    var template = compile("{{#each qualities key='id' as |quality|}}{{partial name}}. {{/each}}");
    env.registerPartial('test', "You {{quality}}");
    render(template, { name: 'test', qualities: ['smaht', 'loyal'] });
    test_helpers_1.equalTokens(root, "You smaht. You loyal. ");
    rerender({ name: 'test', qualities: ['smaht', 'loyal'] }, { assertStable: true });
    test_helpers_1.equalTokens(root, "You smaht. You loyal. ");
});
QUnit.test('partial without arguments throws', function (assert) {
    assert.throws(function () {
        compile("Before {{partial}} After");
    }, (_a = ["Partial found with no arguments. You must specify a template name."], _a.raw = ["Partial found with no arguments. You must specify a template name."], test_helpers_1.strip(_a)));
    var _a;
});
QUnit.test('partial with more than one argument throws', function (assert) {
    assert.throws(function () {
        compile("Before {{partial 'turnt' 'up'}} After");
    }, (_a = ["Partial found with more than one argument. You can only specify a single template."], _a.raw = ["Partial found with more than one argument. You can only specify a single template."], test_helpers_1.strip(_a)));
    var _a;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFydGlhbC10ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQGdsaW1tZXIvcnVudGltZS90ZXN0cy9wYXJ0aWFsLXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0Esc0RBUytCO0FBQy9CLDhEQUErRDtBQUcvRCxJQUFJLEdBQW9CLEVBQUUsSUFBb0IsRUFBRSxNQUFvQixFQUFFLElBQWdDLENBQUM7QUFFdkc7SUFDRSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzQyxDQUFDO0FBRUQsaUJBQWlCLFFBQWdCO0lBQy9CLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLENBQUM7QUFFRDtJQUNFLEdBQUcsR0FBRyxJQUFJLDhCQUFlLEVBQUUsQ0FBQyxDQUFDLDBCQUEwQjtJQUN2RCxJQUFJLEdBQUcsV0FBVyxFQUFFLENBQUM7QUFDdkIsQ0FBQztBQUVELGdCQUFtQixRQUFxQixFQUFFLE9BQVU7SUFBVix3QkFBQSxFQUFBLFlBQVU7SUFDbEQsSUFBSSxHQUFHLElBQUkscUNBQWtCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ1osTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLCtCQUFnQixFQUFFLENBQUMsQ0FBQztJQUM3RCxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDYixnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN6QixNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFNRCxrQkFBa0IsT0FBbUIsRUFBRSxNQUFnRDtJQUFyRSx3QkFBQSxFQUFBLGNBQW1CO0lBQUUsdUJBQUEsRUFBQSxXQUEyQixZQUFZLEVBQUUsS0FBSyxFQUFFO0lBQ3JGLElBQUksUUFBUSxDQUFDO0lB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LENBQUMsc0VBQXNFLENBQUMsQ0FBQztJQUUvRixHQUFHLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFbEUsMEJBQVcsQ0FBQyxJQUFJLEVBQUUsd0JBQXdCLENBQUMsQ0FBQztJQUM1QyxRQUFRLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDbEYsMEJBQVcsQ0FBQyxJQUFJLEVBQUUsd0JBQXdCLENBQUMsQ0FBQztBQUM5QyxDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsVUFBQSxNQUFNO0lBQ25ELE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDWixPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztJQUN0QyxDQUFDLDBGQUFPLG9FQUFvRSxHQUF6RSxvQkFBSyxNQUFxRSxDQUFDOztBQUNoRixDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxJQUFJLENBQUMsNENBQTRDLEVBQUUsVUFBQSxNQUFNO0lBQzdELE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDWixPQUFPLENBQUMsdUNBQXVDLENBQUMsQ0FBQztJQUNuRCxDQUFDLDBHQUFPLG9GQUFvRixHQUF6RixvQkFBSyxNQUFxRixDQUFDOztBQUNoRyxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpbXBsZSwgVGVtcGxhdGUsIFJlbmRlclJlc3VsdCB9IGZyb20gXCJAZ2xpbW1lci9ydW50aW1lXCI7XG5pbXBvcnQge1xuICBCYXNpY0NvbXBvbmVudCxcbiAgRW1iZXJpc2hDdXJseUNvbXBvbmVudCxcbiAgVGVzdEVudmlyb25tZW50LFxuICBUZXN0RHluYW1pY1Njb3BlLFxuICBlcXVhbFRva2VucyxcbiAgZXF1YWxTbmFwc2hvdHMsXG4gIGdlbmVyYXRlU25hcHNob3QsXG4gIHN0cmlwXG59IGZyb20gXCJAZ2xpbW1lci90ZXN0LWhlbHBlcnNcIjtcbmltcG9ydCB7IFVwZGF0YWJsZVJlZmVyZW5jZSB9IGZyb20gXCJAZ2xpbW1lci9vYmplY3QtcmVmZXJlbmNlXCI7XG5pbXBvcnQgeyBPcGFxdWUgfSBmcm9tICdAZ2xpbW1lci91dGlsJztcblxubGV0IGVudjogVGVzdEVudmlyb25tZW50LCByb290OiBTaW1wbGUuRWxlbWVudCwgcmVzdWx0OiBSZW5kZXJSZXN1bHQsIHNlbGY6IFVwZGF0YWJsZVJlZmVyZW5jZTxPcGFxdWU+O1xuXG5mdW5jdGlvbiByb290RWxlbWVudCgpIHtcbiAgcmV0dXJuIGVudi5nZXRET00oKS5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbn1cblxuZnVuY3Rpb24gY29tcGlsZSh0ZW1wbGF0ZTogc3RyaW5nKSB7XG4gIHJldHVybiBlbnYuY29tcGlsZSh0ZW1wbGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNvbW1vblNldHVwKCkge1xuICBlbnYgPSBuZXcgVGVzdEVudmlyb25tZW50KCk7IC8vIFRPRE86IFN1cHBvcnQgU2ltcGxlRE9NXG4gIHJvb3QgPSByb290RWxlbWVudCgpO1xufVxuXG5mdW5jdGlvbiByZW5kZXI8VD4odGVtcGxhdGU6IFRlbXBsYXRlPFQ+LCBjb250ZXh0PXt9KSB7XG4gIHNlbGYgPSBuZXcgVXBkYXRhYmxlUmVmZXJlbmNlKGNvbnRleHQpO1xuICBlbnYuYmVnaW4oKTtcbiAgcmVzdWx0ID0gdGVtcGxhdGUucmVuZGVyKHNlbGYsIHJvb3QsIG5ldyBUZXN0RHluYW1pY1Njb3BlKCkpO1xuICBlbnYuY29tbWl0KCk7XG4gIGFzc2VydEludmFyaWFudHMocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuaW50ZXJmYWNlIFJlcmVuZGVyUGFyYW1zIHtcbiAgYXNzZXJ0U3RhYmxlOiBCb29sZWFuO1xufVxuXG5mdW5jdGlvbiByZXJlbmRlcihjb250ZXh0OiBhbnkgPSBudWxsLCBwYXJhbXM6IFJlcmVuZGVyUGFyYW1zID0geyBhc3NlcnRTdGFibGU6IGZhbHNlIH0pIHtcbiAgbGV0IHNuYXBzaG90O1xuICBpZiAocGFyYW1zLmFzc2VydFN0YWJsZSkge1xuICAgIHNuYXBzaG90ID0gZ2VuZXJhdGVTbmFwc2hvdChyb290KTtcbiAgfVxuICBpZiAoY29udGV4dCAhPT0gbnVsbCkgc2VsZi51cGRhdGUoY29udGV4dCk7XG4gIGVudi5iZWdpbigpO1xuICByZXN1bHQucmVyZW5kZXIoKTtcbiAgZW52LmNvbW1pdCgpO1xuICBpZiAocGFyYW1zLmFzc2VydFN0YWJsZSkge1xuICAgIGVxdWFsU25hcHNob3RzKGdlbmVyYXRlU25hcHNob3Qocm9vdCksIHNuYXBzaG90KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRJbnZhcmlhbnRzKHJlc3VsdCkge1xuICBzdHJpY3RFcXVhbChyZXN1bHQuZmlyc3ROb2RlKCksIHJvb3QuZmlyc3RDaGlsZCwgXCJUaGUgZmlyc3ROb2RlIG9mIHRoZSByZXN1bHQgaXMgdGhlIHNhbWUgYXMgdGhlIHJvb3QncyBmaXJzdENoaWxkXCIpO1xuICBzdHJpY3RFcXVhbChyZXN1bHQubGFzdE5vZGUoKSwgcm9vdC5sYXN0Q2hpbGQsIFwiVGhlIGxhc3ROb2RlIG9mIHRoZSByZXN1bHQgaXMgdGhlIHNhbWUgYXMgdGhlIHJvb3QncyBsYXN0Q2hpbGRcIik7XG59XG5cblFVbml0Lm1vZHVsZShcIlBhcnRpYWxzXCIsIHtcbiAgc2V0dXA6IGNvbW1vblNldHVwXG59KTtcblxuUVVuaXQudGVzdCgnc3RhdGljIHBhcnRpYWwgd2l0aCBzdGF0aWMgY29udGVudCcsIGFzc2VydCA9PiB7XG4gIGxldCB0ZW1wbGF0ZSA9IGNvbXBpbGUoYEJlZm9yZSB7e3BhcnRpYWwgJ3Rlc3QnfX0gQWZ0ZXJgKTtcblxuICBlbnYucmVnaXN0ZXJQYXJ0aWFsKCd0ZXN0JywgYDxkaXY+VGVzdGluZzwvZGl2PmApO1xuICByZW5kZXIodGVtcGxhdGUpO1xuXG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBCZWZvcmUgPGRpdj5UZXN0aW5nPC9kaXY+IEFmdGVyYCk7XG4gIHJlcmVuZGVyKG51bGwsIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xuICBlcXVhbFRva2Vucyhyb290LCBgQmVmb3JlIDxkaXY+VGVzdGluZzwvZGl2PiBBZnRlcmApO1xufSk7XG5cblFVbml0LnRlc3QoJ3N0YXRpYyBwYXJ0aWFsIHdpdGggc2VsZiByZWZlcmVuY2UnLCBhc3NlcnQgPT4ge1xuICBsZXQgdGVtcGxhdGUgPSBjb21waWxlKGB7e3BhcnRpYWwgJ2JpcmRtYW4nfX1gKTtcblxuICBlbnYucmVnaXN0ZXJQYXJ0aWFsKCdiaXJkbWFuJywgYFJlc3BlY2sgbXkge3tpdGVtfX0uIFdoZW4gbXkge3tpdGVtfX0gY29tZSB1cCBwdXQgc29tZSByZXNwZWNrIG9uIGl0LmApO1xuICByZW5kZXIodGVtcGxhdGUsIHsgaXRlbTogJ25hbWUnIH0pO1xuXG4gIHJlcmVuZGVyKG51bGwsIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xuXG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBSZXNwZWNrIG15IG5hbWUuIFdoZW4gbXkgbmFtZSBjb21lIHVwIHB1dCBzb21lIHJlc3BlY2sgb24gaXQuYCk7XG4gIHJlcmVuZGVyKHsgaXRlbTogJ25hbWUnIH0sIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xuICBlcXVhbFRva2Vucyhyb290LCBgUmVzcGVjayBteSBuYW1lLiBXaGVuIG15IG5hbWUgY29tZSB1cCBwdXQgc29tZSByZXNwZWNrIG9uIGl0LmApO1xufSk7XG5cblFVbml0LnRlc3QoJ3N0YXRpYyBwYXJ0aWFsIHdpdGggbG9jYWwgcmVmZXJlbmNlJywgYXNzZXJ0ID0+IHtcbiAgbGV0IHRlbXBsYXRlID0gY29tcGlsZShge3sjZWFjaCBxdWFsaXRpZXMga2V5PSdpZCcgYXMgfHF1YWxpdHl8fX17e3BhcnRpYWwgJ3Rlc3QnfX0uIHt7L2VhY2h9fWApO1xuXG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3Rlc3QnLCBgWW91IHt7cXVhbGl0eS52YWx1ZX19YCk7XG4gIHJlbmRlcih0ZW1wbGF0ZSwgeyBxdWFsaXRpZXM6IFt7aWQ6IDEsIHZhbHVlOiAnc21haHQnfSwge2lkOiAyLCB2YWx1ZTogJ2xveWFsJ31dIH0pO1xuXG4gIHJlcmVuZGVyKG51bGwsIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xuXG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBZb3Ugc21haHQuIFlvdSBsb3lhbC4gYCk7XG4gIHJlcmVuZGVyKHsgcXVhbGl0aWVzOiBbe2lkOiAxLCB2YWx1ZTogJ3NtYWh0J30sIHtpZDogMiwgdmFsdWU6ICdsb3lhbCd9XSB9LCB7IGFzc2VydFN0YWJsZTogdHJ1ZSB9KTtcbiAgZXF1YWxUb2tlbnMocm9vdCwgYFlvdSBzbWFodC4gWW91IGxveWFsLiBgKTtcbn0pO1xuXG5RVW5pdC50ZXN0KCdzdGF0aWMgcGFydGlhbCB3aXRoIG5hbWVkIGFyZ3VtZW50cycsIGFzc2VydCA9PiB7XG4gIGVudi5yZWdpc3RlckJhc2ljQ29tcG9uZW50KCdmb28tYmFyJywgQmFzaWNDb21wb25lbnQsIGA8cD57e0Bmb299fS17e3BhcnRpYWwgJ3Rlc3QnfX08L3A+YCk7XG5cbiAgbGV0IHRlbXBsYXRlID0gY29tcGlsZShgPGZvby1iYXIgQGZvbz17e2Zvb319IEBiYXI9e3tiYXJ9fSAvPmApO1xuXG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3Rlc3QnLCBge3tAZm9vfX0te3tAYmFyfX1gKTtcbiAgcmVuZGVyKHRlbXBsYXRlLCB7IGZvbzogJ2ZvbycsIGJhcjogJ2JhcicgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGA8cD5mb28tZm9vLWJhcjwvcD5gKTtcblxuICByZXJlbmRlcihudWxsLCB7IGFzc2VydFN0YWJsZTogdHJ1ZSB9KTtcblxuICByZXJlbmRlcih7IGZvbzogJ0ZPTycsIGJhcjogJ0JBUicgfSwgeyBhc3NlcnRTdGFibGU6IHRydWUgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGA8cD5GT08tRk9PLUJBUjwvcD5gKTtcblxuICByZXJlbmRlcih7IGZvbzogJ2ZvbycsIGJhcjogJ2JhcicgfSwgeyBhc3NlcnRTdGFibGU6IHRydWUgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGA8cD5mb28tZm9vLWJhcjwvcD5gKTtcbn0pO1xuXG5RVW5pdC50ZXN0KCdzdGF0aWMgcGFydGlhbCB3aXRoIGhhcy1ibG9jayBpbiBiYXNpYyBjb21wb25lbnQnLCBhc3NlcnQgPT4ge1xuICBlbnYucmVnaXN0ZXJCYXNpY0NvbXBvbmVudCgnZm9vLWJhcicsIEJhc2ljQ29tcG9uZW50LCBgPHA+e3twYXJ0aWFsICd0ZXN0J319PC9wPmApO1xuICBlbnYucmVnaXN0ZXJCYXNpY0NvbXBvbmVudCgnZm9vLWJhci1iYXonLCBCYXNpY0NvbXBvbmVudCwgYDxwPnt7cGFydGlhbCAndGVzdCd9fS17e2hhcy1ibG9ja319LXt7aGFzLWJsb2NrICdpbnZlcnNlJ319PC9wPmApO1xuICBlbnYucmVnaXN0ZXJQYXJ0aWFsKCd0ZXN0JywgYHt7aGFzLWJsb2NrfX0te3toYXMtYmxvY2sgJ2ludmVyc2UnfX1gKTtcblxuICByZW5kZXIoY29tcGlsZShzdHJpcGBcbiAgICA8Zm9vLWJhcj5hIGJsb2NrPC9mb28tYmFyPlxuICAgIDxmb28tYmFyIC8+XG4gICAgPGZvby1iYXItYmF6PmEgYmxvY2s8L2Zvby1iYXItYmF6PlxuICAgIDxmb28tYmFyLWJheiAvPlxuICBgKSk7XG5cbiAgZXF1YWxUb2tlbnMocm9vdCwgc3RyaXBgXG4gICAgPHA+dHJ1ZS1mYWxzZTwvcD5cbiAgICA8cD50cnVlLWZhbHNlPC9wPlxuICAgIDxwPnRydWUtZmFsc2UtdHJ1ZS1mYWxzZTwvcD5cbiAgICA8cD50cnVlLWZhbHNlLXRydWUtZmFsc2U8L3A+XG4gIGApO1xuXG4gIHJlcmVuZGVyKG51bGwsIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xufSk7XG5cblFVbml0LnRlc3QoJ3N0YXRpYyBwYXJ0aWFsIHdpdGggaGFzLWJsb2NrIGluIGN1cmx5IGNvbXBvbmVudCcsIGFzc2VydCA9PiB7XG4gIGNsYXNzIFRhZ2xlc3NDb21wb25lbnQgZXh0ZW5kcyBFbWJlcmlzaEN1cmx5Q29tcG9uZW50IHtcbiAgICB0YWdOYW1lID0gJyc7XG4gIH1cblxuICBlbnYucmVnaXN0ZXJFbWJlcmlzaEN1cmx5Q29tcG9uZW50KCdmb28tYmFyJywgVGFnbGVzc0NvbXBvbmVudCBhcyBhbnksIGA8cD57e3BhcnRpYWwgJ3Rlc3QnfX08L3A+YCk7XG4gIGVudi5yZWdpc3RlckVtYmVyaXNoQ3VybHlDb21wb25lbnQoJ2Zvby1iYXItYmF6JywgVGFnbGVzc0NvbXBvbmVudCBhcyBhbnksIGA8cD57e3BhcnRpYWwgJ3Rlc3QnfX0te3toYXMtYmxvY2t9fS17e2hhcy1ibG9jayAnaW52ZXJzZSd9fTwvcD5gKTtcbiAgZW52LnJlZ2lzdGVyUGFydGlhbCgndGVzdCcsIGB7e2hhcy1ibG9ja319LXt7aGFzLWJsb2NrICdpbnZlcnNlJ319YCk7XG5cbiAgcmVuZGVyKGNvbXBpbGUoc3RyaXBgXG4gICAge3sjZm9vLWJhcn19YSBibG9ja3t7L2Zvby1iYXJ9fVxuICAgIHt7I2Zvby1iYXJ9fWEgYmxvY2t7e2Vsc2V9fWludmVyc2V7ey9mb28tYmFyfX1cbiAgICB7e2Zvby1iYXJ9fVxuICAgIHt7I2Zvby1iYXItYmF6fX1hIGJsb2Nre3svZm9vLWJhci1iYXp9fVxuICAgIHt7I2Zvby1iYXItYmF6fX1hIGJsb2Nre3tlbHNlfX1pbnZlcnNle3svZm9vLWJhci1iYXp9fVxuICAgIHt7Zm9vLWJhci1iYXp9fVxuICBgKSk7XG5cbiAgZXF1YWxUb2tlbnMocm9vdCwgc3RyaXBgXG4gICAgPHA+dHJ1ZS1mYWxzZTwvcD5cbiAgICA8cD50cnVlLXRydWU8L3A+XG4gICAgPHA+ZmFsc2UtZmFsc2U8L3A+XG4gICAgPHA+dHJ1ZS1mYWxzZS10cnVlLWZhbHNlPC9wPlxuICAgIDxwPnRydWUtdHJ1ZS10cnVlLXRydWU8L3A+XG4gICAgPHA+ZmFsc2UtZmFsc2UtZmFsc2UtZmFsc2U8L3A+XG4gIGApO1xuXG4gIHJlcmVuZGVyKG51bGwsIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xufSk7XG5cblFVbml0LnRlc3QoJ3N0YXRpYyBwYXJ0aWFsIHdpdGggaGFzLWJsb2NrLXBhcmFtcyBpbiBiYXNpYyBjb21wb25lbnQnLCBhc3NlcnQgPT4ge1xuICBlbnYucmVnaXN0ZXJCYXNpY0NvbXBvbmVudCgnZm9vLWJhcicsIEJhc2ljQ29tcG9uZW50LCBgPHA+e3twYXJ0aWFsICd0ZXN0J319PC9wPmApO1xuICBlbnYucmVnaXN0ZXJCYXNpY0NvbXBvbmVudCgnZm9vLWJhci1iYXonLCBCYXNpY0NvbXBvbmVudCwgYDxwPnt7cGFydGlhbCAndGVzdCd9fS17e2hhcy1ibG9jay1wYXJhbXN9fS17e2hhcy1ibG9jay1wYXJhbXMgXCJpbnZlcnNlXCJ9fTwvcD5gKTtcbiAgZW52LnJlZ2lzdGVyUGFydGlhbCgndGVzdCcsIGB7e2hhcy1ibG9jay1wYXJhbXN9fS17e2hhcy1ibG9jay1wYXJhbXMgXCJpbnZlcnNlXCJ9fWApO1xuXG4gIHJlbmRlcihjb21waWxlKHN0cmlwYFxuICAgIDxmb28tYmFyIGFzIHx4fD5hIGJsb2NrPC9mb28tYmFyPlxuICAgIDxmb28tYmFyPmEgYmxvY2s8L2Zvby1iYXI+XG4gICAgPGZvby1iYXIgLz5cbiAgICA8Zm9vLWJhci1iYXogYXMgfHh8PmEgYmxvY2s8L2Zvby1iYXItYmF6PlxuICAgIDxmb28tYmFyLWJhej5hIGJsb2NrPC9mb28tYmFyLWJhej5cbiAgICA8Zm9vLWJhci1iYXogLz5cbiAgYCkpO1xuXG4gIGVxdWFsVG9rZW5zKHJvb3QsIHN0cmlwYFxuICAgIDxwPnRydWUtZmFsc2U8L3A+XG4gICAgPHA+ZmFsc2UtZmFsc2U8L3A+XG4gICAgPHA+ZmFsc2UtZmFsc2U8L3A+XG4gICAgPHA+dHJ1ZS1mYWxzZS10cnVlLWZhbHNlPC9wPlxuICAgIDxwPmZhbHNlLWZhbHNlLWZhbHNlLWZhbHNlPC9wPlxuICAgIDxwPmZhbHNlLWZhbHNlLWZhbHNlLWZhbHNlPC9wPlxuICBgKTtcblxuICByZXJlbmRlcihudWxsLCB7IGFzc2VydFN0YWJsZTogdHJ1ZSB9KTtcbn0pO1xuXG5RVW5pdC50ZXN0KCdzdGF0aWMgcGFydGlhbCB3aXRoIGhhcy1ibG9jay1wYXJhbXMgaW4gY3VybHkgY29tcG9uZW50JywgYXNzZXJ0ID0+IHtcbiAgY2xhc3MgVGFnbGVzc0NvbXBvbmVudCBleHRlbmRzIEVtYmVyaXNoQ3VybHlDb21wb25lbnQge1xuICAgIHRhZ05hbWUgPSAnJztcbiAgfVxuXG4gIGVudi5yZWdpc3RlckVtYmVyaXNoQ3VybHlDb21wb25lbnQoJ2Zvby1iYXInLCBUYWdsZXNzQ29tcG9uZW50IGFzIGFueSwgYDxwPnt7cGFydGlhbCAndGVzdCd9fTwvcD5gKTtcbiAgZW52LnJlZ2lzdGVyRW1iZXJpc2hDdXJseUNvbXBvbmVudCgnZm9vLWJhci1iYXonLCBUYWdsZXNzQ29tcG9uZW50IGFzIGFueSwgYDxwPnt7cGFydGlhbCAndGVzdCd9fS17e2hhcy1ibG9jay1wYXJhbXN9fS17e2hhcy1ibG9jay1wYXJhbXMgXCJpbnZlcnNlXCJ9fTwvcD5gKTtcbiAgZW52LnJlZ2lzdGVyUGFydGlhbCgndGVzdCcsIGB7e2hhcy1ibG9jay1wYXJhbXN9fS17e2hhcy1ibG9jay1wYXJhbXMgXCJpbnZlcnNlXCJ9fWApO1xuXG4gIHJlbmRlcihjb21waWxlKHN0cmlwYFxuICAgIHt7I2Zvby1iYXIgYXMgfHh8fX1hIGJsb2Nre3svZm9vLWJhcn19XG4gICAge3sjZm9vLWJhcn19YSBibG9ja3t7ZWxzZX19aW52ZXJzZXt7L2Zvby1iYXJ9fVxuICAgIHt7I2Zvby1iYXJ9fWEgYmxvY2t7ey9mb28tYmFyfX1cbiAgICB7e2Zvby1iYXJ9fVxuICAgIHt7I2Zvby1iYXItYmF6IGFzIHx4fH19YSBibG9ja3t7L2Zvby1iYXItYmF6fX1cbiAgICB7eyNmb28tYmFyLWJhen19YSBibG9ja3t7ZWxzZX19aW52ZXJzZXt7L2Zvby1iYXItYmF6fX1cbiAgICB7eyNmb28tYmFyLWJhen19YSBibG9ja3t7L2Zvby1iYXItYmF6fX1cbiAgICB7e2Zvby1iYXItYmF6fX1cbiAgYCkpO1xuXG4gIGVxdWFsVG9rZW5zKHJvb3QsIHN0cmlwYFxuICAgIDxwPnRydWUtZmFsc2U8L3A+XG4gICAgPHA+ZmFsc2UtZmFsc2U8L3A+XG4gICAgPHA+ZmFsc2UtZmFsc2U8L3A+XG4gICAgPHA+ZmFsc2UtZmFsc2U8L3A+XG4gICAgPHA+dHJ1ZS1mYWxzZS10cnVlLWZhbHNlPC9wPlxuICAgIDxwPmZhbHNlLWZhbHNlLWZhbHNlLWZhbHNlPC9wPlxuICAgIDxwPmZhbHNlLWZhbHNlLWZhbHNlLWZhbHNlPC9wPlxuICAgIDxwPmZhbHNlLWZhbHNlLWZhbHNlLWZhbHNlPC9wPlxuICBgKTtcblxuICByZXJlbmRlcihudWxsLCB7IGFzc2VydFN0YWJsZTogdHJ1ZSB9KTtcbn0pO1xuXG5RVW5pdC50ZXN0KCdzdGF0aWMgcGFydGlhbCB3aXRoIHlpZWxkIGluIGJhc2ljIGNvbXBvbmVudCcsIGFzc2VydCA9PiB7XG4gIGVudi5yZWdpc3RlckJhc2ljQ29tcG9uZW50KCdmb28tYmFyJywgQmFzaWNDb21wb25lbnQsIGA8cD57e3BhcnRpYWwgJ3Rlc3QnfX08L3A+YCk7XG4gIGVudi5yZWdpc3RlckJhc2ljQ29tcG9uZW50KCdmb28tYmFyLWJheicsIEJhc2ljQ29tcG9uZW50LCBgPHA+e3twYXJ0aWFsICd0ZXN0J319LXt7eWllbGQgXCJsYXlvdXRcIn19LXt7eWllbGQgdG89J2ludmVyc2UnfX08L3A+YCk7XG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3Rlc3QnLCBge3t5aWVsZCBcInBhcnRpYWxcIn19LXt7eWllbGQgdG89J2ludmVyc2UnfX1gKTtcblxuICByZW5kZXIoY29tcGlsZShzdHJpcGBcbiAgICA8Zm9vLWJhciBhcyB8c291cmNlfD5mcm9tIHt7c291cmNlfX08L2Zvby1iYXI+XG4gICAgPGZvby1iYXIgLz5cbiAgICA8Zm9vLWJhci1iYXogYXMgfHNvdXJjZXw+ZnJvbSB7e3NvdXJjZX19PC9mb28tYmFyLWJhej5cbiAgICA8Zm9vLWJhci1iYXogLz5cbiAgYCkpO1xuXG4gIGVxdWFsVG9rZW5zKHJvb3QsIHN0cmlwYFxuICAgIDxwPmZyb20gcGFydGlhbC08L3A+XG4gICAgPHA+LTwvcD5cbiAgICA8cD5mcm9tIHBhcnRpYWwtLWZyb20gbGF5b3V0LTwvcD5cbiAgICA8cD4tLS08L3A+XG4gIGApO1xuXG4gIHJlcmVuZGVyKG51bGwsIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xufSk7XG5cblFVbml0LnRlc3QoJ3N0YXRpYyBwYXJ0aWFsIHdpdGggeWllbGQgaW4gY3VybHkgY29tcG9uZW50JywgYXNzZXJ0ID0+IHtcbiAgY2xhc3MgVGFnbGVzc0NvbXBvbmVudCBleHRlbmRzIEVtYmVyaXNoQ3VybHlDb21wb25lbnQge1xuICAgIHRhZ05hbWUgPSAnJztcbiAgfVxuXG4gIGVudi5yZWdpc3RlckVtYmVyaXNoQ3VybHlDb21wb25lbnQoJ2Zvby1iYXInLCBUYWdsZXNzQ29tcG9uZW50IGFzIGFueSwgYDxwPnt7cGFydGlhbCAndGVzdCd9fTwvcD5gKTtcbiAgZW52LnJlZ2lzdGVyRW1iZXJpc2hDdXJseUNvbXBvbmVudCgnZm9vLWJhci1iYXonLCBUYWdsZXNzQ29tcG9uZW50IGFzIGFueSwgYDxwPnt7cGFydGlhbCAndGVzdCd9fS17e3lpZWxkIFwibGF5b3V0XCJ9fS17e3lpZWxkIHRvPSdpbnZlcnNlJ319PC9wPmApO1xuICBlbnYucmVnaXN0ZXJQYXJ0aWFsKCd0ZXN0JywgYHt7eWllbGQgXCJwYXJ0aWFsXCJ9fS17e3lpZWxkIHRvPSdpbnZlcnNlJ319YCk7XG5cbiAgcmVuZGVyKGNvbXBpbGUoc3RyaXBgXG4gICAge3sjZm9vLWJhciBhcyB8c291cmNlfH19ZnJvbSB7e3NvdXJjZX19e3svZm9vLWJhcn19XG4gICAge3sjZm9vLWJhciBhcyB8c291cmNlfH19ZnJvbSB7e3NvdXJjZX19e3tlbHNlfX1pbnZlcnNle3svZm9vLWJhcn19XG4gICAge3tmb28tYmFyfX1cbiAgICB7eyNmb28tYmFyLWJheiBhcyB8c291cmNlfH19ZnJvbSB7e3NvdXJjZX19e3svZm9vLWJhci1iYXp9fVxuICAgIHt7I2Zvby1iYXItYmF6IGFzIHxzb3VyY2V8fX1mcm9tIHt7c291cmNlfX17e2Vsc2V9fWludmVyc2V7ey9mb28tYmFyLWJhen19XG4gICAge3tmb28tYmFyLWJhen19XG4gIGApKTtcblxuICBlcXVhbFRva2Vucyhyb290LCBzdHJpcGBcbiAgICA8cD5mcm9tIHBhcnRpYWwtPC9wPlxuICAgIDxwPmZyb20gcGFydGlhbC1pbnZlcnNlPC9wPlxuICAgIDxwPi08L3A+XG4gICAgPHA+ZnJvbSBwYXJ0aWFsLS1mcm9tIGxheW91dC08L3A+XG4gICAgPHA+ZnJvbSBwYXJ0aWFsLWludmVyc2UtZnJvbSBsYXlvdXQtaW52ZXJzZTwvcD5cbiAgICA8cD4tLS08L3A+XG4gIGApO1xuXG4gIHJlcmVuZGVyKG51bGwsIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xufSk7XG5cblFVbml0LnRlc3QoJ2R5bmFtaWMgcGFydGlhbCB3aXRoIHN0YXRpYyBjb250ZW50JywgYXNzZXJ0ID0+IHtcbiAgbGV0IHRlbXBsYXRlID0gY29tcGlsZShgQmVmb3JlIHt7cGFydGlhbCBuYW1lfX0gQWZ0ZXJgKTtcblxuICBlbnYucmVnaXN0ZXJQYXJ0aWFsKCd0ZXN0JywgYDxkaXY+VGVzdGluZzwvZGl2PmApO1xuICByZW5kZXIodGVtcGxhdGUsIHsgbmFtZTogJ3Rlc3QnIH0pO1xuXG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBCZWZvcmUgPGRpdj5UZXN0aW5nPC9kaXY+IEFmdGVyYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ3Rlc3QnIH0sIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xuICBlcXVhbFRva2Vucyhyb290LCBgQmVmb3JlIDxkaXY+VGVzdGluZzwvZGl2PiBBZnRlcmApO1xufSk7XG5cblFVbml0LnRlc3QoJ25lc3RlZCBkeW5hbWljIHBhcnRpYWwgd2l0aCBkeW5hbWljIGNvbnRlbnQnLCBhc3NlcnQgPT4ge1xuICBsZXQgdGVtcGxhdGUgPSBjb21waWxlKGBCZWZvcmUge3twYXJ0aWFsIG5hbWV9fSBBZnRlcmApO1xuXG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3Rlc3QnLCBgPGRpdj5UZXN0aW5nIHt7d2F0fX0ge3twYXJ0aWFsIG5lc3R9fTwvZGl2PmApO1xuICBlbnYucmVnaXN0ZXJQYXJ0aWFsKCduZXN0ZWQnLCBgPGRpdj5OZXN0ZWQge3tsb2x9fTwvZGl2PmApO1xuXG4gIHJlbmRlcih0ZW1wbGF0ZSwgeyBuYW1lOiAndGVzdCcsIG5lc3Q6ICduZXN0ZWQnLCB3YXQ6ICd3YXQgYXJlJywgbG9sOiAneW91IGRvaW5nPycgfSk7XG5cbiAgZXF1YWxUb2tlbnMocm9vdCwgYEJlZm9yZSA8ZGl2PlRlc3Rpbmcgd2F0IGFyZSA8ZGl2Pk5lc3RlZCB5b3UgZG9pbmc/PC9kaXY+PC9kaXY+IEFmdGVyYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ3Rlc3QnLCBuZXN0OiAnbmVzdGVkJywgd2F0OiAnd2F0IGFyZScsIGxvbDogJ3lvdSBkb2luZz8nIH0sIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xuICBlcXVhbFRva2Vucyhyb290LCBgQmVmb3JlIDxkaXY+VGVzdGluZyB3YXQgYXJlIDxkaXY+TmVzdGVkIHlvdSBkb2luZz88L2Rpdj48L2Rpdj4gQWZ0ZXJgKTtcbn0pO1xuXG5RVW5pdC50ZXN0KCdkeW5hbWljIHBhcnRpYWwgd2l0aCBmYWxzeSB2YWx1ZSBkb2VzIG5vdCByZW5kZXInLCBhc3NlcnQgPT4ge1xuICBsZXQgdGVtcGxhdGUgPSBjb21waWxlKGBCZWZvcmUge3twYXJ0aWFsIG5hbWV9fSBBZnRlcmApO1xuXG4gIHJlbmRlcih0ZW1wbGF0ZSwgeyBuYW1lOiBmYWxzZSB9KTtcblxuICBlcXVhbFRva2Vucyhyb290LCBgQmVmb3JlIDwhLS0tLT4gQWZ0ZXJgKTtcbiAgcmVyZW5kZXIoeyBuYW1lOiBmYWxzZSB9LCB7IGFzc2VydFN0YWJsZTogdHJ1ZSB9KTtcbiAgZXF1YWxUb2tlbnMocm9vdCwgYEJlZm9yZSA8IS0tLS0+IEFmdGVyYCk7XG59KTtcblxuUVVuaXQudGVzdCgnc3RhdGljIHBhcnRpYWwgdGhhdCBkb2VzIG5vdCBleGlzdCBhc3NlcnRzJywgYXNzZXJ0ID0+IHtcbiAgbGV0IHRlbXBsYXRlID0gY29tcGlsZShgQmVmb3JlIHt7cGFydGlhbCAndGVzdCd9fSBBZnRlcmApO1xuXG4gIGFzc2VydC50aHJvd3MoKCkgPT4ge1xuICAgIHJlbmRlcih0ZW1wbGF0ZSk7XG4gIH0sIC9Db3VsZCBub3QgZmluZCBhIHBhcnRpYWwgbmFtZWQgXCJ0ZXN0XCIvKTtcbn0pO1xuXG5RVW5pdC50ZXN0KCdkeW5hbWljIHBhcnRpYWwgdGhhdCBkb2VzIG5vdCBleGlzdCBkb2VzIG5vdCByZW5kZXInLCBhc3NlcnQgPT4ge1xuICBsZXQgdGVtcGxhdGUgPSBjb21waWxlKGBCZWZvcmUge3twYXJ0aWFsIG5hbWV9fSBBZnRlcmApO1xuXG4gIGFzc2VydC50aHJvd3MoKCkgPT4ge1xuICAgIHJlbmRlcih0ZW1wbGF0ZSwgeyBuYW1lOiAnaWxsdW1pbmF0aScgfSk7XG4gIH0sIC9Db3VsZCBub3QgZmluZCBhIHBhcnRpYWwgbmFtZWQgXCJpbGx1bWluYXRpXCIvKTtcbn0pO1xuXG5RVW5pdC50ZXN0KCdkeW5hbWljIHBhcnRpYWwgd2l0aCBjYW4gY2hhbmdlIGZyb20gZmFsc3kgdG8gcmVhbCB0ZW1wbGF0ZScsIGFzc2VydCA9PiB7XG4gIGxldCB0ZW1wbGF0ZSA9IGNvbXBpbGUoYEJlZm9yZSB7e3BhcnRpYWwgbmFtZX19IEFmdGVyYCk7XG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3Rlc3QnLCBgPGRpdj5UZXN0aW5nPC9kaXY+YCk7XG5cbiAgcmVuZGVyKHRlbXBsYXRlLCB7IG5hbWU6IGZhbHNlIH0pO1xuXG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBCZWZvcmUgPCEtLS0tPiBBZnRlcmApO1xuICByZXJlbmRlcih7IG5hbWU6IGZhbHNlIH0sIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xuXG4gIHJlcmVuZGVyKHsgbmFtZTogJ3Rlc3QnIH0pO1xuICBlcXVhbFRva2Vucyhyb290LCBgQmVmb3JlIDxkaXY+VGVzdGluZzwvZGl2PiBBZnRlcmApO1xuXG4gIHJlcmVuZGVyKHsgbmFtZTogZmFsc2UgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBCZWZvcmUgPCEtLS0tPiBBZnRlcmApO1xuXG4gIHJlcmVuZGVyKHsgbmFtZTogJ3Rlc3QnIH0pO1xuICBlcXVhbFRva2Vucyhyb290LCBgQmVmb3JlIDxkaXY+VGVzdGluZzwvZGl2PiBBZnRlcmApO1xuXG4gIHJlcmVuZGVyKHsgbmFtZTogbnVsbCB9KTtcbiAgZXF1YWxUb2tlbnMocm9vdCwgYEJlZm9yZSA8IS0tLS0+IEFmdGVyYCk7XG5cbiAgcmVyZW5kZXIoeyBuYW1lOiAndGVzdCcgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBCZWZvcmUgPGRpdj5UZXN0aW5nPC9kaXY+IEFmdGVyYCk7XG5cbiAgcmVyZW5kZXIoeyBuYW1lOiB1bmRlZmluZWQgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBCZWZvcmUgPCEtLS0tPiBBZnRlcmApO1xufSk7XG5cblFVbml0LnRlc3QoJ2R5bmFtaWMgcGFydGlhbCB3aXRoIHNlbGYgcmVmZXJlbmNlJywgYXNzZXJ0ID0+IHtcbiAgbGV0IHRlbXBsYXRlID0gY29tcGlsZShge3twYXJ0aWFsIG5hbWV9fWApO1xuXG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3Rlc3QnLCBgSSBrbm93IHt7aXRlbX19LiBJIGhhdmUgdGhlIGJlc3Qge3tpdGVtfX1zLmApO1xuICByZW5kZXIodGVtcGxhdGUsIHsgbmFtZTogJ3Rlc3QnLCBpdGVtOiAncGFydGlhbCcgfSk7XG5cbiAgZXF1YWxUb2tlbnMocm9vdCwgYEkga25vdyBwYXJ0aWFsLiBJIGhhdmUgdGhlIGJlc3QgcGFydGlhbHMuYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ3Rlc3QnLCBpdGVtOiAncGFydGlhbCcgfSwgeyBhc3NlcnRTdGFibGU6IHRydWUgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBJIGtub3cgcGFydGlhbC4gSSBoYXZlIHRoZSBiZXN0IHBhcnRpYWxzLmApO1xufSk7XG5cblFVbml0LnRlc3QoJ2NoYW5naW5nIGR5bmFtaWMgcGFydGlhbCB3aXRoIHNlbGYgcmVmZXJlbmNlJywgYXNzZXJ0ID0+IHtcbiAgbGV0IHRlbXBsYXRlID0gY29tcGlsZShge3twYXJ0aWFsIG5hbWV9fWApO1xuXG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3dlZXp5JywgYEFpbid0IG15IGJpcnRoZGF5IGJ1dCBJIGdvdCBteSB7e2l0ZW19fSBvbiB0aGUgY2FrZS5gKTtcbiAgZW52LnJlZ2lzdGVyUGFydGlhbCgnYmlyZG1hbicsIGBSZXNwZWNrIG15IHt7aXRlbX19LiBXaGVuIG15IHt7aXRlbX19IGNvbWUgdXAgcHV0IHNvbWUgcmVzcGVjayBvbiBpdC5gKTtcbiAgcmVuZGVyKHRlbXBsYXRlLCB7IG5hbWU6ICd3ZWV6eScsIGl0ZW06ICduYW1lJyB9KTtcblxuICBlcXVhbFRva2Vucyhyb290LCBgQWluJ3QgbXkgYmlydGhkYXkgYnV0IEkgZ290IG15IG5hbWUgb24gdGhlIGNha2UuYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ2JpcmRtYW4nLCBpdGVtOiAnbmFtZScgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBSZXNwZWNrIG15IG5hbWUuIFdoZW4gbXkgbmFtZSBjb21lIHVwIHB1dCBzb21lIHJlc3BlY2sgb24gaXQuYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ2JpcmRtYW4nLCBpdGVtOiAnbmFtZScgfSwgeyBhc3NlcnRTdGFibGU6IHRydWUgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBSZXNwZWNrIG15IG5hbWUuIFdoZW4gbXkgbmFtZSBjb21lIHVwIHB1dCBzb21lIHJlc3BlY2sgb24gaXQuYCk7XG59KTtcblxuUVVuaXQudGVzdCgnY2hhbmdpbmcgZHluYW1pYyBwYXJ0aWFsIGFuZCBjaGFuZ2luZyByZWZlcmVuY2UgdmFsdWVzJywgYXNzZXJ0ID0+IHtcbiAgbGV0IHRlbXBsYXRlID0gY29tcGlsZShge3twYXJ0aWFsIG5hbWV9fWApO1xuXG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3dlZXp5JywgYEFpbid0IG15IGJpcnRoZGF5IGJ1dCBJIGdvdCBteSB7e2l0ZW19fSBvbiB0aGUgY2FrZS5gKTtcbiAgZW52LnJlZ2lzdGVyUGFydGlhbCgnYmlyZG1hbicsIGBSZXNwZWNrIG15IHt7aXRlbX19LiBXaGVuIG15IHt7aXRlbX19IGNvbWUgdXAgcHV0IHNvbWUgcmVzcGVjayBvbiBpdC5gKTtcbiAgcmVuZGVyKHRlbXBsYXRlLCB7IG5hbWU6ICd3ZWV6eScsIGl0ZW06ICdwYXJ0aWFsJyB9KTtcblxuICBlcXVhbFRva2Vucyhyb290LCBgQWluJ3QgbXkgYmlydGhkYXkgYnV0IEkgZ290IG15IHBhcnRpYWwgb24gdGhlIGNha2UuYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ2JpcmRtYW4nLCBpdGVtOiAnbmFtZScgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBSZXNwZWNrIG15IG5hbWUuIFdoZW4gbXkgbmFtZSBjb21lIHVwIHB1dCBzb21lIHJlc3BlY2sgb24gaXQuYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ2JpcmRtYW4nLCBpdGVtOiAnbmFtZScgfSwgeyBhc3NlcnRTdGFibGU6IHRydWUgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBSZXNwZWNrIG15IG5hbWUuIFdoZW4gbXkgbmFtZSBjb21lIHVwIHB1dCBzb21lIHJlc3BlY2sgb24gaXQuYCk7XG59KTtcblxuUVVuaXQudGVzdCgnY2hhbmdpbmcgZHluYW1pYyBwYXJ0aWFsIGFuZCBjaGFuZ2luZyByZWZlcmVuY2VzJywgYXNzZXJ0ID0+IHtcbiAgbGV0IHRlbXBsYXRlID0gY29tcGlsZShge3twYXJ0aWFsIG5hbWV9fWApO1xuXG4gIGVudi5yZWdpc3RlclBhcnRpYWwoJ3dlZXp5JywgYEFpbid0IG15IGJpcnRoZGF5IGJ1dCBJIGdvdCBteSB7e2l0ZW19fSBvbiB0aGUgY2FrZS5gKTtcbiAgZW52LnJlZ2lzdGVyUGFydGlhbCgnYmlyZG1hbicsIGBSZXNwZWNrIG15IHt7bm91bn19LiBXaGVuIG15IHt7bm91bn19IGNvbWUgdXAgcHV0IHNvbWUgcmVzcGVjayBvbiBpdC5gKTtcbiAgcmVuZGVyKHRlbXBsYXRlLCB7IG5hbWU6ICd3ZWV6eScsIGl0ZW06ICdwYXJ0aWFsJyB9KTtcblxuICBlcXVhbFRva2Vucyhyb290LCBgQWluJ3QgbXkgYmlydGhkYXkgYnV0IEkgZ290IG15IHBhcnRpYWwgb24gdGhlIGNha2UuYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ2JpcmRtYW4nLCBub3VuOiAnbmFtZScgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBSZXNwZWNrIG15IG5hbWUuIFdoZW4gbXkgbmFtZSBjb21lIHVwIHB1dCBzb21lIHJlc3BlY2sgb24gaXQuYCk7XG4gIHJlcmVuZGVyKHsgbmFtZTogJ2JpcmRtYW4nLCBub3VuOiAnbmFtZScgfSwgeyBhc3NlcnRTdGFibGU6IHRydWUgfSk7XG4gIGVxdWFsVG9rZW5zKHJvb3QsIGBSZXNwZWNrIG15IG5hbWUuIFdoZW4gbXkgbmFtZSBjb21lIHVwIHB1dCBzb21lIHJlc3BlY2sgb24gaXQuYCk7XG59KTtcblxuUVVuaXQuc2tpcCgnRklYTUUgKGJ1Zz8pIGR5bmFtaWMgcGFydGlhbCB3aXRoIGxvY2FsIHJlZmVyZW5jZScsIGFzc2VydCA9PiB7XG4gIGxldCB0ZW1wbGF0ZSA9IGNvbXBpbGUoYHt7I2VhY2ggcXVhbGl0aWVzIGtleT0naWQnIGFzIHxxdWFsaXR5fH19e3twYXJ0aWFsIG5hbWV9fS4ge3svZWFjaH19YCk7XG5cbiAgZW52LnJlZ2lzdGVyUGFydGlhbCgndGVzdCcsIGBZb3Uge3txdWFsaXR5fX1gKTtcbiAgcmVuZGVyKHRlbXBsYXRlLCB7IG5hbWU6ICd0ZXN0JywgcXVhbGl0aWVzOiBbJ3NtYWh0JywgJ2xveWFsJ10gfSk7XG5cbiAgZXF1YWxUb2tlbnMocm9vdCwgYFlvdSBzbWFodC4gWW91IGxveWFsLiBgKTtcbiAgcmVyZW5kZXIoeyBuYW1lOiAndGVzdCcsIHF1YWxpdGllczogWydzbWFodCcsICdsb3lhbCddIH0sIHsgYXNzZXJ0U3RhYmxlOiB0cnVlIH0pO1xuICBlcXVhbFRva2Vucyhyb290LCBgWW91IHNtYWh0LiBZb3UgbG95YWwuIGApO1xufSk7XG5cblFVbml0LnRlc3QoJ3BhcnRpYWwgd2l0aG91dCBhcmd1bWVudHMgdGhyb3dzJywgYXNzZXJ0ID0+IHtcbiAgYXNzZXJ0LnRocm93cyhmdW5jdGlvbigpIHtcbiAgICBjb21waWxlKGBCZWZvcmUge3twYXJ0aWFsfX0gQWZ0ZXJgKTtcbiAgfSwgc3RyaXBgUGFydGlhbCBmb3VuZCB3aXRoIG5vIGFyZ3VtZW50cy4gWW91IG11c3Qgc3BlY2lmeSBhIHRlbXBsYXRlIG5hbWUuYCk7XG59KTtcblxuUVVuaXQudGVzdCgncGFydGlhbCB3aXRoIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQgdGhyb3dzJywgYXNzZXJ0ID0+IHtcbiAgYXNzZXJ0LnRocm93cyhmdW5jdGlvbigpIHtcbiAgICBjb21waWxlKGBCZWZvcmUge3twYXJ0aWFsICd0dXJudCcgJ3VwJ319IEFmdGVyYCk7XG4gIH0sIHN0cmlwYFBhcnRpYWwgZm91bmQgd2l0aCBtb3JlIHRoYW4gb25lIGFyZ3VtZW50LiBZb3UgY2FuIG9ubHkgc3BlY2lmeSBhIHNpbmdsZSB0ZW1wbGF0ZS5gKTtcbn0pO1xuIl19