"use strict";
var value_1 = require("../compiled/expressions/value");
var has_block_1 = require("../compiled/expressions/has-block");
var util_1 = require("@glimmer/util");
var lookups_1 = require("../compiled/expressions/lookups");
var helper_1 = require("../compiled/expressions/helper");
var concat_1 = require("../compiled/expressions/concat");
var args_1 = require("../compiled/expressions/args");
var has_block_2 = require("../compiled/expressions/has-block");
var function_1 = require("../compiled/expressions/function");
function debugCallback(context, get) {
    console.info('Use `context`, and `get(<path>)` to debug this template.');
    /* tslint:disable */
    debugger;
    /* tslint:enable */
    return { context: context, get: get };
}
function getter(vm, builder) {
    return function (path) {
        var parts = path.split('.');
        if (parts[0] === 'this') {
            parts[0] = null;
        }
        return compileRef(parts, builder).evaluate(vm);
    };
}
var callback = debugCallback;
// For testing purposes
function setDebuggerCallback(cb) {
    callback = cb;
}
exports.setDebuggerCallback = setDebuggerCallback;
function resetDebuggerCallback() {
    callback = debugCallback;
}
exports.resetDebuggerCallback = resetDebuggerCallback;
var Compilers = (function () {
    function Compilers() {
        this.names = util_1.dict();
        this.funcs = [];
    }
    Compilers.prototype.add = function (name, func) {
        this.funcs.push(func);
        this.names[name] = this.funcs.length - 1;
    };
    Compilers.prototype.compile = function (sexp, builder) {
        var name = sexp[0];
        var index = this.names[name];
        var func = this.funcs[index];
        util_1.assert(!!func, "expected an implementation for " + sexp[0]);
        return func(sexp, builder);
    };
    return Compilers;
}());
exports.Compilers = Compilers;
exports.STATEMENTS = new Compilers();
exports.STATEMENTS.add('text', function (sexp, builder) {
    builder.text(sexp[1]);
});
exports.STATEMENTS.add('comment', function (sexp, builder) {
    builder.comment(sexp[1]);
});
exports.STATEMENTS.add('close-element', function (_sexp, builder) {
    util_1.LOGGER.trace('close-element statement');
    builder.closeElement();
});
exports.STATEMENTS.add('flush-element', function (_sexp, builder) {
    builder.flushElement();
});
exports.STATEMENTS.add('modifier', function (sexp, builder) {
    var path = sexp[1], params = sexp[2], hash = sexp[3];
    var args = compileArgs(params, hash, builder);
    if (builder.env.hasModifier(path, builder.symbolTable)) {
        builder.modifier(path[0], args);
    }
    else {
        throw new Error("Compile Error " + path.join('.') + " is not a modifier: Helpers may not be used in the element form.");
    }
});
exports.STATEMENTS.add('static-attr', function (sexp, builder) {
    var name = sexp[1], value = sexp[2], namespace = sexp[3];
    builder.staticAttr(name, namespace, value);
});
exports.STATEMENTS.add('any-dynamic-attr', function (sexp, builder) {
    var name = sexp[1], value = sexp[2], namespace = sexp[3], trusting = sexp[4];
    builder.putValue(value);
    if (namespace) {
        builder.dynamicAttrNS(name, namespace, trusting);
    }
    else {
        builder.dynamicAttr(name, trusting);
    }
});
exports.STATEMENTS.add('open-element', function (sexp, builder) {
    util_1.LOGGER.trace('open-element statement');
    builder.openPrimitiveElement(sexp[1]);
});
exports.STATEMENTS.add('optimized-append', function (sexp, builder) {
    var value = sexp[1], trustingMorph = sexp[2];
    var inlines = builder.env.macros().inlines;
    var returned = inlines.compile(sexp, builder) || value;
    if (returned === true)
        return;
    builder.putValue(returned[1]);
    if (trustingMorph) {
        builder.trustingAppend();
    }
    else {
        builder.cautiousAppend();
    }
});
exports.STATEMENTS.add('unoptimized-append', function (sexp, builder) {
    var value = sexp[1], trustingMorph = sexp[2];
    var inlines = builder.env.macros().inlines;
    var returned = inlines.compile(sexp, builder) || value;
    if (returned === true)
        return;
    if (trustingMorph) {
        builder.guardedTrustingAppend(returned[1]);
    }
    else {
        builder.guardedCautiousAppend(returned[1]);
    }
});
exports.STATEMENTS.add('nested-block', function (sexp, builder) {
    var blocks = builder.env.macros().blocks;
    blocks.compile(sexp, builder);
});
exports.STATEMENTS.add('scanned-block', function (sexp, builder) {
    var path = sexp[1], params = sexp[2], hash = sexp[3], template = sexp[4], inverse = sexp[5];
    var templateBlock = template && template.scan();
    var inverseBlock = inverse && inverse.scan();
    var blocks = builder.env.macros().blocks;
    blocks.compile(['nested-block', path, params, hash, templateBlock, inverseBlock], builder);
});
exports.STATEMENTS.add('scanned-component', function (sexp, builder) {
    var tag = sexp[1], attrs = sexp[2], rawArgs = sexp[3], rawBlock = sexp[4];
    var block = rawBlock && rawBlock.scan();
    var args = compileBlockArgs(null, rawArgs, { default: block, inverse: null }, builder);
    var definition = builder.env.getComponentDefinition([tag], builder.symbolTable);
    builder.putComponentDefinition(definition);
    builder.openComponent(args, attrs.scan());
    builder.closeComponent();
});
exports.STATEMENTS.add('static-partial', function (sexp, builder) {
    var name = sexp[1];
    if (!builder.env.hasPartial(name, builder.symbolTable)) {
        throw new Error("Compile Error: Could not find a partial named \"" + name + "\"");
    }
    var definition = builder.env.lookupPartial(name, builder.symbolTable);
    builder.putPartialDefinition(definition);
    builder.evaluatePartial();
});
exports.STATEMENTS.add('dynamic-partial', function (sexp, builder) {
    var name = sexp[1];
    builder.startLabels();
    builder.putValue(name);
    builder.test('simple');
    builder.enter('BEGIN', 'END');
    builder.label('BEGIN');
    builder.jumpUnless('END');
    builder.putDynamicPartialDefinition();
    builder.evaluatePartial();
    builder.label('END');
    builder.exit();
    builder.stopLabels();
});
exports.STATEMENTS.add('yield', function (sexp, builder) {
    var to = sexp[1], params = sexp[2];
    var args = compileArgs(params, null, builder);
    builder.yield(args, to);
});
exports.STATEMENTS.add('debugger', function (sexp, builder) {
    builder.putValue(['function', function (vm) {
            var context = vm.getSelf().value();
            var get = function (path) {
                return getter(vm, builder)(path).value();
            };
            callback(context, get);
        }]);
    return sexp;
});
var EXPRESSIONS = new Compilers();
function expr(expression, builder) {
    if (Array.isArray(expression)) {
        return EXPRESSIONS.compile(expression, builder);
    }
    else {
        return new value_1.default(expression);
    }
}
exports.expr = expr;
EXPRESSIONS.add('unknown', function (sexp, builder) {
    var path = sexp[1];
    if (builder.env.hasHelper(path, builder.symbolTable)) {
        return new helper_1.default(path, builder.env.lookupHelper(path, builder.symbolTable), args_1.CompiledArgs.empty(), builder.symbolTable);
    }
    else {
        return compileRef(path, builder);
    }
});
EXPRESSIONS.add('concat', (function (sexp, builder) {
    var params = sexp[1].map(function (p) { return expr(p, builder); });
    return new concat_1.default(params);
}));
EXPRESSIONS.add('function', function (sexp, builder) {
    return new function_1.CompiledFunctionExpression(sexp[1], builder.symbolTable);
});
EXPRESSIONS.add('helper', function (sexp, builder) {
    var env = builder.env, symbolTable = builder.symbolTable;
    var path = sexp[1], params = sexp[2], hash = sexp[3];
    if (env.hasHelper(path, symbolTable)) {
        var args = compileArgs(params, hash, builder);
        return new helper_1.default(path, env.lookupHelper(path, symbolTable), args, symbolTable);
    }
    else {
        throw new Error("Compile Error: " + path.join('.') + " is not a helper");
    }
});
EXPRESSIONS.add('get', function (sexp, builder) {
    return compileRef(sexp[1], builder);
});
EXPRESSIONS.add('undefined', function (_sexp, _builder) {
    return new value_1.default(undefined);
});
EXPRESSIONS.add('arg', function (sexp, builder) {
    var parts = sexp[1];
    var head = parts[0];
    var named, partial;
    if (named = builder.symbolTable.getSymbol('named', head)) {
        var path = parts.slice(1);
        var inner = new lookups_1.CompiledSymbol(named, head);
        return lookups_1.default.create(inner, path);
    }
    else if (partial = builder.symbolTable.getPartialArgs()) {
        var path = parts.slice(1);
        var inner = new lookups_1.CompiledInPartialName(partial, head);
        return lookups_1.default.create(inner, path);
    }
    else {
        throw new Error("[BUG] @" + parts.join('.') + " is not a valid lookup path.");
    }
});
EXPRESSIONS.add('has-block', function (sexp, builder) {
    var blockName = sexp[1];
    var yields, partial;
    if (yields = builder.symbolTable.getSymbol('yields', blockName)) {
        var inner = new has_block_2.CompiledGetBlockBySymbol(yields, blockName);
        return new has_block_1.default(inner);
    }
    else if (partial = builder.symbolTable.getPartialArgs()) {
        var inner = new has_block_2.CompiledInPartialGetBlock(partial, blockName);
        return new has_block_1.default(inner);
    }
    else {
        throw new Error('[BUG] ${blockName} is not a valid block name.');
    }
});
EXPRESSIONS.add('has-block-params', function (sexp, builder) {
    var blockName = sexp[1];
    var yields, partial;
    if (yields = builder.symbolTable.getSymbol('yields', blockName)) {
        var inner = new has_block_2.CompiledGetBlockBySymbol(yields, blockName);
        return new has_block_1.CompiledHasBlockParams(inner);
    }
    else if (partial = builder.symbolTable.getPartialArgs()) {
        var inner = new has_block_2.CompiledInPartialGetBlock(partial, blockName);
        return new has_block_1.CompiledHasBlockParams(inner);
    }
    else {
        throw new Error('[BUG] ${blockName} is not a valid block name.');
    }
});
function compileArgs(params, hash, builder) {
    var compiledParams = compileParams(params, builder);
    var compiledHash = compileHash(hash, builder);
    return args_1.CompiledArgs.create(compiledParams, compiledHash, args_1.EMPTY_BLOCKS);
}
exports.compileArgs = compileArgs;
function compileBlockArgs(params, hash, blocks, builder) {
    var compiledParams = compileParams(params, builder);
    var compiledHash = compileHash(hash, builder);
    return args_1.CompiledArgs.create(compiledParams, compiledHash, blocks);
}
exports.compileBlockArgs = compileBlockArgs;
function compileBaselineArgs(args, builder) {
    var params = args[0], hash = args[1], _default = args[2], inverse = args[3];
    return args_1.CompiledArgs.create(compileParams(params, builder), compileHash(hash, builder), { default: _default, inverse: inverse });
}
exports.compileBaselineArgs = compileBaselineArgs;
function compileParams(params, builder) {
    if (!params || params.length === 0)
        return args_1.COMPILED_EMPTY_POSITIONAL_ARGS;
    var compiled = params.map(function (p) { return expr(p, builder); });
    return args_1.CompiledPositionalArgs.create(compiled);
}
function compileHash(hash, builder) {
    if (!hash)
        return args_1.COMPILED_EMPTY_NAMED_ARGS;
    var keys = hash[0], values = hash[1];
    if (keys.length === 0)
        return args_1.COMPILED_EMPTY_NAMED_ARGS;
    var compiled = values.map(function (p) { return expr(p, builder); });
    return new args_1.CompiledNamedArgs(keys, compiled);
}
function compileRef(parts, builder) {
    var head = parts[0];
    var local;
    if (head === null) {
        var inner = new lookups_1.CompiledSelf();
        var path = parts.slice(1);
        return lookups_1.default.create(inner, path);
    }
    else if (local = builder.symbolTable.getSymbol('local', head)) {
        var path = parts.slice(1);
        var inner = new lookups_1.CompiledSymbol(local, head);
        return lookups_1.default.create(inner, path);
    }
    else {
        var inner = new lookups_1.CompiledSelf();
        return lookups_1.default.create(inner, parts);
    }
}
var Blocks = (function () {
    function Blocks() {
        this.names = util_1.dict();
        this.funcs = [];
    }
    Blocks.prototype.add = function (name, func) {
        this.funcs.push(func);
        this.names[name] = this.funcs.length - 1;
    };
    Blocks.prototype.addMissing = function (func) {
        this.missing = func;
    };
    Blocks.prototype.compile = function (sexp, builder) {
        // assert(sexp[1].length === 1, 'paths in blocks are not supported');
        var name = sexp[1][0];
        var index = this.names[name];
        if (index === undefined) {
            util_1.assert(!!this.missing, name + " not found, and no catch-all block handler was registered");
            var func = this.missing;
            var handled = func(sexp, builder);
            util_1.assert(!!handled, name + " not found, and the catch-all block handler didn't handle it");
        }
        else {
            var func = this.funcs[index];
            func(sexp, builder);
        }
    };
    return Blocks;
}());
exports.Blocks = Blocks;
exports.BLOCKS = new Blocks();
var Inlines = (function () {
    function Inlines() {
        this.names = util_1.dict();
        this.funcs = [];
    }
    Inlines.prototype.add = function (name, func) {
        this.funcs.push(func);
        this.names[name] = this.funcs.length - 1;
    };
    Inlines.prototype.addMissing = function (func) {
        this.missing = func;
    };
    Inlines.prototype.compile = function (sexp, builder) {
        var value = sexp[1];
        // TODO: Fix this so that expression macros can return
        // things like components, so that {{component foo}}
        // is the same as {{(component foo)}}
        if (!Array.isArray(value))
            return ['expr', value];
        var path;
        var params;
        var hash;
        if (value[0] === 'helper') {
            path = value[1];
            params = value[2];
            hash = value[3];
        }
        else if (value[0] === 'unknown') {
            path = value[1];
            params = hash = null;
        }
        else {
            return ['expr', value];
        }
        if (path.length > 1 && !params && !hash) {
            return ['expr', value];
        }
        var name = path[0];
        var index = this.names[name];
        if (index === undefined && this.missing) {
            var func = this.missing;
            var returned = func(path, params, hash, builder);
            return returned === false ? ['expr', value] : returned;
        }
        else if (index !== undefined) {
            var func = this.funcs[index];
            var returned = func(path, params, hash, builder);
            return returned === false ? ['expr', value] : returned;
        }
        else {
            return ['expr', value];
        }
    };
    return Inlines;
}());
exports.Inlines = Inlines;
exports.INLINES = new Inlines();
populateBuiltins(exports.BLOCKS, exports.INLINES);
function populateBuiltins(blocks, inlines) {
    if (blocks === void 0) { blocks = new Blocks(); }
    if (inlines === void 0) { inlines = new Inlines(); }
    blocks.add('if', function (sexp, builder) {
        //        PutArgs
        //        Test(Environment)
        //        Enter(BEGIN, END)
        // BEGIN: Noop
        //        JumpUnless(ELSE)
        //        Evaluate(default)
        //        Jump(END)
        // ELSE:  Noop
        //        Evalulate(inverse)
        // END:   Noop
        //        Exit
        var params = sexp[2], hash = sexp[3], _default = sexp[4], inverse = sexp[5];
        var args = compileArgs(params, hash, builder);
        builder.putArgs(args);
        builder.test('environment');
        builder.labelled(null, function (b) {
            if (_default && inverse) {
                b.jumpUnless('ELSE');
                b.evaluate(_default);
                b.jump('END');
                b.label('ELSE');
                b.evaluate(inverse);
            }
            else if (_default) {
                b.jumpUnless('END');
                b.evaluate(_default);
            }
            else {
                throw util_1.unreachable();
            }
        });
    });
    blocks.add('unless', function (sexp, builder) {
        //        PutArgs
        //        Test(Environment)
        //        Enter(BEGIN, END)
        // BEGIN: Noop
        //        JumpUnless(ELSE)
        //        Evaluate(default)
        //        Jump(END)
        // ELSE:  Noop
        //        Evalulate(inverse)
        // END:   Noop
        //        Exit
        var params = sexp[2], hash = sexp[3], _default = sexp[4], inverse = sexp[5];
        var args = compileArgs(params, hash, builder);
        builder.putArgs(args);
        builder.test('environment');
        builder.labelled(null, function (b) {
            if (_default && inverse) {
                b.jumpIf('ELSE');
                b.evaluate(_default);
                b.jump('END');
                b.label('ELSE');
                b.evaluate(inverse);
            }
            else if (_default) {
                b.jumpIf('END');
                b.evaluate(_default);
            }
            else {
                throw util_1.unreachable();
            }
        });
    });
    blocks.add('with', function (sexp, builder) {
        //        PutArgs
        //        Test(Environment)
        //        Enter(BEGIN, END)
        // BEGIN: Noop
        //        JumpUnless(ELSE)
        //        Evaluate(default)
        //        Jump(END)
        // ELSE:  Noop
        //        Evalulate(inverse)
        // END:   Noop
        //        Exit
        var params = sexp[2], hash = sexp[3], _default = sexp[4], inverse = sexp[5];
        var args = compileArgs(params, hash, builder);
        builder.putArgs(args);
        builder.test('environment');
        builder.labelled(null, function (b) {
            if (_default && inverse) {
                b.jumpUnless('ELSE');
                b.evaluate(_default);
                b.jump('END');
                b.label('ELSE');
                b.evaluate(inverse);
            }
            else if (_default) {
                b.jumpUnless('END');
                b.evaluate(_default);
            }
            else {
                throw util_1.unreachable();
            }
        });
    });
    blocks.add('each', function (sexp, builder) {
        //         Enter(BEGIN, END)
        // BEGIN:  Noop
        //         PutArgs
        //         PutIterable
        //         JumpUnless(ELSE)
        //         EnterList(BEGIN2, END2)
        // ITER:   Noop
        //         NextIter(BREAK)
        //         EnterWithKey(BEGIN2, END2)
        // BEGIN2: Noop
        //         PushChildScope
        //         Evaluate(default)
        //         PopScope
        // END2:   Noop
        //         Exit
        //         Jump(ITER)
        // BREAK:  Noop
        //         ExitList
        //         Jump(END)
        // ELSE:   Noop
        //         Evalulate(inverse)
        // END:    Noop
        //         Exit
        var params = sexp[2], hash = sexp[3], _default = sexp[4], inverse = sexp[5];
        var args = compileArgs(params, hash, builder);
        builder.labelled(args, function (b) {
            b.putIterator();
            if (inverse) {
                b.jumpUnless('ELSE');
            }
            else {
                b.jumpUnless('END');
            }
            b.iter(function (b) {
                b.evaluate(util_1.unwrap(_default));
            });
            if (inverse) {
                b.jump('END');
                b.label('ELSE');
                b.evaluate(inverse);
            }
        });
    });
    return { blocks: blocks, inlines: inlines };
}
exports.populateBuiltins = populateBuiltins;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVuY3Rpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQGdsaW1tZXIvcnVudGltZS9saWIvc3ludGF4L2Z1bmN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBR0EsdURBQTBEO0FBQzFELCtEQUE2RjtBQUU3RixzQ0FBMEY7QUFDMUYsMkRBSXlDO0FBQ3pDLHlEQUE0RDtBQUM1RCx5REFBNEQ7QUFDNUQscURBUXNDO0FBQ3RDLCtEQUcyQztBQUkzQyw2REFBOEU7QUFlOUUsdUJBQXVCLE9BQWUsRUFBRSxHQUFhO0lBQ25ELE9BQU8sQ0FBQyxJQUFJLENBQUMsMERBQTBELENBQUMsQ0FBQztJQUN6RSxvQkFBb0I7SUFDcEIsUUFBUSxDQUFDO0lBQ1QsbUJBQW1CO0lBQ25CLE1BQU0sQ0FBQyxFQUFFLE9BQU8sU0FBQSxFQUFFLEdBQUcsS0FBQSxFQUFFLENBQUM7QUFDMUIsQ0FBQztBQUVELGdCQUFnQixFQUFNLEVBQUUsT0FBc0I7SUFDNUMsTUFBTSxDQUFDLFVBQUMsSUFBWTtRQUNsQixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBUSxDQUFDO1FBRW5DLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDbEIsQ0FBQztRQUVELE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFjLENBQUMsQ0FBQztJQUM3RCxDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsSUFBSSxRQUFRLEdBQUcsYUFBYSxDQUFDO0FBRTdCLHVCQUF1QjtBQUN2Qiw2QkFBb0MsRUFBaUI7SUFDbkQsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNoQixDQUFDO0FBRkQsa0RBRUM7QUFFRDtJQUNFLFFBQVEsR0FBRyxhQUFhLENBQUM7QUFDM0Is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dEIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBRWhCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ1osQ0FBQyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN2QixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN0QixDQUFDO1lBRUQsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFBLENBQUM7Z0JBQ04sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUMvQixDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ1osQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDZCxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNoQixDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RCLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxDQUFDLEVBQUUsTUFBTSxRQUFBLEVBQUUsT0FBTyxTQUFBLEVBQUUsQ0FBQztBQUM3QixDQUFDO0FBNUpELDRDQTRKQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFdpcmVGb3JtYXQgZnJvbSAnQGdsaW1tZXIvd2lyZS1mb3JtYXQnO1xyXG5pbXBvcnQgT3Bjb2RlQnVpbGRlciBmcm9tICcuLi9jb21waWxlZC9vcGNvZGVzL2J1aWxkZXInO1xyXG5pbXBvcnQgeyBDb21waWxlZEV4cHJlc3Npb24gfSBmcm9tICcuLi9jb21waWxlZC9leHByZXNzaW9ucyc7XHJcbmltcG9ydCBDb21waWxlZFZhbHVlIGZyb20gJy4uL2NvbXBpbGVkL2V4cHJlc3Npb25zL3ZhbHVlJztcclxuaW1wb3J0IENvbXBpbGVkSGFzQmxvY2ssIHsgQ29tcGlsZWRIYXNCbG9ja1BhcmFtcyB9IGZyb20gJy4uL2NvbXBpbGVkL2V4cHJlc3Npb25zL2hhcy1ibG9jayc7XHJcbmltcG9ydCB7IEJhc2VsaW5lU3ludGF4IH0gZnJvbSAnLi4vc2Nhbm5lcic7XHJcbmltcG9ydCB7IExPR0dFUiwgT3BhcXVlLCBPcHRpb24sIGRpY3QsIGFzc2VydCwgdW53cmFwLCB1bnJlYWNoYWJsZSB9IGZyb20gJ0BnbGltbWVyL3V0aWwnO1xyXG5pbXBvcnQgQ29tcGlsZWRMb29rdXAsIHtcclxuICBDb21waWxlZFNlbGYsXHJcbiAgQ29tcGlsZWRTeW1ib2wsXHJcbiAgQ29tcGlsZWRJblBhcnRpYWxOYW1lXHJcbn0gZnJvbSAnLi4vY29tcGlsZWQvZXhwcmVzc2lvbnMvbG9va3Vwcyc7XHJcbmltcG9ydCBDb21waWxlZEhlbHBlciBmcm9tICcuLi9jb21waWxlZC9leHByZXNzaW9ucy9oZWxwZXInO1xyXG5pbXBvcnQgQ29tcGlsZWRDb25jYXQgZnJvbSAnLi4vY29tcGlsZWQvZXhwcmVzc2lvbnMvY29uY2F0JztcclxuaW1wb3J0IHtcclxuICBDT01QSUxFRF9FTVBUWV9QT1NJVElPTkFMX0FSR1MsXHJcbiAgQ09NUElMRURfRU1QVFlfTkFNRURfQVJHUyxcclxuICBFTVBUWV9CTE9DS1MsXHJcbiAgQ29tcGlsZWRBcmdzLFxyXG4gIENvbXBpbGVkUG9zaXRpb25hbEFyZ3MsXHJcbiAgQ29tcGlsZWROYW1lZEFyZ3MsXHJcbiAgQmxvY2tzIGFzIEJsb2Nrc1N5bnRheFxyXG59IGZyb20gJy4uL2NvbXBpbGVkL2V4cHJlc3Npb25zL2FyZ3MnO1xyXG5pbXBvcnQge1xyXG4gIENvbXBpbGVkR2V0QmxvY2tCeVN5bWJvbCxcclxuICBDb21waWxlZEluUGFydGlhbEdldEJsb2NrXHJcbn0gZnJvbSAnLi4vY29tcGlsZWQvZXhwcmVzc2lvbnMvaGFzLWJsb2NrJztcclxuaW1wb3J0IHsgUHVibGljVk0gYXMgVk0gfSBmcm9tICcuLi92bSc7XHJcbmltcG9ydCBBcHBlbmRWTSBmcm9tICcuLi92bS9hcHBlbmQnO1xyXG5cclxuaW1wb3J0IHsgQ29tcGlsZWRGdW5jdGlvbkV4cHJlc3Npb24gfSBmcm9tICcuLi9jb21waWxlZC9leHByZXNzaW9ucy9mdW5jdGlvbic7XHJcblxyXG5leHBvcnQgdHlwZSBTZXhwRXhwcmVzc2lvbiA9IEJhc2VsaW5lU3ludGF4LkFueUV4cHJlc3Npb24gJiB7IDA6IHN0cmluZyB9O1xyXG5leHBvcnQgdHlwZSBTeW50YXggPSBTZXhwRXhwcmVzc2lvbiB8IEJhc2VsaW5lU3ludGF4LkFueVN0YXRlbWVudDtcclxuZXhwb3J0IHR5cGUgQ29tcGlsZXJGdW5jdGlvbjxUIGV4dGVuZHMgU3ludGF4LCBVPiA9ICgoc2V4cDogVCwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcikgPT4gVSk7XHJcbmV4cG9ydCB0eXBlIE5hbWUgPSBCYXNlbGluZVN5bnRheC5BbnlTdGF0ZW1lbnRbMF07XHJcbmV4cG9ydCB0eXBlIGRlYnVnR2V0ID0gKChwYXRoOiBzdHJpbmcpID0+IGFueSk7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERlYnVnQ29udGV4dCB7XHJcbiAgY29udGV4dDogT3BhcXVlO1xyXG4gIGdldDogZGVidWdHZXQ7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIGRlYnVnQ2FsbGJhY2sgPSAoKGNvbnRleHQ6IE9wYXF1ZSwgZ2V0OiBkZWJ1Z0dldCkgPT4gRGVidWdDb250ZXh0KTtcclxuXHJcbmZ1bmN0aW9uIGRlYnVnQ2FsbGJhY2soY29udGV4dDogT3BhcXVlLCBnZXQ6IGRlYnVnR2V0KSB7XHJcbiAgY29uc29sZS5pbmZvKCdVc2UgYGNvbnRleHRgLCBhbmQgYGdldCg8cGF0aD4pYCB0byBkZWJ1ZyB0aGlzIHRlbXBsYXRlLicpO1xyXG4gIC8qIHRzbGludDpkaXNhYmxlICovXHJcbiAgZGVidWdnZXI7XHJcbiAgLyogdHNsaW50OmVuYWJsZSAqL1xyXG4gIHJldHVybiB7IGNvbnRleHQsIGdldCB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXR0ZXIodm06IFZNLCBidWlsZGVyOiBPcGNvZGVCdWlsZGVyKSB7XHJcbiAgcmV0dXJuIChwYXRoOiBzdHJpbmcpID0+IHtcclxuICAgIGxldCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKSBhcyBhbnk7XHJcblxyXG4gICAgaWYgKHBhcnRzWzBdID09PSAndGhpcycpIHtcclxuICAgICAgcGFydHNbMF0gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb21waWxlUmVmKHBhcnRzLCBidWlsZGVyKS5ldmFsdWF0ZSh2bSBhcyBBcHBlbmRWTSk7XHJcbiAgfTtcclxufVxyXG5cclxubGV0IGNhbGxiYWNrID0gZGVidWdDYWxsYmFjaztcclxuXHJcbi8vIEZvciB0ZXN0aW5nIHB1cnBvc2VzXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREZWJ1Z2dlckNhbGxiYWNrKGNiOiBkZWJ1Z0NhbGxiYWNrKSB7XHJcbiAgY2FsbGJhY2sgPSBjYjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RGVidWdnZXJDYWxsYmFjaygpIHtcclxuICBjYWxsYmFjayA9IGRlYnVnQ2FsbGJhY2s7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb21waWxlcnM8VCBleHRlbmRzIFN5bnRheCwgQ29tcGlsZVRvPiB7XHJcbiAgcHJpdmF0ZSBuYW1lcyA9IGRpY3Q8bnVtYmVyPigpO1xyXG4gIHByaXZhdGUgZnVuY3M6IENvbXBpbGVyRnVuY3Rpb248VCwgQ29tcGlsZVRvPltdID0gW107XHJcblxyXG4gIGFkZChuYW1lOiBzdHJpbmcsIGZ1bmM6IENvbXBpbGVyRnVuY3Rpb248VCwgQ29tcGlsZVRvPik6IHZvaWQge1xyXG4gICAgdGhpcy5mdW5jcy5wdXNoKGZ1bmMpO1xyXG4gICAgdGhpcy5uYW1lc1tuYW1lXSA9IHRoaXMuZnVuY3MubGVuZ3RoIC0gMTtcclxuICB9XHJcblxyXG4gIGNvbXBpbGUoc2V4cDogVCwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcik6IENvbXBpbGVUbyB7XHJcbiAgICBsZXQgbmFtZTogc3RyaW5nID0gc2V4cFswXTtcclxuICAgIGxldCBpbmRleCA9IHRoaXMubmFtZXNbbmFtZV07XHJcbiAgICBsZXQgZnVuYyA9IHRoaXMuZnVuY3NbaW5kZXhdO1xyXG4gICAgYXNzZXJ0KCEhZnVuYywgYGV4cGVjdGVkIGFuIGltcGxlbWVudGF0aW9uIGZvciAke3NleHBbMF19YCk7XHJcbiAgICByZXR1cm4gZnVuYyhzZXhwLCBidWlsZGVyKTtcclxuICB9XHJcbn1cclxuXHJcbmltcG9ydCBTID0gV2lyZUZvcm1hdC5TdGF0ZW1lbnRzO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNUQVRFTUVOVFMgPSBuZXcgQ29tcGlsZXJzPEJhc2VsaW5lU3ludGF4LkFueVN0YXRlbWVudCwgdm9pZD4oKTtcclxuXHJcblNUQVRFTUVOVFMuYWRkKCd0ZXh0JywgKHNleHA6IFMuVGV4dCwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcikgPT4ge1xyXG4gIGJ1aWxkZXIudGV4dChzZXhwWzFdKTtcclxufSk7XHJcblxyXG5TVEFURU1FTlRTLmFkZCgnY29tbWVudCcsIChzZXhwOiBTLkNvbW1lbnQsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuICBidWlsZGVyLmNvbW1lbnQoc2V4cFsxXSk7XHJcbn0pO1xyXG5cclxuU1RBVEVNRU5UUy5hZGQoJ2Nsb3NlLWVsZW1lbnQnLCAoX3NleHAsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuICBMT0dHRVIudHJhY2UoJ2Nsb3NlLWVsZW1lbnQgc3RhdGVtZW50Jyk7XHJcbiAgYnVpbGRlci5jbG9zZUVsZW1lbnQoKTtcclxufSk7XHJcblxyXG5TVEFURU1FTlRTLmFkZCgnZmx1c2gtZWxlbWVudCcsIChfc2V4cCwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcikgPT4ge1xyXG4gIGJ1aWxkZXIuZmx1c2hFbGVtZW50KCk7XHJcbn0pO1xyXG5cclxuU1RBVEVNRU5UUy5hZGQoJ21vZGlmaWVyJywgKHNleHA6IFMuTW9kaWZpZXIsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuICBsZXQgWywgcGF0aCwgcGFyYW1zLCBoYXNoXSA9IHNleHA7XHJcblxyXG4gIGxldCBhcmdzID0gY29tcGlsZUFyZ3MocGFyYW1zLCBoYXNoLCBidWlsZGVyKTtcclxuXHJcbiAgaWYgKGJ1aWxkZXIuZW52Lmhhc01vZGlmaWVyKHBhdGgsIGJ1aWxkZXIuc3ltYm9sVGFibGUpKSB7XHJcbiAgICBidWlsZGVyLm1vZGlmaWVyKHBhdGhbMF0sIGFyZ3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBpbGUgRXJyb3IgJHtwYXRoLmpvaW4oJy4nKX0gaXMgbm90IGEgbW9kaWZpZXI6IEhlbHBlcnMgbWF5IG5vdCBiZSB1c2VkIGluIHRoZSBlbGVtZW50IGZvcm0uYCk7XHJcbiAgfVxyXG59KTtcclxuXHJcblNUQVRFTUVOVFMuYWRkKCdzdGF0aWMtYXR0cicsIChzZXhwOiBTLlN0YXRpY0F0dHIsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuICBsZXQgWywgbmFtZSwgdmFsdWUsIG5hbWVzcGFjZV0gPSBzZXhwO1xyXG4gIGJ1aWxkZXIuc3RhdGljQXR0cihuYW1lLCBuYW1lc3BhY2UsIHZhbHVlIGFzIHN0cmluZyk7XHJcbn0pO1xyXG5cclxuU1RBVEVNRU5UUy5hZGQoJ2FueS1keW5hbWljLWF0dHInLCAoc2V4cDogQmFzZWxpbmVTeW50YXguQW55RHluYW1pY0F0dHIsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuICBsZXQgWywgbmFtZSwgdmFsdWUsIG5hbWVzcGFjZSwgdHJ1c3RpbmddID0gc2V4cDtcclxuXHJcbiAgYnVpbGRlci5wdXRWYWx1ZSh2YWx1ZSk7XHJcblxyXG4gIGlmIChuYW1lc3BhY2UpIHtcclxuICAgIGJ1aWxkZXIuZHluYW1pY0F0dHJOUyhuYW1lLCBuYW1lc3BhY2UsIHRydXN0aW5nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYnVpbGRlci5keW5hbWljQXR0cihuYW1lLCB0cnVzdGluZyk7XHJcbiAgfVxyXG59KTtcclxuXHJcblNUQVRFTUVOVFMuYWRkKCdvcGVuLWVsZW1lbnQnLCAoc2V4cDogQmFzZWxpbmVTeW50YXguT3BlblByaW1pdGl2ZUVsZW1lbnQsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuICBMT0dHRVIudHJhY2UoJ29wZW4tZWxlbWVudCBzdGF0ZW1lbnQnKTtcclxuICBidWlsZGVyLm9wZW5QcmltaXRpdmVFbGVtZW50KHNleHBbMV0pO1xyXG59KTtcclxuXHJcblNUQVRFTUVOVFMuYWRkKCdvcHRpbWl6ZWQtYXBwZW5kJywgKHNleHA6IEJhc2VsaW5lU3ludGF4Lk9wdGltaXplZEFwcGVuZCwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcikgPT4ge1xyXG4gIGxldCBbLCB2YWx1ZSwgdHJ1c3RpbmdNb3JwaF0gPSBzZXhwO1xyXG5cclxuICBsZXQgeyBpbmxpbmVzIH0gPSBidWlsZGVyLmVudi5tYWNyb3MoKTtcclxuICBsZXQgcmV0dXJuZWQgPSBpbmxpbmVzLmNvbXBpbGUoc2V4cCwgYnVpbGRlcikgfHwgdmFsdWU7XHJcblxyXG4gIGlmIChyZXR1cm5lZCA9PT0gdHJ1ZSkgcmV0dXJuO1xyXG5cclxuICBidWlsZGVyLnB1dFZhbHVlKHJldHVybmVkWzFdKTtcclxuXHJcbiAgaWYgKHRydXN0aW5nTW9ycGgpIHtcclxuICAgIGJ1aWxkZXIudHJ1c3RpbmdBcHBlbmQoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYnVpbGRlci5jYXV0aW91c0FwcGVuZCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5TVEFURU1FTlRTLmFkZCgndW5vcHRpbWl6ZWQtYXBwZW5kJywgKHNleHA6IEJhc2VsaW5lU3ludGF4LlVub3B0aW1pemVkQXBwZW5kLCBidWlsZGVyKSA9PiB7XHJcbiAgbGV0IFssIHZhbHVlLCB0cnVzdGluZ01vcnBoXSA9IHNleHA7XHJcbiAgbGV0IHsgaW5saW5lcyB9ID0gYnVpbGRlci5lbnYubWFjcm9zKCk7XHJcbiAgbGV0IHJldHVybmVkID0gaW5saW5lcy5jb21waWxlKHNleHAsIGJ1aWxkZXIpIHx8IHZhbHVlO1xyXG5cclxuICBpZiAocmV0dXJuZWQgPT09IHRydWUpIHJldHVybjtcclxuXHJcbiAgaWYgKHRydXN0aW5nTW9ycGgpIHtcclxuICAgIGJ1aWxkZXIuZ3VhcmRlZFRydXN0aW5nQXBwZW5kKHJldHVybmVkWzFdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYnVpbGRlci5ndWFyZGVkQ2F1dGlvdXNBcHBlbmQocmV0dXJuZWRbMV0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5TVEFURU1FTlRTLmFkZCgnbmVzdGVkLWJsb2NrJywgKHNleHA6IEJhc2VsaW5lU3ludGF4Lk5lc3RlZEJsb2NrLCBidWlsZGVyOiBPcGNvZGVCdWlsZGVyKSA9PiB7XHJcbiAgbGV0IHsgYmxvY2tzIH0gPSBidWlsZGVyLmVudi5tYWNyb3MoKTtcclxuICBibG9ja3MuY29tcGlsZShzZXhwLCBidWlsZGVyKTtcclxufSk7XHJcblxyXG5TVEFURU1FTlRTLmFkZCgnc2Nhbm5lZC1ibG9jaycsIChzZXhwOiBCYXNlbGluZVN5bnRheC5TY2FubmVkQmxvY2ssIGJ1aWxkZXIpID0+IHtcclxuICBsZXQgWywgcGF0aCwgcGFyYW1zLCBoYXNoLCB0ZW1wbGF0ZSwgaW52ZXJzZV0gPSBzZXhwO1xyXG5cclxuICBsZXQgdGVtcGxhdGVCbG9jayA9IHRlbXBsYXRlICYmIHRlbXBsYXRlLnNjYW4oKTtcclxuICBsZXQgaW52ZXJzZUJsb2NrID0gaW52ZXJzZSAmJiBpbnZlcnNlLnNjYW4oKTtcclxuXHJcbiAgbGV0IHsgYmxvY2tzIH0gPSBidWlsZGVyLmVudi5tYWNyb3MoKTtcclxuICBibG9ja3MuY29tcGlsZShbJ25lc3RlZC1ibG9jaycsIHBhdGgsIHBhcmFtcywgaGFzaCwgdGVtcGxhdGVCbG9jaywgaW52ZXJzZUJsb2NrXSwgYnVpbGRlcik7XHJcbn0pO1xyXG5cclxuU1RBVEVNRU5UUy5hZGQoJ3NjYW5uZWQtY29tcG9uZW50JywgKHNleHA6IEJhc2VsaW5lU3ludGF4LlNjYW5uZWRDb21wb25lbnQsIGJ1aWxkZXIpID0+IHtcclxuICBsZXQgWywgdGFnLCBhdHRycywgcmF3QXJncywgcmF3QmxvY2tdID0gc2V4cDtcclxuICBsZXQgYmxvY2sgPSByYXdCbG9jayAmJiByYXdCbG9jay5zY2FuKCk7XHJcblxyXG4gIGxldCBhcmdzID0gY29tcGlsZUJsb2NrQXJncyhudWxsLCByYXdBcmdzLCB7IGRlZmF1bHQ6IGJsb2NrLCBpbnZlcnNlOiBudWxsIH0sIGJ1aWxkZXIpO1xyXG5cclxuICBsZXQgZGVmaW5pdGlvbiA9IGJ1aWxkZXIuZW52LmdldENvbXBvbmVudERlZmluaXRpb24oW3RhZ10sIGJ1aWxkZXIuc3ltYm9sVGFibGUpO1xyXG5cclxuICBidWlsZGVyLnB1dENvbXBvbmVudERlZmluaXRpb24oZGVmaW5pdGlvbik7XHJcbiAgYnVpbGRlci5vcGVuQ29tcG9uZW50KGFyZ3MsIGF0dHJzLnNjYW4oKSk7XHJcbiAgYnVpbGRlci5jbG9zZUNvbXBvbmVudCgpO1xyXG59KTtcclxuXHJcblNUQVRFTUVOVFMuYWRkKCdzdGF0aWMtcGFydGlhbCcsIChzZXhwOiBCYXNlbGluZVN5bnRheC5TdGF0aWNQYXJ0aWFsLCBidWlsZGVyKSA9PiB7XHJcbiAgbGV0IFssIG5hbWVdID0gc2V4cDtcclxuXHJcbiAgaWYgKCFidWlsZGVyLmVudi5oYXNQYXJ0aWFsKG5hbWUsIGJ1aWxkZXIuc3ltYm9sVGFibGUpKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBpbGUgRXJyb3I6IENvdWxkIG5vdCBmaW5kIGEgcGFydGlhbCBuYW1lZCBcIiR7bmFtZX1cImApO1xyXG4gIH1cclxuXHJcbiAgbGV0IGRlZmluaXRpb24gPSBidWlsZGVyLmVudi5sb29rdXBQYXJ0aWFsKG5hbWUsIGJ1aWxkZXIuc3ltYm9sVGFibGUpO1xyXG5cclxuICBidWlsZGVyLnB1dFBhcnRpYWxEZWZpbml0aW9uKGRlZmluaXRpb24pO1xyXG4gIGJ1aWxkZXIuZXZhbHVhdGVQYXJ0aWFsKCk7XHJcbn0pO1xyXG5cclxuU1RBVEVNRU5UUy5hZGQoJ2R5bmFtaWMtcGFydGlhbCcsIChzZXhwOiBCYXNlbGluZVN5bnRheC5EeW5hbWljUGFydGlhbCwgYnVpbGRlcikgPT4ge1xyXG4gIGxldCBbLCBuYW1lXSA9IHNleHA7XHJcblxyXG4gICAgYnVpbGRlci5zdGFydExhYmVscygpO1xyXG5cclxuICAgIGJ1aWxkZXIucHV0VmFsdWUobmFtZSk7XHJcbiAgICBidWlsZGVyLnRlc3QoJ3NpbXBsZScpO1xyXG4gICAgYnVpbGRlci5lbnRlcignQkVHSU4nLCAnRU5EJyk7XHJcbiAgICBidWlsZGVyLmxhYmVsKCdCRUdJTicpO1xyXG4gICAgYnVpbGRlci5qdW1wVW5sZXNzKCdFTkQnKTtcclxuICAgIGJ1aWxkZXIucHV0RHluYW1pY1BhcnRpYWxEZWZpbml0aW9uKCk7XHJcbiAgICBidWlsZGVyLmV2YWx1YXRlUGFydGlhbCgpO1xyXG4gICAgYnVpbGRlci5sYWJlbCgnRU5EJyk7XHJcbiAgICBidWlsZGVyLmV4aXQoKTtcclxuXHJcbiAgICBidWlsZGVyLnN0b3BMYWJlbHMoKTtcclxufSk7XHJcblxyXG5TVEFURU1FTlRTLmFkZCgneWllbGQnLCBmdW5jdGlvbih0aGlzOiB1bmRlZmluZWQsIHNleHA6IFdpcmVGb3JtYXQuU3RhdGVtZW50cy5ZaWVsZCwgYnVpbGRlcikge1xyXG4gIGxldCBbLCB0bywgcGFyYW1zXSA9IHNleHA7XHJcblxyXG4gIGxldCBhcmdzID0gY29tcGlsZUFyZ3MocGFyYW1zLCBudWxsLCBidWlsZGVyKTtcclxuICBidWlsZGVyLnlpZWxkKGFyZ3MsIHRvKTtcclxufSk7XHJcblxyXG5TVEFURU1FTlRTLmFkZCgnZGVidWdnZXInLCAoc2V4cDogQmFzZWxpbmVTeW50YXguRGVidWdnZXIsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuXHJcbiAgYnVpbGRlci5wdXRWYWx1ZShbJ2Z1bmN0aW9uJywgKHZtOiBWTSkgPT4ge1xyXG4gICAgbGV0IGNvbnRleHQgPSB2bS5nZXRTZWxmKCkudmFsdWUoKTtcclxuICAgIGxldCBnZXQgPSAocGF0aDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHJldHVybiBnZXR0ZXIodm0sIGJ1aWxkZXIpKHBhdGgpLnZhbHVlKCk7XHJcbiAgICB9O1xyXG4gICAgY2FsbGJhY2soY29udGV4dCwgZ2V0KTtcclxuICB9XSk7XHJcblxyXG4gIHJldHVybiBzZXhwO1xyXG59KTtcclxuXHJcbmxldCBFWFBSRVNTSU9OUyA9IG5ldyBDb21waWxlcnM8U2V4cEV4cHJlc3Npb24sIENvbXBpbGVkRXhwcmVzc2lvbjxPcGFxdWU+PigpO1xyXG5cclxuaW1wb3J0IEUgPSBXaXJlRm9ybWF0LkV4cHJlc3Npb25zO1xyXG5pbXBvcnQgQyA9IFdpcmVGb3JtYXQuQ29yZTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBleHByKGV4cHJlc3Npb246IEJhc2VsaW5lU3ludGF4LkFueUV4cHJlc3Npb24sIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpOiBDb21waWxlZEV4cHJlc3Npb248T3BhcXVlPiB7XHJcbiAgaWYgKEFycmF5LmlzQXJyYXkoZXhwcmVzc2lvbikpIHtcclxuICAgIHJldHVybiBFWFBSRVNTSU9OUy5jb21waWxlKGV4cHJlc3Npb24sIGJ1aWxkZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gbmV3IENvbXBpbGVkVmFsdWUoZXhwcmVzc2lvbik7XHJcbiAgfVxyXG59XHJcblxyXG5FWFBSRVNTSU9OUy5hZGQoJ3Vua25vd24nLCAoc2V4cDogRS5Vbmtub3duLCBidWlsZGVyOiBPcGNvZGVCdWlsZGVyKSA9PiB7XHJcbiAgbGV0IHBhdGggPSBzZXhwWzFdO1xyXG5cclxuICBpZiAoYnVpbGRlci5lbnYuaGFzSGVscGVyKHBhdGgsIGJ1aWxkZXIuc3ltYm9sVGFibGUpKSB7XHJcbiAgICByZXR1cm4gbmV3IENvbXBpbGVkSGVscGVyKHBhdGgsIGJ1aWxkZXIuZW52Lmxvb2t1cEhlbHBlcihwYXRoLCBidWlsZGVyLnN5bWJvbFRhYmxlKSwgQ29tcGlsZWRBcmdzLmVtcHR5KCksIGJ1aWxkZXIuc3ltYm9sVGFibGUpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gY29tcGlsZVJlZihwYXRoLCBidWlsZGVyKTtcclxuICB9XHJcbn0pO1xyXG5cclxuRVhQUkVTU0lPTlMuYWRkKCdjb25jYXQnLCAoKHNleHA6IEUuQ29uY2F0LCBidWlsZGVyOiBPcGNvZGVCdWlsZGVyKSA9PiB7XHJcbiAgbGV0IHBhcmFtcyA9IHNleHBbMV0ubWFwKHAgPT4gZXhwcihwLCBidWlsZGVyKSk7XHJcbiAgcmV0dXJuIG5ldyBDb21waWxlZENvbmNhdChwYXJhbXMpO1xyXG59KSBhcyBhbnkpO1xyXG5cclxuRVhQUkVTU0lPTlMuYWRkKCdmdW5jdGlvbicsIChzZXhwOiBCYXNlbGluZVN5bnRheC5GdW5jdGlvbkV4cHJlc3Npb24sIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuICByZXR1cm4gbmV3IENvbXBpbGVkRnVuY3Rpb25FeHByZXNzaW9uKHNleHBbMV0sIGJ1aWxkZXIuc3ltYm9sVGFibGUpO1xyXG59KTtcclxuXHJcbkVYUFJFU1NJT05TLmFkZCgnaGVscGVyJywgKHNleHA6IEUuSGVscGVyLCBidWlsZGVyOiBPcGNvZGVCdWlsZGVyKSA9PiB7XHJcbiAgbGV0IHsgZW52LCBzeW1ib2xUYWJsZSB9ID0gYnVpbGRlcjtcclxuICBsZXQgWywgcGF0aCwgcGFyYW1zLCBoYXNoXSA9IHNleHA7XHJcblxyXG4gIGlmIChlbnYuaGFzSGVscGVyKHBhdGgsIHN5bWJvbFRhYmxlKSkge1xyXG4gICAgbGV0IGFyZ3MgPSBjb21waWxlQXJncyhwYXJhbXMsIGhhc2gsIGJ1aWxkZXIpO1xyXG4gICAgcmV0dXJuIG5ldyBDb21waWxlZEhlbHBlcihwYXRoLCBlbnYubG9va3VwSGVscGVyKHBhdGgsIHN5bWJvbFRhYmxlKSwgYXJncywgc3ltYm9sVGFibGUpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBpbGUgRXJyb3I6ICR7cGF0aC5qb2luKCcuJyl9IGlzIG5vdCBhIGhlbHBlcmApO1xyXG4gIH1cclxufSk7XHJcblxyXG5FWFBSRVNTSU9OUy5hZGQoJ2dldCcsIChzZXhwOiBFLkdldCwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcikgPT4ge1xyXG4gIHJldHVybiBjb21waWxlUmVmKHNleHBbMV0sIGJ1aWxkZXIpO1xyXG59KTtcclxuXHJcbkVYUFJFU1NJT05TLmFkZCgndW5kZWZpbmVkJywgKF9zZXhwLCBfYnVpbGRlcikgPT4ge1xyXG4gIHJldHVybiBuZXcgQ29tcGlsZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG59KTtcclxuXHJcbkVYUFJFU1NJT05TLmFkZCgnYXJnJywgKHNleHA6IEUuQXJnLCBidWlsZGVyOiBPcGNvZGVCdWlsZGVyKSA9PiB7XHJcbiAgbGV0IFssIHBhcnRzXSA9IHNleHA7XHJcbiAgbGV0IGhlYWQgPSBwYXJ0c1swXTtcclxuICBsZXQgbmFtZWQ6IE9wdGlvbjxudW1iZXI+LCBwYXJ0aWFsOiBPcHRpb248bnVtYmVyPjtcclxuXHJcbiAgaWYgKG5hbWVkID0gYnVpbGRlci5zeW1ib2xUYWJsZS5nZXRTeW1ib2woJ25hbWVkJywgaGVhZCkpIHtcclxuICAgIGxldCBwYXRoID0gcGFydHMuc2xpY2UoMSk7XHJcbiAgICBsZXQgaW5uZXIgPSBuZXcgQ29tcGlsZWRTeW1ib2wobmFtZWQsIGhlYWQpO1xyXG4gICAgcmV0dXJuIENvbXBpbGVkTG9va3VwLmNyZWF0ZShpbm5lciwgcGF0aCk7XHJcbiAgfSBlbHNlIGlmIChwYXJ0aWFsID0gYnVpbGRlci5zeW1ib2xUYWJsZS5nZXRQYXJ0aWFsQXJncygpKSB7XHJcbiAgICBsZXQgcGF0aCA9IHBhcnRzLnNsaWNlKDEpO1xyXG4gICAgbGV0IGlubmVyID0gbmV3IENvbXBpbGVkSW5QYXJ0aWFsTmFtZShwYXJ0aWFsLCBoZWFkKTtcclxuICAgIHJldHVybiBDb21waWxlZExvb2t1cC5jcmVhdGUoaW5uZXIsIHBhdGgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFtCVUddIEAke3BhcnRzLmpvaW4oJy4nKX0gaXMgbm90IGEgdmFsaWQgbG9va3VwIHBhdGguYCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbkVYUFJFU1NJT05TLmFkZCgnaGFzLWJsb2NrJywgKHNleHA6IEUuSGFzQmxvY2ssIGJ1aWxkZXIpID0+IHtcclxuICBsZXQgYmxvY2tOYW1lID0gc2V4cFsxXTtcclxuXHJcbiAgbGV0IHlpZWxkczogT3B0aW9uPG51bWJlcj4sIHBhcnRpYWw6IE9wdGlvbjxudW1iZXI+O1xyXG5cclxuICBpZiAoeWllbGRzID0gYnVpbGRlci5zeW1ib2xUYWJsZS5nZXRTeW1ib2woJ3lpZWxkcycsIGJsb2NrTmFtZSkpIHtcclxuICAgIGxldCBpbm5lciA9IG5ldyBDb21waWxlZEdldEJsb2NrQnlTeW1ib2woeWllbGRzLCBibG9ja05hbWUpO1xyXG4gICAgcmV0dXJuIG5ldyBDb21waWxlZEhhc0Jsb2NrKGlubmVyKTtcclxuICB9IGVsc2UgaWYgKHBhcnRpYWwgPSBidWlsZGVyLnN5bWJvbFRhYmxlLmdldFBhcnRpYWxBcmdzKCkpIHtcclxuICAgIGxldCBpbm5lciA9IG5ldyBDb21waWxlZEluUGFydGlhbEdldEJsb2NrKHBhcnRpYWwsIGJsb2NrTmFtZSk7XHJcbiAgICByZXR1cm4gbmV3IENvbXBpbGVkSGFzQmxvY2soaW5uZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1tCVUddICR7YmxvY2tOYW1lfSBpcyBub3QgYSB2YWxpZCBibG9jayBuYW1lLicpO1xyXG4gIH1cclxufSk7XHJcblxyXG5FWFBSRVNTSU9OUy5hZGQoJ2hhcy1ibG9jay1wYXJhbXMnLCAoc2V4cDogRS5IYXNCbG9ja1BhcmFtcywgYnVpbGRlcikgPT4ge1xyXG4gIGxldCBibG9ja05hbWUgPSBzZXhwWzFdO1xyXG4gIGxldCB5aWVsZHM6IE9wdGlvbjxudW1iZXI+LCBwYXJ0aWFsOiBPcHRpb248bnVtYmVyPjtcclxuXHJcbiAgaWYgKHlpZWxkcyA9IGJ1aWxkZXIuc3ltYm9sVGFibGUuZ2V0U3ltYm9sKCd5aWVsZHMnLCBibG9ja05hbWUpKSB7XHJcbiAgICBsZXQgaW5uZXIgPSBuZXcgQ29tcGlsZWRHZXRCbG9ja0J5U3ltYm9sKHlpZWxkcywgYmxvY2tOYW1lKTtcclxuICAgIHJldHVybiBuZXcgQ29tcGlsZWRIYXNCbG9ja1BhcmFtcyhpbm5lcik7XHJcbiAgfSBlbHNlIGlmIChwYXJ0aWFsID0gYnVpbGRlci5zeW1ib2xUYWJsZS5nZXRQYXJ0aWFsQXJncygpKSB7XHJcbiAgICBsZXQgaW5uZXIgPSBuZXcgQ29tcGlsZWRJblBhcnRpYWxHZXRCbG9jayhwYXJ0aWFsLCBibG9ja05hbWUpO1xyXG4gICAgcmV0dXJuIG5ldyBDb21waWxlZEhhc0Jsb2NrUGFyYW1zKGlubmVyKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdbQlVHXSAke2Jsb2NrTmFtZX0gaXMgbm90IGEgdmFsaWQgYmxvY2sgbmFtZS4nKTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21waWxlQXJncyhwYXJhbXM6IE9wdGlvbjxXaXJlRm9ybWF0LkNvcmUuUGFyYW1zPiwgaGFzaDogT3B0aW9uPFdpcmVGb3JtYXQuQ29yZS5IYXNoPiwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcik6IENvbXBpbGVkQXJncyB7XHJcbiAgbGV0IGNvbXBpbGVkUGFyYW1zID0gY29tcGlsZVBhcmFtcyhwYXJhbXMsIGJ1aWxkZXIpO1xyXG4gIGxldCBjb21waWxlZEhhc2ggPSBjb21waWxlSGFzaChoYXNoLCBidWlsZGVyKTtcclxuICByZXR1cm4gQ29tcGlsZWRBcmdzLmNyZWF0ZShjb21waWxlZFBhcmFtcywgY29tcGlsZWRIYXNoLCBFTVBUWV9CTE9DS1MpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcGlsZUJsb2NrQXJncyhwYXJhbXM6IE9wdGlvbjxXaXJlRm9ybWF0LkNvcmUuUGFyYW1zPiwgaGFzaDogT3B0aW9uPFdpcmVGb3JtYXQuQ29yZS5IYXNoPiwgYmxvY2tzOiBCbG9ja3NTeW50YXgsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpOiBDb21waWxlZEFyZ3Mge1xyXG4gIGxldCBjb21waWxlZFBhcmFtcyA9IGNvbXBpbGVQYXJhbXMocGFyYW1zLCBidWlsZGVyKTtcclxuICBsZXQgY29tcGlsZWRIYXNoID0gY29tcGlsZUhhc2goaGFzaCwgYnVpbGRlcik7XHJcbiAgcmV0dXJuIENvbXBpbGVkQXJncy5jcmVhdGUoY29tcGlsZWRQYXJhbXMsIGNvbXBpbGVkSGFzaCwgYmxvY2tzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBpbGVCYXNlbGluZUFyZ3MoYXJnczogQmFzZWxpbmVTeW50YXguQXJncywgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcik6IENvbXBpbGVkQXJncyB7XHJcbiAgbGV0IFtwYXJhbXMsIGhhc2gsIF9kZWZhdWx0LCBpbnZlcnNlXSA9IGFyZ3M7XHJcbiAgcmV0dXJuIENvbXBpbGVkQXJncy5jcmVhdGUoY29tcGlsZVBhcmFtcyhwYXJhbXMsIGJ1aWxkZXIpLCBjb21waWxlSGFzaChoYXNoLCBidWlsZGVyKSwgeyBkZWZhdWx0OiBfZGVmYXVsdCwgaW52ZXJzZSB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGlsZVBhcmFtcyhwYXJhbXM6IE9wdGlvbjxXaXJlRm9ybWF0LkNvcmUuUGFyYW1zPiwgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcik6IENvbXBpbGVkUG9zaXRpb25hbEFyZ3Mge1xyXG4gIGlmICghcGFyYW1zIHx8IHBhcmFtcy5sZW5ndGggPT09IDApIHJldHVybiBDT01QSUxFRF9FTVBUWV9QT1NJVElPTkFMX0FSR1M7XHJcbiAgbGV0IGNvbXBpbGVkID0gcGFyYW1zLm1hcChwID0+IGV4cHIocCwgYnVpbGRlcikpO1xyXG4gIHJldHVybiBDb21waWxlZFBvc2l0aW9uYWxBcmdzLmNyZWF0ZShjb21waWxlZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBpbGVIYXNoKGhhc2g6IE9wdGlvbjxXaXJlRm9ybWF0LkNvcmUuSGFzaD4sIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpOiBDb21waWxlZE5hbWVkQXJncyB7XHJcbiAgaWYgKCFoYXNoKSByZXR1cm4gQ09NUElMRURfRU1QVFlfTkFNRURfQVJHUztcclxuICBsZXQgW2tleXMsIHZhbHVlc10gPSBoYXNoO1xyXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIENPTVBJTEVEX0VNUFRZX05BTUVEX0FSR1M7XHJcblxyXG4gIGxldCBjb21waWxlZCA9IHZhbHVlcy5tYXAocCA9PiBleHByKHAsIGJ1aWxkZXIpKTtcclxuICByZXR1cm4gbmV3IENvbXBpbGVkTmFtZWRBcmdzKGtleXMsIGNvbXBpbGVkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGlsZVJlZihwYXJ0czogc3RyaW5nW10sIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpIHtcclxuICBsZXQgaGVhZCA9IHBhcnRzWzBdO1xyXG4gIGxldCBsb2NhbDogT3B0aW9uPG51bWJlcj47XHJcblxyXG4gIGlmIChoZWFkID09PSBudWxsKSB7IC8vIHt7dGhpcy5mb299fVxyXG4gICAgbGV0IGlubmVyID0gbmV3IENvbXBpbGVkU2VsZigpO1xyXG4gICAgbGV0IHBhdGggPSBwYXJ0cy5zbGljZSgxKSBhcyBzdHJpbmdbXTtcclxuICAgIHJldHVybiBDb21waWxlZExvb2t1cC5jcmVhdGUoaW5uZXIsIHBhdGgpO1xyXG4gIH0gZWxzZSBpZiAobG9jYWwgPSBidWlsZGVyLnN5bWJvbFRhYmxlLmdldFN5bWJvbCgnbG9jYWwnLCBoZWFkKSkge1xyXG4gICAgbGV0IHBhdGggPSBwYXJ0cy5zbGljZSgxKSBhcyBzdHJpbmdbXTtcclxuICAgIGxldCBpbm5lciA9IG5ldyBDb21waWxlZFN5bWJvbChsb2NhbCwgaGVhZCk7XHJcbiAgICByZXR1cm4gQ29tcGlsZWRMb29rdXAuY3JlYXRlKGlubmVyLCBwYXRoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgbGV0IGlubmVyID0gbmV3IENvbXBpbGVkU2VsZigpO1xyXG4gICAgcmV0dXJuIENvbXBpbGVkTG9va3VwLmNyZWF0ZShpbm5lciwgcGFydHMgYXMgc3RyaW5nW10pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTmVzdGVkQmxvY2tTeW50YXggPSBCYXNlbGluZVN5bnRheC5OZXN0ZWRCbG9jaztcclxuZXhwb3J0IHR5cGUgQ29tcGlsZUJsb2NrTWFjcm8gPSAoc2V4cDogTmVzdGVkQmxvY2tTeW50YXgsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgQmxvY2tzIHtcclxuICBwcml2YXRlIG5hbWVzID0gZGljdDxudW1iZXI+KCk7XHJcbiAgcHJpdmF0ZSBmdW5jczogQ29tcGlsZUJsb2NrTWFjcm9bXSA9IFtdO1xyXG4gIHByaXZhdGUgbWlzc2luZzogQ29tcGlsZUJsb2NrTWFjcm87XHJcblxyXG4gIGFkZChuYW1lOiBzdHJpbmcsIGZ1bmM6IENvbXBpbGVCbG9ja01hY3JvKSB7XHJcbiAgICB0aGlzLmZ1bmNzLnB1c2goZnVuYyk7XHJcbiAgICB0aGlzLm5hbWVzW25hbWVdID0gdGhpcy5mdW5jcy5sZW5ndGggLSAxO1xyXG4gIH1cclxuXHJcbiAgYWRkTWlzc2luZyhmdW5jOiBDb21waWxlQmxvY2tNYWNybykge1xyXG4gICAgdGhpcy5taXNzaW5nID0gZnVuYztcclxuICB9XHJcblxyXG4gIGNvbXBpbGUoc2V4cDogQmFzZWxpbmVTeW50YXguTmVzdGVkQmxvY2ssIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpOiB2b2lkIHtcclxuICAgIC8vIGFzc2VydChzZXhwWzFdLmxlbmd0aCA9PT0gMSwgJ3BhdGhzIGluIGJsb2NrcyBhcmUgbm90IHN1cHBvcnRlZCcpO1xyXG5cclxuICAgIGxldCBuYW1lOiBzdHJpbmcgPSBzZXhwWzFdWzBdO1xyXG4gICAgbGV0IGluZGV4ID0gdGhpcy5uYW1lc1tuYW1lXTtcclxuXHJcbiAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBhc3NlcnQoISF0aGlzLm1pc3NpbmcsIGAke25hbWV9IG5vdCBmb3VuZCwgYW5kIG5vIGNhdGNoLWFsbCBibG9jayBoYW5kbGVyIHdhcyByZWdpc3RlcmVkYCk7XHJcbiAgICAgIGxldCBmdW5jID0gdGhpcy5taXNzaW5nO1xyXG4gICAgICBsZXQgaGFuZGxlZCA9IGZ1bmMoc2V4cCwgYnVpbGRlcik7XHJcbiAgICAgIGFzc2VydCghIWhhbmRsZWQsIGAke25hbWV9IG5vdCBmb3VuZCwgYW5kIHRoZSBjYXRjaC1hbGwgYmxvY2sgaGFuZGxlciBkaWRuJ3QgaGFuZGxlIGl0YCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgZnVuYyA9IHRoaXMuZnVuY3NbaW5kZXhdO1xyXG4gICAgICBmdW5jKHNleHAsIGJ1aWxkZXIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEJMT0NLUyA9IG5ldyBCbG9ja3MoKTtcclxuXHJcbmV4cG9ydCB0eXBlIEFwcGVuZFN5bnRheCA9IEJhc2VsaW5lU3ludGF4Lk9wdGltaXplZEFwcGVuZCB8IEJhc2VsaW5lU3ludGF4LlVub3B0aW1pemVkQXBwZW5kO1xyXG5leHBvcnQgdHlwZSBBcHBlbmRNYWNybyA9IChwYXRoOiBDLlBhdGgsIHBhcmFtczogT3B0aW9uPEMuUGFyYW1zPiwgaGFzaDogT3B0aW9uPEMuSGFzaD4sIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IFsnZXhwcicsIEJhc2VsaW5lU3ludGF4LkFueUV4cHJlc3Npb25dIHwgdHJ1ZSB8IGZhbHNlO1xyXG5cclxuZXhwb3J0IGNsYXNzIElubGluZXMge1xyXG4gIHByaXZhdGUgbmFtZXMgPSBkaWN0PG51bWJlcj4oKTtcclxuICBwcml2YXRlIGZ1bmNzOiBBcHBlbmRNYWNyb1tdID0gW107XHJcbiAgcHJpdmF0ZSBtaXNzaW5nOiBBcHBlbmRNYWNybztcclxuXHJcbiAgYWRkKG5hbWU6IHN0cmluZywgZnVuYzogQXBwZW5kTWFjcm8pIHtcclxuICAgIHRoaXMuZnVuY3MucHVzaChmdW5jKTtcclxuICAgIHRoaXMubmFtZXNbbmFtZV0gPSB0aGlzLmZ1bmNzLmxlbmd0aCAtIDE7XHJcbiAgfVxyXG5cclxuICBhZGRNaXNzaW5nKGZ1bmM6IEFwcGVuZE1hY3JvKSB7XHJcbiAgICB0aGlzLm1pc3NpbmcgPSBmdW5jO1xyXG4gIH1cclxuXHJcbiAgY29tcGlsZShzZXhwOiBBcHBlbmRTeW50YXgsIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpOiBbJ2V4cHInLCBCYXNlbGluZVN5bnRheC5BbnlFeHByZXNzaW9uXSB8IHRydWUge1xyXG4gICAgbGV0IHZhbHVlID0gc2V4cFsxXTtcclxuXHJcbiAgICAvLyBUT0RPOiBGaXggdGhpcyBzbyB0aGF0IGV4cHJlc3Npb24gbWFjcm9zIGNhbiByZXR1cm5cclxuICAgIC8vIHRoaW5ncyBsaWtlIGNvbXBvbmVudHMsIHNvIHRoYXQge3tjb21wb25lbnQgZm9vfX1cclxuICAgIC8vIGlzIHRoZSBzYW1lIGFzIHt7KGNvbXBvbmVudCBmb28pfX1cclxuXHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gWydleHByJywgdmFsdWVdO1xyXG5cclxuICAgIGxldCBwYXRoOiBDLlBhdGg7XHJcbiAgICBsZXQgcGFyYW1zOiBPcHRpb248Qy5QYXJhbXM+O1xyXG4gICAgbGV0IGhhc2g6IE9wdGlvbjxDLkhhc2g+O1xyXG5cclxuICAgIGlmICh2YWx1ZVswXSA9PT0gJ2hlbHBlcicpIHtcclxuICAgICAgcGF0aCA9IHZhbHVlWzFdO1xyXG4gICAgICBwYXJhbXMgPSB2YWx1ZVsyXTtcclxuICAgICAgaGFzaCA9IHZhbHVlWzNdO1xyXG4gICAgfSBlbHNlIGlmICh2YWx1ZVswXSA9PT0gJ3Vua25vd24nKSB7XHJcbiAgICAgIHBhdGggPSB2YWx1ZVsxXTtcclxuICAgICAgcGFyYW1zID0gaGFzaCA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gWydleHByJywgdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwYXRoLmxlbmd0aCA+IDEgJiYgIXBhcmFtcyAmJiAhaGFzaCkge1xyXG4gICAgICByZXR1cm4gWydleHByJywgdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuYW1lID0gcGF0aFswXTtcclxuICAgIGxldCBpbmRleCA9IHRoaXMubmFtZXNbbmFtZV07XHJcblxyXG4gICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQgJiYgdGhpcy5taXNzaW5nKSB7XHJcbiAgICAgIGxldCBmdW5jID0gdGhpcy5taXNzaW5nO1xyXG4gICAgICBsZXQgcmV0dXJuZWQgPSBmdW5jKHBhdGgsIHBhcmFtcywgaGFzaCwgYnVpbGRlcik7XHJcbiAgICAgIHJldHVybiByZXR1cm5lZCA9PT0gZmFsc2UgPyBbJ2V4cHInLCB2YWx1ZV0gOiByZXR1cm5lZDtcclxuICAgIH0gZWxzZSBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBsZXQgZnVuYyA9IHRoaXMuZnVuY3NbaW5kZXhdO1xyXG4gICAgICBsZXQgcmV0dXJuZWQgPSBmdW5jKHBhdGgsIHBhcmFtcywgaGFzaCwgYnVpbGRlcik7XHJcbiAgICAgIHJldHVybiByZXR1cm5lZCA9PT0gZmFsc2UgPyBbJ2V4cHInLCB2YWx1ZV0gOiByZXR1cm5lZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBbJ2V4cHInLCB2YWx1ZV07XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgSU5MSU5FUyA9IG5ldyBJbmxpbmVzKCk7XHJcblxyXG5wb3B1bGF0ZUJ1aWx0aW5zKEJMT0NLUywgSU5MSU5FUyk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcG9wdWxhdGVCdWlsdGlucyhibG9ja3M6IEJsb2NrcyA9IG5ldyBCbG9ja3MoKSwgaW5saW5lczogSW5saW5lcyA9IG5ldyBJbmxpbmVzKCkpOiB7IGJsb2NrczogQmxvY2tzLCBpbmxpbmVzOiBJbmxpbmVzIH0ge1xyXG4gIGJsb2Nrcy5hZGQoJ2lmJywgKHNleHA6IEJhc2VsaW5lU3ludGF4Lk5lc3RlZEJsb2NrLCBidWlsZGVyOiBPcGNvZGVCdWlsZGVyKSA9PiB7XHJcbiAgICAvLyAgICAgICAgUHV0QXJnc1xyXG4gICAgLy8gICAgICAgIFRlc3QoRW52aXJvbm1lbnQpXHJcbiAgICAvLyAgICAgICAgRW50ZXIoQkVHSU4sIEVORClcclxuICAgIC8vIEJFR0lOOiBOb29wXHJcbiAgICAvLyAgICAgICAgSnVtcFVubGVzcyhFTFNFKVxyXG4gICAgLy8gICAgICAgIEV2YWx1YXRlKGRlZmF1bHQpXHJcbiAgICAvLyAgICAgICAgSnVtcChFTkQpXHJcbiAgICAvLyBFTFNFOiAgTm9vcFxyXG4gICAgLy8gICAgICAgIEV2YWx1bGF0ZShpbnZlcnNlKVxyXG4gICAgLy8gRU5EOiAgIE5vb3BcclxuICAgIC8vICAgICAgICBFeGl0XHJcblxyXG4gICAgbGV0IFssLCBwYXJhbXMsIGhhc2gsIF9kZWZhdWx0LCBpbnZlcnNlXSA9IHNleHA7XHJcbiAgICBsZXQgYXJncyA9IGNvbXBpbGVBcmdzKHBhcmFtcywgaGFzaCwgYnVpbGRlcik7XHJcblxyXG4gICAgYnVpbGRlci5wdXRBcmdzKGFyZ3MpO1xyXG4gICAgYnVpbGRlci50ZXN0KCdlbnZpcm9ubWVudCcpO1xyXG5cclxuICAgIGJ1aWxkZXIubGFiZWxsZWQobnVsbCwgYiA9PiB7XHJcbiAgICAgIGlmIChfZGVmYXVsdCAmJiBpbnZlcnNlKSB7XHJcbiAgICAgICAgYi5qdW1wVW5sZXNzKCdFTFNFJyk7XHJcbiAgICAgICAgYi5ldmFsdWF0ZShfZGVmYXVsdCk7XHJcbiAgICAgICAgYi5qdW1wKCdFTkQnKTtcclxuICAgICAgICBiLmxhYmVsKCdFTFNFJyk7XHJcbiAgICAgICAgYi5ldmFsdWF0ZShpbnZlcnNlKTtcclxuICAgICAgfSBlbHNlIGlmIChfZGVmYXVsdCkge1xyXG4gICAgICAgIGIuanVtcFVubGVzcygnRU5EJyk7XHJcbiAgICAgICAgYi5ldmFsdWF0ZShfZGVmYXVsdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgdW5yZWFjaGFibGUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGJsb2Nrcy5hZGQoJ3VubGVzcycsIChzZXhwOiBCYXNlbGluZVN5bnRheC5OZXN0ZWRCbG9jaywgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcikgPT4ge1xyXG4gICAgLy8gICAgICAgIFB1dEFyZ3NcclxuICAgIC8vICAgICAgICBUZXN0KEVudmlyb25tZW50KVxyXG4gICAgLy8gICAgICAgIEVudGVyKEJFR0lOLCBFTkQpXHJcbiAgICAvLyBCRUdJTjogTm9vcFxyXG4gICAgLy8gICAgICAgIEp1bXBVbmxlc3MoRUxTRSlcclxuICAgIC8vICAgICAgICBFdmFsdWF0ZShkZWZhdWx0KVxyXG4gICAgLy8gICAgICAgIEp1bXAoRU5EKVxyXG4gICAgLy8gRUxTRTogIE5vb3BcclxuICAgIC8vICAgICAgICBFdmFsdWxhdGUoaW52ZXJzZSlcclxuICAgIC8vIEVORDogICBOb29wXHJcbiAgICAvLyAgICAgICAgRXhpdFxyXG5cclxuICAgIGxldCBbLCwgcGFyYW1zLCBoYXNoLCBfZGVmYXVsdCwgaW52ZXJzZV0gPSBzZXhwO1xyXG4gICAgbGV0IGFyZ3MgPSBjb21waWxlQXJncyhwYXJhbXMsIGhhc2gsIGJ1aWxkZXIpO1xyXG5cclxuICAgIGJ1aWxkZXIucHV0QXJncyhhcmdzKTtcclxuICAgIGJ1aWxkZXIudGVzdCgnZW52aXJvbm1lbnQnKTtcclxuXHJcbiAgICBidWlsZGVyLmxhYmVsbGVkKG51bGwsIGIgPT4ge1xyXG4gICAgICBpZiAoX2RlZmF1bHQgJiYgaW52ZXJzZSkge1xyXG4gICAgICAgIGIuanVtcElmKCdFTFNFJyk7XHJcbiAgICAgICAgYi5ldmFsdWF0ZShfZGVmYXVsdCk7XHJcbiAgICAgICAgYi5qdW1wKCdFTkQnKTtcclxuICAgICAgICBiLmxhYmVsKCdFTFNFJyk7XHJcbiAgICAgICAgYi5ldmFsdWF0ZSggaW52ZXJzZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoX2RlZmF1bHQpIHtcclxuICAgICAgICBiLmp1bXBJZignRU5EJyk7XHJcbiAgICAgICAgYi5ldmFsdWF0ZShfZGVmYXVsdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgdW5yZWFjaGFibGUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGJsb2Nrcy5hZGQoJ3dpdGgnLCAoc2V4cDogQmFzZWxpbmVTeW50YXguTmVzdGVkQmxvY2ssIGJ1aWxkZXI6IE9wY29kZUJ1aWxkZXIpID0+IHtcclxuICAgIC8vICAgICAgICBQdXRBcmdzXHJcbiAgICAvLyAgICAgICAgVGVzdChFbnZpcm9ubWVudClcclxuICAgIC8vICAgICAgICBFbnRlcihCRUdJTiwgRU5EKVxyXG4gICAgLy8gQkVHSU46IE5vb3BcclxuICAgIC8vICAgICAgICBKdW1wVW5sZXNzKEVMU0UpXHJcbiAgICAvLyAgICAgICAgRXZhbHVhdGUoZGVmYXVsdClcclxuICAgIC8vICAgICAgICBKdW1wKEVORClcclxuICAgIC8vIEVMU0U6ICBOb29wXHJcbiAgICAvLyAgICAgICAgRXZhbHVsYXRlKGludmVyc2UpXHJcbiAgICAvLyBFTkQ6ICAgTm9vcFxyXG4gICAgLy8gICAgICAgIEV4aXRcclxuXHJcbiAgICBsZXQgWywsIHBhcmFtcywgaGFzaCwgX2RlZmF1bHQsIGludmVyc2VdID0gc2V4cDtcclxuICAgIGxldCBhcmdzID0gY29tcGlsZUFyZ3MocGFyYW1zLCBoYXNoLCBidWlsZGVyKTtcclxuXHJcbiAgICBidWlsZGVyLnB1dEFyZ3MoYXJncyk7XHJcbiAgICBidWlsZGVyLnRlc3QoJ2Vudmlyb25tZW50Jyk7XHJcblxyXG4gICAgYnVpbGRlci5sYWJlbGxlZChudWxsLCBiID0+IHtcclxuICAgICAgaWYgKF9kZWZhdWx0ICYmIGludmVyc2UpIHtcclxuICAgICAgICBiLmp1bXBVbmxlc3MoJ0VMU0UnKTtcclxuICAgICAgICBiLmV2YWx1YXRlKF9kZWZhdWx0KTtcclxuICAgICAgICBiLmp1bXAoJ0VORCcpO1xyXG4gICAgICAgIGIubGFiZWwoJ0VMU0UnKTtcclxuICAgICAgICBiLmV2YWx1YXRlKGludmVyc2UpO1xyXG4gICAgICB9IGVsc2UgaWYgKF9kZWZhdWx0KSB7XHJcbiAgICAgICAgYi5qdW1wVW5sZXNzKCdFTkQnKTtcclxuICAgICAgICBiLmV2YWx1YXRlKF9kZWZhdWx0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyB1bnJlYWNoYWJsZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgYmxvY2tzLmFkZCgnZWFjaCcsIChzZXhwOiBCYXNlbGluZVN5bnRheC5OZXN0ZWRCbG9jaywgYnVpbGRlcjogT3Bjb2RlQnVpbGRlcikgPT4ge1xyXG4gICAgLy8gICAgICAgICBFbnRlcihCRUdJTiwgRU5EKVxyXG4gICAgLy8gQkVHSU46ICBOb29wXHJcbiAgICAvLyAgICAgICAgIFB1dEFyZ3NcclxuICAgIC8vICAgICAgICAgUHV0SXRlcmFibGVcclxuICAgIC8vICAgICAgICAgSnVtcFVubGVzcyhFTFNFKVxyXG4gICAgLy8gICAgICAgICBFbnRlckxpc3QoQkVHSU4yLCBFTkQyKVxyXG4gICAgLy8gSVRFUjogICBOb29wXHJcbiAgICAvLyAgICAgICAgIE5leHRJdGVyKEJSRUFLKVxyXG4gICAgLy8gICAgICAgICBFbnRlcldpdGhLZXkoQkVHSU4yLCBFTkQyKVxyXG4gICAgLy8gQkVHSU4yOiBOb29wXHJcbiAgICAvLyAgICAgICAgIFB1c2hDaGlsZFNjb3BlXHJcbiAgICAvLyAgICAgICAgIEV2YWx1YXRlKGRlZmF1bHQpXHJcbiAgICAvLyAgICAgICAgIFBvcFNjb3BlXHJcbiAgICAvLyBFTkQyOiAgIE5vb3BcclxuICAgIC8vICAgICAgICAgRXhpdFxyXG4gICAgLy8gICAgICAgICBKdW1wKElURVIpXHJcbiAgICAvLyBCUkVBSzogIE5vb3BcclxuICAgIC8vICAgICAgICAgRXhpdExpc3RcclxuICAgIC8vICAgICAgICAgSnVtcChFTkQpXHJcbiAgICAvLyBFTFNFOiAgIE5vb3BcclxuICAgIC8vICAgICAgICAgRXZhbHVsYXRlKGludmVyc2UpXHJcbiAgICAvLyBFTkQ6ICAgIE5vb3BcclxuICAgIC8vICAgICAgICAgRXhpdFxyXG5cclxuICAgIGxldCBbLCwgcGFyYW1zLCBoYXNoLCBfZGVmYXVsdCwgaW52ZXJzZV0gPSBzZXhwO1xyXG4gICAgbGV0IGFyZ3MgPSBjb21waWxlQXJncyhwYXJhbXMsIGhhc2gsIGJ1aWxkZXIpO1xyXG5cclxuICAgIGJ1aWxkZXIubGFiZWxsZWQoYXJncywgYiA9PiB7XHJcbiAgICAgIGIucHV0SXRlcmF0b3IoKTtcclxuXHJcbiAgICAgIGlmIChpbnZlcnNlKSB7XHJcbiAgICAgICAgYi5qdW1wVW5sZXNzKCdFTFNFJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYi5qdW1wVW5sZXNzKCdFTkQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYi5pdGVyKGIgPT4ge1xyXG4gICAgICAgIGIuZXZhbHVhdGUodW53cmFwKF9kZWZhdWx0KSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKGludmVyc2UpIHtcclxuICAgICAgICBiLmp1bXAoJ0VORCcpO1xyXG4gICAgICAgIGIubGFiZWwoJ0VMU0UnKTtcclxuICAgICAgICBiLmV2YWx1YXRlKGludmVyc2UpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHsgYmxvY2tzLCBpbmxpbmVzIH07XHJcbn1cclxuIl19