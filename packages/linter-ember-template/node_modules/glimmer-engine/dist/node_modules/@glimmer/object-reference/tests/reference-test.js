"use strict";
var object_reference_1 = require("@glimmer/object-reference");
//function computed(obj, name, getter, depStrings) {
//Object.defineProperty(obj, name, {
//enumerable: true,
//configurable: true,
//get: getter
//});
//let deps = depStrings.map(d => d.split('.'));
//[>jshint -W064<]
//Meta.for(obj).addReferenceTypeFor(name, ComputedBlueprint(name, deps)); [>jshint +W064<]
//}
function addObserver(obj, name, path) {
    return object_reference_1.metaFor(obj).root().referenceFromParts(path.split('.'));
}
QUnit.module("references");
QUnit.test("basic reference data flow", function () {
    var obj1 = { label: "obj1", model: { person: { name: { first: "Yehuda", last: "Katz" } } } };
    var obj2 = { label: "obj2", model: { person: { name: obj1.model.person.name } } };
    var obj3 = { label: "obj3", model: { person: obj1.model.person } };
    var obj4 = { label: "obj4", model: obj1.model };
    var originalPerson = obj1.model.person;
    var o1 = [
        addObserver(obj1, 'obj1', 'model.person.name.first'),
        addObserver(obj1.model, 'obj1.model', 'person.name.first'),
        addObserver(obj1.model.person, 'obj1.model.person', 'name.first'),
        addObserver(obj1.model.person.name, 'obj1.model.person.name', 'first')
    ];
    var o2 = [
        addObserver(obj2, 'obj2', 'model.person.name.first'),
        addObserver(obj2.model, 'obj2.model', 'person.name.first'),
        addObserver(obj2.model.person, 'obj2.model.person', 'name.first'),
        addObserver(obj2.model.person.name, 'obj2.model.person.name', 'first')
    ];
    var o3 = [
        addObserver(obj3, 'obj3', 'model.person.name.first'),
        addObserver(obj3.model, 'obj3.model', 'person.name.first'),
        addObserver(obj3.model.person, 'obj3.model.person', 'name.first'),
        addObserver(obj3.model.person.name, 'obj3.model.person.name', 'first')
    ];
    var o4 = [
        addObserver(obj4, 'obj4', 'model.person.name.first'),
        addObserver(obj4.model, 'obj4.model', 'person.name.first'),
        addObserver(obj4.model.person, 'obj4.model.person', 'name.first'),
        addObserver(obj4.model.person.name, 'obj4.model.person.name', 'first')
    ];
    allDirty(o1, "Yehuda");
    allDirty(o2, "Yehuda");
    allDirty(o3, "Yehuda");
    allDirty(o4, "Yehuda");
    allClean(o1);
    allClean(o2);
    allClean(o3);
    allClean(o4);
    object_reference_1.setProperty(obj1.model, 'person', { name: { first: 'Godfrey', last: 'Chan' } });
    isDirty(o1[0], "Godfrey");
    isDirty(o1[1], "Godfrey");
    isClean(o1[2]);
    isClean(o1[3]);
    allClean(o2);
    allClean(o3);
    isDirty(o4[0], "Godfrey");
    isDirty(o4[1], "Godfrey");
    isClean(o4[2]);
    isClean(o4[3]);
    object_reference_1.setProperty(originalPerson.name, 'first', "Godhuda");
    isClean(o1[0]);
    isClean(o1[1]);
    isDirty(o1[2], "Godhuda");
    isDirty(o1[3], "Godhuda");
    allDirty(o2, "Godhuda");
    allDirty(o3, "Godhuda");
    isClean(o4[0]);
    isClean(o4[1]);
    isDirty(o4[2], "Godhuda");
    isDirty(o4[3], "Godhuda");
    object_reference_1.setProperty(obj1.model, 'person', undefined);
    isDirty(o1[0], undefined);
    isDirty(o1[1], undefined);
    isClean(o1[2]);
    isClean(o1[3]);
    allClean(o2);
    allClean(o3);
    isDirty(o4[0], undefined);
    isDirty(o4[1], undefined);
    isClean(o4[2]);
    isClean(o4[3]);
    object_reference_1.setProperty(obj1.model, 'person', originalPerson);
    isDirty(o1[0], "Godhuda");
    isDirty(o1[1], "Godhuda");
    isClean(o1[2]);
    isClean(o1[3]);
    allClean(o2);
    allClean(o3);
    isDirty(o4[0], "Godhuda");
    isDirty(o4[1], "Godhuda");
    isClean(o4[2]);
    isClean(o4[3]);
});
QUnit.test("test data flow that goes through primitive wrappers", function () {
    var obj1 = { label: "obj1", model: { person: { name: { first: "Yehuda", last: "Katz" } } } };
    var obj2 = { label: "obj2", model: { person: { name: obj1.model.person.name } } };
    var obj3 = { label: "obj3", model: { person: obj1.model.person } };
    var obj4 = { label: "obj4", model: obj1.model };
    var originalPerson = obj1.model.person;
    var o1 = [
        addObserver(obj1, 'obj1', 'model.person.name.first.length'),
        addObserver(obj1.model, 'obj1.model', 'person.name.first.length'),
        addObserver(obj1.model.person, 'obj1.model.person', 'name.first.length'),
        addObserver(obj1.model.person.name, 'obj1.model.person.name', 'first.length')
    ];
    var o2 = [
        addObserver(obj2, 'obj2', 'model.person.name.first.length'),
        addObserver(obj2.model, 'obj2.model', 'person.name.first.length'),
        addObserver(obj2.model.person, 'obj2.model.person', 'name.first.length'),
        addObserver(obj2.model.person.name, 'obj2.model.person.name', 'first.length')
    ];
    var o3 = [
        addObserver(obj3, 'obj3', 'model.person.name.first.length'),
        addObserver(obj3.model, 'obj3.model', 'person.name.first.length'),
        addObserver(obj3.model.person, 'obj3.model.person', 'name.first.length'),
        addObserver(obj3.model.person.name, 'obj3.model.person.name', 'first.length')
    ];
    var o4 = [
        addObserver(obj4, 'obj4', 'model.person.name.first.length'),
        addObserver(obj4.model, 'obj4.model', 'person.name.first.length'),
        addObserver(obj4.model.person, 'obj4.model.person', 'name.first.length'),
        addObserver(obj4.model.person.name, 'obj4.model.person.name', 'first.length')
    ];
    allDirty(o1, 6);
    allDirty(o2, 6);
    allDirty(o3, 6);
    allDirty(o4, 6);
    allClean(o1);
    allClean(o2);
    allClean(o3);
    allClean(o4);
    object_reference_1.setProperty(obj1.model, 'person', { name: { first: 'Godfrey', last: 'Chan' } });
    isDirty(o1[0], 7);
    isDirty(o1[1], 7);
    isClean(o1[2]);
    isClean(o1[3]);
    allClean(o2);
    allClean(o3);
    isDirty(o4[0], 7);
    isDirty(o4[1], 7);
    isClean(o4[2]);
    isClean(o4[3]);
    object_reference_1.setProperty(originalPerson.name, 'first', "God-huda");
    isClean(o1[0]);
    isClean(o1[1]);
    isDirty(o1[2], 8);
    isDirty(o1[3], 8);
    allDirty(o2, 8);
    allDirty(o3, 8);
    isClean(o4[0]);
    isClean(o4[1]);
    isDirty(o4[2], 8);
    isDirty(o4[3], 8);
    object_reference_1.setProperty(obj1.model, 'person', undefined);
    isDirty(o1[0], undefined);
    isDirty(o1[1], undefined);
    isClean(o1[2]);
    isClean(o1[3]);
    allClean(o2);
    allClean(o3);
    isDirty(o4[0], undefined);
    isDirty(o4[1], undefined);
    isClean(o4[2]);
    isClean(o4[3]);
    object_reference_1.setProperty(obj1.model, 'person', originalPerson);
    isDirty(o1[0], 8);
    isDirty(o1[1], 8);
    isClean(o1[2]);
    isClean(o1[3]);
    allClean(o2);
    allClean(o3);
    isDirty(o4[0], 8);
    isDirty(o4[1], 8);
    isClean(o4[2]);
    isClean(o4[3]);
});
function isDirty(ref, newValue) {
    // ok(ref.isDirty(), ref.label() + " is dirty");
    ok(ref.value() === newValue, ref.label() + " has new value " + newValue);
}
function isClean(ref) {
    // clean references are allowed to report dirty
}
function allDirty(refs, newValue) {
    refs.forEach(function (ref) { isDirty(ref, newValue); });
}
function allClean(refs) {
    refs.forEach(function (ref) { isClean(ref); });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVmZXJlbmNlLXRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJAZ2xpbW1lci9vYmplY3QtcmVmZXJlbmNlL3Rlc3RzL3JlZmVyZW5jZS10ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSw4REFBaUU7QUFFakUsb0RBQW9EO0FBQ2xELG9DQUFvQztBQUNsQyxtQkFBbUI7QUFDbkIscUJBQXFCO0FBQ3JCLGFBQWE7QUFDZixLQUFLO0FBRUwsK0NBQStDO0FBRS9DLGtCQUFrQjtBQUNsQiwwRkFBMEY7QUFDNUYsR0FBRztBQUVILHFCQUFxQixHQUFRLEVBQUUsSUFBWSxFQUFFLElBQVk7SUFDdkQsTUFBTSxDQUFDLDBCQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ2pFLENBQUM7QUFFRCxLQUFLLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBRTNCLEtBQUssQ0FBQyxJQUFJLENBQUMsMkJBQTJCLEVBQUU7SUFDdEMsSUFBSSxJQUFJLEdBQUcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQzdGLElBQUksSUFBSSxHQUFHLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2xGLElBQUksSUFBSSxHQUFHLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFN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OEJBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUU3QyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzFCLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDMUIsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2YsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWYsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2IsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRWIsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUMxQixPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzFCLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNmLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVmLDhCQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFFbEQsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUMxQixPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzFCLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNmLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVmLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNiLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUViLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7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LENBQUMsQ0FBQztBQUMzRSxDQUFDO0FBRUQsaUJBQWlCLEdBQUc7SUFDbEIsK0NBQStDO0FBQ2pELENBQUM7QUFFRCxrQkFBa0IsSUFBSSxFQUFFLFFBQVE7SUFDOUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFTLEdBQUcsSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUQsQ0FBQztBQUVELGtCQUFrQixJQUFJO0lBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBUyxHQUFHLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1ldGFGb3IsIHNldFByb3BlcnR5IH0gZnJvbSBcIkBnbGltbWVyL29iamVjdC1yZWZlcmVuY2VcIjtcblxuLy9mdW5jdGlvbiBjb21wdXRlZChvYmosIG5hbWUsIGdldHRlciwgZGVwU3RyaW5ncykge1xuICAvL09iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIG5hbWUsIHtcbiAgICAvL2VudW1lcmFibGU6IHRydWUsXG4gICAgLy9jb25maWd1cmFibGU6IHRydWUsXG4gICAgLy9nZXQ6IGdldHRlclxuICAvL30pO1xuXG4gIC8vbGV0IGRlcHMgPSBkZXBTdHJpbmdzLm1hcChkID0+IGQuc3BsaXQoJy4nKSk7XG5cbiAgLy9bPmpzaGludCAtVzA2NDxdXG4gIC8vTWV0YS5mb3Iob2JqKS5hZGRSZWZlcmVuY2VUeXBlRm9yKG5hbWUsIENvbXB1dGVkQmx1ZXByaW50KG5hbWUsIGRlcHMpKTsgWz5qc2hpbnQgK1cwNjQ8XVxuLy99XG5cbmZ1bmN0aW9uIGFkZE9ic2VydmVyKG9iajogYW55LCBuYW1lOiBzdHJpbmcsIHBhdGg6IHN0cmluZykge1xuICByZXR1cm4gbWV0YUZvcihvYmopLnJvb3QoKS5yZWZlcmVuY2VGcm9tUGFydHMocGF0aC5zcGxpdCgnLicpKTtcbn1cblxuUVVuaXQubW9kdWxlKFwicmVmZXJlbmNlc1wiKTtcblxuUVVuaXQudGVzdChcImJhc2ljIHJlZmVyZW5jZSBkYXRhIGZsb3dcIiwgZnVuY3Rpb24oKSB7XG4gIGxldCBvYmoxID0geyBsYWJlbDogXCJvYmoxXCIsIG1vZGVsOiB7IHBlcnNvbjogeyBuYW1lOiB7IGZpcnN0OiBcIlllaHVkYVwiLCBsYXN0OiBcIkthdHpcIiB9IH0gfSB9O1xuICBsZXQgb2JqMiA9IHsgbGFiZWw6IFwib2JqMlwiLCBtb2RlbDogeyBwZXJzb246IHsgbmFtZTogb2JqMS5tb2RlbC5wZXJzb24ubmFtZSB9IH0gfTtcbiAgbGV0IG9iajMgPSB7IGxhYmVsOiBcIm9iajNcIiwgbW9kZWw6IHsgcGVyc29uOiBvYmoxLm1vZGVsLnBlcnNvbiB9IH07XG4gIGxldCBvYmo0ID0geyBsYWJlbDogXCJvYmo0XCIsIG1vZGVsOiBvYmoxLm1vZGVsIH07XG5cbiAgbGV0IG9yaWdpbmFsUGVyc29uID0gb2JqMS5tb2RlbC5wZXJzb247XG5cbiAgbGV0IG8xID0gW1xuICAgIGFkZE9ic2VydmVyKG9iajEsICdvYmoxJywgJ21vZGVsLnBlcnNvbi5uYW1lLmZpcnN0JyksXG4gICAgYWRkT2JzZXJ2ZXIob2JqMS5tb2RlbCwgJ29iajEubW9kZWwnLCAncGVyc29uLm5hbWUuZmlyc3QnKSxcbiAgICBhZGRPYnNlcnZlcihvYmoxLm1vZGVsLnBlcnNvbiwgJ29iajEubW9kZWwucGVyc29uJywgJ25hbWUuZmlyc3QnKSxcbiAgICBhZGRPYnNlcnZlcihvYmoxLm1vZGVsLnBlcnNvbi5uYW1lLCAnb2JqMS5tb2RlbC5wZXJzb24ubmFtZScsICdmaXJzdCcpXG4gIF07XG5cbiAgbGV0IG8yID0gW1xuICAgIGFkZE9ic2VydmVyKG9iajIsICdvYmoyJywgJ21vZGVsLnBlcnNvbi5uYW1lLmZpcnN0JyksXG4gICAgYWRkT2JzZXJ2ZXIob2JqMi5tb2RlbCwgJ29iajIubW9kZWwnLCAncGVyc29uLm5hbWUuZmlyc3QnKSxcbiAgICBhZGRPYnNlcnZlcihvYmoyLm1vZGVsLnBlcnNvbiwgJ29iajIubW9kZWwucGVyc29uJywgJ25hbWUuZmlyc3QnKSxcbiAgICBhZGRPYnNlcnZlcihvYmoyLm1vZGVsLnBlcnNvbi5uYW1lLCAnb2JqMi5tb2RlbC5wZXJzb24ubmFtZScsICdmaXJzdCcpXG4gIF07XG5cbiAgbGV0IG8zID0gW1xuICAgIGFkZE9ic2VydmVyKG9iajMsICdvYmozJywgJ21vZGVsLnBlcnNvbi5uYW1lLmZpcnN0JyksXG4gICAgYWRkT2JzZXJ2ZXIob2JqMy5tb2RlbCwgJ29iajMubW9kZWwnLCAncGVyc29uLm5hbWUuZmlyc3QnKSxcbiAgICBhZGRPYnNlcnZlcihvYmozLm1vZGVsLnBlcnNvbiwgJ29iajMubW9kZWwucGVyc29uJywgJ25hbWUuZmlyc3QnKSxcbiAgICBhZGRPYnNlcnZlcihvYmozLm1vZGVsLnBlcnNvbi5uYW1lLCAnb2JqMy5tb2RlbC5wZXJzb24ubmFtZScsICdmaXJzdCcpXG4gIF07XG5cbiAgbGV0IG80ID0gW1xuICAgIGFkZE9ic2VydmVyKG9iajQsICdvYmo0JywgJ21vZGVsLnBlcnNvbi5uYW1lLmZpcnN0JyksXG4gICAgYWRkT2JzZXJ2ZXIob2JqNC5tb2RlbCwgJ29iajQubW9kZWwnLCAncGVyc29uLm5hbWUuZmlyc3QnKSxcbiAgICBhZGRPYnNlcnZlcihvYmo0Lm1vZGVsLnBlcnNvbiwgJ29iajQubW9kZWwucGVyc29uJywgJ25hbWUuZmlyc3QnKSxcbiAgICBhZGRPYnNlcnZlcihvYmo0Lm1vZGVsLnBlcnNvbi5uYW1lLCAnb2JqNC5tb2RlbC5wZXJzb24ubmFtZScsICdmaXJzdCcpXG4gIF07XG5cbiAgYWxsRGlydHkobzEsIFwiWWVodWRhXCIpO1xuICBhbGxEaXJ0eShvMiwgXCJZZWh1ZGFcIik7XG4gIGFsbERpcnR5KG8zLCBcIlllaHVkYVwiKTtcbiAgYWxsRGlydHkobzQsIFwiWWVodWRhXCIpO1xuXG4gIGFsbENsZWFuKG8xKTtcbiAgYWxsQ2xlYW4obzIpO1xuICBhbGxDbGVhbihvMyk7XG4gIGFsbENsZWFuKG80KTtcblxuICBzZXRQcm9wZXJ0eShvYmoxLm1vZGVsLCAncGVyc29uJywgeyBuYW1lOiB7IGZpcnN0OiAnR29kZnJleScsIGxhc3Q6ICdDaGFuJyB9IH0pO1xuXG4gIGlzRGlydHkobzFbMF0sIFwiR29kZnJleVwiKTtcbiAgaXNEaXJ0eShvMVsxXSwgXCJHb2RmcmV5XCIpO1xuICBpc0NsZWFuKG8xWzJdKTtcbiAgaXNDbGVhbihvMVszXSk7XG5cbiAgYWxsQ2xlYW4obzIpO1xuICBhbGxDbGVhbihvMyk7XG5cbiAgaXNEaXJ0eShvNFswXSwgXCJHb2RmcmV5XCIpO1xuICBpc0RpcnR5KG80WzFdLCBcIkdvZGZyZXlcIik7XG4gIGlzQ2xlYW4obzRbMl0pO1xuICBpc0NsZWFuKG80WzNdKTtcblxuICBzZXRQcm9wZXJ0eShvcmlnaW5hbFBlcnNvbi5uYW1lLCAnZmlyc3QnLCBcIkdvZGh1ZGFcIik7XG5cbiAgaXNDbGVhbihvMVswXSk7XG4gIGlzQ2xlYW4obzFbMV0pO1xuICBpc0RpcnR5KG8xWzJdLCBcIkdvZGh1ZGFcIik7XG4gIGlzRGlydHkobzFbM10sIFwiR29kaHVkYVwiKTtcblxuICBhbGxEaXJ0eShvMiwgXCJHb2RodWRhXCIpO1xuICBhbGxEaXJ0eShvMywgXCJHb2RodWRhXCIpO1xuXG4gIGlzQ2xlYW4obzRbMF0pO1xuICBpc0NsZWFuKG80WzFdKTtcbiAgaXNEaXJ0eShvNFsyXSwgXCJHb2RodWRhXCIpO1xuICBpc0RpcnR5KG80WzNdLCBcIkdvZGh1ZGFcIik7XG5cbiAgc2V0UHJvcGVydHkob2JqMS5tb2RlbCwgJ3BlcnNvbicsIHVuZGVmaW5lZCk7XG5cbiAgaXNEaXJ0eShvMVswXSwgdW5kZWZpbmVkKTtcbiAgaXNEaXJ0eShvMVsxXSwgdW5kZWZpbmVkKTtcbiAgaXNDbGVhbihvMVsyXSk7XG4gIGlzQ2xlYW4obzFbM10pO1xuXG4gIGFsbENsZWFuKG8yKTtcbiAgYWxsQ2xlYW4obzMpO1xuXG4gIGlzRGlydHkobzRbMF0sIHVuZGVmaW5lZCk7XG4gIGlzRGlydHkobzRbMV0sIHVuZGVmaW5lZCk7XG4gIGlzQ2xlYW4obzRbMl0pO1xuICBpc0NsZWFuKG80WzNdKTtcblxuICBzZXRQcm9wZXJ0eShvYmoxLm1vZGVsLCAncGVyc29uJywgb3JpZ2luYWxQZXJzb24pO1xuXG4gIGlzRGlydHkobzFbMF0sIFwiR29kaHVkYVwiKTtcbiAgaXNEaXJ0eShvMVsxXSwgXCJHb2RodWRhXCIpO1xuICBpc0NsZWFuKG8xWzJdKTtcbiAgaXNDbGVhbihvMVszXSk7XG5cbiAgYWxsQ2xlYW4obzIpO1xuICBhbGxDbGVhbihvMyk7XG5cbiAgaXNEaXJ0eShvNFswXSwgXCJHb2RodWRhXCIpO1xuICBpc0RpcnR5KG80WzFdLCBcIkdvZGh1ZGFcIik7XG4gIGlzQ2xlYW4obzRbMl0pO1xuICBpc0NsZWFuKG80WzNdKTtcbn0pO1xuXG5RVW5pdC50ZXN0KFwidGVzdCBkYXRhIGZsb3cgdGhhdCBnb2VzIHRocm91Z2ggcHJpbWl0aXZlIHdyYXBwZXJzXCIsIGZ1bmN0aW9uKCkge1xuICBsZXQgb2JqMSA9IHsgbGFiZWw6IFwib2JqMVwiLCBtb2RlbDogeyBwZXJzb246IHsgbmFtZTogeyBmaXJzdDogXCJZZWh1ZGFcIiwgbGFzdDogXCJLYXR6XCIgfSB9IH0gfTtcbiAgbGV0IG9iajIgPSB7IGxhYmVsOiBcIm9iajJcIiwgbW9kZWw6IHsgcGVyc29uOiB7IG5hbWU6IG9iajEubW9kZWwucGVyc29uLm5hbWUgfSB9IH07XG4gIGxldCBvYmozID0geyBsYWJlbDogXCJvYmozXCIsIG1vZGVsOiB7IHBlcnNvbjogb2JqMS5tb2RlbC5wZXJzb24gfSB9O1xuICBsZXQgb2JqNCA9IHsgbGFiZWw6IFwib2JqNFwiLCBtb2RlbDogb2JqMS5tb2RlbCB9O1xuXG4gIGxldCBvcmlnaW5hbFBlcnNvbiA9IG9iajEubW9kZWwucGVyc29uO1xuXG4gIGxldCBvMSA9IFtcbiAgICBhZGRPYnNlcnZlcihvYmoxLCAnb2JqMScsICdtb2RlbC5wZXJzb24ubmFtZS5maXJzdC5sZW5ndGgnKSxcbiAgICBhZGRPYnNlcnZlcihvYmoxLm1vZGVsLCAnb2JqMS5tb2RlbCcsICdwZXJzb24ubmFtZS5maXJzdC5sZW5ndGgnKSxcbiAgICBhZGRPYnNlcnZlcihvYmoxLm1vZGVsLnBlcnNvbiwgJ29iajEubW9kZWwucGVyc29uJywgJ25hbWUuZmlyc3QubGVuZ3RoJyksXG4gICAgYWRkT2JzZXJ2ZXIob2JqMS5tb2RlbC5wZXJzb24ubmFtZSwgJ29iajEubW9kZWwucGVyc29uLm5hbWUnLCAnZmlyc3QubGVuZ3RoJylcbiAgXTtcblxuICBsZXQgbzIgPSBbXG4gICAgYWRkT2JzZXJ2ZXIob2JqMiwgJ29iajInLCAnbW9kZWwucGVyc29uLm5hbWUuZmlyc3QubGVuZ3RoJyksXG4gICAgYWRkT2JzZXJ2ZXIob2JqMi5tb2RlbCwgJ29iajIubW9kZWwnLCAncGVyc29uLm5hbWUuZmlyc3QubGVuZ3RoJyksXG4gICAgYWRkT2JzZXJ2ZXIob2JqMi5tb2RlbC5wZXJzb24sICdvYmoyLm1vZGVsLnBlcnNvbicsICduYW1lLmZpcnN0Lmxlbmd0aCcpLFxuICAgIGFkZE9ic2VydmVyKG9iajIubW9kZWwucGVyc29uLm5hbWUsICdvYmoyLm1vZGVsLnBlcnNvbi5uYW1lJywgJ2ZpcnN0Lmxlbmd0aCcpXG4gIF07XG5cbiAgbGV0IG8zID0gW1xuICAgIGFkZE9ic2VydmVyKG9iajMsICdvYmozJywgJ21vZGVsLnBlcnNvbi5uYW1lLmZpcnN0Lmxlbmd0aCcpLFxuICAgIGFkZE9ic2VydmVyKG9iajMubW9kZWwsICdvYmozLm1vZGVsJywgJ3BlcnNvbi5uYW1lLmZpcnN0Lmxlbmd0aCcpLFxuICAgIGFkZE9ic2VydmVyKG9iajMubW9kZWwucGVyc29uLCAnb2JqMy5tb2RlbC5wZXJzb24nLCAnbmFtZS5maXJzdC5sZW5ndGgnKSxcbiAgICBhZGRPYnNlcnZlcihvYmozLm1vZGVsLnBlcnNvbi5uYW1lLCAnb2JqMy5tb2RlbC5wZXJzb24ubmFtZScsICdmaXJzdC5sZW5ndGgnKVxuICBdO1xuXG4gIGxldCBvNCA9IFtcbiAgICBhZGRPYnNlcnZlcihvYmo0LCAnb2JqNCcsICdtb2RlbC5wZXJzb24ubmFtZS5maXJzdC5sZW5ndGgnKSxcbiAgICBhZGRPYnNlcnZlcihvYmo0Lm1vZGVsLCAnb2JqNC5tb2RlbCcsICdwZXJzb24ubmFtZS5maXJzdC5sZW5ndGgnKSxcbiAgICBhZGRPYnNlcnZlcihvYmo0Lm1vZGVsLnBlcnNvbiwgJ29iajQubW9kZWwucGVyc29uJywgJ25hbWUuZmlyc3QubGVuZ3RoJyksXG4gICAgYWRkT2JzZXJ2ZXIob2JqNC5tb2RlbC5wZXJzb24ubmFtZSwgJ29iajQubW9kZWwucGVyc29uLm5hbWUnLCAnZmlyc3QubGVuZ3RoJylcbiAgXTtcblxuICBhbGxEaXJ0eShvMSwgNik7XG4gIGFsbERpcnR5KG8yLCA2KTtcbiAgYWxsRGlydHkobzMsIDYpO1xuICBhbGxEaXJ0eShvNCwgNik7XG5cbiAgYWxsQ2xlYW4obzEpO1xuICBhbGxDbGVhbihvMik7XG4gIGFsbENsZWFuKG8zKTtcbiAgYWxsQ2xlYW4obzQpO1xuXG4gIHNldFByb3BlcnR5KG9iajEubW9kZWwsICdwZXJzb24nLCB7IG5hbWU6IHsgZmlyc3Q6ICdHb2RmcmV5JywgbGFzdDogJ0NoYW4nIH0gfSk7XG5cbiAgaXNEaXJ0eShvMVswXSwgNyk7XG4gIGlzRGlydHkobzFbMV0sIDcpO1xuICBpc0NsZWFuKG8xWzJdKTtcbiAgaXNDbGVhbihvMVszXSk7XG5cbiAgYWxsQ2xlYW4obzIpO1xuICBhbGxDbGVhbihvMyk7XG5cbiAgaXNEaXJ0eShvNFswXSwgNyk7XG4gIGlzRGlydHkobzRbMV0sIDcpO1xuICBpc0NsZWFuKG80WzJdKTtcbiAgaXNDbGVhbihvNFszXSk7XG5cbiAgc2V0UHJvcGVydHkob3JpZ2luYWxQZXJzb24ubmFtZSwgJ2ZpcnN0JywgXCJHb2QtaHVkYVwiKTtcblxuICBpc0NsZWFuKG8xWzBdKTtcbiAgaXNDbGVhbihvMVsxXSk7XG4gIGlzRGlydHkobzFbMl0sIDgpO1xuICBpc0RpcnR5KG8xWzNdLCA4KTtcblxuICBhbGxEaXJ0eShvMiwgOCk7XG4gIGFsbERpcnR5KG8zLCA4KTtcblxuICBpc0NsZWFuKG80WzBdKTtcbiAgaXNDbGVhbihvNFsxXSk7XG4gIGlzRGlydHkobzRbMl0sIDgpO1xuICBpc0RpcnR5KG80WzNdLCA4KTtcblxuICBzZXRQcm9wZXJ0eShvYmoxLm1vZGVsLCAncGVyc29uJywgdW5kZWZpbmVkKTtcblxuICBpc0RpcnR5KG8xWzBdLCB1bmRlZmluZWQpO1xuICBpc0RpcnR5KG8xWzFdLCB1bmRlZmluZWQpO1xuICBpc0NsZWFuKG8xWzJdKTtcbiAgaXNDbGVhbihvMVszXSk7XG5cbiAgYWxsQ2xlYW4obzIpO1xuICBhbGxDbGVhbihvMyk7XG5cbiAgaXNEaXJ0eShvNFswXSwgdW5kZWZpbmVkKTtcbiAgaXNEaXJ0eShvNFsxXSwgdW5kZWZpbmVkKTtcbiAgaXNDbGVhbihvNFsyXSk7XG4gIGlzQ2xlYW4obzRbM10pO1xuXG4gIHNldFByb3BlcnR5KG9iajEubW9kZWwsICdwZXJzb24nLCBvcmlnaW5hbFBlcnNvbik7XG5cbiAgaXNEaXJ0eShvMVswXSwgOCk7XG4gIGlzRGlydHkobzFbMV0sIDgpO1xuICBpc0NsZWFuKG8xWzJdKTtcbiAgaXNDbGVhbihvMVszXSk7XG5cbiAgYWxsQ2xlYW4obzIpO1xuICBhbGxDbGVhbihvMyk7XG5cbiAgaXNEaXJ0eShvNFswXSwgOCk7XG4gIGlzRGlydHkobzRbMV0sIDgpO1xuICBpc0NsZWFuKG80WzJdKTtcbiAgaXNDbGVhbihvNFszXSk7XG59KTtcblxuZnVuY3Rpb24gaXNEaXJ0eShyZWYsIG5ld1ZhbHVlKSB7XG4gIC8vIG9rKHJlZi5pc0RpcnR5KCksIHJlZi5sYWJlbCgpICsgXCIgaXMgZGlydHlcIik7XG4gIG9rKHJlZi52YWx1ZSgpID09PSBuZXdWYWx1ZSwgcmVmLmxhYmVsKCkgKyBcIiBoYXMgbmV3IHZhbHVlIFwiICsgbmV3VmFsdWUpO1xufVxuXG5mdW5jdGlvbiBpc0NsZWFuKHJlZikge1xuICAvLyBjbGVhbiByZWZlcmVuY2VzIGFyZSBhbGxvd2VkIHRvIHJlcG9ydCBkaXJ0eVxufVxuXG5mdW5jdGlvbiBhbGxEaXJ0eShyZWZzLCBuZXdWYWx1ZSkge1xuICByZWZzLmZvckVhY2goZnVuY3Rpb24ocmVmKSB7IGlzRGlydHkocmVmLCBuZXdWYWx1ZSk7IH0pO1xufVxuXG5mdW5jdGlvbiBhbGxDbGVhbihyZWZzKSB7XG4gIHJlZnMuZm9yRWFjaChmdW5jdGlvbihyZWYpIHsgaXNDbGVhbihyZWYpOyB9KTtcbn1cbiJdfQ==