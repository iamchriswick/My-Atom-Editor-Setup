"use strict";
var index_1 = require("../index");
QUnit.module('[glimmer-object-model] - computed properties');
QUnit.test('basic computed properties', function (assert) {
    var Person = index_1.default.extend({
        first: 'Dan',
        last: 'Gebhardt',
        full: index_1.computed('first', 'last', {
            get: function () {
                return this.first + " " + this.last;
            },
            set: function (value) {
                var _a = value.split(' '), first = _a[0], last = _a[1];
                this.first = first;
                this.last = last;
            }
        })
    });
    var FancyPerson = Person.extend({
        sal: 'Mr.'
    });
    var obj = FancyPerson.create();
    assert.equal(obj.full, 'Dan Gebhardt');
    assert.equal(obj.sal, 'Mr.');
});
QUnit.test('references for computed properties', function (assert) {
    var Person = index_1.default.extend({
        first: 'Dan',
        last: 'Gebhardt',
        full: index_1.computed('first', 'last', {
            get: function () {
                return this.first + " " + this.last;
            },
            set: function (value) {
                var _a = value.split(' '), first = _a[0], last = _a[1];
                this.first = first;
                this.last = last;
            }
        })
    });
    var obj = Person.create();
    var ref = index_1.root(obj).get('full');
    var name = ref.value();
    var snapshot = ref.tag.value();
    assert.strictEqual(obj.full, 'Dan Gebhardt');
    index_1.set(obj, 'first', 'Daniel');
    assert.strictEqual(obj.full, 'Daniel Gebhardt');
    assert.strictEqual(ref.tag.validate(snapshot), false);
    assert.strictEqual(ref.value(), 'Daniel Gebhardt');
});
QUnit.test('references for multiple subclasses of computed properties', function (assert) {
    var Person = index_1.default.extend({
        first: 'Dan',
        last: 'Gebhardt',
        full: index_1.computed('first', 'last', {
            get: function () {
                return this.first + " " + this.last;
            },
            set: function (value) {
                var _a = value.split(' '), first = _a[0], last = _a[1];
                this.first = first;
                this.last = last;
            }
        })
    });
    var FancyPerson = Person.extend({
        sal: 'Mr.',
        name: index_1.computed('sal', 'full', {
            get: function () {
                return this.sal + " " + this.full;
            },
            set: function (value) {
                var _a = value.match(/([^ ]+) (.*)/), sal = _a[1], full = _a[2];
                this.sal = sal;
                this.full = full;
            }
        })
    });
    var obj = FancyPerson.create();
    var ref = index_1.root(obj).get('name');
    var name = ref.value();
    var snapshot = ref.tag.value();
    assert.strictEqual(obj.full, 'Dan Gebhardt');
    assert.strictEqual(obj.name, 'Mr. Dan Gebhardt');
    index_1.set(obj, 'first', 'Daniel');
    assert.strictEqual(obj.full, 'Daniel Gebhardt');
    assert.strictEqual(obj.name, 'Mr. Daniel Gebhardt');
    assert.strictEqual(ref.tag.validate(snapshot), false);
    assert.strictEqual(ref.value(), 'Mr. Daniel Gebhardt');
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcHV0ZWQtdGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkBnbGltbWVyL29iamVjdC1tb2RlbC90ZXN0cy9jb21wdXRlZC10ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxrQ0FBOEQ7QUFDOUQsS0FBSyxDQUFDLE1BQU0sQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDO0FBRTdELEtBQUssQ0FBQyxJQUFJLENBQUMsMkJBQTJCLEVBQUUsVUFBQSxNQUFNO0lBQzVDLElBQUksTUFBTSxHQUFHLGVBQWEsQ0FBQyxNQUFNLENBQUM7UUFDaEMsS0FBSyxFQUFFLEtBQUs7UUFDWixJQUFJLEVBQUUsVUFBVTtRQUVoQixJQUFJLEVBQUUsZ0JBQVEsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFO1lBQzlCLEdBQUc7Z0JBQ0QsTUFBTSxDQUFJLElBQUksQ0FBQyxLQUFLLFNBQUksSUFBSSxDQUFDLElBQU0sQ0FBQztZQUN0QyxDQUFDO1lBQ0QsR0FBRyxZQUFDLEtBQWE7Z0JBQ1gsSUFBQSxxQkFBZ0MsRUFBL0IsYUFBSyxFQUFFLFlBQUksQ0FBcUI7Z0JBQ3JDLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2dCQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUNuQixDQUFDO1NBQ0YsQ0FBQztLQUNILENBQUMsQ0FBQztJQUVILElBQUksV0FBVyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDOUIsR0FBRyxFQUFFLEtBQUs7S0FDWCxDQUFDLENBQUM7SUFFSCxJQUFJLEdBQUcsR0FBRyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUM7SUFFL0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMvQixDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssQ0FB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QyxNQUFNLEVBQUUsQ0FBQztJQUMvQixJQUFJLEdBQUcsR0FBRyxZQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWhDLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN2QixJQUFJLFFBQVEsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBRS9CLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxjQUFjLENBQUMsQ0FBQztJQUM3QyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztJQUVqRCxXQUFHLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUU1QixNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUNoRCxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUscUJBQXFCLENBQUMsQ0FBQztJQUNwRCxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RELE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxFQUFFLHFCQUFxQixDQUFDLENBQUM7QUFDekQsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2xpbW1lck9iamVjdCwgeyBjb21wdXRlZCwgcm9vdCwgc2V0IH0gZnJvbSAnLi4vaW5kZXgnO1xyXG5RVW5pdC5tb2R1bGUoJ1tnbGltbWVyLW9iamVjdC1tb2RlbF0gLSBjb21wdXRlZCBwcm9wZXJ0aWVzJyk7XHJcblxyXG5RVW5pdC50ZXN0KCdiYXNpYyBjb21wdXRlZCBwcm9wZXJ0aWVzJywgYXNzZXJ0ID0+IHtcclxuICBsZXQgUGVyc29uID0gR2xpbW1lck9iamVjdC5leHRlbmQoe1xyXG4gICAgZmlyc3Q6ICdEYW4nLFxyXG4gICAgbGFzdDogJ0dlYmhhcmR0JyxcclxuXHJcbiAgICBmdWxsOiBjb21wdXRlZCgnZmlyc3QnLCAnbGFzdCcsIHtcclxuICAgICAgZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLmZpcnN0fSAke3RoaXMubGFzdH1gO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBbZmlyc3QsIGxhc3RdID0gdmFsdWUuc3BsaXQoJyAnKTtcclxuICAgICAgICB0aGlzLmZpcnN0ID0gZmlyc3Q7XHJcbiAgICAgICAgdGhpcy5sYXN0ID0gbGFzdDtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9KTtcclxuXHJcbiAgbGV0IEZhbmN5UGVyc29uID0gUGVyc29uLmV4dGVuZCh7XHJcbiAgICBzYWw6ICdNci4nXHJcbiAgfSk7XHJcblxyXG4gIGxldCBvYmogPSBGYW5jeVBlcnNvbi5jcmVhdGUoKTtcclxuXHJcbiAgYXNzZXJ0LmVxdWFsKG9iai5mdWxsLCAnRGFuIEdlYmhhcmR0Jyk7XHJcbiAgYXNzZXJ0LmVxdWFsKG9iai5zYWwsICdNci4nKTtcclxufSk7XHJcblxyXG5RVW5pdC50ZXN0KCdyZWZlcmVuY2VzIGZvciBjb21wdXRlZCBwcm9wZXJ0aWVzJywgYXNzZXJ0ID0+IHtcclxuICBsZXQgUGVyc29uID0gR2xpbW1lck9iamVjdC5leHRlbmQoe1xyXG4gICAgZmlyc3Q6ICdEYW4nLFxyXG4gICAgbGFzdDogJ0dlYmhhcmR0JyxcclxuXHJcbiAgICBmdWxsOiBjb21wdXRlZCgnZmlyc3QnLCAnbGFzdCcsIHtcclxuICAgICAgZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLmZpcnN0fSAke3RoaXMubGFzdH1gO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBbZmlyc3QsIGxhc3RdID0gdmFsdWUuc3BsaXQoJyAnKTtcclxuICAgICAgICB0aGlzLmZpcnN0ID0gZmlyc3Q7XHJcbiAgICAgICAgdGhpcy5sYXN0ID0gbGFzdDtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9KTtcclxuXHJcbiAgbGV0IG9iaiA9IFBlcnNvbi5jcmVhdGUoKTtcclxuICBsZXQgcmVmID0gcm9vdChvYmopLmdldCgnZnVsbCcpO1xyXG5cclxuICBsZXQgbmFtZSA9IHJlZi52YWx1ZSgpO1xyXG4gIGxldCBzbmFwc2hvdCA9IHJlZi50YWcudmFsdWUoKTtcclxuXHJcbiAgYXNzZXJ0LnN0cmljdEVxdWFsKG9iai5mdWxsLCAnRGFuIEdlYmhhcmR0Jyk7XHJcblxyXG4gIHNldChvYmosICdmaXJzdCcsICdEYW5pZWwnKTtcclxuXHJcbiAgYXNzZXJ0LnN0cmljdEVxdWFsKG9iai5mdWxsLCAnRGFuaWVsIEdlYmhhcmR0Jyk7XHJcbiAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlZi50YWcudmFsaWRhdGUoc25hcHNob3QpLCBmYWxzZSk7XHJcbiAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlZi52YWx1ZSgpLCAnRGFuaWVsIEdlYmhhcmR0Jyk7XHJcbn0pO1xyXG5cclxuUVVuaXQudGVzdCgncmVmZXJlbmNlcyBmb3IgbXVsdGlwbGUgc3ViY2xhc3NlcyBvZiBjb21wdXRlZCBwcm9wZXJ0aWVzJywgYXNzZXJ0ID0+IHtcclxuICBsZXQgUGVyc29uID0gR2xpbW1lck9iamVjdC5leHRlbmQoe1xyXG4gICAgZmlyc3Q6ICdEYW4nLFxyXG4gICAgbGFzdDogJ0dlYmhhcmR0JyxcclxuXHJcbiAgICBmdWxsOiBjb21wdXRlZCgnZmlyc3QnLCAnbGFzdCcsIHtcclxuICAgICAgZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLmZpcnN0fSAke3RoaXMubGFzdH1gO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBbZmlyc3QsIGxhc3RdID0gdmFsdWUuc3BsaXQoJyAnKTtcclxuICAgICAgICB0aGlzLmZpcnN0ID0gZmlyc3Q7XHJcbiAgICAgICAgdGhpcy5sYXN0ID0gbGFzdDtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9KTtcclxuXHJcbiAgbGV0IEZhbmN5UGVyc29uID0gUGVyc29uLmV4dGVuZCh7XHJcbiAgICBzYWw6ICdNci4nLFxyXG5cclxuICAgIG5hbWU6IGNvbXB1dGVkKCdzYWwnLCAnZnVsbCcsIHtcclxuICAgICAgZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLnNhbH0gJHt0aGlzLmZ1bGx9YDtcclxuICAgICAgfSxcclxuICAgICAgc2V0KHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgWywgc2FsLCBmdWxsXSA9IHZhbHVlLm1hdGNoKC8oW14gXSspICguKikvKTtcclxuICAgICAgICB0aGlzLnNhbCA9IHNhbDtcclxuICAgICAgICB0aGlzLmZ1bGwgPSBmdWxsO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0pO1xyXG5cclxuICBsZXQgb2JqID0gRmFuY3lQZXJzb24uY3JlYXRlKCk7XHJcbiAgbGV0IHJlZiA9IHJvb3Qob2JqKS5nZXQoJ25hbWUnKTtcclxuXHJcbiAgbGV0IG5hbWUgPSByZWYudmFsdWUoKTtcclxuICBsZXQgc25hcHNob3QgPSByZWYudGFnLnZhbHVlKCk7XHJcblxyXG4gIGFzc2VydC5zdHJpY3RFcXVhbChvYmouZnVsbCwgJ0RhbiBHZWJoYXJkdCcpO1xyXG4gIGFzc2VydC5zdHJpY3RFcXVhbChvYmoubmFtZSwgJ01yLiBEYW4gR2ViaGFyZHQnKTtcclxuXHJcbiAgc2V0KG9iaiwgJ2ZpcnN0JywgJ0RhbmllbCcpO1xyXG5cclxuICBhc3NlcnQuc3RyaWN0RXF1YWwob2JqLmZ1bGwsICdEYW5pZWwgR2ViaGFyZHQnKTtcclxuICBhc3NlcnQuc3RyaWN0RXF1YWwob2JqLm5hbWUsICdNci4gRGFuaWVsIEdlYmhhcmR0Jyk7XHJcbiAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlZi50YWcudmFsaWRhdGUoc25hcHNob3QpLCBmYWxzZSk7XHJcbiAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlZi52YWx1ZSgpLCAnTXIuIERhbmllbCBHZWJoYXJkdCcpO1xyXG59KTsiXX0=